(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var Yo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Lm={exports:{}},Al={},Fm={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ds=Symbol.for("react.element"),o0=Symbol.for("react.portal"),l0=Symbol.for("react.fragment"),a0=Symbol.for("react.strict_mode"),c0=Symbol.for("react.profiler"),u0=Symbol.for("react.provider"),h0=Symbol.for("react.context"),d0=Symbol.for("react.forward_ref"),f0=Symbol.for("react.suspense"),p0=Symbol.for("react.memo"),m0=Symbol.for("react.lazy"),vd=Symbol.iterator;function g0(t){return t===null||typeof t!="object"?null:(t=vd&&t[vd]||t["@@iterator"],typeof t=="function"?t:null)}var zm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Um=Object.assign,$m={};function Sr(t,e,n){this.props=t,this.context=e,this.refs=$m,this.updater=n||zm}Sr.prototype.isReactComponent={};Sr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Sr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jm(){}jm.prototype=Sr.prototype;function Vu(t,e,n){this.props=t,this.context=e,this.refs=$m,this.updater=n||zm}var Hu=Vu.prototype=new jm;Hu.constructor=Vu;Um(Hu,Sr.prototype);Hu.isPureReactComponent=!0;var wd=Array.isArray,Bm=Object.prototype.hasOwnProperty,Wu={current:null},Vm={key:!0,ref:!0,__self:!0,__source:!0};function Hm(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Bm.call(e,i)&&!Vm.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:Ds,type:t,key:s,ref:o,props:r,_owner:Wu.current}}function y0(t,e){return{$$typeof:Ds,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ds}function v0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Sd=/\/+/g;function ga(t,e){return typeof t=="object"&&t!==null&&t.key!=null?v0(""+t.key):e.toString(36)}function _o(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ds:case o0:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+ga(o,0):i,wd(r)?(n="",t!=null&&(n=t.replace(Sd,"$&/")+"/"),_o(r,e,n,"",function(c){return c})):r!=null&&(Yu(r)&&(r=y0(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Sd,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",wd(t))for(var l=0;l<t.length;l++){s=t[l];var a=i+ga(s,l);o+=_o(s,e,n,a,r)}else if(a=g0(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=i+ga(s,l++),o+=_o(s,e,n,a,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Xs(t,e,n){if(t==null)return t;var i=[],r=0;return _o(t,i,"","",function(s){return e.call(n,s,r++)}),i}function w0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ht={current:null},Ao={transition:null},S0={ReactCurrentDispatcher:ht,ReactCurrentBatchConfig:Ao,ReactCurrentOwner:Wu};function Wm(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:Xs,forEach:function(t,e,n){Xs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xs(t,function(){e++}),e},toArray:function(t){return Xs(t,function(e){return e})||[]},only:function(t){if(!Yu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=Sr;he.Fragment=l0;he.Profiler=c0;he.PureComponent=Vu;he.StrictMode=a0;he.Suspense=f0;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S0;he.act=Wm;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Um({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Wu.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)Bm.call(e,a)&&!Vm.hasOwnProperty(a)&&(i[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:Ds,type:t.type,key:r,ref:s,props:i,_owner:o}};he.createContext=function(t){return t={$$typeof:h0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:u0,_context:t},t.Consumer=t};he.createElement=Hm;he.createFactory=function(t){var e=Hm.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:d0,render:t}};he.isValidElement=Yu;he.lazy=function(t){return{$$typeof:m0,_payload:{_status:-1,_result:t},_init:w0}};he.memo=function(t,e){return{$$typeof:p0,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=Ao.transition;Ao.transition={};try{t()}finally{Ao.transition=e}};he.unstable_act=Wm;he.useCallback=function(t,e){return ht.current.useCallback(t,e)};he.useContext=function(t){return ht.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return ht.current.useDeferredValue(t)};he.useEffect=function(t,e){return ht.current.useEffect(t,e)};he.useId=function(){return ht.current.useId()};he.useImperativeHandle=function(t,e,n){return ht.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return ht.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return ht.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return ht.current.useMemo(t,e)};he.useReducer=function(t,e,n){return ht.current.useReducer(t,e,n)};he.useRef=function(t){return ht.current.useRef(t)};he.useState=function(t){return ht.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return ht.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return ht.current.useTransition()};he.version="18.3.1";Fm.exports=he;var k=Fm.exports;const xd=Bu(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0=k,C0=Symbol.for("react.element"),b0=Symbol.for("react.fragment"),k0=Object.prototype.hasOwnProperty,E0=x0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,T0={key:!0,ref:!0,__self:!0,__source:!0};function Ym(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)k0.call(e,i)&&!T0.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:C0,type:t,key:s,ref:o,props:r,_owner:E0.current}}Al.Fragment=b0;Al.jsx=Ym;Al.jsxs=Ym;Lm.exports=Al;var v=Lm.exports,kc={},Km={exports:{}},It={},Gm={exports:{}},qm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,z){var C=$.length;$.push(z);e:for(;0<C;){var N=C-1>>>1,U=$[N];if(0<r(U,z))$[N]=z,$[C]=U,C=N;else break e}}function n($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var z=$[0],C=$.pop();if(C!==z){$[0]=C;e:for(var N=0,U=$.length,x=U>>>1;N<x;){var G=2*(N+1)-1,re=$[G],K=G+1,O=$[K];if(0>r(re,C))K<U&&0>r(O,re)?($[N]=O,$[K]=C,N=K):($[N]=re,$[G]=C,N=G);else if(K<U&&0>r(O,C))$[N]=O,$[K]=C,N=K;else break e}}return z}function r($,z){var C=$.sortIndex-z.sortIndex;return C!==0?C:$.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],c=[],h=1,u=null,d=3,f=!1,p=!1,g=!1,S=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var z=n(c);z!==null;){if(z.callback===null)i(c);else if(z.startTime<=$)i(c),z.sortIndex=z.expirationTime,e(a,z);else break;z=n(c)}}function b($){if(g=!1,w($),!p)if(n(a)!==null)p=!0,te(A);else{var z=n(c);z!==null&&se(b,z.startTime-$)}}function A($,z){p=!1,g&&(g=!1,m(R),R=-1),f=!0;var C=d;try{for(w(z),u=n(a);u!==null&&(!(u.expirationTime>z)||$&&!j());){var N=u.callback;if(typeof N=="function"){u.callback=null,d=u.priorityLevel;var U=N(u.expirationTime<=z);z=t.unstable_now(),typeof U=="function"?u.callback=U:u===n(a)&&i(a),w(z)}else i(a);u=n(a)}if(u!==null)var x=!0;else{var G=n(c);G!==null&&se(b,G.startTime-z),x=!1}return x}finally{u=null,d=C,f=!1}}var E=!1,P=null,R=-1,D=5,_=-1;function j(){return!(t.unstable_now()-_<D)}function B(){if(P!==null){var $=t.unstable_now();_=$;var z=!0;try{z=P(!0,$)}finally{z?J():(E=!1,P=null)}}else E=!1}var J;if(typeof y=="function")J=function(){y(B)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,X=Z.port2;Z.port1.onmessage=B,J=function(){X.postMessage(null)}}else J=function(){S(B,0)};function te($){P=$,E||(E=!0,J())}function se($,z){R=S(function(){$(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,te(A))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function($){switch(d){case 1:case 2:case 3:var z=3;break;default:z=d}var C=d;d=z;try{return $()}finally{d=C}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,z){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var C=d;d=$;try{return z()}finally{d=C}},t.unstable_scheduleCallback=function($,z,C){var N=t.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?N+C:N):C=N,$){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=C+U,$={id:h++,callback:z,priorityLevel:$,startTime:C,expirationTime:U,sortIndex:-1},C>N?($.sortIndex=C,e(c,$),n(a)===null&&$===n(c)&&(g?(m(R),R=-1):g=!0,se(b,C-N))):($.sortIndex=U,e(a,$),p||f||(p=!0,te(A))),$},t.unstable_shouldYield=j,t.unstable_wrapCallback=function($){var z=d;return function(){var C=d;d=z;try{return $.apply(this,arguments)}finally{d=C}}}})(qm);Gm.exports=qm;var _0=Gm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A0=k,Nt=_0;function V(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qm=new Set,ds={};function _i(t,e){ar(t,e),ar(t+"Capture",e)}function ar(t,e){for(ds[t]=e,t=0;t<e.length;t++)Qm.add(e[t])}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ec=Object.prototype.hasOwnProperty,P0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cd={},bd={};function R0(t){return Ec.call(bd,t)?!0:Ec.call(Cd,t)?!1:P0.test(t)?bd[t]=!0:(Cd[t]=!0,!1)}function N0(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function I0(t,e,n,i){if(e===null||typeof e>"u"||N0(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function dt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Je[t]=new dt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Je[e]=new dt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Je[t]=new dt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Je[t]=new dt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Je[t]=new dt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Je[t]=new dt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Je[t]=new dt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Je[t]=new dt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Je[t]=new dt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ku=/[\-:]([a-z])/g;function Gu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ku,Gu);Je[e]=new dt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ku,Gu);Je[e]=new dt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ku,Gu);Je[e]=new dt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Je[t]=new dt(t,1,!1,t.toLowerCase(),null,!1,!1)});Je.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Je[t]=new dt(t,1,!1,t.toLowerCase(),null,!0,!0)});function qu(t,e,n,i){var r=Je.hasOwnProperty(e)?Je[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(I0(e,n,r,i)&&(n=null),i||r===null?R0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var bn=A0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Js=Symbol.for("react.element"),zi=Symbol.for("react.portal"),Ui=Symbol.for("react.fragment"),Qu=Symbol.for("react.strict_mode"),Tc=Symbol.for("react.profiler"),Xm=Symbol.for("react.provider"),Jm=Symbol.for("react.context"),Xu=Symbol.for("react.forward_ref"),_c=Symbol.for("react.suspense"),Ac=Symbol.for("react.suspense_list"),Ju=Symbol.for("react.memo"),Nn=Symbol.for("react.lazy"),Zm=Symbol.for("react.offscreen"),kd=Symbol.iterator;function Rr(t){return t===null||typeof t!="object"?null:(t=kd&&t[kd]||t["@@iterator"],typeof t=="function"?t:null)}var Me=Object.assign,ya;function Vr(t){if(ya===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ya=e&&e[1]||""}return`
`+ya+t}var va=!1;function wa(t,e){if(!t||va)return"";va=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,l=s.length-1;1<=o&&0<=l&&r[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==s[l]){var a=`
`+r[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{va=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vr(t):""}function M0(t){switch(t.tag){case 5:return Vr(t.type);case 16:return Vr("Lazy");case 13:return Vr("Suspense");case 19:return Vr("SuspenseList");case 0:case 2:case 15:return t=wa(t.type,!1),t;case 11:return t=wa(t.type.render,!1),t;case 1:return t=wa(t.type,!0),t;default:return""}}function Pc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ui:return"Fragment";case zi:return"Portal";case Tc:return"Profiler";case Qu:return"StrictMode";case _c:return"Suspense";case Ac:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Jm:return(t.displayName||"Context")+".Consumer";case Xm:return(t._context.displayName||"Context")+".Provider";case Xu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ju:return e=t.displayName||null,e!==null?e:Pc(t.type)||"Memo";case Nn:e=t._payload,t=t._init;try{return Pc(t(e))}catch{}}return null}function D0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pc(e);case 8:return e===Qu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function O0(t){var e=eg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zs(t){t._valueTracker||(t._valueTracker=O0(t))}function tg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=eg(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Ko(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rc(t,e){var n=e.checked;return Me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ed(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Gn(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ng(t,e){e=e.checked,e!=null&&qu(t,"checked",e,!1)}function Nc(t,e){ng(t,e);var n=Gn(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ic(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ic(t,e.type,Gn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Td(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ic(t,e,n){(e!=="number"||Ko(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Hr=Array.isArray;function Zi(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Gn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Mc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(V(91));return Me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _d(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(V(92));if(Hr(n)){if(1<n.length)throw Error(V(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Gn(n)}}function ig(t,e){var n=Gn(e.value),i=Gn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Ad(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var eo,sg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(eo=eo||document.createElement("div"),eo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=eo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},L0=["Webkit","ms","Moz","O"];Object.keys(Gr).forEach(function(t){L0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gr[e]=Gr[t]})});function og(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gr.hasOwnProperty(t)&&Gr[t]?(""+e).trim():e+"px"}function lg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=og(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var F0=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oc(t,e){if(e){if(F0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(V(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(V(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(V(61))}if(e.style!=null&&typeof e.style!="object")throw Error(V(62))}}function Lc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fc=null;function Zu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zc=null,er=null,tr=null;function Pd(t){if(t=Fs(t)){if(typeof zc!="function")throw Error(V(280));var e=t.stateNode;e&&(e=Ml(e),zc(t.stateNode,t.type,e))}}function ag(t){er?tr?tr.push(t):tr=[t]:er=t}function cg(){if(er){var t=er,e=tr;if(tr=er=null,Pd(t),e)for(t=0;t<e.length;t++)Pd(e[t])}}function ug(t,e){return t(e)}function hg(){}var Sa=!1;function dg(t,e,n){if(Sa)return t(e,n);Sa=!0;try{return ug(t,e,n)}finally{Sa=!1,(er!==null||tr!==null)&&(hg(),cg())}}function ps(t,e){var n=t.stateNode;if(n===null)return null;var i=Ml(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(V(231,e,typeof n));return n}var Uc=!1;if(wn)try{var Nr={};Object.defineProperty(Nr,"passive",{get:function(){Uc=!0}}),window.addEventListener("test",Nr,Nr),window.removeEventListener("test",Nr,Nr)}catch{Uc=!1}function z0(t,e,n,i,r,s,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var qr=!1,Go=null,qo=!1,$c=null,U0={onError:function(t){qr=!0,Go=t}};function $0(t,e,n,i,r,s,o,l,a){qr=!1,Go=null,z0.apply(U0,arguments)}function j0(t,e,n,i,r,s,o,l,a){if($0.apply(this,arguments),qr){if(qr){var c=Go;qr=!1,Go=null}else throw Error(V(198));qo||(qo=!0,$c=c)}}function Ai(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Rd(t){if(Ai(t)!==t)throw Error(V(188))}function B0(t){var e=t.alternate;if(!e){if(e=Ai(t),e===null)throw Error(V(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Rd(r),t;if(s===i)return Rd(r),e;s=s.sibling}throw Error(V(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=s;break}if(l===i){o=!0,i=r,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,i=r;break}if(l===i){o=!0,i=s,n=r;break}l=l.sibling}if(!o)throw Error(V(189))}}if(n.alternate!==i)throw Error(V(190))}if(n.tag!==3)throw Error(V(188));return n.stateNode.current===n?t:e}function pg(t){return t=B0(t),t!==null?mg(t):null}function mg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mg(t);if(e!==null)return e;t=t.sibling}return null}var gg=Nt.unstable_scheduleCallback,Nd=Nt.unstable_cancelCallback,V0=Nt.unstable_shouldYield,H0=Nt.unstable_requestPaint,Le=Nt.unstable_now,W0=Nt.unstable_getCurrentPriorityLevel,eh=Nt.unstable_ImmediatePriority,yg=Nt.unstable_UserBlockingPriority,Qo=Nt.unstable_NormalPriority,Y0=Nt.unstable_LowPriority,vg=Nt.unstable_IdlePriority,Pl=null,cn=null;function K0(t){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(Pl,t,void 0,(t.current.flags&128)===128)}catch{}}var Gt=Math.clz32?Math.clz32:Q0,G0=Math.log,q0=Math.LN2;function Q0(t){return t>>>=0,t===0?32:31-(G0(t)/q0|0)|0}var to=64,no=4194304;function Wr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xo(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~r;l!==0?i=Wr(l):(s&=o,s!==0&&(i=Wr(s)))}else o=n&~r,o!==0?i=Wr(o):s!==0&&(i=Wr(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Gt(e),r=1<<n,i|=t[n],e&=~r;return i}function X0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J0(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Gt(s),l=1<<o,a=r[o];a===-1?(!(l&n)||l&i)&&(r[o]=X0(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function jc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wg(){var t=to;return to<<=1,!(to&4194240)&&(to=64),t}function xa(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Os(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gt(e),t[e]=n}function Z0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Gt(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function th(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Gt(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var ye=0;function Sg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xg,nh,Cg,bg,kg,Bc=!1,io=[],$n=null,jn=null,Bn=null,ms=new Map,gs=new Map,Dn=[],eS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Id(t,e){switch(t){case"focusin":case"focusout":$n=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":Bn=null;break;case"pointerover":case"pointerout":ms.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gs.delete(e.pointerId)}}function Ir(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Fs(e),e!==null&&nh(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function tS(t,e,n,i,r){switch(e){case"focusin":return $n=Ir($n,t,e,n,i,r),!0;case"dragenter":return jn=Ir(jn,t,e,n,i,r),!0;case"mouseover":return Bn=Ir(Bn,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return ms.set(s,Ir(ms.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,gs.set(s,Ir(gs.get(s)||null,t,e,n,i,r)),!0}return!1}function Eg(t){var e=ai(t.target);if(e!==null){var n=Ai(e);if(n!==null){if(e=n.tag,e===13){if(e=fg(n),e!==null){t.blockedOn=e,kg(t.priority,function(){Cg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Po(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Fc=i,n.target.dispatchEvent(i),Fc=null}else return e=Fs(n),e!==null&&nh(e),t.blockedOn=n,!1;e.shift()}return!0}function Md(t,e,n){Po(t)&&n.delete(e)}function nS(){Bc=!1,$n!==null&&Po($n)&&($n=null),jn!==null&&Po(jn)&&(jn=null),Bn!==null&&Po(Bn)&&(Bn=null),ms.forEach(Md),gs.forEach(Md)}function Mr(t,e){t.blockedOn===e&&(t.blockedOn=null,Bc||(Bc=!0,Nt.unstable_scheduleCallback(Nt.unstable_NormalPriority,nS)))}function ys(t){function e(r){return Mr(r,t)}if(0<io.length){Mr(io[0],t);for(var n=1;n<io.length;n++){var i=io[n];i.blockedOn===t&&(i.blockedOn=null)}}for($n!==null&&Mr($n,t),jn!==null&&Mr(jn,t),Bn!==null&&Mr(Bn,t),ms.forEach(e),gs.forEach(e),n=0;n<Dn.length;n++)i=Dn[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Dn.length&&(n=Dn[0],n.blockedOn===null);)Eg(n),n.blockedOn===null&&Dn.shift()}var nr=bn.ReactCurrentBatchConfig,Jo=!0;function iS(t,e,n,i){var r=ye,s=nr.transition;nr.transition=null;try{ye=1,ih(t,e,n,i)}finally{ye=r,nr.transition=s}}function rS(t,e,n,i){var r=ye,s=nr.transition;nr.transition=null;try{ye=4,ih(t,e,n,i)}finally{ye=r,nr.transition=s}}function ih(t,e,n,i){if(Jo){var r=Vc(t,e,n,i);if(r===null)Na(t,e,i,Zo,n),Id(t,i);else if(tS(r,t,e,n,i))i.stopPropagation();else if(Id(t,i),e&4&&-1<eS.indexOf(t)){for(;r!==null;){var s=Fs(r);if(s!==null&&xg(s),s=Vc(t,e,n,i),s===null&&Na(t,e,i,Zo,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Na(t,e,i,null,n)}}var Zo=null;function Vc(t,e,n,i){if(Zo=null,t=Zu(i),t=ai(t),t!==null)if(e=Ai(t),e===null)t=null;else if(n=e.tag,n===13){if(t=fg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zo=t,null}function Tg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(W0()){case eh:return 1;case yg:return 4;case Qo:case Y0:return 16;case vg:return 536870912;default:return 16}default:return 16}}var Ln=null,rh=null,Ro=null;function _g(){if(Ro)return Ro;var t,e=rh,n=e.length,i,r="value"in Ln?Ln.value:Ln.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Ro=r.slice(t,1<i?1-i:void 0)}function No(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ro(){return!0}function Dd(){return!1}function Mt(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ro:Dd,this.isPropagationStopped=Dd,this}return Me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ro)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ro)},persist:function(){},isPersistent:ro}),e}var xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sh=Mt(xr),Ls=Me({},xr,{view:0,detail:0}),sS=Mt(Ls),Ca,ba,Dr,Rl=Me({},Ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dr&&(Dr&&t.type==="mousemove"?(Ca=t.screenX-Dr.screenX,ba=t.screenY-Dr.screenY):ba=Ca=0,Dr=t),Ca)},movementY:function(t){return"movementY"in t?t.movementY:ba}}),Od=Mt(Rl),oS=Me({},Rl,{dataTransfer:0}),lS=Mt(oS),aS=Me({},Ls,{relatedTarget:0}),ka=Mt(aS),cS=Me({},xr,{animationName:0,elapsedTime:0,pseudoElement:0}),uS=Mt(cS),hS=Me({},xr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),dS=Mt(hS),fS=Me({},xr,{data:0}),Ld=Mt(fS),pS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gS[t])?!!e[t]:!1}function oh(){return yS}var vS=Me({},Ls,{key:function(t){if(t.key){var e=pS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=No(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oh,charCode:function(t){return t.type==="keypress"?No(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?No(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wS=Mt(vS),SS=Me({},Rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fd=Mt(SS),xS=Me({},Ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oh}),CS=Mt(xS),bS=Me({},xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),kS=Mt(bS),ES=Me({},Rl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TS=Mt(ES),_S=[9,13,27,32],lh=wn&&"CompositionEvent"in window,Qr=null;wn&&"documentMode"in document&&(Qr=document.documentMode);var AS=wn&&"TextEvent"in window&&!Qr,Ag=wn&&(!lh||Qr&&8<Qr&&11>=Qr),zd=" ",Ud=!1;function Pg(t,e){switch(t){case"keyup":return _S.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $i=!1;function PS(t,e){switch(t){case"compositionend":return Rg(e);case"keypress":return e.which!==32?null:(Ud=!0,zd);case"textInput":return t=e.data,t===zd&&Ud?null:t;default:return null}}function RS(t,e){if($i)return t==="compositionend"||!lh&&Pg(t,e)?(t=_g(),Ro=rh=Ln=null,$i=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ag&&e.locale!=="ko"?null:e.data;default:return null}}var NS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $d(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!NS[t.type]:e==="textarea"}function Ng(t,e,n,i){ag(i),e=el(e,"onChange"),0<e.length&&(n=new sh("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Xr=null,vs=null;function IS(t){Bg(t,0)}function Nl(t){var e=Vi(t);if(tg(e))return t}function MS(t,e){if(t==="change")return e}var Ig=!1;if(wn){var Ea;if(wn){var Ta="oninput"in document;if(!Ta){var jd=document.createElement("div");jd.setAttribute("oninput","return;"),Ta=typeof jd.oninput=="function"}Ea=Ta}else Ea=!1;Ig=Ea&&(!document.documentMode||9<document.documentMode)}function Bd(){Xr&&(Xr.detachEvent("onpropertychange",Mg),vs=Xr=null)}function Mg(t){if(t.propertyName==="value"&&Nl(vs)){var e=[];Ng(e,vs,t,Zu(t)),dg(IS,e)}}function DS(t,e,n){t==="focusin"?(Bd(),Xr=e,vs=n,Xr.attachEvent("onpropertychange",Mg)):t==="focusout"&&Bd()}function OS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nl(vs)}function LS(t,e){if(t==="click")return Nl(e)}function FS(t,e){if(t==="input"||t==="change")return Nl(e)}function zS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xt=typeof Object.is=="function"?Object.is:zS;function ws(t,e){if(Xt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Ec.call(e,r)||!Xt(t[r],e[r]))return!1}return!0}function Vd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hd(t,e){var n=Vd(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Vd(n)}}function Dg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Dg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Og(){for(var t=window,e=Ko();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ko(t.document)}return e}function ah(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function US(t){var e=Og(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Dg(n.ownerDocument.documentElement,n)){if(i!==null&&ah(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=Hd(n,s);var o=Hd(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $S=wn&&"documentMode"in document&&11>=document.documentMode,ji=null,Hc=null,Jr=null,Wc=!1;function Wd(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wc||ji==null||ji!==Ko(i)||(i=ji,"selectionStart"in i&&ah(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Jr&&ws(Jr,i)||(Jr=i,i=el(Hc,"onSelect"),0<i.length&&(e=new sh("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ji)))}function so(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bi={animationend:so("Animation","AnimationEnd"),animationiteration:so("Animation","AnimationIteration"),animationstart:so("Animation","AnimationStart"),transitionend:so("Transition","TransitionEnd")},_a={},Lg={};wn&&(Lg=document.createElement("div").style,"AnimationEvent"in window||(delete Bi.animationend.animation,delete Bi.animationiteration.animation,delete Bi.animationstart.animation),"TransitionEvent"in window||delete Bi.transitionend.transition);function Il(t){if(_a[t])return _a[t];if(!Bi[t])return t;var e=Bi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Lg)return _a[t]=e[n];return t}var Fg=Il("animationend"),zg=Il("animationiteration"),Ug=Il("animationstart"),$g=Il("transitionend"),jg=new Map,Yd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qn(t,e){jg.set(t,e),_i(e,[t])}for(var Aa=0;Aa<Yd.length;Aa++){var Pa=Yd[Aa],jS=Pa.toLowerCase(),BS=Pa[0].toUpperCase()+Pa.slice(1);Qn(jS,"on"+BS)}Qn(Fg,"onAnimationEnd");Qn(zg,"onAnimationIteration");Qn(Ug,"onAnimationStart");Qn("dblclick","onDoubleClick");Qn("focusin","onFocus");Qn("focusout","onBlur");Qn($g,"onTransitionEnd");ar("onMouseEnter",["mouseout","mouseover"]);ar("onMouseLeave",["mouseout","mouseover"]);ar("onPointerEnter",["pointerout","pointerover"]);ar("onPointerLeave",["pointerout","pointerover"]);_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_i("onBeforeInput",["compositionend","keypress","textInput","paste"]);_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yr));function Kd(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,j0(i,e,void 0,t),t.currentTarget=null}function Bg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var l=i[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==s&&r.isPropagationStopped())break e;Kd(r,l,c),s=a}else for(o=0;o<i.length;o++){if(l=i[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==s&&r.isPropagationStopped())break e;Kd(r,l,c),s=a}}}if(qo)throw t=$c,qo=!1,$c=null,t}function Ee(t,e){var n=e[Qc];n===void 0&&(n=e[Qc]=new Set);var i=t+"__bubble";n.has(i)||(Vg(e,t,2,!1),n.add(i))}function Ra(t,e,n){var i=0;e&&(i|=4),Vg(n,t,i,e)}var oo="_reactListening"+Math.random().toString(36).slice(2);function Ss(t){if(!t[oo]){t[oo]=!0,Qm.forEach(function(n){n!=="selectionchange"&&(VS.has(n)||Ra(n,!1,t),Ra(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[oo]||(e[oo]=!0,Ra("selectionchange",!1,e))}}function Vg(t,e,n,i){switch(Tg(e)){case 1:var r=iS;break;case 4:r=rS;break;default:r=ih}n=r.bind(null,e,n,t),r=void 0,!Uc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Na(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===r||a.nodeType===8&&a.parentNode===r))return;o=o.return}for(;l!==null;){if(o=ai(l),o===null)return;if(a=o.tag,a===5||a===6){i=s=o;continue e}l=l.parentNode}}i=i.return}dg(function(){var c=s,h=Zu(n),u=[];e:{var d=jg.get(t);if(d!==void 0){var f=sh,p=t;switch(t){case"keypress":if(No(n)===0)break e;case"keydown":case"keyup":f=wS;break;case"focusin":p="focus",f=ka;break;case"focusout":p="blur",f=ka;break;case"beforeblur":case"afterblur":f=ka;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Od;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=lS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=CS;break;case Fg:case zg:case Ug:f=uS;break;case $g:f=kS;break;case"scroll":f=sS;break;case"wheel":f=TS;break;case"copy":case"cut":case"paste":f=dS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Fd}var g=(e&4)!==0,S=!g&&t==="scroll",m=g?d!==null?d+"Capture":null:d;g=[];for(var y=c,w;y!==null;){w=y;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,m!==null&&(b=ps(y,m),b!=null&&g.push(xs(y,b,w)))),S)break;y=y.return}0<g.length&&(d=new f(d,p,null,n,h),u.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==Fc&&(p=n.relatedTarget||n.fromElement)&&(ai(p)||p[Sn]))break e;if((f||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?ai(p):null,p!==null&&(S=Ai(p),p!==S||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(g=Od,b="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=Fd,b="onPointerLeave",m="onPointerEnter",y="pointer"),S=f==null?d:Vi(f),w=p==null?d:Vi(p),d=new g(b,y+"leave",f,n,h),d.target=S,d.relatedTarget=w,b=null,ai(h)===c&&(g=new g(m,y+"enter",p,n,h),g.target=w,g.relatedTarget=S,b=g),S=b,f&&p)t:{for(g=f,m=p,y=0,w=g;w;w=Ii(w))y++;for(w=0,b=m;b;b=Ii(b))w++;for(;0<y-w;)g=Ii(g),y--;for(;0<w-y;)m=Ii(m),w--;for(;y--;){if(g===m||m!==null&&g===m.alternate)break t;g=Ii(g),m=Ii(m)}g=null}else g=null;f!==null&&Gd(u,d,f,g,!1),p!==null&&S!==null&&Gd(u,S,p,g,!0)}}e:{if(d=c?Vi(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var A=MS;else if($d(d))if(Ig)A=FS;else{A=OS;var E=DS}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(A=LS);if(A&&(A=A(t,c))){Ng(u,A,n,h);break e}E&&E(t,d,c),t==="focusout"&&(E=d._wrapperState)&&E.controlled&&d.type==="number"&&Ic(d,"number",d.value)}switch(E=c?Vi(c):window,t){case"focusin":($d(E)||E.contentEditable==="true")&&(ji=E,Hc=c,Jr=null);break;case"focusout":Jr=Hc=ji=null;break;case"mousedown":Wc=!0;break;case"contextmenu":case"mouseup":case"dragend":Wc=!1,Wd(u,n,h);break;case"selectionchange":if($S)break;case"keydown":case"keyup":Wd(u,n,h)}var P;if(lh)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else $i?Pg(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Ag&&n.locale!=="ko"&&($i||R!=="onCompositionStart"?R==="onCompositionEnd"&&$i&&(P=_g()):(Ln=h,rh="value"in Ln?Ln.value:Ln.textContent,$i=!0)),E=el(c,R),0<E.length&&(R=new Ld(R,t,null,n,h),u.push({event:R,listeners:E}),P?R.data=P:(P=Rg(n),P!==null&&(R.data=P)))),(P=AS?PS(t,n):RS(t,n))&&(c=el(c,"onBeforeInput"),0<c.length&&(h=new Ld("onBeforeInput","beforeinput",null,n,h),u.push({event:h,listeners:c}),h.data=P))}Bg(u,e)})}function xs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function el(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=ps(t,n),s!=null&&i.unshift(xs(t,s,r)),s=ps(t,e),s!=null&&i.push(xs(t,s,r))),t=t.return}return i}function Ii(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gd(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===i)break;l.tag===5&&c!==null&&(l=c,r?(a=ps(n,s),a!=null&&o.unshift(xs(n,a,l))):r||(a=ps(n,s),a!=null&&o.push(xs(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var HS=/\r\n?/g,WS=/\u0000|\uFFFD/g;function qd(t){return(typeof t=="string"?t:""+t).replace(HS,`
`).replace(WS,"")}function lo(t,e,n){if(e=qd(e),qd(t)!==e&&n)throw Error(V(425))}function tl(){}var Yc=null,Kc=null;function Gc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qc=typeof setTimeout=="function"?setTimeout:void 0,YS=typeof clearTimeout=="function"?clearTimeout:void 0,Qd=typeof Promise=="function"?Promise:void 0,KS=typeof queueMicrotask=="function"?queueMicrotask:typeof Qd<"u"?function(t){return Qd.resolve(null).then(t).catch(GS)}:qc;function GS(t){setTimeout(function(){throw t})}function Ia(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),ys(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);ys(e)}function Vn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Cr=Math.random().toString(36).slice(2),an="__reactFiber$"+Cr,Cs="__reactProps$"+Cr,Sn="__reactContainer$"+Cr,Qc="__reactEvents$"+Cr,qS="__reactListeners$"+Cr,QS="__reactHandles$"+Cr;function ai(t){var e=t[an];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Sn]||n[an]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xd(t);t!==null;){if(n=t[an])return n;t=Xd(t)}return e}t=n,n=t.parentNode}return null}function Fs(t){return t=t[an]||t[Sn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(V(33))}function Ml(t){return t[Cs]||null}var Xc=[],Hi=-1;function Xn(t){return{current:t}}function Te(t){0>Hi||(t.current=Xc[Hi],Xc[Hi]=null,Hi--)}function be(t,e){Hi++,Xc[Hi]=t.current,t.current=e}var qn={},st=Xn(qn),yt=Xn(!1),gi=qn;function cr(t,e){var n=t.type.contextTypes;if(!n)return qn;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function vt(t){return t=t.childContextTypes,t!=null}function nl(){Te(yt),Te(st)}function Jd(t,e,n){if(st.current!==qn)throw Error(V(168));be(st,e),be(yt,n)}function Hg(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(V(108,D0(t)||"Unknown",r));return Me({},n,i)}function il(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qn,gi=st.current,be(st,t),be(yt,yt.current),!0}function Zd(t,e,n){var i=t.stateNode;if(!i)throw Error(V(169));n?(t=Hg(t,e,gi),i.__reactInternalMemoizedMergedChildContext=t,Te(yt),Te(st),be(st,t)):Te(yt),be(yt,n)}var fn=null,Dl=!1,Ma=!1;function Wg(t){fn===null?fn=[t]:fn.push(t)}function XS(t){Dl=!0,Wg(t)}function Jn(){if(!Ma&&fn!==null){Ma=!0;var t=0,e=ye;try{var n=fn;for(ye=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}fn=null,Dl=!1}catch(r){throw fn!==null&&(fn=fn.slice(t+1)),gg(eh,Jn),r}finally{ye=e,Ma=!1}}return null}var Wi=[],Yi=0,rl=null,sl=0,Ot=[],Lt=0,yi=null,pn=1,mn="";function si(t,e){Wi[Yi++]=sl,Wi[Yi++]=rl,rl=t,sl=e}function Yg(t,e,n){Ot[Lt++]=pn,Ot[Lt++]=mn,Ot[Lt++]=yi,yi=t;var i=pn;t=mn;var r=32-Gt(i)-1;i&=~(1<<r),n+=1;var s=32-Gt(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,pn=1<<32-Gt(e)+r|n<<r|i,mn=s+t}else pn=1<<s|n<<r|i,mn=t}function ch(t){t.return!==null&&(si(t,1),Yg(t,1,0))}function uh(t){for(;t===rl;)rl=Wi[--Yi],Wi[Yi]=null,sl=Wi[--Yi],Wi[Yi]=null;for(;t===yi;)yi=Ot[--Lt],Ot[Lt]=null,mn=Ot[--Lt],Ot[Lt]=null,pn=Ot[--Lt],Ot[Lt]=null}var At=null,_t=null,_e=!1,Kt=null;function Kg(t,e){var n=zt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ef(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,At=t,_t=Vn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,At=t,_t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=yi!==null?{id:pn,overflow:mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=zt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,At=t,_t=null,!0):!1;default:return!1}}function Jc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zc(t){if(_e){var e=_t;if(e){var n=e;if(!ef(t,e)){if(Jc(t))throw Error(V(418));e=Vn(n.nextSibling);var i=At;e&&ef(t,e)?Kg(i,n):(t.flags=t.flags&-4097|2,_e=!1,At=t)}}else{if(Jc(t))throw Error(V(418));t.flags=t.flags&-4097|2,_e=!1,At=t}}}function tf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;At=t}function ao(t){if(t!==At)return!1;if(!_e)return tf(t),_e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gc(t.type,t.memoizedProps)),e&&(e=_t)){if(Jc(t))throw Gg(),Error(V(418));for(;e;)Kg(t,e),e=Vn(e.nextSibling)}if(tf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(V(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_t=Vn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_t=null}}else _t=At?Vn(t.stateNode.nextSibling):null;return!0}function Gg(){for(var t=_t;t;)t=Vn(t.nextSibling)}function ur(){_t=At=null,_e=!1}function hh(t){Kt===null?Kt=[t]:Kt.push(t)}var JS=bn.ReactCurrentBatchConfig;function Or(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(V(309));var i=n.stateNode}if(!i)throw Error(V(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=r.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(V(284));if(!n._owner)throw Error(V(290,t))}return t}function co(t,e){throw t=Object.prototype.toString.call(e),Error(V(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function nf(t){var e=t._init;return e(t._payload)}function qg(t){function e(m,y){if(t){var w=m.deletions;w===null?(m.deletions=[y],m.flags|=16):w.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function i(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function r(m,y){return m=Kn(m,y),m.index=0,m.sibling=null,m}function s(m,y,w){return m.index=w,t?(w=m.alternate,w!==null?(w=w.index,w<y?(m.flags|=2,y):w):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,y,w,b){return y===null||y.tag!==6?(y=$a(w,m.mode,b),y.return=m,y):(y=r(y,w),y.return=m,y)}function a(m,y,w,b){var A=w.type;return A===Ui?h(m,y,w.props.children,b,w.key):y!==null&&(y.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Nn&&nf(A)===y.type)?(b=r(y,w.props),b.ref=Or(m,y,w),b.return=m,b):(b=zo(w.type,w.key,w.props,null,m.mode,b),b.ref=Or(m,y,w),b.return=m,b)}function c(m,y,w,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=ja(w,m.mode,b),y.return=m,y):(y=r(y,w.children||[]),y.return=m,y)}function h(m,y,w,b,A){return y===null||y.tag!==7?(y=fi(w,m.mode,b,A),y.return=m,y):(y=r(y,w),y.return=m,y)}function u(m,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=$a(""+y,m.mode,w),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Js:return w=zo(y.type,y.key,y.props,null,m.mode,w),w.ref=Or(m,null,y),w.return=m,w;case zi:return y=ja(y,m.mode,w),y.return=m,y;case Nn:var b=y._init;return u(m,b(y._payload),w)}if(Hr(y)||Rr(y))return y=fi(y,m.mode,w,null),y.return=m,y;co(m,y)}return null}function d(m,y,w,b){var A=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return A!==null?null:l(m,y,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Js:return w.key===A?a(m,y,w,b):null;case zi:return w.key===A?c(m,y,w,b):null;case Nn:return A=w._init,d(m,y,A(w._payload),b)}if(Hr(w)||Rr(w))return A!==null?null:h(m,y,w,b,null);co(m,w)}return null}function f(m,y,w,b,A){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(w)||null,l(y,m,""+b,A);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Js:return m=m.get(b.key===null?w:b.key)||null,a(y,m,b,A);case zi:return m=m.get(b.key===null?w:b.key)||null,c(y,m,b,A);case Nn:var E=b._init;return f(m,y,w,E(b._payload),A)}if(Hr(b)||Rr(b))return m=m.get(w)||null,h(y,m,b,A,null);co(y,b)}return null}function p(m,y,w,b){for(var A=null,E=null,P=y,R=y=0,D=null;P!==null&&R<w.length;R++){P.index>R?(D=P,P=null):D=P.sibling;var _=d(m,P,w[R],b);if(_===null){P===null&&(P=D);break}t&&P&&_.alternate===null&&e(m,P),y=s(_,y,R),E===null?A=_:E.sibling=_,E=_,P=D}if(R===w.length)return n(m,P),_e&&si(m,R),A;if(P===null){for(;R<w.length;R++)P=u(m,w[R],b),P!==null&&(y=s(P,y,R),E===null?A=P:E.sibling=P,E=P);return _e&&si(m,R),A}for(P=i(m,P);R<w.length;R++)D=f(P,m,R,w[R],b),D!==null&&(t&&D.alternate!==null&&P.delete(D.key===null?R:D.key),y=s(D,y,R),E===null?A=D:E.sibling=D,E=D);return t&&P.forEach(function(j){return e(m,j)}),_e&&si(m,R),A}function g(m,y,w,b){var A=Rr(w);if(typeof A!="function")throw Error(V(150));if(w=A.call(w),w==null)throw Error(V(151));for(var E=A=null,P=y,R=y=0,D=null,_=w.next();P!==null&&!_.done;R++,_=w.next()){P.index>R?(D=P,P=null):D=P.sibling;var j=d(m,P,_.value,b);if(j===null){P===null&&(P=D);break}t&&P&&j.alternate===null&&e(m,P),y=s(j,y,R),E===null?A=j:E.sibling=j,E=j,P=D}if(_.done)return n(m,P),_e&&si(m,R),A;if(P===null){for(;!_.done;R++,_=w.next())_=u(m,_.value,b),_!==null&&(y=s(_,y,R),E===null?A=_:E.sibling=_,E=_);return _e&&si(m,R),A}for(P=i(m,P);!_.done;R++,_=w.next())_=f(P,m,R,_.value,b),_!==null&&(t&&_.alternate!==null&&P.delete(_.key===null?R:_.key),y=s(_,y,R),E===null?A=_:E.sibling=_,E=_);return t&&P.forEach(function(B){return e(m,B)}),_e&&si(m,R),A}function S(m,y,w,b){if(typeof w=="object"&&w!==null&&w.type===Ui&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Js:e:{for(var A=w.key,E=y;E!==null;){if(E.key===A){if(A=w.type,A===Ui){if(E.tag===7){n(m,E.sibling),y=r(E,w.props.children),y.return=m,m=y;break e}}else if(E.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Nn&&nf(A)===E.type){n(m,E.sibling),y=r(E,w.props),y.ref=Or(m,E,w),y.return=m,m=y;break e}n(m,E);break}else e(m,E);E=E.sibling}w.type===Ui?(y=fi(w.props.children,m.mode,b,w.key),y.return=m,m=y):(b=zo(w.type,w.key,w.props,null,m.mode,b),b.ref=Or(m,y,w),b.return=m,m=b)}return o(m);case zi:e:{for(E=w.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(m,y.sibling),y=r(y,w.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=ja(w,m.mode,b),y.return=m,m=y}return o(m);case Nn:return E=w._init,S(m,y,E(w._payload),b)}if(Hr(w))return p(m,y,w,b);if(Rr(w))return g(m,y,w,b);co(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(m,y.sibling),y=r(y,w),y.return=m,m=y):(n(m,y),y=$a(w,m.mode,b),y.return=m,m=y),o(m)):n(m,y)}return S}var hr=qg(!0),Qg=qg(!1),ol=Xn(null),ll=null,Ki=null,dh=null;function fh(){dh=Ki=ll=null}function ph(t){var e=ol.current;Te(ol),t._currentValue=e}function eu(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ir(t,e){ll=t,dh=Ki=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gt=!0),t.firstContext=null)}function $t(t){var e=t._currentValue;if(dh!==t)if(t={context:t,memoizedValue:e,next:null},Ki===null){if(ll===null)throw Error(V(308));Ki=t,ll.dependencies={lanes:0,firstContext:t}}else Ki=Ki.next=t;return e}var ci=null;function mh(t){ci===null?ci=[t]:ci.push(t)}function Xg(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,mh(e)):(n.next=r.next,r.next=n),e.interleaved=n,xn(t,i)}function xn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var In=!1;function gh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hn(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,me&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,xn(t,n)}return r=i.interleaved,r===null?(e.next=e,mh(i)):(e.next=r.next,r.next=e),i.interleaved=e,xn(t,n)}function Io(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,th(t,n)}}function rf(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function al(t,e,n,i){var r=t.updateQueue;In=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?s=c:o.next=c,o=a;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=a))}if(s!==null){var u=r.baseState;o=0,h=c=a=null,l=s;do{var d=l.lane,f=l.eventTime;if((i&d)===d){h!==null&&(h=h.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,g=l;switch(d=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){u=p.call(f,u,d);break e}u=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(f,u,d):p,d==null)break e;u=Me({},u,d);break e;case 2:In=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,d=r.effects,d===null?r.effects=[l]:d.push(l))}else f={eventTime:f,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(c=h=f,a=u):h=h.next=f,o|=d;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;d=l,l=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(!0);if(h===null&&(a=u),r.baseState=a,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);wi|=o,t.lanes=o,t.memoizedState=u}}function sf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(V(191,r));r.call(i)}}}var zs={},un=Xn(zs),bs=Xn(zs),ks=Xn(zs);function ui(t){if(t===zs)throw Error(V(174));return t}function yh(t,e){switch(be(ks,e),be(bs,t),be(un,zs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Dc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Dc(e,t)}Te(un),be(un,e)}function dr(){Te(un),Te(bs),Te(ks)}function Zg(t){ui(ks.current);var e=ui(un.current),n=Dc(e,t.type);e!==n&&(be(bs,t),be(un,n))}function vh(t){bs.current===t&&(Te(un),Te(bs))}var Ne=Xn(0);function cl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Da=[];function wh(){for(var t=0;t<Da.length;t++)Da[t]._workInProgressVersionPrimary=null;Da.length=0}var Mo=bn.ReactCurrentDispatcher,Oa=bn.ReactCurrentBatchConfig,vi=0,Ie=null,Ve=null,Ye=null,ul=!1,Zr=!1,Es=0,ZS=0;function Ze(){throw Error(V(321))}function Sh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xt(t[n],e[n]))return!1;return!0}function xh(t,e,n,i,r,s){if(vi=s,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Mo.current=t===null||t.memoizedState===null?ix:rx,t=n(i,r),Zr){s=0;do{if(Zr=!1,Es=0,25<=s)throw Error(V(301));s+=1,Ye=Ve=null,e.updateQueue=null,Mo.current=sx,t=n(i,r)}while(Zr)}if(Mo.current=hl,e=Ve!==null&&Ve.next!==null,vi=0,Ye=Ve=Ie=null,ul=!1,e)throw Error(V(300));return t}function Ch(){var t=Es!==0;return Es=0,t}function sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Ie.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function jt(){if(Ve===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Ve.next;var e=Ye===null?Ie.memoizedState:Ye.next;if(e!==null)Ye=e,Ve=t;else{if(t===null)throw Error(V(310));Ve=t,t={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},Ye===null?Ie.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function Ts(t,e){return typeof e=="function"?e(t):e}function La(t){var e=jt(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var i=Ve,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var l=o=null,a=null,c=s;do{var h=c.lane;if((vi&h)===h)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var u={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=u,o=i):a=a.next=u,Ie.lanes|=h,wi|=h}c=c.next}while(c!==null&&c!==s);a===null?o=i:a.next=l,Xt(i,e.memoizedState)||(gt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=a,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Ie.lanes|=s,wi|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Fa(t){var e=jt(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Xt(s,e.memoizedState)||(gt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function ey(){}function ty(t,e){var n=Ie,i=jt(),r=e(),s=!Xt(i.memoizedState,r);if(s&&(i.memoizedState=r,gt=!0),i=i.queue,bh(ry.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,_s(9,iy.bind(null,n,i,r,e),void 0,null),Ke===null)throw Error(V(349));vi&30||ny(n,e,r)}return r}function ny(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function iy(t,e,n,i){e.value=n,e.getSnapshot=i,sy(e)&&oy(t)}function ry(t,e,n){return n(function(){sy(e)&&oy(t)})}function sy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xt(t,n)}catch{return!0}}function oy(t){var e=xn(t,1);e!==null&&qt(e,t,1,-1)}function of(t){var e=sn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:t},e.queue=t,t=t.dispatch=nx.bind(null,Ie,t),[e.memoizedState,t]}function _s(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function ly(){return jt().memoizedState}function Do(t,e,n,i){var r=sn();Ie.flags|=t,r.memoizedState=_s(1|e,n,void 0,i===void 0?null:i)}function Ol(t,e,n,i){var r=jt();i=i===void 0?null:i;var s=void 0;if(Ve!==null){var o=Ve.memoizedState;if(s=o.destroy,i!==null&&Sh(i,o.deps)){r.memoizedState=_s(e,n,s,i);return}}Ie.flags|=t,r.memoizedState=_s(1|e,n,s,i)}function lf(t,e){return Do(8390656,8,t,e)}function bh(t,e){return Ol(2048,8,t,e)}function ay(t,e){return Ol(4,2,t,e)}function cy(t,e){return Ol(4,4,t,e)}function uy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hy(t,e,n){return n=n!=null?n.concat([t]):null,Ol(4,4,uy.bind(null,e,t),n)}function kh(){}function dy(t,e){var n=jt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Sh(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function fy(t,e){var n=jt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Sh(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function py(t,e,n){return vi&21?(Xt(n,e)||(n=wg(),Ie.lanes|=n,wi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gt=!0),t.memoizedState=n)}function ex(t,e){var n=ye;ye=n!==0&&4>n?n:4,t(!0);var i=Oa.transition;Oa.transition={};try{t(!1),e()}finally{ye=n,Oa.transition=i}}function my(){return jt().memoizedState}function tx(t,e,n){var i=Yn(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},gy(t))yy(e,n);else if(n=Xg(t,e,n,i),n!==null){var r=ct();qt(n,t,i,r),vy(n,e,i)}}function nx(t,e,n){var i=Yn(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(gy(t))yy(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(r.hasEagerState=!0,r.eagerState=l,Xt(l,o)){var a=e.interleaved;a===null?(r.next=r,mh(e)):(r.next=a.next,a.next=r),e.interleaved=r;return}}catch{}finally{}n=Xg(t,e,r,i),n!==null&&(r=ct(),qt(n,t,i,r),vy(n,e,i))}}function gy(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function yy(t,e){Zr=ul=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vy(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,th(t,n)}}var hl={readContext:$t,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},ix={readContext:$t,useCallback:function(t,e){return sn().memoizedState=[t,e===void 0?null:e],t},useContext:$t,useEffect:lf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Do(4194308,4,uy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Do(4194308,4,t,e)},useInsertionEffect:function(t,e){return Do(4,2,t,e)},useMemo:function(t,e){var n=sn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=sn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=tx.bind(null,Ie,t),[i.memoizedState,t]},useRef:function(t){var e=sn();return t={current:t},e.memoizedState=t},useState:of,useDebugValue:kh,useDeferredValue:function(t){return sn().memoizedState=t},useTransition:function(){var t=of(!1),e=t[0];return t=ex.bind(null,t[1]),sn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ie,r=sn();if(_e){if(n===void 0)throw Error(V(407));n=n()}else{if(n=e(),Ke===null)throw Error(V(349));vi&30||ny(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,lf(ry.bind(null,i,s,t),[t]),i.flags|=2048,_s(9,iy.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=sn(),e=Ke.identifierPrefix;if(_e){var n=mn,i=pn;n=(i&~(1<<32-Gt(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Es++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ZS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},rx={readContext:$t,useCallback:dy,useContext:$t,useEffect:bh,useImperativeHandle:hy,useInsertionEffect:ay,useLayoutEffect:cy,useMemo:fy,useReducer:La,useRef:ly,useState:function(){return La(Ts)},useDebugValue:kh,useDeferredValue:function(t){var e=jt();return py(e,Ve.memoizedState,t)},useTransition:function(){var t=La(Ts)[0],e=jt().memoizedState;return[t,e]},useMutableSource:ey,useSyncExternalStore:ty,useId:my,unstable_isNewReconciler:!1},sx={readContext:$t,useCallback:dy,useContext:$t,useEffect:bh,useImperativeHandle:hy,useInsertionEffect:ay,useLayoutEffect:cy,useMemo:fy,useReducer:Fa,useRef:ly,useState:function(){return Fa(Ts)},useDebugValue:kh,useDeferredValue:function(t){var e=jt();return Ve===null?e.memoizedState=t:py(e,Ve.memoizedState,t)},useTransition:function(){var t=Fa(Ts)[0],e=jt().memoizedState;return[t,e]},useMutableSource:ey,useSyncExternalStore:ty,useId:my,unstable_isNewReconciler:!1};function Wt(t,e){if(t&&t.defaultProps){e=Me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function tu(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ll={isMounted:function(t){return(t=t._reactInternals)?Ai(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ct(),r=Yn(t),s=vn(i,r);s.payload=e,n!=null&&(s.callback=n),e=Hn(t,s,r),e!==null&&(qt(e,t,r,i),Io(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ct(),r=Yn(t),s=vn(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Hn(t,s,r),e!==null&&(qt(e,t,r,i),Io(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ct(),i=Yn(t),r=vn(n,i);r.tag=2,e!=null&&(r.callback=e),e=Hn(t,r,i),e!==null&&(qt(e,t,i,n),Io(e,t,i))}};function af(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!ws(n,i)||!ws(r,s):!0}function wy(t,e,n){var i=!1,r=qn,s=e.contextType;return typeof s=="object"&&s!==null?s=$t(s):(r=vt(e)?gi:st.current,i=e.contextTypes,s=(i=i!=null)?cr(t,r):qn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ll,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function cf(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Ll.enqueueReplaceState(e,e.state,null)}function nu(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},gh(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=$t(s):(s=vt(e)?gi:st.current,r.context=cr(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(tu(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Ll.enqueueReplaceState(r,r.state,null),al(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function fr(t,e){try{var n="",i=e;do n+=M0(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function za(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function iu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ox=typeof WeakMap=="function"?WeakMap:Map;function Sy(t,e,n){n=vn(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){fl||(fl=!0,fu=i),iu(t,e)},n}function xy(t,e,n){n=vn(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){iu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){iu(t,e),typeof i!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function uf(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new ox;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Sx.bind(null,t,e,n),e.then(t,t))}function hf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function df(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vn(-1,1),e.tag=2,Hn(n,e,1))),n.lanes|=1),t)}var lx=bn.ReactCurrentOwner,gt=!1;function lt(t,e,n,i){e.child=t===null?Qg(e,null,n,i):hr(e,t.child,n,i)}function ff(t,e,n,i,r){n=n.render;var s=e.ref;return ir(e,r),i=xh(t,e,n,i,s,r),n=Ch(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Cn(t,e,r)):(_e&&n&&ch(e),e.flags|=1,lt(t,e,i,r),e.child)}function pf(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Ih(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Cy(t,e,s,i,r)):(t=zo(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ws,n(o,i)&&t.ref===e.ref)return Cn(t,e,r)}return e.flags|=1,t=Kn(s,i),t.ref=e.ref,t.return=e,e.child=t}function Cy(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(ws(s,i)&&t.ref===e.ref)if(gt=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(gt=!0);else return e.lanes=t.lanes,Cn(t,e,r)}return ru(t,e,n,i,r)}function by(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(qi,Tt),Tt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(qi,Tt),Tt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,be(qi,Tt),Tt|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,be(qi,Tt),Tt|=i;return lt(t,e,r,n),e.child}function ky(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ru(t,e,n,i,r){var s=vt(n)?gi:st.current;return s=cr(e,s),ir(e,r),n=xh(t,e,n,i,s,r),i=Ch(),t!==null&&!gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Cn(t,e,r)):(_e&&i&&ch(e),e.flags|=1,lt(t,e,n,r),e.child)}function mf(t,e,n,i,r){if(vt(n)){var s=!0;il(e)}else s=!1;if(ir(e,r),e.stateNode===null)Oo(t,e),wy(e,n,i),nu(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=$t(c):(c=vt(n)?gi:st.current,c=cr(e,c));var h=n.getDerivedStateFromProps,u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||a!==c)&&cf(e,o,i,c),In=!1;var d=e.memoizedState;o.state=d,al(e,i,o,r),a=e.memoizedState,l!==i||d!==a||yt.current||In?(typeof h=="function"&&(tu(e,n,h,i),a=e.memoizedState),(l=In||af(e,n,l,i,d,a,c))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=a),o.props=i,o.state=a,o.context=c,i=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Jg(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Wt(e.type,l),o.props=c,u=e.pendingProps,d=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=$t(a):(a=vt(n)?gi:st.current,a=cr(e,a));var f=n.getDerivedStateFromProps;(h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==u||d!==a)&&cf(e,o,i,a),In=!1,d=e.memoizedState,o.state=d,al(e,i,o,r);var p=e.memoizedState;l!==u||d!==p||yt.current||In?(typeof f=="function"&&(tu(e,n,f,i),p=e.memoizedState),(c=In||af(e,n,c,i,d,p,a)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=a,i=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return su(t,e,n,i,s,r)}function su(t,e,n,i,r,s){ky(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&Zd(e,n,!1),Cn(t,e,s);i=e.stateNode,lx.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=hr(e,t.child,null,s),e.child=hr(e,null,l,s)):lt(t,e,l,s),e.memoizedState=i.state,r&&Zd(e,n,!0),e.child}function Ey(t){var e=t.stateNode;e.pendingContext?Jd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Jd(t,e.context,!1),yh(t,e.containerInfo)}function gf(t,e,n,i,r){return ur(),hh(r),e.flags|=256,lt(t,e,n,i),e.child}var ou={dehydrated:null,treeContext:null,retryLane:0};function lu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ty(t,e,n){var i=e.pendingProps,r=Ne.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),be(Ne,r&1),t===null)return Zc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ul(o,i,0,null),t=fi(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=lu(n),e.memoizedState=ou,t):Eh(e,o));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return ax(t,e,o,i,l,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,l=r.sibling;var a={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=a,e.deletions=null):(i=Kn(r,a),i.subtreeFlags=r.subtreeFlags&14680064),l!==null?s=Kn(l,s):(s=fi(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?lu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ou,i}return s=t.child,t=s.sibling,i=Kn(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Eh(t,e){return e=Ul({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function uo(t,e,n,i){return i!==null&&hh(i),hr(e,t.child,null,n),t=Eh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ax(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=za(Error(V(422))),uo(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Ul({mode:"visible",children:i.children},r,0,null),s=fi(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&hr(e,t.child,null,o),e.child.memoizedState=lu(o),e.memoizedState=ou,s);if(!(e.mode&1))return uo(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var l=i.dgst;return i=l,s=Error(V(419)),i=za(s,i,void 0),uo(t,e,o,i)}if(l=(o&t.childLanes)!==0,gt||l){if(i=Ke,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,xn(t,r),qt(i,t,r,-1))}return Nh(),i=za(Error(V(421))),uo(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=xx.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,_t=Vn(r.nextSibling),At=e,_e=!0,Kt=null,t!==null&&(Ot[Lt++]=pn,Ot[Lt++]=mn,Ot[Lt++]=yi,pn=t.id,mn=t.overflow,yi=e),e=Eh(e,i.children),e.flags|=4096,e)}function yf(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),eu(t.return,e,n)}function Ua(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function _y(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(lt(t,e,i.children,n),i=Ne.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yf(t,n,e);else if(t.tag===19)yf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(be(Ne,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&cl(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Ua(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&cl(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Ua(e,!0,n,null,s);break;case"together":Ua(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Oo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Cn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),wi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(V(153));if(e.child!==null){for(t=e.child,n=Kn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Kn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function cx(t,e,n){switch(e.tag){case 3:Ey(e),ur();break;case 5:Zg(e);break;case 1:vt(e.type)&&il(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;be(ol,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(be(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?Ty(t,e,n):(be(Ne,Ne.current&1),t=Cn(t,e,n),t!==null?t.sibling:null);be(Ne,Ne.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return _y(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),be(Ne,Ne.current),i)break;return null;case 22:case 23:return e.lanes=0,by(t,e,n)}return Cn(t,e,n)}var Ay,au,Py,Ry;Ay=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};au=function(){};Py=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,ui(un.current);var s=null;switch(n){case"input":r=Rc(t,r),i=Rc(t,i),s=[];break;case"select":r=Me({},r,{value:void 0}),i=Me({},i,{value:void 0}),s=[];break;case"textarea":r=Mc(t,r),i=Mc(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=tl)}Oc(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var l=r[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ds.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var a=i[c];if(l=r?.[c],i.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ds.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&Ee("scroll",t),s||l===a||(s=[])):(s=s||[]).push(c,a))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Ry=function(t,e,n,i){n!==i&&(e.flags|=4)};function Lr(t,e){if(!_e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function ux(t,e,n){var i=e.pendingProps;switch(uh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(e),null;case 1:return vt(e.type)&&nl(),et(e),null;case 3:return i=e.stateNode,dr(),Te(yt),Te(st),wh(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(ao(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kt!==null&&(gu(Kt),Kt=null))),au(t,e),et(e),null;case 5:vh(e);var r=ui(ks.current);if(n=e.type,t!==null&&e.stateNode!=null)Py(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(V(166));return et(e),null}if(t=ui(un.current),ao(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[an]=e,i[Cs]=s,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",i),Ee("close",i);break;case"iframe":case"object":case"embed":Ee("load",i);break;case"video":case"audio":for(r=0;r<Yr.length;r++)Ee(Yr[r],i);break;case"source":Ee("error",i);break;case"img":case"image":case"link":Ee("error",i),Ee("load",i);break;case"details":Ee("toggle",i);break;case"input":Ed(i,s),Ee("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ee("invalid",i);break;case"textarea":_d(i,s),Ee("invalid",i)}Oc(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?i.textContent!==l&&(s.suppressHydrationWarning!==!0&&lo(i.textContent,l,t),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&lo(i.textContent,l,t),r=["children",""+l]):ds.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ee("scroll",i)}switch(n){case"input":Zs(i),Td(i,s,!0);break;case"textarea":Zs(i),Ad(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=tl)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[an]=e,t[Cs]=i,Ay(t,e,!1,!1),e.stateNode=t;e:{switch(o=Lc(n,i),n){case"dialog":Ee("cancel",t),Ee("close",t),r=i;break;case"iframe":case"object":case"embed":Ee("load",t),r=i;break;case"video":case"audio":for(r=0;r<Yr.length;r++)Ee(Yr[r],t);r=i;break;case"source":Ee("error",t),r=i;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),r=i;break;case"details":Ee("toggle",t),r=i;break;case"input":Ed(t,i),r=Rc(t,i),Ee("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Me({},i,{value:void 0}),Ee("invalid",t);break;case"textarea":_d(t,i),r=Mc(t,i),Ee("invalid",t);break;default:r=i}Oc(n,r),l=r;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?lg(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&sg(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&fs(t,a):typeof a=="number"&&fs(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ds.hasOwnProperty(s)?a!=null&&s==="onScroll"&&Ee("scroll",t):a!=null&&qu(t,s,a,o))}switch(n){case"input":Zs(t),Td(t,i,!1);break;case"textarea":Zs(t),Ad(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Gn(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Zi(t,!!i.multiple,s,!1):i.defaultValue!=null&&Zi(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=tl)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return et(e),null;case 6:if(t&&e.stateNode!=null)Ry(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(V(166));if(n=ui(ks.current),ui(un.current),ao(e)){if(i=e.stateNode,n=e.memoizedProps,i[an]=e,(s=i.nodeValue!==n)&&(t=At,t!==null))switch(t.tag){case 3:lo(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lo(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[an]=e,e.stateNode=i}return et(e),null;case 13:if(Te(Ne),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_e&&_t!==null&&e.mode&1&&!(e.flags&128))Gg(),ur(),e.flags|=98560,s=!1;else if(s=ao(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(V(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(V(317));s[an]=e}else ur(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;et(e),s=!1}else Kt!==null&&(gu(Kt),Kt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?He===0&&(He=3):Nh())),e.updateQueue!==null&&(e.flags|=4),et(e),null);case 4:return dr(),au(t,e),t===null&&Ss(e.stateNode.containerInfo),et(e),null;case 10:return ph(e.type._context),et(e),null;case 17:return vt(e.type)&&nl(),et(e),null;case 19:if(Te(Ne),s=e.memoizedState,s===null)return et(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Lr(s,!1);else{if(He!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=cl(t),o!==null){for(e.flags|=128,Lr(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return be(Ne,Ne.current&1|2),e.child}t=t.sibling}s.tail!==null&&Le()>pr&&(e.flags|=128,i=!0,Lr(s,!1),e.lanes=4194304)}else{if(!i)if(t=cl(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Lr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!_e)return et(e),null}else 2*Le()-s.renderingStartTime>pr&&n!==1073741824&&(e.flags|=128,i=!0,Lr(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Le(),e.sibling=null,n=Ne.current,be(Ne,i?n&1|2:n&1),e):(et(e),null);case 22:case 23:return Rh(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Tt&1073741824&&(et(e),e.subtreeFlags&6&&(e.flags|=8192)):et(e),null;case 24:return null;case 25:return null}throw Error(V(156,e.tag))}function hx(t,e){switch(uh(e),e.tag){case 1:return vt(e.type)&&nl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return dr(),Te(yt),Te(st),wh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vh(e),null;case 13:if(Te(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(V(340));ur()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(Ne),null;case 4:return dr(),null;case 10:return ph(e.type._context),null;case 22:case 23:return Rh(),null;case 24:return null;default:return null}}var ho=!1,tt=!1,dx=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Gi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Oe(t,e,i)}else n.current=null}function cu(t,e,n){try{n()}catch(i){Oe(t,e,i)}}var vf=!1;function fx(t,e){if(Yc=Jo,t=Og(),ah(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,h=0,u=t,d=null;t:for(;;){for(var f;u!==n||r!==0&&u.nodeType!==3||(l=o+r),u!==s||i!==0&&u.nodeType!==3||(a=o+i),u.nodeType===3&&(o+=u.nodeValue.length),(f=u.firstChild)!==null;)d=u,u=f;for(;;){if(u===t)break t;if(d===n&&++c===r&&(l=o),d===s&&++h===i&&(a=o),(f=u.nextSibling)!==null)break;u=d,d=u.parentNode}u=f}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kc={focusedElem:t,selectionRange:n},Jo=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,S=p.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:Wt(e.type,g),S);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(b){Oe(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return p=vf,vf=!1,p}function es(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&cu(e,n,s)}r=r.next}while(r!==i)}}function Fl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function uu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ny(t){var e=t.alternate;e!==null&&(t.alternate=null,Ny(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[an],delete e[Cs],delete e[Qc],delete e[qS],delete e[QS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Iy(t){return t.tag===5||t.tag===3||t.tag===4}function wf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Iy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hu(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=tl));else if(i!==4&&(t=t.child,t!==null))for(hu(t,e,n),t=t.sibling;t!==null;)hu(t,e,n),t=t.sibling}function du(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(du(t,e,n),t=t.sibling;t!==null;)du(t,e,n),t=t.sibling}var Ge=null,Yt=!1;function Tn(t,e,n){for(n=n.child;n!==null;)My(t,e,n),n=n.sibling}function My(t,e,n){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(Pl,n)}catch{}switch(n.tag){case 5:tt||Gi(n,e);case 6:var i=Ge,r=Yt;Ge=null,Tn(t,e,n),Ge=i,Yt=r,Ge!==null&&(Yt?(t=Ge,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ge.removeChild(n.stateNode));break;case 18:Ge!==null&&(Yt?(t=Ge,n=n.stateNode,t.nodeType===8?Ia(t.parentNode,n):t.nodeType===1&&Ia(t,n),ys(t)):Ia(Ge,n.stateNode));break;case 4:i=Ge,r=Yt,Ge=n.stateNode.containerInfo,Yt=!0,Tn(t,e,n),Ge=i,Yt=r;break;case 0:case 11:case 14:case 15:if(!tt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&cu(n,e,o),r=r.next}while(r!==i)}Tn(t,e,n);break;case 1:if(!tt&&(Gi(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(l){Oe(n,e,l)}Tn(t,e,n);break;case 21:Tn(t,e,n);break;case 22:n.mode&1?(tt=(i=tt)||n.memoizedState!==null,Tn(t,e,n),tt=i):Tn(t,e,n);break;default:Tn(t,e,n)}}function Sf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new dx),e.forEach(function(i){var r=Cx.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Ht(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ge=l.stateNode,Yt=!1;break e;case 3:Ge=l.stateNode.containerInfo,Yt=!0;break e;case 4:Ge=l.stateNode.containerInfo,Yt=!0;break e}l=l.return}if(Ge===null)throw Error(V(160));My(s,o,r),Ge=null,Yt=!1;var a=r.alternate;a!==null&&(a.return=null),r.return=null}catch(c){Oe(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Dy(e,t),e=e.sibling}function Dy(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ht(e,t),tn(t),i&4){try{es(3,t,t.return),Fl(3,t)}catch(g){Oe(t,t.return,g)}try{es(5,t,t.return)}catch(g){Oe(t,t.return,g)}}break;case 1:Ht(e,t),tn(t),i&512&&n!==null&&Gi(n,n.return);break;case 5:if(Ht(e,t),tn(t),i&512&&n!==null&&Gi(n,n.return),t.flags&32){var r=t.stateNode;try{fs(r,"")}catch(g){Oe(t,t.return,g)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&ng(r,s),Lc(l,o);var c=Lc(l,s);for(o=0;o<a.length;o+=2){var h=a[o],u=a[o+1];h==="style"?lg(r,u):h==="dangerouslySetInnerHTML"?sg(r,u):h==="children"?fs(r,u):qu(r,h,u,c)}switch(l){case"input":Nc(r,s);break;case"textarea":ig(r,s);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Zi(r,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Zi(r,!!s.multiple,s.defaultValue,!0):Zi(r,!!s.multiple,s.multiple?[]:"",!1))}r[Cs]=s}catch(g){Oe(t,t.return,g)}}break;case 6:if(Ht(e,t),tn(t),i&4){if(t.stateNode===null)throw Error(V(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(g){Oe(t,t.return,g)}}break;case 3:if(Ht(e,t),tn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ys(e.containerInfo)}catch(g){Oe(t,t.return,g)}break;case 4:Ht(e,t),tn(t);break;case 13:Ht(e,t),tn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Ah=Le())),i&4&&Sf(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(tt=(c=tt)||h,Ht(e,t),tt=c):Ht(e,t),tn(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(Q=t,h=t.child;h!==null;){for(u=Q=h;Q!==null;){switch(d=Q,f=d.child,d.tag){case 0:case 11:case 14:case 15:es(4,d,d.return);break;case 1:Gi(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){i=d,n=d.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Oe(i,n,g)}}break;case 5:Gi(d,d.return);break;case 22:if(d.memoizedState!==null){Cf(u);continue}}f!==null?(f.return=d,Q=f):Cf(u)}h=h.sibling}e:for(h=null,u=t;;){if(u.tag===5){if(h===null){h=u;try{r=u.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=u.stateNode,a=u.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=og("display",o))}catch(g){Oe(t,t.return,g)}}}else if(u.tag===6){if(h===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(g){Oe(t,t.return,g)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===t)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Ht(e,t),tn(t),i&4&&Sf(t);break;case 21:break;default:Ht(e,t),tn(t)}}function tn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Iy(n)){var i=n;break e}n=n.return}throw Error(V(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(fs(r,""),i.flags&=-33);var s=wf(t);du(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,l=wf(t);hu(t,l,o);break;default:throw Error(V(161))}}catch(a){Oe(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function px(t,e,n){Q=t,Oy(t)}function Oy(t,e,n){for(var i=(t.mode&1)!==0;Q!==null;){var r=Q,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||ho;if(!o){var l=r.alternate,a=l!==null&&l.memoizedState!==null||tt;l=ho;var c=tt;if(ho=o,(tt=a)&&!c)for(Q=r;Q!==null;)o=Q,a=o.child,o.tag===22&&o.memoizedState!==null?bf(r):a!==null?(a.return=o,Q=a):bf(r);for(;s!==null;)Q=s,Oy(s),s=s.sibling;Q=r,ho=l,tt=c}xf(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Q=s):xf(t)}}function xf(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tt||Fl(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!tt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Wt(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&sf(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}sf(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var u=h.dehydrated;u!==null&&ys(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}tt||e.flags&512&&uu(e)}catch(d){Oe(e,e.return,d)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Cf(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function bf(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Fl(4,e)}catch(a){Oe(e,n,a)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(a){Oe(e,r,a)}}var s=e.return;try{uu(e)}catch(a){Oe(e,s,a)}break;case 5:var o=e.return;try{uu(e)}catch(a){Oe(e,o,a)}}}catch(a){Oe(e,e.return,a)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var mx=Math.ceil,dl=bn.ReactCurrentDispatcher,Th=bn.ReactCurrentOwner,Ut=bn.ReactCurrentBatchConfig,me=0,Ke=null,je=null,Xe=0,Tt=0,qi=Xn(0),He=0,As=null,wi=0,zl=0,_h=0,ts=null,mt=null,Ah=0,pr=1/0,dn=null,fl=!1,fu=null,Wn=null,fo=!1,Fn=null,pl=0,ns=0,pu=null,Lo=-1,Fo=0;function ct(){return me&6?Le():Lo!==-1?Lo:Lo=Le()}function Yn(t){return t.mode&1?me&2&&Xe!==0?Xe&-Xe:JS.transition!==null?(Fo===0&&(Fo=wg()),Fo):(t=ye,t!==0||(t=window.event,t=t===void 0?16:Tg(t.type)),t):1}function qt(t,e,n,i){if(50<ns)throw ns=0,pu=null,Error(V(185));Os(t,n,i),(!(me&2)||t!==Ke)&&(t===Ke&&(!(me&2)&&(zl|=n),He===4&&On(t,Xe)),wt(t,i),n===1&&me===0&&!(e.mode&1)&&(pr=Le()+500,Dl&&Jn()))}function wt(t,e){var n=t.callbackNode;J0(t,e);var i=Xo(t,t===Ke?Xe:0);if(i===0)n!==null&&Nd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Nd(n),e===1)t.tag===0?XS(kf.bind(null,t)):Wg(kf.bind(null,t)),KS(function(){!(me&6)&&Jn()}),n=null;else{switch(Sg(i)){case 1:n=eh;break;case 4:n=yg;break;case 16:n=Qo;break;case 536870912:n=vg;break;default:n=Qo}n=Vy(n,Ly.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ly(t,e){if(Lo=-1,Fo=0,me&6)throw Error(V(327));var n=t.callbackNode;if(rr()&&t.callbackNode!==n)return null;var i=Xo(t,t===Ke?Xe:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=ml(t,i);else{e=i;var r=me;me|=2;var s=zy();(Ke!==t||Xe!==e)&&(dn=null,pr=Le()+500,di(t,e));do try{vx();break}catch(l){Fy(t,l)}while(!0);fh(),dl.current=s,me=r,je!==null?e=0:(Ke=null,Xe=0,e=He)}if(e!==0){if(e===2&&(r=jc(t),r!==0&&(i=r,e=mu(t,r))),e===1)throw n=As,di(t,0),On(t,i),wt(t,Le()),n;if(e===6)On(t,i);else{if(r=t.current.alternate,!(i&30)&&!gx(r)&&(e=ml(t,i),e===2&&(s=jc(t),s!==0&&(i=s,e=mu(t,s))),e===1))throw n=As,di(t,0),On(t,i),wt(t,Le()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(V(345));case 2:oi(t,mt,dn);break;case 3:if(On(t,i),(i&130023424)===i&&(e=Ah+500-Le(),10<e)){if(Xo(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){ct(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=qc(oi.bind(null,t,mt,dn),e);break}oi(t,mt,dn);break;case 4:if(On(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Gt(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Le()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*mx(i/1960))-i,10<i){t.timeoutHandle=qc(oi.bind(null,t,mt,dn),i);break}oi(t,mt,dn);break;case 5:oi(t,mt,dn);break;default:throw Error(V(329))}}}return wt(t,Le()),t.callbackNode===n?Ly.bind(null,t):null}function mu(t,e){var n=ts;return t.current.memoizedState.isDehydrated&&(di(t,e).flags|=256),t=ml(t,e),t!==2&&(e=mt,mt=n,e!==null&&gu(e)),t}function gu(t){mt===null?mt=t:mt.push.apply(mt,t)}function gx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Xt(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function On(t,e){for(e&=~_h,e&=~zl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gt(e),i=1<<n;t[n]=-1,e&=~i}}function kf(t){if(me&6)throw Error(V(327));rr();var e=Xo(t,0);if(!(e&1))return wt(t,Le()),null;var n=ml(t,e);if(t.tag!==0&&n===2){var i=jc(t);i!==0&&(e=i,n=mu(t,i))}if(n===1)throw n=As,di(t,0),On(t,e),wt(t,Le()),n;if(n===6)throw Error(V(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,oi(t,mt,dn),wt(t,Le()),null}function Ph(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(pr=Le()+500,Dl&&Jn())}}function Si(t){Fn!==null&&Fn.tag===0&&!(me&6)&&rr();var e=me;me|=1;var n=Ut.transition,i=ye;try{if(Ut.transition=null,ye=1,t)return t()}finally{ye=i,Ut.transition=n,me=e,!(me&6)&&Jn()}}function Rh(){Tt=qi.current,Te(qi)}function di(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,YS(n)),je!==null)for(n=je.return;n!==null;){var i=n;switch(uh(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&nl();break;case 3:dr(),Te(yt),Te(st),wh();break;case 5:vh(i);break;case 4:dr();break;case 13:Te(Ne);break;case 19:Te(Ne);break;case 10:ph(i.type._context);break;case 22:case 23:Rh()}n=n.return}if(Ke=t,je=t=Kn(t.current,null),Xe=Tt=e,He=0,As=null,_h=zl=wi=0,mt=ts=null,ci!==null){for(e=0;e<ci.length;e++)if(n=ci[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}ci=null}return t}function Fy(t,e){do{var n=je;try{if(fh(),Mo.current=hl,ul){for(var i=Ie.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ul=!1}if(vi=0,Ye=Ve=Ie=null,Zr=!1,Es=0,Th.current=null,n===null||n.return===null){He=1,As=e,je=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=Xe,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,h=l,u=h.tag;if(!(h.mode&1)&&(u===0||u===11||u===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=hf(o);if(f!==null){f.flags&=-257,df(f,o,l,s,e),f.mode&1&&uf(s,c,e),e=f,a=c;var p=e.updateQueue;if(p===null){var g=new Set;g.add(a),e.updateQueue=g}else p.add(a);break e}else{if(!(e&1)){uf(s,c,e),Nh();break e}a=Error(V(426))}}else if(_e&&l.mode&1){var S=hf(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),df(S,o,l,s,e),hh(fr(a,l));break e}}s=a=fr(a,l),He!==4&&(He=2),ts===null?ts=[s]:ts.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=Sy(s,a,e);rf(s,m);break e;case 1:l=a;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Wn===null||!Wn.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=xy(s,l,e);rf(s,b);break e}}s=s.return}while(s!==null)}$y(n)}catch(A){e=A,je===n&&n!==null&&(je=n=n.return);continue}break}while(!0)}function zy(){var t=dl.current;return dl.current=hl,t===null?hl:t}function Nh(){(He===0||He===3||He===2)&&(He=4),Ke===null||!(wi&268435455)&&!(zl&268435455)||On(Ke,Xe)}function ml(t,e){var n=me;me|=2;var i=zy();(Ke!==t||Xe!==e)&&(dn=null,di(t,e));do try{yx();break}catch(r){Fy(t,r)}while(!0);if(fh(),me=n,dl.current=i,je!==null)throw Error(V(261));return Ke=null,Xe=0,He}function yx(){for(;je!==null;)Uy(je)}function vx(){for(;je!==null&&!V0();)Uy(je)}function Uy(t){var e=By(t.alternate,t,Tt);t.memoizedProps=t.pendingProps,e===null?$y(t):je=e,Th.current=null}function $y(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=hx(n,e),n!==null){n.flags&=32767,je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{He=6,je=null;return}}else if(n=ux(n,e,Tt),n!==null){je=n;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);He===0&&(He=5)}function oi(t,e,n){var i=ye,r=Ut.transition;try{Ut.transition=null,ye=1,wx(t,e,n,i)}finally{Ut.transition=r,ye=i}return null}function wx(t,e,n,i){do rr();while(Fn!==null);if(me&6)throw Error(V(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(V(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Z0(t,s),t===Ke&&(je=Ke=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fo||(fo=!0,Vy(Qo,function(){return rr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ut.transition,Ut.transition=null;var o=ye;ye=1;var l=me;me|=4,Th.current=null,fx(t,n),Dy(n,t),US(Kc),Jo=!!Yc,Kc=Yc=null,t.current=n,px(n),H0(),me=l,ye=o,Ut.transition=s}else t.current=n;if(fo&&(fo=!1,Fn=t,pl=r),s=t.pendingLanes,s===0&&(Wn=null),K0(n.stateNode),wt(t,Le()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(fl)throw fl=!1,t=fu,fu=null,t;return pl&1&&t.tag!==0&&rr(),s=t.pendingLanes,s&1?t===pu?ns++:(ns=0,pu=t):ns=0,Jn(),null}function rr(){if(Fn!==null){var t=Sg(pl),e=Ut.transition,n=ye;try{if(Ut.transition=null,ye=16>t?16:t,Fn===null)var i=!1;else{if(t=Fn,Fn=null,pl=0,me&6)throw Error(V(331));var r=me;for(me|=4,Q=t.current;Q!==null;){var s=Q,o=s.child;if(Q.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(Q=c;Q!==null;){var h=Q;switch(h.tag){case 0:case 11:case 15:es(8,h,s)}var u=h.child;if(u!==null)u.return=h,Q=u;else for(;Q!==null;){h=Q;var d=h.sibling,f=h.return;if(Ny(h),h===c){Q=null;break}if(d!==null){d.return=f,Q=d;break}Q=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var S=g.sibling;g.sibling=null,g=S}while(g!==null)}}Q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Q=o;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:es(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,Q=m;break e}Q=s.return}}var y=t.current;for(Q=y;Q!==null;){o=Q;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Q=w;else e:for(o=y;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Fl(9,l)}}catch(A){Oe(l,l.return,A)}if(l===o){Q=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,Q=b;break e}Q=l.return}}if(me=r,Jn(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(Pl,t)}catch{}i=!0}return i}finally{ye=n,Ut.transition=e}}return!1}function Ef(t,e,n){e=fr(n,e),e=Sy(t,e,1),t=Hn(t,e,1),e=ct(),t!==null&&(Os(t,1,e),wt(t,e))}function Oe(t,e,n){if(t.tag===3)Ef(t,t,n);else for(;e!==null;){if(e.tag===3){Ef(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Wn===null||!Wn.has(i))){t=fr(n,t),t=xy(e,t,1),e=Hn(e,t,1),t=ct(),e!==null&&(Os(e,1,t),wt(e,t));break}}e=e.return}}function Sx(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=ct(),t.pingedLanes|=t.suspendedLanes&n,Ke===t&&(Xe&n)===n&&(He===4||He===3&&(Xe&130023424)===Xe&&500>Le()-Ah?di(t,0):_h|=n),wt(t,e)}function jy(t,e){e===0&&(t.mode&1?(e=no,no<<=1,!(no&130023424)&&(no=4194304)):e=1);var n=ct();t=xn(t,e),t!==null&&(Os(t,e,n),wt(t,n))}function xx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jy(t,n)}function Cx(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(V(314))}i!==null&&i.delete(e),jy(t,n)}var By;By=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yt.current)gt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gt=!1,cx(t,e,n);gt=!!(t.flags&131072)}else gt=!1,_e&&e.flags&1048576&&Yg(e,sl,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Oo(t,e),t=e.pendingProps;var r=cr(e,st.current);ir(e,n),r=xh(null,e,i,t,r,n);var s=Ch();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vt(i)?(s=!0,il(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,gh(e),r.updater=Ll,e.stateNode=r,r._reactInternals=e,nu(e,i,t,n),e=su(null,e,i,!0,s,n)):(e.tag=0,_e&&s&&ch(e),lt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Oo(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=kx(i),t=Wt(i,t),r){case 0:e=ru(null,e,i,t,n);break e;case 1:e=mf(null,e,i,t,n);break e;case 11:e=ff(null,e,i,t,n);break e;case 14:e=pf(null,e,i,Wt(i.type,t),n);break e}throw Error(V(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Wt(i,r),ru(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Wt(i,r),mf(t,e,i,r,n);case 3:e:{if(Ey(e),t===null)throw Error(V(387));i=e.pendingProps,s=e.memoizedState,r=s.element,Jg(t,e),al(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=fr(Error(V(423)),e),e=gf(t,e,i,n,r);break e}else if(i!==r){r=fr(Error(V(424)),e),e=gf(t,e,i,n,r);break e}else for(_t=Vn(e.stateNode.containerInfo.firstChild),At=e,_e=!0,Kt=null,n=Qg(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ur(),i===r){e=Cn(t,e,n);break e}lt(t,e,i,n)}e=e.child}return e;case 5:return Zg(e),t===null&&Zc(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Gc(i,r)?o=null:s!==null&&Gc(i,s)&&(e.flags|=32),ky(t,e),lt(t,e,o,n),e.child;case 6:return t===null&&Zc(e),null;case 13:return Ty(t,e,n);case 4:return yh(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=hr(e,null,i,n):lt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Wt(i,r),ff(t,e,i,r,n);case 7:return lt(t,e,e.pendingProps,n),e.child;case 8:return lt(t,e,e.pendingProps.children,n),e.child;case 12:return lt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,be(ol,i._currentValue),i._currentValue=o,s!==null)if(Xt(s.value,o)){if(s.children===r.children&&!yt.current){e=Cn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===i){if(s.tag===1){a=vn(-1,n&-n),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?a.next=a:(a.next=h.next,h.next=a),c.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),eu(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(V(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),eu(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}lt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,ir(e,n),r=$t(r),i=i(r),e.flags|=1,lt(t,e,i,n),e.child;case 14:return i=e.type,r=Wt(i,e.pendingProps),r=Wt(i.type,r),pf(t,e,i,r,n);case 15:return Cy(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Wt(i,r),Oo(t,e),e.tag=1,vt(i)?(t=!0,il(e)):t=!1,ir(e,n),wy(e,i,r),nu(e,i,r,n),su(null,e,i,!0,t,n);case 19:return _y(t,e,n);case 22:return by(t,e,n)}throw Error(V(156,e.tag))};function Vy(t,e){return gg(t,e)}function bx(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(t,e,n,i){return new bx(t,e,n,i)}function Ih(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kx(t){if(typeof t=="function")return Ih(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xu)return 11;if(t===Ju)return 14}return 2}function Kn(t,e){var n=t.alternate;return n===null?(n=zt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zo(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Ih(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ui:return fi(n.children,r,s,e);case Qu:o=8,r|=8;break;case Tc:return t=zt(12,n,e,r|2),t.elementType=Tc,t.lanes=s,t;case _c:return t=zt(13,n,e,r),t.elementType=_c,t.lanes=s,t;case Ac:return t=zt(19,n,e,r),t.elementType=Ac,t.lanes=s,t;case Zm:return Ul(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Xm:o=10;break e;case Jm:o=9;break e;case Xu:o=11;break e;case Ju:o=14;break e;case Nn:o=16,i=null;break e}throw Error(V(130,t==null?t:typeof t,""))}return e=zt(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function fi(t,e,n,i){return t=zt(7,t,i,e),t.lanes=n,t}function Ul(t,e,n,i){return t=zt(22,t,i,e),t.elementType=Zm,t.lanes=n,t.stateNode={isHidden:!1},t}function $a(t,e,n){return t=zt(6,t,null,e),t.lanes=n,t}function ja(t,e,n){return e=zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ex(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xa(0),this.expirationTimes=xa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xa(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Mh(t,e,n,i,r,s,o,l,a){return t=new Ex(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=zt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gh(s),t}function Tx(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zi,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Hy(t){if(!t)return qn;t=t._reactInternals;e:{if(Ai(t)!==t||t.tag!==1)throw Error(V(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(V(171))}if(t.tag===1){var n=t.type;if(vt(n))return Hg(t,n,e)}return e}function Wy(t,e,n,i,r,s,o,l,a){return t=Mh(n,i,!0,t,r,s,o,l,a),t.context=Hy(null),n=t.current,i=ct(),r=Yn(n),s=vn(i,r),s.callback=e??null,Hn(n,s,r),t.current.lanes=r,Os(t,r,i),wt(t,i),t}function $l(t,e,n,i){var r=e.current,s=ct(),o=Yn(r);return n=Hy(n),e.context===null?e.context=n:e.pendingContext=n,e=vn(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Hn(r,e,o),t!==null&&(qt(t,r,o,s),Io(t,r,o)),o}function gl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Tf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Dh(t,e){Tf(t,e),(t=t.alternate)&&Tf(t,e)}function _x(){return null}var Yy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Oh(t){this._internalRoot=t}jl.prototype.render=Oh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(V(409));$l(t,e,null,null)};jl.prototype.unmount=Oh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Si(function(){$l(null,t,null,null)}),e[Sn]=null}};function jl(t){this._internalRoot=t}jl.prototype.unstable_scheduleHydration=function(t){if(t){var e=bg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Dn.length&&e!==0&&e<Dn[n].priority;n++);Dn.splice(n,0,t),n===0&&Eg(t)}};function Lh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _f(){}function Ax(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=gl(o);s.call(c)}}var o=Wy(e,i,t,0,null,!1,!1,"",_f);return t._reactRootContainer=o,t[Sn]=o.current,Ss(t.nodeType===8?t.parentNode:t),Si(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var c=gl(a);l.call(c)}}var a=Mh(t,0,!1,null,null,!1,!1,"",_f);return t._reactRootContainer=a,t[Sn]=a.current,Ss(t.nodeType===8?t.parentNode:t),Si(function(){$l(e,a,n,i)}),a}function Vl(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var l=r;r=function(){var a=gl(o);l.call(a)}}$l(e,o,t,r)}else o=Ax(n,e,t,r,i);return gl(o)}xg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Wr(e.pendingLanes);n!==0&&(th(e,n|1),wt(e,Le()),!(me&6)&&(pr=Le()+500,Jn()))}break;case 13:Si(function(){var i=xn(t,1);if(i!==null){var r=ct();qt(i,t,1,r)}}),Dh(t,1)}};nh=function(t){if(t.tag===13){var e=xn(t,134217728);if(e!==null){var n=ct();qt(e,t,134217728,n)}Dh(t,134217728)}};Cg=function(t){if(t.tag===13){var e=Yn(t),n=xn(t,e);if(n!==null){var i=ct();qt(n,t,e,i)}Dh(t,e)}};bg=function(){return ye};kg=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}};zc=function(t,e,n){switch(e){case"input":if(Nc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Ml(i);if(!r)throw Error(V(90));tg(i),Nc(i,r)}}}break;case"textarea":ig(t,n);break;case"select":e=n.value,e!=null&&Zi(t,!!n.multiple,e,!1)}};ug=Ph;hg=Si;var Px={usingClientEntryPoint:!1,Events:[Fs,Vi,Ml,ag,cg,Ph]},Fr={findFiberByHostInstance:ai,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rx={bundleType:Fr.bundleType,version:Fr.version,rendererPackageName:Fr.rendererPackageName,rendererConfig:Fr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pg(t),t===null?null:t.stateNode},findFiberByHostInstance:Fr.findFiberByHostInstance||_x,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var po=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!po.isDisabled&&po.supportsFiber)try{Pl=po.inject(Rx),cn=po}catch{}}It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Px;It.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lh(e))throw Error(V(200));return Tx(t,e,null,n)};It.createRoot=function(t,e){if(!Lh(t))throw Error(V(299));var n=!1,i="",r=Yy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Mh(t,1,!1,null,null,n,!1,i,r),t[Sn]=e.current,Ss(t.nodeType===8?t.parentNode:t),new Oh(e)};It.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(V(188)):(t=Object.keys(t).join(","),Error(V(268,t)));return t=pg(e),t=t===null?null:t.stateNode,t};It.flushSync=function(t){return Si(t)};It.hydrate=function(t,e,n){if(!Bl(e))throw Error(V(200));return Vl(null,t,e,!0,n)};It.hydrateRoot=function(t,e,n){if(!Lh(t))throw Error(V(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=Yy;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Wy(e,null,t,1,n??null,r,!1,s,o),t[Sn]=e.current,Ss(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new jl(e)};It.render=function(t,e,n){if(!Bl(e))throw Error(V(200));return Vl(null,t,e,!1,n)};It.unmountComponentAtNode=function(t){if(!Bl(t))throw Error(V(40));return t._reactRootContainer?(Si(function(){Vl(null,null,t,!1,function(){t._reactRootContainer=null,t[Sn]=null})}),!0):!1};It.unstable_batchedUpdates=Ph;It.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Bl(n))throw Error(V(200));if(t==null||t._reactInternals===void 0)throw Error(V(38));return Vl(t,e,n,!1,i)};It.version="18.3.1-next-f1338f8080-20240426";function Ky(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ky)}catch(t){console.error(t)}}Ky(),Km.exports=It;var Nx=Km.exports,Af=Nx;kc.createRoot=Af.createRoot,kc.hydrateRoot=Af.hydrateRoot;const Ix="modulepreload",Mx=function(t){return"/"+t},Pf={},yu=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");r=Promise.allSettled(n.map(a=>{if(a=Mx(a),a in Pf)return;Pf[a]=!0;const c=a.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${h}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":Ix,c||(u.as="script"),u.crossOrigin="",u.href=a,l&&u.setAttribute("nonce",l),document.head.appendChild(u),c)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function we(t){var e=t.width,n=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(n<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:n}}function pi(t,e){return t.width===e.width&&t.height===e.height}var Dx=function(){function t(e){var n=this;this._resolutionListener=function(){return n._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var n=this,i={next:e};return this._observers.push(i),{unsubscribe:function(){n._observers=n._observers.filter(function(r){return r!==i})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(n){return n.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function Ox(t){return new Dx(t)}var Lx=function(){function t(e,n,i){var r;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=we({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=n??function(s){return s},this._allowResizeObserver=(r=i?.allowResizeObserver)!==null&&r!==void 0?r:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,n;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(n=this._devicePixelRatioObservable)===null||n===void 0||n.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return we({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=we(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(n){return n!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(n){return n!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var n=this.bitmapSize;pi(n,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(n,e))},t.prototype._emitBitmapSizeChanged=function(e,n){var i=this;this._bitmapSizeChangedListeners.forEach(function(r){return r.call(i,e,n)})},t.prototype._suggestNewBitmapSize=function(e){var n=this._suggestedBitmapSize,i=we(this._transformBitmapSize(e,this._canvasElementClientSize)),r=pi(this.bitmapSize,i)?null:i;n===null&&r===null||n!==null&&r!==null&&pi(n,r)||(this._suggestedBitmapSize=r,this._emitSuggestedBitmapSizeChanged(n,r))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,n){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(r){return r.call(i,e,n)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}zx().then(function(n){return n?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var n=Rf(this._canvasElement);if(n===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=Ox(n),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,n;if(this._canvasElement!==null){var i=Rf(this._canvasElement);if(i!==null){var r=(n=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:i.devicePixelRatio,s=this._canvasElement.getClientRects(),o=s[0]!==void 0?Ux(s[0],r):we({width:this._canvasElementClientSize.width*r,height:this._canvasElementClientSize.height*r});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(n){var i=n.find(function(o){return o.target===e._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var r=i.devicePixelContentBoxSize[0],s=we({width:r.inlineSize,height:r.blockSize});e._suggestNewBitmapSize(s)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function Fx(t,e){return new Lx(t,e.transform,e.options)}function Rf(t){return t.ownerDocument.defaultView}function zx(){return new Promise(function(t){var e=new ResizeObserver(function(n){t(n.every(function(i){return"devicePixelContentBoxSize"in i})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function Ux(t,e){return we({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var $x=function(){function t(e,n,i){if(n.width===0||n.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=n,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function xi(t,e){var n=t.canvasElementClientSize;if(n.width===0||n.height===0)return null;var i=t.bitmapSize;if(i.width===0||i.height===0)return null;var r=t.canvasElement.getContext("2d",e);return r===null?null:new $x(r,n,i)}/*!
 * @license
 * TradingView Lightweight Charts v5.0.8
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const Gy={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var Nf,If;function Ci(t,e){const n={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(n)}function qy(t,e,n,i){t.beginPath();const r=t.lineWidth%2?.5:0;t.moveTo(n,e+r),t.lineTo(i,e+r),t.stroke()}function Qe(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Ct(t){if(t===void 0)throw new Error("Value is undefined");return t}function W(t){if(t===null)throw new Error("Value is null");return t}function zn(t){return W(Ct(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(Nf||(Nf={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(If||(If={}));class Fe{constructor(){this.t=[]}i(e,n,i){const r={h:e,l:n,o:i===!0};this.t.push(r)}_(e){const n=this.t.findIndex(i=>e===i.h);n>-1&&this.t.splice(n,1)}u(e){this.t=this.t.filter(n=>n.l!==e)}p(e,n,i){const r=[...this.t];this.t=this.t.filter(s=>!s.o),r.forEach(s=>s.h(e,n,i))}v(){return this.t.length>0}m(){this.t=[]}}function Pt(t,...e){for(const n of e)for(const i in n)n[i]!==void 0&&Object.prototype.hasOwnProperty.call(n,i)&&!["__proto__","constructor","prototype"].includes(i)&&(typeof n[i]!="object"||t[i]===void 0||Array.isArray(n[i])?t[i]=n[i]:Pt(t[i],n[i]));return t}function mr(t){return typeof t=="number"&&isFinite(t)}function Ps(t){return typeof t=="number"&&t%1==0}function Us(t){return typeof t=="string"}function mo(t){return typeof t=="boolean"}function gn(t){const e=t;if(!e||typeof e!="object")return e;let n,i,r;for(i in n=Array.isArray(e)?[]:{},e)e.hasOwnProperty(i)&&(r=e[i],n[i]=r&&typeof r=="object"?gn(r):r);return n}function jx(t){return t!==null}function Rs(t){return t===null?void 0:t}const Qy="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function yl(t,e,n){return e===void 0&&(e=Qy),`${n=n!==void 0?`${n} `:""}${t}px ${e}`}class Bx{constructor(e){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,I:0,B:0,A:0,L:0},this.O=e}N(){const e=this.M,n=this.F(),i=this.W();return e.P===n&&e.T===i||(e.P=n,e.T=i,e.k=yl(n,i),e.A=2.5/12*n,e.V=e.A,e.I=n/12*e.C,e.B=n/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function Ba(t){return t<0?0:t>255?255:Math.round(t)||0}function Mf(t){return .199*t[0]+.687*t[1]+.114*t[2]}class Vx{constructor(e,n){this.q=new Map,this.Y=e,n&&(this.q=n)}j(e,n){if(e==="transparent")return e;const i=this.K(e),r=i[3];return`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${n*r})`}X(e){const n=this.K(e);return{Z:`rgb(${n[0]}, ${n[1]}, ${n[2]})`,G:Mf(n)>160?"black":"white"}}J(e){return Mf(this.K(e))}tt(e,n,i){const[r,s,o,l]=this.K(e),[a,c,h,u]=this.K(n),d=[Ba(r+i*(a-r)),Ba(s+i*(c-s)),Ba(o+i*(h-o)),(f=l+i*(u-l),f<=0||f>1?Math.min(Math.max(f,0),1):Math.round(1e4*f)/1e4)];var f;return`rgba(${d[0]}, ${d[1]}, ${d[2]}, ${d[3]})`}K(e){const n=this.q.get(e);if(n)return n;const i=function(o){const l=document.createElement("div");l.style.display="none",document.body.appendChild(l),l.style.color=o;const a=window.getComputedStyle(l).color;return document.body.removeChild(l),a}(e),r=i.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!r){if(this.Y.length)for(const o of this.Y){const l=o(e);if(l)return this.q.set(e,l),l}throw new Error(`Failed to parse color: ${e}`)}const s=[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),r[4]?parseFloat(r[4]):1];return this.q.set(e,s),s}}class Xy{constructor(){this.it=[]}st(e){this.it=e}nt(e,n,i){this.it.forEach(r=>{r.nt(e,n,i)})}}class kn{nt(e,n,i){e.useBitmapCoordinateSpace(r=>this.et(r,n,i))}}class Hx extends kn{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.rt===null||this.rt.lt===null)return;const r=this.rt.lt,s=this.rt,o=Math.max(1,Math.floor(n))%2/2,l=a=>{e.beginPath();for(let c=r.to-1;c>=r.from;--c){const h=s.ot[c],u=Math.round(h._t*n)+o,d=h.ut*i,f=a*i+o;e.moveTo(u,d),e.arc(u,d,f,0,2*Math.PI)}e.fill()};s.ct>0&&(e.fillStyle=s.dt,l(s.ft+s.ct)),e.fillStyle=s.vt,l(s.ft)}}function Wx(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const Yx={from:0,to:1};class Kx{constructor(e,n,i){this.Mt=new Xy,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=n,this.Pt=i,this.Mt.st(this.bt)}kt(e){this.yt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}yt(){const e=this.Pt.Dt();e.length!==this.bt.length&&(this.St=e.map(Wx),this.bt=this.St.map(n=>{const i=new Hx;return i.ht(n),i}),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.Vt(),n=this.Pt.It(),i=this.Ct.Bt(),r=this.O.Et();this.yt(),n.forEach((s,o)=>{const l=this.St[o],a=s.At(i),c=s.zt();!e&&a!==null&&s.Vt()&&c!==null?(l.vt=a.Lt,l.ft=a.ft,l.ct=a.Ot,l.ot[0].gt=a.gt,l.ot[0].ut=s.Ft().Nt(a.gt,c.Wt),l.dt=a.Ht??this.O.Ut(l.ot[0].ut/s.Ft().$t()),l.ot[0].wt=i,l.ot[0]._t=r.qt(i),l.lt=Yx):l.lt=null})}}class Gx extends kn{constructor(e){super(),this.Yt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:i,verticalPixelRatio:r}){if(this.Yt===null)return;const s=this.Yt.jt.Vt,o=this.Yt.Kt.Vt;if(!s&&!o)return;const l=Math.round(this.Yt._t*i),a=Math.round(this.Yt.ut*r);e.lineCap="butt",s&&l>=0&&(e.lineWidth=Math.floor(this.Yt.jt.ct*i),e.strokeStyle=this.Yt.jt.R,e.fillStyle=this.Yt.jt.R,Ci(e,this.Yt.jt.Xt),function(c,h,u,d){c.beginPath();const f=c.lineWidth%2?.5:0;c.moveTo(h+f,u),c.lineTo(h+f,d),c.stroke()}(e,l,0,n.height)),o&&a>=0&&(e.lineWidth=Math.floor(this.Yt.Kt.ct*r),e.strokeStyle=this.Yt.Kt.R,e.fillStyle=this.Yt.Kt.R,Ci(e,this.Yt.Kt.Xt),qy(e,a,0,n.width))}}class qx{constructor(e,n){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new Gx(this.Zt),this.Jt=e,this.Pt=n}kt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){const e=this.Jt.Vt(),n=this.Pt.Qt().N().crosshair,i=this.Zt;if(n.mode===2)return i.Kt.Vt=!1,void(i.jt.Vt=!1);i.Kt.Vt=e&&this.Jt.ti(this.Pt),i.jt.Vt=e&&this.Jt.ii(),i.Kt.ct=n.horzLine.width,i.Kt.Xt=n.horzLine.style,i.Kt.R=n.horzLine.color,i.jt.ct=n.vertLine.width,i.jt.Xt=n.vertLine.style,i.jt.R=n.vertLine.color,i._t=this.Jt.si(),i.ut=this.Jt.ni()}}function Qx(t,e,n,i,r,s){t.fillRect(e+s,n,i-2*s,s),t.fillRect(e+s,n+r-s,i-2*s,s),t.fillRect(e,n,s,r),t.fillRect(e+i-s,n,s,r)}function Hl(t,e,n,i,r,s){t.save(),t.globalCompositeOperation="copy",t.fillStyle=s,t.fillRect(e,n,i,r),t.restore()}function Df(t,e,n,i,r,s){t.beginPath(),t.roundRect?t.roundRect(e,n,i,r,s):(t.lineTo(e+i-s[1],n),s[1]!==0&&t.arcTo(e+i,n,e+i,n+s[1],s[1]),t.lineTo(e+i,n+r-s[2]),s[2]!==0&&t.arcTo(e+i,n+r,e+i-s[2],n+r,s[2]),t.lineTo(e+s[3],n+r),s[3]!==0&&t.arcTo(e,n+r,e,n+r-s[3],s[3]),t.lineTo(e,n+s[0]),s[0]!==0&&t.arcTo(e,n,e+s[0],n,s[0]))}function Of(t,e,n,i,r,s,o=0,l=[0,0,0,0],a=""){if(t.save(),!o||!a||a===s)return Df(t,e,n,i,r,l),t.fillStyle=s,t.fill(),void t.restore();const c=o/2;var h;Df(t,e+c,n+c,i-o,r-o,(h=-c,l.map(u=>u===0?u:u+h))),s!=="transparent"&&(t.fillStyle=s,t.fill()),a!=="transparent"&&(t.lineWidth=o,t.strokeStyle=a,t.closePath(),t.stroke()),t.restore()}function Jy(t,e,n,i,r,s,o){t.save(),t.globalCompositeOperation="copy";const l=t.createLinearGradient(0,0,0,r);l.addColorStop(0,s),l.addColorStop(1,o),t.fillStyle=l,t.fillRect(e,n,i,r),t.restore()}class Lf{constructor(e,n){this.ht(e,n)}ht(e,n){this.Yt=e,this.ei=n}$t(e,n){return this.Yt.Vt?e.P+e.A+e.V:0}nt(e,n,i,r){if(!this.Yt.Vt||this.Yt.ri.length===0)return;const s=this.Yt.R,o=this.ei.Z,l=e.useBitmapCoordinateSpace(a=>{const c=a.context;c.font=n.k;const h=this.hi(a,n,i,r),u=h.ai;return h.li?Of(c,u.oi,u._i,u.ui,u.ci,o,u.di,[u.ft,0,0,u.ft],o):Of(c,u.fi,u._i,u.ui,u.ci,o,u.di,[0,u.ft,u.ft,0],o),this.Yt.pi&&(c.fillStyle=s,c.fillRect(u.fi,u.mi,u.wi-u.fi,u.gi)),this.Yt.Mi&&(c.fillStyle=n.D,c.fillRect(h.li?u.bi-u.di:0,u._i,u.di,u.Si-u._i)),h});e.useMediaCoordinateSpace(({context:a})=>{const c=l.xi;a.font=n.k,a.textAlign=l.li?"right":"left",a.textBaseline="middle",a.fillStyle=s,a.fillText(this.Yt.ri,c.Ci,(c._i+c.Si)/2+c.Pi)})}hi(e,n,i,r){const{context:s,bitmapSize:o,mediaSize:l,horizontalPixelRatio:a,verticalPixelRatio:c}=e,h=this.Yt.pi||!this.Yt.ki?n.C:0,u=this.Yt.yi?n.S:0,d=n.A+this.ei.Ti,f=n.V+this.ei.Ri,p=n.I,g=n.B,S=this.Yt.ri,m=n.P,y=i.Di(s,S),w=Math.ceil(i.Vi(s,S)),b=m+d+f,A=n.S+p+g+w+h,E=Math.max(1,Math.floor(c));let P=Math.round(b*c);P%2!=E%2&&(P+=1);const R=u>0?Math.max(1,Math.floor(u*a)):0,D=Math.round(A*a),_=Math.round(h*a),j=this.ei.Ii??this.ei.Bi,B=Math.round(j*c)-Math.floor(.5*c),J=Math.floor(B+E/2-P/2),Z=J+P,X=r==="right",te=X?l.width-u:u,se=X?o.width-R:R;let $,z,C;return X?($=se-D,z=se-_,C=te-h-p-u):($=se+D,z=se+_,C=te+h+p),{li:X,ai:{_i:J,mi:B,Si:Z,ui:D,ci:P,ft:2*a,di:R,oi:$,fi:se,wi:z,gi:E,bi:o.width},xi:{_i:J/c,Si:Z/c,Ci:C,Pi:y}}}}class Wl{constructor(e){this.Ei={Bi:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,yi:!1},this.zi={ri:"",Vt:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,yi:!0},this.xt=!0,this.Li=new(e||Lf)(this.Ai,this.Ei),this.Oi=new(e||Lf)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Bi(){return this.Ni(),this.Ei.Bi}kt(){this.xt=!0}$t(e,n=!1){return Math.max(this.Li.$t(e,n),this.Oi.$t(e,n))}Fi(){return this.Ei.Ii||0}Wi(e){this.Ei.Ii=e}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(e){return this.Ni(),this.Ai.pi=this.Ai.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}}class Xx extends Wl{constructor(e,n,i){super(),this.Jt=e,this.Yi=n,this.ji=i}qi(e,n,i){if(e.Vt=!1,this.Jt.N().mode===2)return;const r=this.Jt.N().horzLine;if(!r.labelVisible)return;const s=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||s===null)return;const o=this.Yi.Xi().X(r.labelBackgroundColor);i.Z=o.Z,e.R=o.G;const l=2/12*this.Yi.P();i.Ti=l,i.Ri=l;const a=this.ji(this.Yi);i.Bi=a.Bi,e.ri=this.Yi.Zi(a.gt,s),e.Vt=!0}}const Jx=/[1-9]/g;class Zy{constructor(){this.Yt=null}ht(e){this.Yt=e}nt(e,n){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;const i=e.useMediaCoordinateSpace(({context:d})=>(d.font=n.k,Math.round(n.Gi.Vi(d,W(this.Yt).ri,Jx))));if(i<=0)return;const r=n.Ji,s=i+2*r,o=s/2,l=this.Yt.Qi;let a=this.Yt.Bi,c=Math.floor(a-o)+.5;c<0?(a+=Math.abs(0-c),c=Math.floor(a-o)+.5):c+s>l&&(a-=Math.abs(l-(c+s)),c=Math.floor(a-o)+.5);const h=c+s,u=Math.ceil(0+n.S+n.C+n.A+n.P+n.V);e.useBitmapCoordinateSpace(({context:d,horizontalPixelRatio:f,verticalPixelRatio:p})=>{const g=W(this.Yt);d.fillStyle=g.Z;const S=Math.round(c*f),m=Math.round(0*p),y=Math.round(h*f),w=Math.round(u*p),b=Math.round(2*f);if(d.beginPath(),d.moveTo(S,m),d.lineTo(S,w-b),d.arcTo(S,w,S+b,w,b),d.lineTo(y-b,w),d.arcTo(y,w,y,w-b,b),d.lineTo(y,m),d.fill(),g.pi){const A=Math.round(g.Bi*f),E=m,P=Math.round((E+n.C)*p);d.fillStyle=g.R;const R=Math.max(1,Math.floor(f)),D=Math.floor(.5*f);d.fillRect(A-D,E,R,P-E)}}),e.useMediaCoordinateSpace(({context:d})=>{const f=W(this.Yt),p=0+n.S+n.C+n.A+n.P/2;d.font=n.k,d.textAlign="left",d.textBaseline="middle",d.fillStyle=f.R;const g=n.Gi.Di(d,"Apr0");d.translate(c+r,p+g),d.fillText(f.ri,0,0)})}}class Zx{constructor(e,n,i){this.xt=!0,this.Gt=new Zy,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Bi:NaN,pi:!0},this.Ct=e,this.ts=n,this.ji=i}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){const e=this.Zt;if(e.Vt=!1,this.Ct.N().mode===2)return;const n=this.Ct.N().vertLine;if(!n.labelVisible)return;const i=this.ts.Et();if(i.Ki())return;e.Qi=i.Qi();const r=this.ji();if(r===null)return;e.Bi=r.Bi;const s=i.ss(this.Ct.Bt());e.ri=i.ns(W(s)),e.Vt=!0;const o=this.ts.Xi().X(n.labelBackgroundColor);e.Z=o.Z,e.R=o.G,e.pi=i.N().ticksVisible}}class ev{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(e){this.rs=e}Ft(){return this.es}_s(e){this.es=e}us(e){return[]}cs(){return[]}Vt(){return!0}}var Ff;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden",t[t.MagnetOHLC=3]="MagnetOHLC"})(Ff||(Ff={}));class eC extends ev{constructor(e,n){super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=e,this.Ps=n,this.ks=((r,s)=>o=>{const l=s(),a=r();if(o===W(this.Pt).ys())return{gt:a,Bi:l};{const c=W(o.zt());return{gt:o.Ts(l,c),Bi:l}}})(()=>this.ds,()=>this.Ss);const i=((r,s)=>()=>{const o=this.ts.Et().Rs(r()),l=s();return o&&Number.isFinite(l)?{wt:o,Bi:l}:null})(()=>this.fs,()=>this.si());this.Ds=new Zx(this,e,i)}N(){return this.Ps}Vs(e,n){this.xs=e,this.Cs=n}Is(){this.xs=NaN,this.Cs=NaN}Bs(){return this.xs}Es(){return this.Cs}As(e,n,i){this.ws||(this.ws=!0),this.ps=!0,this.zs(e,n,i)}Bt(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Is(),this.Ns()}Fs(e){let n=this.gs.get(e);n||(n=new qx(this,e),this.gs.set(e,n));let i=this.Ms.get(e);return i||(i=new Kx(this.ts,this,e),this.Ms.set(e,i)),[n,i]}ti(e){return e===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(e,n){this.ps&&this.Pt===e||this.vs.clear();const i=[];return this.Pt===e&&i.push(this.Hs(this.vs,n,this.ks)),i}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach(e=>{this.gs.get(e)?.kt(),this.Ms.get(e)?.kt()}),this.vs.forEach(e=>e.kt()),this.Ds.kt()}qs(e){return e&&!e.ys().Ki()?e.ys():null}zs(e,n,i){this.Ys(e,n,i)&&this.Ns()}Ys(e,n,i){const r=this.bs,s=this.Ss,o=this.ds,l=this.fs,a=this.Pt,c=this.qs(i);this.fs=e,this.bs=isNaN(e)?NaN:this.ts.Et().qt(e),this.Pt=i;const h=c!==null?c.zt():null;return c!==null&&h!==null?(this.ds=n,this.Ss=c.Nt(n,h)):(this.ds=NaN,this.Ss=NaN),r!==this.bs||s!==this.Ss||l!==this.fs||o!==this.ds||a!==this.Pt}Os(){const e=this.ts.js().map(i=>i.Xs().Ks()).filter(jx),n=e.length===0?null:Math.max(...e);this.fs=n!==null?n:NaN}Hs(e,n,i){let r=e.get(n);return r===void 0&&(r=new Xx(this,n,i),e.set(n,r)),r}}function Yl(t){return t==="left"||t==="right"}class qe{constructor(e){this.Zs=new Map,this.Gs=[],this.Js=e}Qs(e,n){const i=function(r,s){return r===void 0?s:{tn:Math.max(r.tn,s.tn),sn:r.sn||s.sn}}(this.Zs.get(e),n);this.Zs.set(e,i)}nn(){return this.Js}en(e){const n=this.Zs.get(e);return n===void 0?{tn:this.Js}:{tn:Math.max(this.Js,n.tn),sn:n.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(e){this.hn(),this.Gs=[{an:1,Wt:e}]}_n(e){this.un(),this.Gs.push({an:5,Wt:e})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(e){this.hn(),this.Gs.push({an:2,Wt:e})}fn(e){this.hn(),this.Gs.push({an:3,Wt:e})}pn(){return this.Gs}vn(e){for(const n of e.Gs)this.mn(n);this.Js=Math.max(this.Js,e.Js),e.Zs.forEach((n,i)=>{this.Qs(i,n)})}static wn(){return new qe(2)}static gn(){return new qe(3)}mn(e){switch(e.an){case 0:this.rn();break;case 1:this.ln(e.Wt);break;case 2:this.dn(e.Wt);break;case 3:this.fn(e.Wt);break;case 4:this.cn();break;case 5:this._n(e.Wt);break;case 6:this.un()}}un(){const e=this.Gs.findIndex(n=>n.an===5);e!==-1&&this.Gs.splice(e,1)}}class tv{formatTickmarks(e){return e.map(n=>this.format(n))}}const zf=".";function yn(t,e){if(!mr(t))return"n/a";if(!Ps(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class Kl extends tv{constructor(e,n){if(super(),n||(n=1),mr(e)&&Ps(e)||(e=100),e<0)throw new TypeError("invalid base");this.Yi=e,this.Mn=n,this.bn()}format(e){const n=e<0?"":"";return e=Math.abs(e),n+this.Sn(e)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let e=this.Yi;for(;e>1;)e/=10,this.xn++}}Sn(e){const n=this.Yi/this.Mn;let i=Math.floor(e),r="";const s=this.xn!==void 0?this.xn:NaN;if(n>1){let o=+(Math.round(e*n)-i*n).toFixed(this.xn);o>=n&&(o-=n,i+=1),r=zf+yn(+o.toFixed(this.xn)*this.Mn,s)}else i=Math.round(i*n)/n,s>0&&(r=zf+yn(0,s));return i.toFixed(0)+r}}class nv extends Kl{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class tC extends tv{constructor(e){super(),this.Cn=e}format(e){let n="";return e<0&&(n="-",e=-e),e<995?n+this.Pn(e):e<999995?n+this.Pn(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),n+this.Pn(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),n+this.Pn(e/1e9)+"B")}Pn(e){let n;const i=Math.pow(10,this.Cn);return n=(e=Math.round(e*i)/i)>=1e-15&&e<1?e.toFixed(this.Cn).replace(/\.?0+$/,""):String(e),n.replace(/(\.[1-9]*)0+$/,(r,s)=>s)}}const nC=/[2-9]/g;class vl{constructor(e=50){this.kn=0,this.yn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=e}In(){this.kn=0,this.Dn.clear(),this.yn=1,this.Tn=1,this.Rn={}}Vi(e,n,i){return this.Bn(e,n,i).width}Di(e,n,i){const r=this.Bn(e,n,i);return((r.actualBoundingBoxAscent||0)-(r.actualBoundingBoxDescent||0))/2}Bn(e,n,i){const r=i||nC,s=String(n).replace(r,"0");if(this.Dn.has(s))return Ct(this.Dn.get(s)).En;if(this.kn===this.Vn){const l=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(l),this.Tn++,this.kn--}e.save(),e.textBaseline="middle";const o=e.measureText(s);return e.restore(),o.width===0&&n.length||(this.Dn.set(s,{En:o,An:this.yn}),this.Rn[this.yn]=s,this.kn++,this.yn++),o}}class iC{constructor(e){this.zn=null,this.M=null,this.Ln="right",this.On=e}Nn(e,n,i){this.zn=e,this.M=n,this.Ln=i}nt(e){this.M!==null&&this.zn!==null&&this.zn.nt(e,this.M,this.On,this.Ln)}}class iv{constructor(e,n,i){this.Fn=e,this.On=new vl(50),this.Wn=n,this.O=i,this.F=-1,this.Gt=new iC(this.On)}Tt(){const e=this.O.Hn(this.Wn);if(e===null)return null;const n=e.Un(this.Wn)?e.$n():this.Wn.Ft();if(n===null)return null;const i=e.qn(n);if(i==="overlay")return null;const r=this.O.Yn();return r.P!==this.F&&(this.F=r.P,this.On.In()),this.Gt.Nn(this.Fn.$i(),r,i),this.Gt}}class rC extends kn{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}jn(e,n){if(!this.Yt?.Vt)return null;const{ut:i,ct:r,Kn:s}=this.Yt;return n>=i-r-7&&n<=i+r+7?{Xn:this.Yt,Kn:s}:null}et({context:e,bitmapSize:n,horizontalPixelRatio:i,verticalPixelRatio:r}){if(this.Yt===null||this.Yt.Vt===!1)return;const s=Math.round(this.Yt.ut*r);s<0||s>n.height||(e.lineCap="butt",e.strokeStyle=this.Yt.R,e.lineWidth=Math.floor(this.Yt.ct*i),Ci(e,this.Yt.Xt),qy(e,s,0,n.width))}}class Fh{constructor(e){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new rC,this.xt=!0,this.Jn=e,this.Qn=e.Qt(),this.Gn.ht(this.Zn)}kt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class sC extends Fh{constructor(e){super(e)}te(){this.Zn.Vt=!1;const e=this.Jn.Ft(),n=e.ie().ie;if(n!==2&&n!==3)return;const i=this.Jn.N();if(!i.baseLineVisible||!this.Jn.Vt())return;const r=this.Jn.zt();r!==null&&(this.Zn.Vt=!0,this.Zn.ut=e.Nt(r.Wt,r.Wt),this.Zn.R=i.baseLineColor,this.Zn.ct=i.baseLineWidth,this.Zn.Xt=i.baseLineStyle)}}class oC extends kn{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}se(){return this.Yt}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:i}){const r=this.Yt;if(r===null)return;const s=Math.max(1,Math.floor(n)),o=s%2/2,l=Math.round(r.ne.x*n)+o,a=r.ne.y*i;e.fillStyle=r.ee,e.beginPath();const c=Math.max(2,1.5*r.re)*n;e.arc(l,a,c,0,2*Math.PI,!1),e.fill(),e.fillStyle=r.he,e.beginPath(),e.arc(l,a,r.ft*n,0,2*Math.PI,!1),e.fill(),e.lineWidth=s,e.strokeStyle=r.ae,e.beginPath(),e.arc(l,a,r.ft*n+s/2,0,2*Math.PI,!1),e.stroke()}}const lC=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class aC{constructor(e){this.Gt=new oC,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=e}Me(){this.we=this.me-1,this.kt()}be(){if(this.kt(),this.ge.N().lastPriceAnimation===2){const e=performance.now(),n=this.we-e;if(n>0)return void(n<650&&(this.we+=2600));this.me=e,this.we=e+2600}}kt(){this.xt=!0}Se(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);const e=this.ge.Qt().Et(),n=e.Pe(),i=this.ge.zt();if(n===null||i===null)return;const r=this.ge.ke(!0);if(r.ye||!n.Te(r.Re))return;const s={x:e.qt(r.Re),y:this.ge.Ft().Nt(r.gt,i.Wt)},o=r.R,l=this.ge.N().lineWidth,a=this.De(this.Ve(),o);this.Gt.ht({ee:o,re:l,he:a.he,ae:a.ae,ft:a.ft,ne:s})}Ce(){const e=this.Gt.se();if(e!==null){const n=this.De(this.Ve(),e.ee);e.he=n.he,e.ae=n.ae,e.ft=n.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Ie(e,n,i,r){const s=i+(r-i)*n;return this.ge.Qt().Xi().j(e,s)}De(e,n){const i=e%2600/2600;let r;for(const c of lC)if(i>=c.le&&i<=c.oe){r=c;break}Qe(r!==void 0,"Last price animation internal logic error");const s=(i-r.le)/(r.oe-r.le);return{he:this.Ie(n,s,r.ce,r.de),ae:this.Ie(n,s,r.fe,r.pe),ft:(o=s,l=r._e,a=r.ue,l+(a-l)*o)};var o,l,a}}class cC extends Fh{constructor(e){super(e)}te(){const e=this.Zn;e.Vt=!1;const n=this.Jn.N();if(!n.priceLineVisible||!this.Jn.Vt())return;const i=this.Jn.ke(n.priceLineSource===0);i.ye||(e.Vt=!0,e.ut=i.Bi,e.R=this.Jn.Be(i.R),e.ct=n.priceLineWidth,e.Xt=n.priceLineStyle)}}class uC extends Wl{constructor(e){super(),this.Jt=e}qi(e,n,i){e.Vt=!1,n.Vt=!1;const r=this.Jt;if(!r.Vt())return;const s=r.N(),o=s.lastValueVisible,l=r.Ee()!=="",a=s.seriesLastValueMode===0,c=r.ke(!1);if(c.ye)return;o&&(e.ri=this.Ae(c,o,a),e.Vt=e.ri.length!==0),(l||a)&&(n.ri=this.ze(c,o,l,a),n.Vt=n.ri.length>0);const h=r.Be(c.R),u=this.Jt.Qt().Xi().X(h);i.Z=u.Z,i.Bi=c.Bi,n.Ht=r.Qt().Ut(c.Bi/r.Ft().$t()),e.Ht=h,e.R=u.G,n.R=u.G}ze(e,n,i,r){let s="";const o=this.Jt.Ee();return i&&o.length!==0&&(s+=`${o} `),n&&r&&(s+=this.Jt.Ft().Le()?e.Oe:e.Ne),s.trim()}Ae(e,n,i){return n?i?this.Jt.Ft().Le()?e.Ne:e.Oe:e.ri:""}}function Uf(t,e,n,i){const r=Number.isFinite(e),s=Number.isFinite(n);return r&&s?t(e,n):r||s?r?e:n:i}class ut{constructor(e,n){this.Fe=e,this.We=n}He(e){return e!==null&&this.Fe===e.Fe&&this.We===e.We}Ue(){return new ut(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(e){return e===null?this:new ut(Uf(Math.min,this.$e(),e.$e(),-1/0),Uf(Math.max,this.qe(),e.qe(),1/0))}je(e){if(!mr(e)||this.We-this.Fe===0)return;const n=.5*(this.We+this.Fe);let i=this.We-n,r=this.Fe-n;i*=e,r*=e,this.We=n+i,this.Fe=n+r}Ke(e){mr(e)&&(this.We+=e,this.Fe+=e)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(e){return e===null?null:new ut(e.minValue,e.maxValue)}}class wl{constructor(e,n){this.Ge=e,this.Je=n||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:this.Ge===null?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(e){return e===null?null:new wl(ut.Ze(e.priceRange),e.margins)}}class hC extends Fh{constructor(e,n){super(e),this.ir=n}te(){const e=this.Zn;e.Vt=!1;const n=this.ir.N();if(!this.Jn.Vt()||!n.lineVisible)return;const i=this.ir.sr();i!==null&&(e.Vt=!0,e.ut=i,e.R=n.color,e.ct=n.lineWidth,e.Xt=n.lineStyle,e.Kn=this.ir.N().id)}}class dC extends Wl{constructor(e,n){super(),this.ge=e,this.ir=n}qi(e,n,i){e.Vt=!1,n.Vt=!1;const r=this.ir.N(),s=r.axisLabelVisible,o=r.title!=="",l=this.ge;if(!s||!l.Vt())return;const a=this.ir.sr();if(a===null)return;o&&(n.ri=r.title,n.Vt=!0),n.Ht=l.Qt().Ut(a/l.Ft().$t()),e.ri=this.nr(r.price),e.Vt=!0;const c=this.ge.Qt().Xi().X(r.axisLabelColor||r.color);i.Z=c.Z;const h=r.axisLabelTextColor||c.G;e.R=h,n.R=h,i.Bi=a}nr(e){const n=this.ge.zt();return n===null?"":this.ge.Ft().Zi(e,n.Wt)}}class fC{constructor(e,n){this.ge=e,this.Ps=n,this.er=new hC(e,this),this.Fn=new dC(e,this),this.rr=new iv(this.Fn,e,e.Qt())}hr(e){Pt(this.Ps,e),this.kt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}kt(){this.er.kt(),this.Fn.kt()}sr(){const e=this.ge,n=e.Ft();if(e.Qt().Et().Ki()||n.Ki())return null;const i=e.zt();return i===null?null:n.Nt(this.Ps.price,i.Wt)}}class pC extends ev{constructor(e){super(),this.ts=e}Qt(){return this.ts}}const mC={Bar:(t,e,n,i)=>{const r=e.upColor,s=e.downColor,o=W(t(n,i)),l=zn(o.Wt[0])<=zn(o.Wt[3]);return{cr:o.R??(l?r:s)}},Candlestick:(t,e,n,i)=>{const r=e.upColor,s=e.downColor,o=e.borderUpColor,l=e.borderDownColor,a=e.wickUpColor,c=e.wickDownColor,h=W(t(n,i)),u=zn(h.Wt[0])<=zn(h.Wt[3]);return{cr:h.R??(u?r:s),dr:h.Ht??(u?o:l),pr:h.vr??(u?a:c)}},Custom:(t,e,n,i)=>({cr:W(t(n,i)).R??e.color}),Area:(t,e,n,i)=>{const r=W(t(n,i));return{cr:r.vt??e.lineColor,vt:r.vt??e.lineColor,mr:r.mr??e.topColor,wr:r.wr??e.bottomColor}},Baseline:(t,e,n,i)=>{const r=W(t(n,i));return{cr:r.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,gr:r.gr??e.topLineColor,Mr:r.Mr??e.bottomLineColor,br:r.br??e.topFillColor1,Sr:r.Sr??e.topFillColor2,Cr:r.Cr??e.bottomFillColor1,Pr:r.Pr??e.bottomFillColor2}},Line:(t,e,n,i)=>{const r=W(t(n,i));return{cr:r.R??e.color,vt:r.R??e.color}},Histogram:(t,e,n,i)=>({cr:W(t(n,i)).R??e.color})};class gC{constructor(e){this.kr=(n,i)=>i!==void 0?i.Wt:this.ge.Xs().yr(n),this.ge=e,this.Tr=mC[e.Rr()]}Dr(e,n){return this.Tr(this.kr,this.ge.N(),e,n)}}function rv(t,e,n,i,r=0,s=e.length){let o=s-r;for(;0<o;){const l=o>>1,a=r+l;i(e[a],n)===t?(r=a+1,o-=l+1):o=l}return r}const gr=rv.bind(null,!0),sv=rv.bind(null,!1);var $f;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})($f||($f={}));const _n=30;class yC{constructor(){this.Vr=[],this.Ir=new Map,this.Br=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return this.zr()===0}Te(e){return this.Nr(e,0)!==null}yr(e){return this.Fr(e)}Fr(e,n=0){const i=this.Nr(e,n);return i===null?null:{...this.Wr(i),Re:this.Or(i)}}Hr(){return this.Vr}Ur(e,n,i){if(this.Ki())return null;let r=null;for(const s of i)r=go(r,this.$r(e,n,s));return r}ht(e){this.Br.clear(),this.Ir.clear(),this.Vr=e,this.Er=e.map(n=>n.Re)}qr(){return this.Er}Or(e){return this.Vr[e].Re}Wr(e){return this.Vr[e]}Nr(e,n){const i=this.Yr(e);if(i===null&&n!==0)switch(n){case-1:return this.jr(e);case 1:return this.Kr(e);default:throw new TypeError("Unknown search mode")}return i}jr(e){let n=this.Xr(e);return n>0&&(n-=1),n!==this.Vr.length&&this.Or(n)<e?n:null}Kr(e){const n=this.Zr(e);return n!==this.Vr.length&&e<this.Or(n)?n:null}Yr(e){const n=this.Xr(e);return n===this.Vr.length||e<this.Vr[n].Re?null:n}Xr(e){return gr(this.Vr,e,(n,i)=>n.Re<i)}Zr(e){return sv(this.Vr,e,(n,i)=>n.Re>i)}Gr(e,n,i){let r=null;for(let s=e;s<n;s++){const o=this.Vr[s].Wt[i];Number.isNaN(o)||(r===null?r={Jr:o,Qr:o}:(o<r.Jr&&(r.Jr=o),o>r.Qr&&(r.Qr=o)))}return r}$r(e,n,i){if(this.Ki())return null;let r=null;const s=W(this.Lr()),o=W(this.Ks()),l=Math.max(e,s),a=Math.min(n,o),c=Math.ceil(l/_n)*_n,h=Math.max(c,Math.floor(a/_n)*_n);{const d=this.Xr(l),f=this.Zr(Math.min(a,c,n));r=go(r,this.Gr(d,f,i))}let u=this.Ir.get(i);u===void 0&&(u=new Map,this.Ir.set(i,u));for(let d=Math.max(c+1,l);d<h;d+=_n){const f=Math.floor(d/_n);let p=u.get(f);if(p===void 0){const g=this.Xr(f*_n),S=this.Zr((f+1)*_n-1);p=this.Gr(g,S,i),u.set(f,p)}r=go(r,p)}{const d=this.Xr(h),f=this.Zr(a);r=go(r,this.Gr(d,f,i))}return r}}function go(t,e){return t===null?e:e===null?t:{Jr:Math.min(t.Jr,e.Jr),Qr:Math.max(t.Qr,e.Qr)}}class vC{constructor(e){this.th=e}nt(e,n,i){this.th.draw(e)}ih(e,n,i){this.th.drawBackground?.(e)}}class wC{constructor(e){this.Dn=null,this.sh=e}Tt(){const e=this.sh.renderer();if(e===null)return null;if(this.Dn?.nh===e)return this.Dn.eh;const n=new vC(e);return this.Dn={nh:e,eh:n},n}rh(){return this.sh.zOrder?.()??"normal"}}class ov{constructor(e){this.hh=null,this.ah=e}oh(){return this.ah}Ns(){this.ah.updateAllViews?.()}Fs(){const e=this.ah.paneViews?.()??[];if(this.hh?.nh===e)return this.hh.eh;const n=e.map(i=>new wC(i));return this.hh={nh:e,eh:n},n}jn(e,n){return this.ah.hitTest?.(e,n)??null}}let SC=class extends ov{us(){return[]}};class xC{constructor(e){this.th=e}nt(e,n,i){this.th.draw(e)}ih(e,n,i){this.th.drawBackground?.(e)}}class jf{constructor(e){this.Dn=null,this.sh=e}Tt(){const e=this.sh.renderer();if(e===null)return null;if(this.Dn?.nh===e)return this.Dn.eh;const n=new xC(e);return this.Dn={nh:e,eh:n},n}rh(){return this.sh.zOrder?.()??"normal"}}function lv(t){return{ri:t.text(),Bi:t.coordinate(),Ii:t.fixedCoordinate?.(),R:t.textColor(),Z:t.backColor(),Vt:t.visible?.()??!0,pi:t.tickVisible?.()??!0}}class CC{constructor(e,n){this.Gt=new Zy,this._h=e,this.uh=n}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),...lv(this._h)}),this.Gt}}class bC extends Wl{constructor(e,n){super(),this._h=e,this.Yi=n}qi(e,n,i){const r=lv(this._h);i.Z=r.Z,e.R=r.R;const s=2/12*this.Yi.P();i.Ti=s,i.Ri=s,i.Bi=r.Bi,i.Ii=r.Ii,e.ri=r.ri,e.Vt=r.Vt,e.pi=r.pi}}class kC extends ov{constructor(e,n){super(e),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=n}cs(){const e=this.ah.timeAxisViews?.()??[];if(this.dh?.nh===e)return this.dh.eh;const n=this.ge.Qt().Et(),i=e.map(r=>new CC(r,n));return this.dh={nh:e,eh:i},i}Ws(){const e=this.ah.priceAxisViews?.()??[];if(this.fh?.nh===e)return this.fh.eh;const n=this.ge.Ft(),i=e.map(r=>new bC(r,n));return this.fh={nh:e,eh:i},i}wh(){const e=this.ah.priceAxisPaneViews?.()??[];if(this.ph?.nh===e)return this.ph.eh;const n=e.map(i=>new jf(i));return this.ph={nh:e,eh:n},n}gh(){const e=this.ah.timeAxisPaneViews?.()??[];if(this.mh?.nh===e)return this.mh.eh;const n=e.map(i=>new jf(i));return this.mh={nh:e,eh:n},n}Mh(e,n){return this.ah.autoscaleInfo?.(e,n)??null}}function Va(t,e,n,i){t.forEach(r=>{e(r).forEach(s=>{s.rh()===n&&i.push(s)})})}function Ha(t){return t.Fs()}function EC(t){return t.wh()}function TC(t){return t.gh()}const _C=["Area","Line","Baseline"];class Gl extends pC{constructor(e,n,i,r,s){super(e),this.Yt=new yC,this.er=new cC(this),this.bh=[],this.Sh=new sC(this),this.xh=null,this.Ch=null,this.Ph=null,this.kh=[],this.Ps=i,this.yh=n;const o=new uC(this);this.vs=[o],this.rr=new iv(o,this,e),_C.includes(this.yh)&&(this.xh=new aC(this)),this.Th(),this.sh=r(this,this.Qt(),s)}m(){this.Ph!==null&&clearTimeout(this.Ph)}Be(e){return this.Ps.priceLineColor||e}ke(e){const n={ye:!0},i=this.Ft();if(this.Qt().Et().Ki()||i.Ki()||this.Yt.Ki())return n;const r=this.Qt().Et().Pe(),s=this.zt();if(r===null||s===null)return n;let o,l;if(e){const u=this.Yt.Ar();if(u===null)return n;o=u,l=u.Re}else{const u=this.Yt.Fr(r.bi(),-1);if(u===null||(o=this.Yt.yr(u.Re),o===null))return n;l=u.Re}const a=o.Wt[3],c=this.Rh().Dr(l,{Wt:o}),h=i.Nt(a,s.Wt);return{ye:!1,gt:a,ri:i.Zi(a,s.Wt),Oe:i.Dh(a),Ne:i.Vh(a,s.Wt),R:c.cr,Bi:h,Re:l}}Rh(){return this.Ch!==null||(this.Ch=new gC(this)),this.Ch}N(){return this.Ps}hr(e){const n=e.priceScaleId;n!==void 0&&n!==this.Ps.priceScaleId&&this.Qt().Ih(this,n),Pt(this.Ps,e),e.priceFormat!==void 0&&(this.Th(),this.Qt().Bh()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.kt("options")}ht(e,n){this.Yt.ht(e),this.sh.kt("data"),this.xh!==null&&(n&&n.zh?this.xh.be():e.length===0&&this.xh.Me());const i=this.Qt().Hn(this);this.Qt().Lh(i),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(e){const n=new fC(this,e);return this.bh.push(n),this.Qt().Eh(this),n}Nh(e){const n=this.bh.indexOf(e);n!==-1&&this.bh.splice(n,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.yh}zt(){const e=this.Wh();return e===null?null:{Wt:e.Wt[3],Hh:e.wt}}Wh(){const e=this.Qt().Et().Pe();if(e===null)return null;const n=e.Uh();return this.Yt.Fr(n,1)}Xs(){return this.Yt}$h(e){const n=this.Yt.yr(e);return n===null?null:this.yh==="Bar"||this.yh==="Candlestick"||this.yh==="Custom"?{qh:n.Wt[0],Yh:n.Wt[1],jh:n.Wt[2],Kh:n.Wt[3]}:n.Wt[3]}Xh(e){const n=[];Va(this.kh,Ha,"top",n);const i=this.xh;return i!==null&&i.Vt()&&(this.Ph===null&&i.xe()&&(this.Ph=setTimeout(()=>{this.Ph=null,this.Qt().Zh()},0)),i.Se(),n.unshift(i)),n}Fs(){const e=[];this.Gh()||e.push(this.Sh),e.push(this.sh,this.er);const n=this.bh.map(i=>i.lr());return e.push(...n),Va(this.kh,Ha,"normal",e),e}Jh(){return this.Qh(Ha,"bottom")}ta(e){return this.Qh(EC,e)}ia(e){return this.Qh(TC,e)}sa(e,n){return this.kh.map(i=>i.jn(e,n)).filter(i=>i!==null)}us(){return[this.rr,...this.bh.map(e=>e._r())]}Ws(e,n){if(n!==this.es&&!this.Gh())return[];const i=[...this.vs];for(const r of this.bh)i.push(r.ur());return this.kh.forEach(r=>{i.push(...r.Ws())}),i}cs(){const e=[];return this.kh.forEach(n=>{e.push(...n.cs())}),e}Mh(e,n){if(this.Ps.autoscaleInfoProvider!==void 0){const i=this.Ps.autoscaleInfoProvider(()=>{const r=this.na(e,n);return r===null?null:r.Xe()});return wl.Ze(i)}return this.na(e,n)}ea(){return this.Ps.priceFormat.minMove}ra(){return this.ha}Ns(){this.sh.kt();for(const e of this.vs)e.kt();for(const e of this.bh)e.kt();this.er.kt(),this.Sh.kt(),this.xh?.kt(),this.kh.forEach(e=>e.Ns())}Ft(){return W(super.Ft())}At(e){if(!((this.yh==="Line"||this.yh==="Area"||this.yh==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const n=this.Yt.yr(e);return n===null?null:{gt:n.Wt[3],ft:this.aa(),Ht:this.la(),Ot:this.oa(),Lt:this._a(e)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}ua(e){this.kh.push(new kC(e,this))}ca(e){this.kh=this.kh.filter(n=>n.oh()!==e)}da(){if(this.yh==="Custom")return e=>this.sh.fa(e)}pa(){if(this.yh==="Custom")return e=>this.sh.va(e)}ma(){return this.Yt.qr()}Gh(){return!Yl(this.Ft().wa())}na(e,n){if(!Ps(e)||!Ps(n)||this.Yt.Ki())return null;const i=this.yh==="Line"||this.yh==="Area"||this.yh==="Baseline"||this.yh==="Histogram"?[3]:[2,1],r=this.Yt.Ur(e,n,i);let s=r!==null?new ut(r.Jr,r.Qr):null,o=null;if(this.Rr()==="Histogram"){const l=this.Ps.base,a=new ut(l,l);s=s!==null?s.vn(a):a}return this.kh.forEach(l=>{const a=l.Mh(e,n);if(a?.priceRange){const c=new ut(a.priceRange.minValue,a.priceRange.maxValue);s=s!==null?s.vn(c):c}a?.margins&&(o=a.margins)}),new wl(s,o)}aa(){switch(this.yh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}la(){switch(this.yh){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}oa(){switch(this.yh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}_a(e){switch(this.yh){case"Line":case"Area":case"Baseline":{const n=this.Ps.crosshairMarkerBackgroundColor;if(n.length!==0)return n}}return this.Rh().Dr(e).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.ha={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(n=>n.map(e))};break}case"volume":this.ha=new tC(this.Ps.priceFormat.precision);break;case"percent":this.ha=new nv(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.ha=new Kl(e,this.Ps.priceFormat.minMove*e)}}this.es!==null&&this.es.ga()}Qh(e,n){const i=[];return Va(this.kh,e,n,i),i}}const AC=[3],PC=[0,1,2,3];class RC{constructor(e){this.Ps=e}Ma(e,n,i){let r=e;if(this.Ps.mode===0)return r;const s=i.ys(),o=s.zt();if(o===null)return r;const l=s.Nt(e,o),a=i.ba().filter(h=>h instanceof Gl).reduce((h,u)=>{if(i.Un(u)||!u.Vt())return h;const d=u.Ft(),f=u.Xs();if(d.Ki()||!f.Te(n))return h;const p=f.yr(n);if(p===null)return h;const g=zn(u.zt()),S=this.Ps.mode===3?PC:AC;return h.concat(S.map(m=>d.Nt(p.Wt[m],g.Wt)))},[]);if(a.length===0)return r;a.sort((h,u)=>Math.abs(h-l)-Math.abs(u-l));const c=a[0];return r=s.Ts(c,o),r}}function sr(t,e,n){return Math.min(Math.max(t,e),n)}function yo(t,e,n){return e-t<=n}class NC extends kn{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:i,verticalPixelRatio:r}){if(this.Yt===null)return;const s=Math.max(1,Math.floor(i));e.lineWidth=s,function(o,l){o.save(),o.lineWidth%2&&o.translate(.5,.5),l(),o.restore()}(e,()=>{const o=W(this.Yt);if(o.Sa){e.strokeStyle=o.xa,Ci(e,o.Ca),e.beginPath();for(const l of o.Pa){const a=Math.round(l.ka*i);e.moveTo(a,-s),e.lineTo(a,n.height+s)}e.stroke()}if(o.ya){e.strokeStyle=o.Ta,Ci(e,o.Ra),e.beginPath();for(const l of o.Da){const a=Math.round(l.ka*r);e.moveTo(-s,a),e.lineTo(n.width+s,a)}e.stroke()}})}}class IC{constructor(e){this.Gt=new NC,this.xt=!0,this.Pt=e}kt(){this.xt=!0}Tt(){if(this.xt){const e=this.Pt.Qt().N().grid,n={ya:e.horzLines.visible,Sa:e.vertLines.visible,Ta:e.horzLines.color,xa:e.vertLines.color,Ra:e.horzLines.style,Ca:e.vertLines.style,Da:this.Pt.ys().Va(),Pa:(this.Pt.Qt().Et().Va()||[]).map(i=>({ka:i.coord}))};this.Gt.ht(n),this.xt=!1}return this.Gt}}class MC{constructor(e){this.sh=new IC(e)}lr(){return this.sh}}const Wa={Ia:4,Ba:1e-4};function Qi(t,e){const n=100*(t-e)/e;return e<0?-n:n}function DC(t,e){const n=Qi(t.$e(),e),i=Qi(t.qe(),e);return new ut(n,i)}function is(t,e){const n=100*(t-e)/e+100;return e<0?-n:n}function OC(t,e){const n=is(t.$e(),e),i=is(t.qe(),e);return new ut(n,i)}function Sl(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const i=Math.log10(n+e.Ba)+e.Ia;return t<0?-i:i}function rs(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const i=Math.pow(10,n-e.Ia)-e.Ba;return t<0?-i:i}function zr(t,e){if(t===null)return null;const n=Sl(t.$e(),e),i=Sl(t.qe(),e);return new ut(n,i)}function Kr(t,e){if(t===null)return null;const n=rs(t.$e(),e),i=rs(t.qe(),e);return new ut(n,i)}function Ya(t){if(t===null)return Wa;const e=Math.abs(t.qe()-t.$e());if(e>=1||e<1e-15)return Wa;const n=Math.ceil(Math.abs(Math.log10(e))),i=Wa.Ia+n;return{Ia:i,Ba:1/Math.pow(10,i)}}class Ka{constructor(e,n){if(this.Ea=e,this.Aa=n,function(i){if(i<0)return!1;for(let r=i;r>1;r/=10)if(r%10!=0)return!1;return!0}(this.Ea))this.za=[2,2.5,2];else{this.za=[];for(let i=this.Ea;i!==1;){if(i%2==0)this.za.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.za.push(2,2.5),i/=5}if(this.za.length>100)throw new Error("something wrong with base")}}}La(e,n,i){const r=this.Ea===0?0:1/this.Ea;let s=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-n)))),o=0,l=this.Aa[0];for(;;){const u=yo(s,r,1e-14)&&s>r+1e-14,d=yo(s,i*l,1e-14),f=yo(s,1,1e-14);if(!(u&&d&&f))break;s/=l,l=this.Aa[++o%this.Aa.length]}if(s<=r+1e-14&&(s=r),s=Math.max(1,s),this.za.length>0&&(a=s,c=1,h=1e-14,Math.abs(a-c)<h))for(o=0,l=this.za[0];yo(s,i*l,1e-14)&&s>r+1e-14;)s/=l,l=this.za[++o%this.za.length];var a,c,h;return s}}class Bf{constructor(e,n,i,r){this.Oa=[],this.Yi=e,this.Ea=n,this.Na=i,this.Fa=r}La(e,n){if(e<n)throw new Error("high < low");const i=this.Yi.$t(),r=(e-n)*this.Wa()/i,s=new Ka(this.Ea,[2,2.5,2]),o=new Ka(this.Ea,[2,2,2.5]),l=new Ka(this.Ea,[2.5,2,2]),a=[];return a.push(s.La(e,n,r),o.La(e,n,r),l.La(e,n,r)),function(c){if(c.length<1)throw Error("array is empty");let h=c[0];for(let u=1;u<c.length;++u)c[u]<h&&(h=c[u]);return h}(a)}Ha(){const e=this.Yi,n=e.zt();if(n===null)return void(this.Oa=[]);const i=e.$t(),r=this.Na(i-1,n),s=this.Na(0,n),o=this.Yi.N().entireTextOnly?this.Ua()/2:0,l=o,a=i-1-o,c=Math.max(r,s),h=Math.min(r,s);if(c===h)return void(this.Oa=[]);const u=this.La(c,h);if(this.$a(n,u,c,h,l,a),e.qa()&&this.Ya(u,h,c)){const p=this.Yi.ja();this.Ka(n,u,l,a,p,2*p)}const d=this.Oa.map(p=>p.Xa),f=this.Yi.Za(d);for(let p=0;p<this.Oa.length;p++)this.Oa[p].Ga=f[p]}Va(){return this.Oa}Ua(){return this.Yi.P()}Wa(){return Math.ceil(2.5*this.Ua())}$a(e,n,i,r,s,o){const l=this.Oa,a=this.Yi;let c=i%n;c+=c<0?n:0;const h=i>=r?1:-1;let u=null,d=0;for(let f=i-c;f>r;f-=n){const p=this.Fa(f,e,!0);u!==null&&Math.abs(p-u)<this.Wa()||p<s||p>o||(d<l.length?(l[d].ka=p,l[d].Ga=a.Ja(f),l[d].Xa=f):l.push({ka:p,Ga:a.Ja(f),Xa:f}),d++,u=p,a.Qa()&&(n=this.La(f*h,r)))}l.length=d}Ka(e,n,i,r,s,o){const l=this.Oa,a=this.tl(e,i,s,o),c=this.tl(e,r,-o,-s),h=this.Fa(0,e,!0)-this.Fa(n,e,!0);l.length>0&&l[0].ka-a.ka<h/2&&l.shift(),l.length>0&&c.ka-l[l.length-1].ka<h/2&&l.pop(),l.unshift(a),l.push(c)}tl(e,n,i,r){const s=(i+r)/2,o=this.Na(n+i,e),l=this.Na(n+r,e),a=Math.min(o,l),c=Math.max(o,l),h=Math.max(.1,this.La(c,a)),u=this.Na(n+s,e),d=u-u%h,f=this.Fa(d,e,!0);return{Ga:this.Yi.Ja(d),ka:f,Xa:d}}Ya(e,n,i){let r=zn(this.Yi.Qe());return this.Yi.Qa()&&(r=Kr(r,this.Yi.il())),r.$e()-n<e&&i-r.qe()<e}}function av(t){return t.slice().sort((e,n)=>W(e.hs())-W(n.hs()))}var Vf;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(Vf||(Vf={}));const Hf=new nv,Wf=new Kl(100,1);class LC{constructor(e,n,i,r,s){this.sl=0,this.nl=null,this.Ge=null,this.el=null,this.rl={hl:!1,al:null},this.ll=!1,this.ol=0,this._l=0,this.ul=new Fe,this.cl=new Fe,this.dl=[],this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.wl=null,this.ha=Wf,this.gl=Ya(null),this.Ml=e,this.Ps=n,this.bl=i,this.Sl=r,this.xl=s,this.Cl=new Bf(this,100,this.Pl.bind(this),this.kl.bind(this))}wa(){return this.Ml}N(){return this.Ps}hr(e){if(Pt(this.Ps,e),this.ga(),e.mode!==void 0&&this.yl({ie:e.mode}),e.scaleMargins!==void 0){const n=Ct(e.scaleMargins.top),i=Ct(e.scaleMargins.bottom);if(n<0||n>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${n}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(n+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${n+i}`);this.Tl(),this.vl=null}}Rl(){return this.Ps.autoScale}Dl(){return this.ll}Qa(){return this.Ps.mode===1}Le(){return this.Ps.mode===2}Vl(){return this.Ps.mode===3}il(){return this.gl}ie(){return{sn:this.Ps.autoScale,Il:this.Ps.invertScale,ie:this.Ps.mode}}yl(e){const n=this.ie();let i=null;e.sn!==void 0&&(this.Ps.autoScale=e.sn),e.ie!==void 0&&(this.Ps.mode=e.ie,e.ie!==2&&e.ie!==3||(this.Ps.autoScale=!0),this.rl.hl=!1),n.ie===1&&e.ie!==n.ie&&(function(s,o){if(s===null)return!1;const l=rs(s.$e(),o),a=rs(s.qe(),o);return isFinite(l)&&isFinite(a)}(this.Ge,this.gl)?(i=Kr(this.Ge,this.gl),i!==null&&this.Bl(i)):this.Ps.autoScale=!0),e.ie===1&&e.ie!==n.ie&&(i=zr(this.Ge,this.gl),i!==null&&this.Bl(i));const r=n.ie!==this.Ps.mode;r&&(n.ie===2||this.Le())&&this.ga(),r&&(n.ie===3||this.Vl())&&this.ga(),e.Il!==void 0&&n.Il!==e.Il&&(this.Ps.invertScale=e.Il,this.El()),this.cl.p(n,this.ie())}Al(){return this.cl}P(){return this.bl.fontSize}$t(){return this.sl}zl(e){this.sl!==e&&(this.sl=e,this.Tl(),this.vl=null)}Ll(){if(this.nl)return this.nl;const e=this.$t()-this.Ol()-this.Nl();return this.nl=e,e}Qe(){return this.Fl(),this.Ge}Bl(e,n){const i=this.Ge;(n||i===null&&e!==null||i!==null&&!i.He(e))&&(this.vl=null,this.Ge=e)}Wl(e){this.Bl(e),this.Hl(e!==null)}Ki(){return this.Fl(),this.sl===0||!this.Ge||this.Ge.Ki()}Ul(e){return this.Il()?e:this.$t()-1-e}Nt(e,n){return this.Le()?e=Qi(e,n):this.Vl()&&(e=is(e,n)),this.kl(e,n)}$l(e,n,i){this.Fl();const r=this.Nl(),s=W(this.Qe()),o=s.$e(),l=s.qe(),a=this.Ll()-1,c=this.Il(),h=a/(l-o),u=i===void 0?0:i.from,d=i===void 0?e.length:i.to,f=this.ql();for(let p=u;p<d;p++){const g=e[p],S=g.gt;if(isNaN(S))continue;let m=S;f!==null&&(m=f(g.gt,n));const y=r+h*(m-o),w=c?y:this.sl-1-y;g.ut=w}}Yl(e,n,i){this.Fl();const r=this.Nl(),s=W(this.Qe()),o=s.$e(),l=s.qe(),a=this.Ll()-1,c=this.Il(),h=a/(l-o),u=i===void 0?0:i.from,d=i===void 0?e.length:i.to,f=this.ql();for(let p=u;p<d;p++){const g=e[p];let S=g.qh,m=g.Yh,y=g.jh,w=g.Kh;f!==null&&(S=f(g.qh,n),m=f(g.Yh,n),y=f(g.jh,n),w=f(g.Kh,n));let b=r+h*(S-o),A=c?b:this.sl-1-b;g.jl=A,b=r+h*(m-o),A=c?b:this.sl-1-b,g.Kl=A,b=r+h*(y-o),A=c?b:this.sl-1-b,g.Xl=A,b=r+h*(w-o),A=c?b:this.sl-1-b,g.Zl=A}}Ts(e,n){const i=this.Pl(e,n);return this.Gl(i,n)}Gl(e,n){let i=e;return this.Le()?i=function(r,s){return s<0&&(r=-r),r/100*s+s}(i,n):this.Vl()&&(i=function(r,s){return r-=100,s<0&&(r=-r),r/100*s+s}(i,n)),i}ba(){return this.dl}Dt(){return this.pl||(this.pl=av(this.dl)),this.pl}Jl(e){this.dl.indexOf(e)===-1&&(this.dl.push(e),this.ga(),this.Ql())}io(e){const n=this.dl.indexOf(e);if(n===-1)throw new Error("source is not attached to scale");this.dl.splice(n,1),this.dl.length===0&&(this.yl({sn:!0}),this.Bl(null)),this.ga(),this.Ql()}zt(){let e=null;for(const n of this.dl){const i=n.zt();i!==null&&(e===null||i.Hh<e.Hh)&&(e=i)}return e===null?null:e.Wt}Il(){return this.Ps.invertScale}Va(){const e=this.zt()===null;if(this.vl!==null&&(e||this.vl.so===e))return this.vl.Va;this.Cl.Ha();const n=this.Cl.Va();return this.vl={Va:n,so:e},this.ul.p(),n}no(){return this.ul}eo(e){this.Le()||this.Vl()||this.ml===null&&this.el===null&&(this.Ki()||(this.ml=this.sl-e,this.el=W(this.Qe()).Ue()))}ro(e){if(this.Le()||this.Vl()||this.ml===null)return;this.yl({sn:!1}),(e=this.sl-e)<0&&(e=0);let n=(this.ml+.2*(this.sl-1))/(e+.2*(this.sl-1));const i=W(this.el).Ue();n=Math.max(n,.1),i.je(n),this.Bl(i)}ho(){this.Le()||this.Vl()||(this.ml=null,this.el=null)}ao(e){this.Rl()||this.wl===null&&this.el===null&&(this.Ki()||(this.wl=e,this.el=W(this.Qe()).Ue()))}lo(e){if(this.Rl()||this.wl===null)return;const n=W(this.Qe()).Ye()/(this.Ll()-1);let i=e-this.wl;this.Il()&&(i*=-1);const r=i*n,s=W(this.el).Ue();s.Ke(r),this.Bl(s,!0),this.vl=null}oo(){this.Rl()||this.wl!==null&&(this.wl=null,this.el=null)}ra(){return this.ha||this.ga(),this.ha}Zi(e,n){switch(this.Ps.mode){case 2:return this._o(Qi(e,n));case 3:return this.ra().format(is(e,n));default:return this.nr(e)}}Ja(e){switch(this.Ps.mode){case 2:return this._o(e);case 3:return this.ra().format(e);default:return this.nr(e)}}Za(e){switch(this.Ps.mode){case 2:return this.uo(e);case 3:return this.ra().formatTickmarks(e);default:return this.co(e)}}Dh(e){return this.nr(e,W(this.fl).ra())}Vh(e,n){return e=Qi(e,n),this._o(e,Hf)}do(){return this.dl}fo(e){this.rl={al:e,hl:!1}}Ns(){this.dl.forEach(e=>e.Ns())}qa(){return this.Ps.ensureEdgeTickMarksVisible&&this.Rl()}ja(){return this.P()/2}ga(){this.vl=null;let e=1/0;this.fl=null;for(const i of this.dl)i.hs()<e&&(e=i.hs(),this.fl=i);let n=100;this.fl!==null&&(n=Math.round(1/this.fl.ea())),this.ha=Wf,this.Le()?(this.ha=Hf,n=100):this.Vl()?(this.ha=new Kl(100,1),n=100):this.fl!==null&&(this.ha=this.fl.ra()),this.Cl=new Bf(this,n,this.Pl.bind(this),this.kl.bind(this)),this.Cl.Ha()}Ql(){this.pl=null}Xi(){return this.xl}Hl(e){this.ll=e}Ol(){return this.Il()?this.Ps.scaleMargins.bottom*this.$t()+this._l:this.Ps.scaleMargins.top*this.$t()+this.ol}Nl(){return this.Il()?this.Ps.scaleMargins.top*this.$t()+this.ol:this.Ps.scaleMargins.bottom*this.$t()+this._l}Fl(){this.rl.hl||(this.rl.hl=!0,this.po())}Tl(){this.nl=null}kl(e,n){if(this.Fl(),this.Ki())return 0;e=this.Qa()&&e?Sl(e,this.gl):e;const i=W(this.Qe()),r=this.Nl()+(this.Ll()-1)*(e-i.$e())/i.Ye();return this.Ul(r)}Pl(e,n){if(this.Fl(),this.Ki())return 0;const i=this.Ul(e),r=W(this.Qe()),s=r.$e()+r.Ye()*((i-this.Nl())/(this.Ll()-1));return this.Qa()?rs(s,this.gl):s}El(){this.vl=null,this.Cl.Ha()}po(){if(this.Dl()&&!this.Rl())return;const e=this.rl.al;if(e===null)return;let n=null;const i=this.do();let r=0,s=0;for(const a of i){if(!a.Vt())continue;const c=a.zt();if(c===null)continue;const h=a.Mh(e.Uh(),e.bi());let u=h&&h.Qe();if(u!==null){switch(this.Ps.mode){case 1:u=zr(u,this.gl);break;case 2:u=DC(u,c.Wt);break;case 3:u=OC(u,c.Wt)}if(n=n===null?u:n.vn(W(u)),h!==null){const d=h.tr();d!==null&&(r=Math.max(r,d.above),s=Math.max(s,d.below))}}}if(this.qa()&&(r=Math.max(r,this.ja()),s=Math.max(s,this.ja())),r===this.ol&&s===this._l||(this.ol=r,this._l=s,this.vl=null,this.Tl()),n!==null){if(n.$e()===n.qe()){const a=this.fl,c=5*(a===null||this.Le()||this.Vl()?1:a.ea());this.Qa()&&(n=Kr(n,this.gl)),n=new ut(n.$e()-c,n.qe()+c),this.Qa()&&(n=zr(n,this.gl))}if(this.Qa()){const a=Kr(n,this.gl),c=Ya(a);if(o=c,l=this.gl,o.Ia!==l.Ia||o.Ba!==l.Ba){const h=this.el!==null?Kr(this.el,this.gl):null;this.gl=c,n=zr(a,c),h!==null&&(this.el=zr(h,c))}}this.Bl(n)}else this.Ge===null&&(this.Bl(new ut(-.5,.5)),this.gl=Ya(null));var o,l}ql(){return this.Le()?Qi:this.Vl()?is:this.Qa()?e=>Sl(e,this.gl):null}vo(e,n,i){return n===void 0?(i===void 0&&(i=this.ra()),i.format(e)):n(e)}mo(e,n,i){return n===void 0?(i===void 0&&(i=this.ra()),i.formatTickmarks(e)):n(e)}nr(e,n){return this.vo(e,this.Sl.priceFormatter,n)}co(e,n){const i=this.Sl.priceFormatter;return this.mo(e,this.Sl.tickmarksPriceFormatter??(i?r=>r.map(i):void 0),n)}_o(e,n){return this.vo(e,this.Sl.percentageFormatter,n)}uo(e,n){const i=this.Sl.percentageFormatter;return this.mo(e,this.Sl.tickmarksPercentageFormatter??(i?r=>r.map(i):void 0),n)}}function Yf(t){return t instanceof Gl}class Kf{constructor(e,n){this.dl=[],this.wo=new Map,this.sl=0,this.Mo=0,this.bo=1,this.pl=null,this.So=!1,this.xo=new Fe,this.kh=[],this.uh=e,this.ts=n,this.Co=new MC(this);const i=n.N();this.Po=this.ko("left",i.leftPriceScale),this.yo=this.ko("right",i.rightPriceScale),this.Po.Al().i(this.To.bind(this,this.Po),this),this.yo.Al().i(this.To.bind(this,this.yo),this),this.Ro(i)}Ro(e){if(e.leftPriceScale&&this.Po.hr(e.leftPriceScale),e.rightPriceScale&&this.yo.hr(e.rightPriceScale),e.localization&&(this.Po.ga(),this.yo.ga()),e.overlayPriceScales){const n=Array.from(this.wo.values());for(const i of n){const r=W(i[0].Ft());r.hr(e.overlayPriceScales),e.localization&&r.ga()}}}Do(e){switch(e){case"left":return this.Po;case"right":return this.yo}return this.wo.has(e)?Ct(this.wo.get(e))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.Al().u(this),this.yo.Al().u(this),this.dl.forEach(e=>{e.m&&e.m()}),this.kh=this.kh.filter(e=>{const n=e.oh();return n.detached&&n.detached(),!1}),this.xo.p()}Io(){return this.bo}Bo(e){this.bo=e}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.sl}Eo(e){this.Mo=e,this.Ao()}zl(e){this.sl=e,this.Po.zl(e),this.yo.zl(e),this.dl.forEach(n=>{if(this.Un(n)){const i=n.Ft();i!==null&&i.zl(e)}}),this.Ao()}zo(e){this.So=e}Lo(){return this.So}Oo(){return this.dl.filter(Yf)}ba(){return this.dl}Un(e){const n=e.Ft();return n===null||this.Po!==n&&this.yo!==n}Jl(e,n,i){this.No(e,n,i?e.hs():this.dl.length)}io(e,n){const i=this.dl.indexOf(e);Qe(i!==-1,"removeDataSource: invalid data source"),this.dl.splice(i,1),n||this.dl.forEach((o,l)=>o.ls(l));const r=W(e.Ft()).wa();if(this.wo.has(r)){const o=Ct(this.wo.get(r)),l=o.indexOf(e);l!==-1&&(o.splice(l,1),o.length===0&&this.wo.delete(r))}const s=e.Ft();s&&s.ba().indexOf(e)>=0&&(s.io(e),this.Fo(s)),this.pl=null}qn(e){return e===this.Po?"left":e===this.yo?"right":"overlay"}Wo(){return this.Po}Ho(){return this.yo}Uo(e,n){e.eo(n)}$o(e,n){e.ro(n),this.Ao()}qo(e){e.ho()}Yo(e,n){e.ao(n)}jo(e,n){e.lo(n),this.Ao()}Ko(e){e.oo()}Ao(){this.dl.forEach(e=>{e.Ns()})}ys(){let e=null;return this.ts.N().rightPriceScale.visible&&this.yo.ba().length!==0?e=this.yo:this.ts.N().leftPriceScale.visible&&this.Po.ba().length!==0?e=this.Po:this.dl.length!==0&&(e=this.dl[0].Ft()),e===null&&(e=this.yo),e}$n(){let e=null;return this.ts.N().rightPriceScale.visible?e=this.yo:this.ts.N().leftPriceScale.visible&&(e=this.Po),e}Fo(e){e!==null&&e.Rl()&&this.Xo(e)}Zo(e){const n=this.uh.Pe();e.yl({sn:!0}),n!==null&&e.fo(n),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.yo)}Jo(){this.Fo(this.Po),this.Fo(this.yo),this.dl.forEach(e=>{this.Un(e)&&this.Fo(e.Ft())}),this.Ao(),this.ts.ar()}Dt(){return this.pl===null&&(this.pl=av(this.dl)),this.pl}Qo(e,n){n=sr(n,0,this.dl.length-1);const i=this.dl.indexOf(e);Qe(i!==-1,"setSeriesOrder: invalid data source"),this.dl.splice(i,1),this.dl.splice(n,0,e),this.dl.forEach((r,s)=>r.ls(s)),this.pl=null;for(const r of[this.Po,this.yo])r.Ql(),r.ga();this.ts.ar()}It(){return this.Dt().filter(Yf)}t_(){return this.xo}i_(){return this.Co}ua(e){this.kh.push(new SC(e))}ca(e){this.kh=this.kh.filter(n=>n.oh()!==e),e.detached&&e.detached(),this.ts.ar()}s_(){return this.kh}sa(e,n){return this.kh.map(i=>i.jn(e,n)).filter(i=>i!==null)}Xo(e){const n=e.do();if(n&&n.length>0&&!this.uh.Ki()){const i=this.uh.Pe();i!==null&&e.fo(i)}e.Ns()}No(e,n,i){let r=this.Do(n);if(r===null&&(r=this.ko(n,this.ts.N().overlayPriceScales)),this.dl.splice(i,0,e),!Yl(n)){const s=this.wo.get(n)||[];s.push(e),this.wo.set(n,s)}e.ls(i),r.Jl(e),e._s(r),this.Fo(r),this.pl=null}To(e,n,i){n.ie!==i.ie&&this.Xo(e)}ko(e,n){const i={visible:!0,autoScale:!0,...gn(n)},r=new LC(e,i,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return r.zl(this.$t()),r}}function vo(t){return{n_:t.n_,e_:{Kn:t.r_.externalId},h_:t.r_.cursorStyle}}function FC(t,e,n,i){for(const r of t){const s=r.Tt(i);if(s!==null&&s.jn){const o=s.jn(e,n);if(o!==null)return{a_:r,e_:o}}}return null}function zC(t){return t.Fs!==void 0}function cv(t,e,n){const i=[t,...t.Dt()],r=function(s,o,l){let a,c;for(const d of s){const f=d.sa?.(o,l)??[];for(const p of f)h=p.zOrder,u=a?.zOrder,(!u||h==="top"&&u!=="top"||h==="normal"&&u==="bottom")&&(a=p,c=d)}var h,u;return a&&c?{r_:a,n_:c}:null}(i,e,n);if(r?.r_.zOrder==="top")return vo(r);for(const s of i){if(r&&r.n_===s&&r.r_.zOrder!=="bottom"&&!r.r_.isBackground)return vo(r);if(zC(s)){const o=FC(s.Fs(t),e,n,t);if(o!==null)return{n_:s,a_:o.a_,e_:o.e_}}if(r&&r.n_===s&&r.r_.zOrder!=="bottom"&&r.r_.isBackground)return vo(r)}return r?.r_?vo(r):null}class UC{constructor(e,n,i=50){this.kn=0,this.yn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=e,this.o_=n,this.Vn=i}__(e){const n=e.time,i=this.o_.cacheKey(n),r=this.Dn.get(i);if(r!==void 0)return r.u_;if(this.kn===this.Vn){const o=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(Ct(o)),this.Tn++,this.kn--}const s=this.l_(e);return this.Dn.set(i,{u_:s,An:this.yn}),this.Rn.set(this.yn,i),this.kn++,this.yn++,s}}class ss{constructor(e,n){Qe(e<=n,"right should be >= left"),this.c_=e,this.d_=n}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(e){return this.c_<=e&&e<=this.d_}He(e){return this.c_===e.Uh()&&this.d_===e.bi()}}function Gf(t,e){return t===null||e===null?t===e:t.He(e)}class $C{constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(e){this.v_=e,this.Dn=null}w_(e,n){this.g_(n),this.Dn=null;for(let i=n;i<e.length;++i){const r=e[i];let s=this.p_.get(r.timeWeight);s===void 0&&(s=[],this.p_.set(r.timeWeight,s)),s.push({index:i,time:r.time,weight:r.timeWeight,originalTime:r.originalTime})}}M_(e,n,i,r,s){const o=Math.ceil(n/e);return this.Dn!==null&&this.Dn.b_===o&&s===this.Dn.S_&&i===this.Dn.x_||(this.Dn={S_:s,x_:i,Va:this.C_(o,i,r),b_:o}),this.Dn.Va}g_(e){if(e===0)return void this.p_.clear();const n=[];this.p_.forEach((i,r)=>{e<=i[0].index?n.push(r):i.splice(gr(i,e,s=>s.index<e),1/0)});for(const i of n)this.p_.delete(i)}C_(e,n,i){let r=[];const s=o=>!n||i.has(o.index);for(const o of Array.from(this.p_.keys()).sort((l,a)=>a-l)){if(!this.p_.get(o))continue;const l=r;r=[];const a=l.length;let c=0;const h=Ct(this.p_.get(o)),u=h.length;let d=1/0,f=-1/0;for(let p=0;p<u;p++){const g=h[p],S=g.index;for(;c<a;){const m=l[c],y=m.index;if(!(y<S&&s(m))){d=y;break}c++,r.push(m),f=y,d=1/0}if(d-S>=e&&S-f>=e&&s(g))r.push(g),f=S;else if(this.v_)return l}for(;c<a;c++)s(l[c])&&r.push(l[c])}return r}}class or{constructor(e){this.P_=e}k_(){return this.P_===null?null:new ss(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}y_(){return this.P_}static T_(){return new or(null)}}function jC(t,e){return t.weight>e.weight?t:e}class BC{constructor(e,n,i,r){this.Mo=0,this.R_=null,this.D_=[],this.wl=null,this.ml=null,this.V_=new $C,this.I_=new Map,this.B_=or.T_(),this.E_=!0,this.A_=new Fe,this.z_=new Fe,this.L_=new Fe,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=n,this.Sl=i,this.U_=n.rightOffset,this.q_=n.barSpacing,this.ts=e,this.o_=r,this.Y_(),this.V_.m_(n.uniformDistribution),this.j_()}N(){return this.Ps}K_(e){Pt(this.Sl,e),this.X_(),this.Y_()}hr(e,n){Pt(this.Ps,e),this.Ps.fixLeftEdge&&this.Z_(),this.Ps.fixRightEdge&&this.G_(),e.barSpacing!==void 0&&this.ts.dn(e.barSpacing),e.rightOffset!==void 0&&this.ts.fn(e.rightOffset),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ts.dn(e.barSpacing??this.q_),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.j_(),this.X_(),this.Y_(),this.L_.p()}Rs(e){return this.D_[e]?.time??null}ss(e){return this.D_[e]??null}J_(e,n){if(this.D_.length<1)return null;if(this.o_.key(e)>this.o_.key(this.D_[this.D_.length-1].time))return n?this.D_.length-1:null;const i=gr(this.D_,this.o_.key(e),(r,s)=>this.o_.key(r.time)<s);return this.o_.key(e)<this.o_.key(this.D_[i].time)?n?i:null:i}Ki(){return this.Mo===0||this.D_.length===0||this.R_===null}Q_(){return this.D_.length>0}Pe(){return this.tu(),this.B_.k_()}iu(){return this.tu(),this.B_.y_()}su(){const e=this.Pe();if(e===null)return null;const n={from:e.Uh(),to:e.bi()};return this.nu(n)}nu(e){const n=Math.round(e.from),i=Math.round(e.to),r=W(this.eu()),s=W(this.ru());return{from:W(this.ss(Math.max(r,n))),to:W(this.ss(Math.min(s,i)))}}hu(e){return{from:W(this.J_(e.from,!0)),to:W(this.J_(e.to,!0))}}Qi(){return this.Mo}Eo(e){if(!isFinite(e)||e<=0||this.Mo===e)return;const n=this.iu(),i=this.Mo;if(this.Mo=e,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&i!==0){const r=this.q_*e/i;this.q_=r}if(this.Ps.fixLeftEdge&&n!==null&&n.Uh()<=0){const r=i-e;this.U_-=Math.round(r/this.q_)+1,this.E_=!0}this.au(),this.lu()}qt(e){if(this.Ki()||!Ps(e))return 0;const n=this.ou()+this.U_-e;return this.Mo-(n+.5)*this.q_-1}_u(e,n){const i=this.ou(),r=n===void 0?0:n.from,s=n===void 0?e.length:n.to;for(let o=r;o<s;o++){const l=e[o].wt,a=i+this.U_-l,c=this.Mo-(a+.5)*this.q_-1;e[o]._t=c}}uu(e,n){const i=Math.ceil(this.cu(e));return n&&this.Ps.ignoreWhitespaceIndices&&!this.du(i)?this.fu(i):i}fn(e){this.E_=!0,this.U_=e,this.lu(),this.ts.pu(),this.ts.ar()}vu(){return this.q_}dn(e){this.mu(e),this.lu(),this.ts.pu(),this.ts.ar()}wu(){return this.U_}Va(){if(this.Ki())return null;if(this.N_!==null)return this.N_;const e=this.q_,n=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),i=Math.round(n/e),r=W(this.Pe()),s=Math.max(r.Uh(),r.Uh()-i),o=Math.max(r.bi(),r.bi()-i),l=this.V_.M_(e,n,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),a=this.eu()+i,c=this.ru()-i,h=this.gu(),u=this.Ps.fixLeftEdge||h,d=this.Ps.fixRightEdge||h;let f=0;for(const p of l){if(!(s<=p.index&&p.index<=o))continue;let g;f<this.H_.length?(g=this.H_[f],g.coord=this.qt(p.index),g.label=this.Mu(p),g.weight=p.weight):(g={needAlignCoordinate:!1,coord:this.qt(p.index),label:this.Mu(p),weight:p.weight},this.H_.push(g)),this.q_>n/2&&!h?g.needAlignCoordinate=!1:g.needAlignCoordinate=u&&p.index<=a||d&&p.index>=c,f++}return this.H_.length=f,this.N_=this.H_,this.H_}bu(){this.E_=!0,this.dn(this.Ps.barSpacing),this.fn(this.Ps.rightOffset)}Su(e){this.E_=!0,this.R_=e,this.lu(),this.Z_()}xu(e,n){const i=this.cu(e),r=this.vu(),s=r+n*(r/10);this.dn(s),this.Ps.rightBarStaysOnScroll||this.fn(this.wu()+(i-this.cu(e)))}eo(e){this.wl&&this.oo(),this.ml===null&&this.O_===null&&(this.Ki()||(this.ml=e,this.Cu()))}ro(e){if(this.O_===null)return;const n=sr(this.Mo-e,0,this.Mo),i=sr(this.Mo-W(this.ml),0,this.Mo);n!==0&&i!==0&&this.dn(this.O_.vu*n/i)}ho(){this.ml!==null&&(this.ml=null,this.Pu())}ao(e){this.wl===null&&this.O_===null&&(this.Ki()||(this.wl=e,this.Cu()))}lo(e){if(this.wl===null)return;const n=(this.wl-e)/this.vu();this.U_=W(this.O_).wu+n,this.E_=!0,this.lu()}oo(){this.wl!==null&&(this.wl=null,this.Pu())}ku(){this.yu(this.Ps.rightOffset)}yu(e,n=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(n)||n<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.U_,r=performance.now();this.ts._n({Tu:s=>(s-r)/n>=1,Ru:s=>{const o=(s-r)/n;return o>=1?e:i+(e-i)*o}})}kt(e,n){this.E_=!0,this.D_=e,this.V_.w_(e,n),this.lu()}Du(){return this.A_}Vu(){return this.z_}Iu(){return this.L_}ou(){return this.R_||0}Bu(e){const n=e.f_();this.mu(this.Mo/n),this.U_=e.bi()-this.ou(),this.lu(),this.E_=!0,this.ts.pu(),this.ts.ar()}Eu(){const e=this.eu(),n=this.ru();e!==null&&n!==null&&this.Bu(new ss(e,n+this.Ps.rightOffset))}Au(e){const n=new ss(e.from,e.to);this.Bu(n)}ns(e){return this.Sl.timeFormatter!==void 0?this.Sl.timeFormatter(e.originalTime):this.o_.formatHorzItem(e.time)}j_(){if(!this.Ps.ignoreWhitespaceIndices)return;this.F_.clear();const e=this.ts.js();for(const n of e)for(const i of n.ma())this.F_.set(i,!0);this.W_++}gu(){const e=this.ts.N().handleScroll,n=this.ts.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||n.axisDoubleClickReset.time||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)}eu(){return this.D_.length===0?null:0}ru(){return this.D_.length===0?null:this.D_.length-1}zu(e){return(this.Mo-1-e)/this.q_}cu(e){const n=this.zu(e),i=this.ou()+this.U_-n;return Math.round(1e6*i)/1e6}mu(e){const n=this.q_;this.q_=e,this.au(),n!==this.q_&&(this.E_=!0,this.Lu())}tu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Ou(or.T_());const e=this.ou(),n=this.Mo/this.q_,i=this.U_+e,r=new ss(i-n+1,i);this.Ou(new or(r))}au(){const e=sr(this.q_,this.Nu(),this.Fu());this.q_!==e&&(this.q_=e,this.E_=!0)}Fu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Nu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.D_.length!==0?this.Mo/this.D_.length:this.Ps.minBarSpacing}lu(){const e=this.Wu();e!==null&&this.U_<e&&(this.U_=e,this.E_=!0);const n=this.Hu();this.U_>n&&(this.U_=n,this.E_=!0)}Wu(){const e=this.eu(),n=this.R_;return e===null||n===null?null:e-n-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Hu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Cu(){this.O_={vu:this.vu(),wu:this.wu()}}Pu(){this.O_=null}Mu(e){let n=this.I_.get(e.weight);return n===void 0&&(n=new UC(i=>this.Uu(i),this.o_),this.I_.set(e.weight,n)),n.__(e)}Uu(e){return this.o_.formatTickmark(e,this.Sl)}Ou(e){const n=this.B_;this.B_=e,Gf(n.k_(),this.B_.k_())||this.A_.p(),Gf(n.y_(),this.B_.y_())||this.z_.p(),this.Lu()}Lu(){this.N_=null}X_(){this.Lu(),this.I_.clear()}Y_(){this.o_.updateFormatter(this.Sl)}Z_(){if(!this.Ps.fixLeftEdge)return;const e=this.eu();if(e===null)return;const n=this.Pe();if(n===null)return;const i=n.Uh()-e;if(i<0){const r=this.U_-i-1;this.fn(r)}this.au()}G_(){this.lu(),this.au()}du(e){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(e)||!1}fu(e){const n=function*(r){const s=Math.round(r),o=s<r;let l=1;for(;;)o?(yield s+l,yield s-l):(yield s-l,yield s+l),l++}(e),i=this.ru();for(;i;){const r=n.next().value;if(this.F_.get(r))return r;if(r<0||r>i)break}return e}}var qf,Qf,Xf,xl,Jf;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(qf||(qf={}));class VC{constructor(e,n,i){this.$u=[],this.qu=[],this.Mo=0,this.Yu=null,this.ju=new Fe,this.Ku=new Fe,this.Xu=null,this.Zu=e,this.Ps=n,this.o_=i,this.xl=new Vx(this.Ps.layout.colorParsers),this.Gu=new Bx(this),this.uh=new BC(this,n.timeScale,this.Ps.localization,i),this.Ct=new eC(this,n.crosshair),this.Ju=new RC(n.crosshair),n.addDefaultPane&&(this.Qu(0),this.$u[0].Bo(2)),this.tc=this.sc(0),this.nc=this.sc(1)}Bh(){this.ec(qe.gn())}ar(){this.ec(qe.wn())}Zh(){this.ec(new qe(1))}Eh(e){const n=this.rc(e);this.ec(n)}hc(){return this.Yu}ac(e){if(this.Yu?.n_===e?.n_&&this.Yu?.e_?.Kn===e?.e_?.Kn)return;const n=this.Yu;this.Yu=e,n!==null&&this.Eh(n.n_),e!==null&&e.n_!==n?.n_&&this.Eh(e.n_)}N(){return this.Ps}hr(e){Pt(this.Ps,e),this.$u.forEach(n=>n.Ro(e)),e.timeScale!==void 0&&this.uh.hr(e.timeScale),e.localization!==void 0&&this.uh.K_(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.ju.p(),this.tc=this.sc(0),this.nc=this.sc(1),this.Bh()}lc(e,n,i=0){const r=this.$u[i];if(r===void 0)return;if(e==="left")return Pt(this.Ps,{leftPriceScale:n}),r.Ro({leftPriceScale:n}),this.ju.p(),void this.Bh();if(e==="right")return Pt(this.Ps,{rightPriceScale:n}),r.Ro({rightPriceScale:n}),this.ju.p(),void this.Bh();const s=this.oc(e,i);s!==null&&(s.Ft.hr(n),this.ju.p())}oc(e,n){const i=this.$u[n];if(i===void 0)return null;const r=i.Do(e);return r!==null?{Us:i,Ft:r}:null}Et(){return this.uh}$s(){return this.$u}_c(){return this.Ct}uc(){return this.Ku}cc(e,n){e.zl(n),this.pu()}Eo(e){this.Mo=e,this.uh.Eo(this.Mo),this.$u.forEach(n=>n.Eo(e)),this.pu()}dc(e){this.$u.length!==1&&(Qe(e>=0&&e<this.$u.length,"Invalid pane index"),this.$u.splice(e,1),this.Bh())}fc(e,n){if(this.$u.length<2)return;Qe(e>=0&&e<this.$u.length,"Invalid pane index");const i=this.$u[e],r=this.$u.reduce((u,d)=>u+d.Io(),0),s=this.$u.reduce((u,d)=>u+d.$t(),0),o=s-30*(this.$u.length-1);n=Math.min(o,Math.max(30,n));const l=r/s,a=i.$t();i.Bo(n*l);let c=n-a,h=this.$u.length-1;for(const u of this.$u)if(u!==i){const d=Math.min(o,Math.max(30,u.$t()-c/h));c-=u.$t()-d,h-=1;const f=d*l;u.Bo(f)}this.Bh()}vc(e,n){Qe(e>=0&&e<this.$u.length&&n>=0&&n<this.$u.length,"Invalid pane index");const i=this.$u[e],r=this.$u[n];this.$u[e]=r,this.$u[n]=i,this.Bh()}mc(e,n){if(Qe(e>=0&&e<this.$u.length&&n>=0&&n<this.$u.length,"Invalid pane index"),e===n)return;const[i]=this.$u.splice(e,1);this.$u.splice(n,0,i),this.Bh()}Uo(e,n,i){e.Uo(n,i)}$o(e,n,i){e.$o(n,i),this.Ah(),this.ec(this.wc(e,2))}qo(e,n){e.qo(n),this.ec(this.wc(e,2))}Yo(e,n,i){n.Rl()||e.Yo(n,i)}jo(e,n,i){n.Rl()||(e.jo(n,i),this.Ah(),this.ec(this.wc(e,2)))}Ko(e,n){n.Rl()||(e.Ko(n),this.ec(this.wc(e,2)))}Zo(e,n){e.Zo(n),this.ec(this.wc(e,2))}gc(e){this.uh.eo(e)}Mc(e,n){const i=this.Et();if(i.Ki()||n===0)return;const r=i.Qi();e=Math.max(1,Math.min(e,r)),i.xu(e,n),this.pu()}bc(e){this.Sc(0),this.xc(e),this.Cc()}Pc(e){this.uh.ro(e),this.pu()}kc(){this.uh.ho(),this.ar()}Sc(e){this.uh.ao(e)}xc(e){this.uh.lo(e),this.pu()}Cc(){this.uh.oo(),this.ar()}js(){return this.qu}yc(e,n,i,r,s){this.Ct.Vs(e,n);let o=NaN,l=this.uh.uu(e,!0);const a=this.uh.Pe();a!==null&&(l=Math.min(Math.max(a.Uh(),l),a.bi()));const c=r.ys(),h=c.zt();if(h!==null&&(o=c.Ts(n,h)),o=this.Ju.Ma(o,l,r),this.Ct.As(l,o,r),this.Zh(),!s){const u=cv(r,e,n);this.ac(u&&{n_:u.n_,e_:u.e_,h_:u.h_||null}),this.Ku.p(this.Ct.Bt(),{x:e,y:n},i)}}Tc(e,n,i){const r=i.ys(),s=r.zt(),o=r.Nt(e,W(s)),l=this.uh.J_(n,!0),a=this.uh.qt(W(l));this.yc(a,o,null,i,!0)}Rc(e){this._c().Ls(),this.Zh(),e||this.Ku.p(null,null,null)}Ah(){const e=this.Ct.Us();if(e!==null){const n=this.Ct.Bs(),i=this.Ct.Es();this.yc(n,i,null,e)}this.Ct.Ns()}Dc(e,n,i){const r=this.uh.Rs(0);n!==void 0&&i!==void 0&&this.uh.kt(n,i);const s=this.uh.Rs(0),o=this.uh.ou(),l=this.uh.Pe();if(l!==null&&r!==null&&s!==null){const a=l.Te(o),c=this.o_.key(r)>this.o_.key(s),h=e!==null&&e>o&&!c,u=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,d=a&&(i!==void 0||u)&&this.uh.N().shiftVisibleRangeOnNewBar;if(h&&!d){const f=e-o;this.uh.fn(this.uh.wu()-f)}}this.uh.Su(e)}Lh(e){e!==null&&e.Jo()}Hn(e){if(function(i){return i instanceof Kf}(e))return e;const n=this.$u.find(i=>i.Dt().includes(e));return n===void 0?null:n}pu(){this.$u.forEach(e=>e.Jo()),this.Ah()}m(){this.$u.forEach(e=>e.m()),this.$u.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Vc(){return this.Gu}Yn(){return this.Gu.N()}Vo(){return this.ju}Ic(e,n){const i=this.Qu(n);this.Bc(e,i),this.qu.push(e),this.qu.length===1?this.Bh():this.ar()}Ec(e){const n=this.Hn(e),i=this.qu.indexOf(e);Qe(i!==-1,"Series not found");const r=W(n);this.qu.splice(i,1),r.io(e),e.m&&e.m(),this.uh.j_(),this.Ac(r)}Ih(e,n){const i=W(this.Hn(e));i.io(e,!0),i.Jl(e,n,!0)}Eu(){const e=qe.wn();e.rn(),this.ec(e)}zc(e){const n=qe.wn();n.ln(e),this.ec(n)}cn(){const e=qe.wn();e.cn(),this.ec(e)}dn(e){const n=qe.wn();n.dn(e),this.ec(n)}fn(e){const n=qe.wn();n.fn(e),this.ec(n)}_n(e){const n=qe.wn();n._n(e),this.ec(n)}hn(){const e=qe.wn();e.hn(),this.ec(e)}Lc(){return this.Ps.rightPriceScale.visible?"right":"left"}Oc(e,n){if(Qe(n>=0,"Index should be greater or equal to 0"),n===this.Nc(e))return;const i=W(this.Hn(e));i.io(e);const r=this.Qu(n);this.Bc(e,r),i.ba().length===0&&this.Ac(i),this.Bh()}Fc(){return this.nc}$(){return this.tc}Ut(e){const n=this.nc,i=this.tc;if(n===i)return n;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Xu===null||this.Xu.mr!==i||this.Xu.wr!==n)this.Xu={mr:i,wr:n,Wc:new Map};else{const s=this.Xu.Wc.get(e);if(s!==void 0)return s}const r=this.xl.tt(i,n,e/100);return this.Xu.Wc.set(e,r),r}Hc(e){return this.$u.indexOf(e)}Xi(){return this.xl}Uc(){return this.$c()}$c(e){const n=new Kf(this.uh,this);this.$u.push(n);const i=e??this.$u.length-1,r=qe.gn();return r.Qs(i,{tn:0,sn:!0}),this.ec(r),n}Qu(e){return Qe(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.$u.length,e))<this.$u.length?this.$u[e]:this.$c(e)}Nc(e){return this.$u.findIndex(n=>n.Oo().includes(e))}wc(e,n){const i=new qe(n);if(e!==null){const r=this.$u.indexOf(e);i.Qs(r,{tn:n})}return i}rc(e,n){return n===void 0&&(n=2),this.wc(this.Hn(e),n)}ec(e){this.Zu&&this.Zu(e),this.$u.forEach(n=>n.i_().lr().kt())}Bc(e,n){const i=e.N().priceScaleId,r=i!==void 0?i:this.Lc();n.Jl(e,r),Yl(r)||e.hr(e.N())}sc(e){const n=this.Ps.layout;return n.background.type==="gradient"?e===0?n.background.topColor:n.background.bottomColor:n.background.color}Ac(e){!e.Lo()&&e.ba().length===0&&this.$u.length>1&&this.$u.splice(this.Hc(e),1)}}function vu(t){return!mr(t)&&!Us(t)}function uv(t){return mr(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(Qf||(Qf={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(Xf||(Xf={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(xl||(xl={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Jf||(Jf={}));const Zf=t=>t.getUTCFullYear();function HC(t,e,n){return e.replace(/yyyy/g,(i=>yn(Zf(i),4))(t)).replace(/yy/g,(i=>yn(Zf(i)%100,2))(t)).replace(/MMMM/g,((i,r)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(r,{month:"long"}))(t,n)).replace(/MMM/g,((i,r)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(r,{month:"short"}))(t,n)).replace(/MM/g,(i=>yn((r=>r.getUTCMonth()+1)(i),2))(t)).replace(/dd/g,(i=>yn((r=>r.getUTCDate())(i),2))(t))}class hv{constructor(e="yyyy-MM-dd",n="default"){this.qc=e,this.Yc=n}__(e){return HC(e,this.qc,this.Yc)}}class WC{constructor(e){this.jc=e||"%h:%m:%s"}__(e){return this.jc.replace("%h",yn(e.getUTCHours(),2)).replace("%m",yn(e.getUTCMinutes(),2)).replace("%s",yn(e.getUTCSeconds(),2))}}const YC={Kc:"yyyy-MM-dd",Xc:"%h:%m:%s",Zc:" ",Gc:"default"};class KC{constructor(e={}){const n={...YC,...e};this.Jc=new hv(n.Kc,n.Gc),this.Qc=new WC(n.Xc),this.td=n.Zc}__(e){return`${this.Jc.__(e)}${this.td}${this.Qc.__(e)}`}}function wo(t){return 60*t*60*1e3}function Ga(t){return 60*t*1e3}const So=[{sd:(ep=1,1e3*ep),nd:10},{sd:Ga(1),nd:20},{sd:Ga(5),nd:21},{sd:Ga(30),nd:22},{sd:wo(1),nd:30},{sd:wo(3),nd:31},{sd:wo(6),nd:32},{sd:wo(12),nd:33}];var ep;function tp(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let n=So.length-1;n>=0;--n)if(Math.floor(e.getTime()/So[n].sd)!==Math.floor(t.getTime()/So[n].sd))return So[n].nd;return 0}function qa(t){let e=t;if(Us(t)&&(e=zh(t)),!vu(e))throw new Error("time must be of type BusinessDay");const n=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{ed:Math.round(n.getTime()/1e3),rd:e}}function np(t){if(!uv(t))throw new Error("time must be of type isUTCTimestamp");return{ed:t}}function zh(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function ip(t){Us(t.time)&&(t.time=zh(t.time))}class rp{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(n){n.forEach(ip)}(e):ip(e)}createConverterToInternalObj(e){return W(function(n){return n.length===0?null:vu(n[0].time)||Us(n[0].time)?qa:np}(e))}key(e){return typeof e=="object"&&"ed"in e?e.ed:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const n=e;return n.rd===void 0?new Date(1e3*n.ed).getTime():new Date(Date.UTC(n.rd.year,n.rd.month-1,n.rd.day)).getTime()}convertHorzItemToInternal(e){return uv(n=e)?np(n):vu(n)?qa(n):qa(zh(n));var n}updateFormatter(e){if(!this.Ps)return;const n=e.dateFormat;this.Ps.timeScale.timeVisible?this.hd=new KC({Kc:n,Xc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Zc:"   ",Gc:e.locale}):this.hd=new hv(n,e.locale)}formatHorzItem(e){const n=e;return this.hd.__(new Date(1e3*n.ed))}formatTickmark(e,n){const i=function(s,o,l){switch(s){case 0:case 10:return o?l?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),r=this.Ps.timeScale;if(r.tickMarkFormatter!==void 0){const s=r.tickMarkFormatter(e.originalTime,i,n.locale);if(s!==null)return s}return function(s,o,l){const a={};switch(o){case 0:a.year="numeric";break;case 1:a.month="short";break;case 2:a.day="numeric";break;case 3:a.hour12=!1,a.hour="2-digit",a.minute="2-digit";break;case 4:a.hour12=!1,a.hour="2-digit",a.minute="2-digit",a.second="2-digit"}const c=s.rd===void 0?new Date(1e3*s.ed):new Date(Date.UTC(s.rd.year,s.rd.month-1,s.rd.day));return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()).toLocaleString(l,a)}(e.time,i,n.locale)}maxTickMarkWeight(e){let n=e.reduce(jC,e[0]).weight;return n>30&&n<50&&(n=30),n}fillWeightsForPoints(e,n){(function(i,r=0){if(i.length===0)return;let s=r===0?null:i[r-1].time.ed,o=s!==null?new Date(1e3*s):null,l=0;for(let a=r;a<i.length;++a){const c=i[a],h=new Date(1e3*c.time.ed);o!==null&&(c.timeWeight=tp(h,o)),l+=c.time.ed-(s||c.time.ed),s=c.time.ed,o=h}if(r===0&&i.length>1){const a=Math.ceil(l/(i.length-1)),c=new Date(1e3*(i[0].time.ed-a));i[0].timeWeight=tp(new Date(1e3*i[0].time.ed),c)}})(e,n)}static ad(e){return Pt({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const yr=typeof window<"u";function sp(){return!!yr&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Qa(){return!!yr&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function wu(t){return t+t%2}function GC(t){yr&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class ql{constructor(e,n,i){this.ld=0,this.od=null,this._d={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.ud=0,this.dd=null,this.fd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.pd=null,this.vd=!1,this.md=null,this.wd=null,this.gd=!1,this.Md=!1,this.bd=!1,this.Sd=null,this.xd=null,this.Cd=null,this.Pd=null,this.kd=null,this.yd=null,this.Td=null,this.Rd=0,this.Dd=!1,this.Vd=!1,this.Id=!1,this.Bd=0,this.Ed=null,this.Ad=!Qa(),this.zd=r=>{this.Ld(r)},this.Od=r=>{if(this.Nd(r)){const s=this.Fd(r);if(++this.ud,this.dd&&this.ud>1){const{Wd:o}=this.Hd(nn(r),this.fd);o<30&&!this.bd&&this.Ud(s,this.qd.$d),this.Yd()}}else{const s=this.Fd(r);if(++this.ld,this.od&&this.ld>1){const{Wd:o}=this.Hd(nn(r),this._d);o<5&&!this.Md&&this.jd(s,this.qd.Kd),this.Xd()}}},this.Zd=e,this.qd=n,this.Ps=i,this.Gd()}m(){this.Sd!==null&&(this.Sd(),this.Sd=null),this.xd!==null&&(this.xd(),this.xd=null),this.Pd!==null&&(this.Pd(),this.Pd=null),this.kd!==null&&(this.kd(),this.kd=null),this.yd!==null&&(this.yd(),this.yd=null),this.Cd!==null&&(this.Cd(),this.Cd=null),this.Jd(),this.Xd()}Qd(e){this.Pd&&this.Pd();const n=this.tf.bind(this);if(this.Pd=()=>{this.Zd.removeEventListener("mousemove",n)},this.Zd.addEventListener("mousemove",n),this.Nd(e))return;const i=this.Fd(e);this.jd(i,this.qd.if),this.Ad=!0}Xd(){this.od!==null&&clearTimeout(this.od),this.ld=0,this.od=null,this._d={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Yd(){this.dd!==null&&clearTimeout(this.dd),this.ud=0,this.dd=null,this.fd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}tf(e){if(this.Id||this.wd!==null||this.Nd(e))return;const n=this.Fd(e);this.jd(n,this.qd.sf),this.Ad=!0}nf(e){const n=Xa(e.changedTouches,W(this.Ed));if(n===null||(this.Bd=xo(e),this.Td!==null)||this.Vd)return;this.Dd=!0;const i=this.Hd(nn(n),W(this.wd)),{ef:r,rf:s,Wd:o}=i;if(this.gd||!(o<5)){if(!this.gd){const l=.5*r,a=s>=l&&!this.Ps.hf(),c=l>s&&!this.Ps.af();a||c||(this.Vd=!0),this.gd=!0,this.bd=!0,this.Jd(),this.Yd()}if(!this.Vd){const l=this.Fd(e,n);this.Ud(l,this.qd.lf),Mi(e)}}}_f(e){if(e.button!==0)return;const n=this.Hd(nn(e),W(this.md)),{Wd:i}=n;if(i>=5&&(this.Md=!0,this.Xd()),this.Md){const r=this.Fd(e);this.jd(r,this.qd.uf)}}Hd(e,n){const i=Math.abs(n._t-e._t),r=Math.abs(n.ut-e.ut);return{ef:i,rf:r,Wd:i+r}}cf(e){let n=Xa(e.changedTouches,W(this.Ed));if(n===null&&e.touches.length===0&&(n=e.changedTouches[0]),n===null)return;this.Ed=null,this.Bd=xo(e),this.Jd(),this.wd=null,this.yd&&(this.yd(),this.yd=null);const i=this.Fd(e,n);if(this.Ud(i,this.qd.df),++this.ud,this.dd&&this.ud>1){const{Wd:r}=this.Hd(nn(n),this.fd);r<30&&!this.bd&&this.Ud(i,this.qd.$d),this.Yd()}else this.bd||(this.Ud(i,this.qd.ff),this.qd.ff&&Mi(e));this.ud===0&&Mi(e),e.touches.length===0&&this.vd&&(this.vd=!1,Mi(e))}Ld(e){if(e.button!==0)return;const n=this.Fd(e);if(this.md=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),sp()&&this.Zd.ownerDocument.documentElement.removeEventListener("mouseleave",this.zd),!this.Nd(e))if(this.jd(n,this.qd.pf),++this.ld,this.od&&this.ld>1){const{Wd:i}=this.Hd(nn(e),this._d);i<5&&!this.Md&&this.jd(n,this.qd.Kd),this.Xd()}else this.Md||this.jd(n,this.qd.vf)}Jd(){this.pd!==null&&(clearTimeout(this.pd),this.pd=null)}mf(e){if(this.Ed!==null)return;const n=e.changedTouches[0];this.Ed=n.identifier,this.Bd=xo(e);const i=this.Zd.ownerDocument.documentElement;this.bd=!1,this.gd=!1,this.Vd=!1,this.wd=nn(n),this.yd&&(this.yd(),this.yd=null);{const s=this.nf.bind(this),o=this.cf.bind(this);this.yd=()=>{i.removeEventListener("touchmove",s),i.removeEventListener("touchend",o)},i.addEventListener("touchmove",s,{passive:!1}),i.addEventListener("touchend",o,{passive:!1}),this.Jd(),this.pd=setTimeout(this.wf.bind(this,e),240)}const r=this.Fd(e,n);this.Ud(r,this.qd.gf),this.dd||(this.ud=0,this.dd=setTimeout(this.Yd.bind(this),500),this.fd=nn(n))}Mf(e){if(e.button!==0)return;const n=this.Zd.ownerDocument.documentElement;sp()&&n.addEventListener("mouseleave",this.zd),this.Md=!1,this.md=nn(e),this.kd&&(this.kd(),this.kd=null);{const r=this._f.bind(this),s=this.Ld.bind(this);this.kd=()=>{n.removeEventListener("mousemove",r),n.removeEventListener("mouseup",s)},n.addEventListener("mousemove",r),n.addEventListener("mouseup",s)}if(this.Id=!0,this.Nd(e))return;const i=this.Fd(e);this.jd(i,this.qd.bf),this.od||(this.ld=0,this.od=setTimeout(this.Xd.bind(this),500),this._d=nn(e))}Gd(){this.Zd.addEventListener("mouseenter",this.Qd.bind(this)),this.Zd.addEventListener("touchcancel",this.Jd.bind(this));{const e=this.Zd.ownerDocument,n=i=>{this.qd.Sf&&(i.composed&&this.Zd.contains(i.composedPath()[0])||i.target&&this.Zd.contains(i.target)||this.qd.Sf())};this.xd=()=>{e.removeEventListener("touchstart",n)},this.Sd=()=>{e.removeEventListener("mousedown",n)},e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0})}Qa()&&(this.Cd=()=>{this.Zd.removeEventListener("dblclick",this.Od)},this.Zd.addEventListener("dblclick",this.Od)),this.Zd.addEventListener("mouseleave",this.xf.bind(this)),this.Zd.addEventListener("touchstart",this.mf.bind(this),{passive:!0}),GC(this.Zd),this.Zd.addEventListener("mousedown",this.Mf.bind(this)),this.Cf(),this.Zd.addEventListener("touchmove",()=>{},{passive:!1})}Cf(){this.qd.Pf===void 0&&this.qd.kf===void 0&&this.qd.yf===void 0||(this.Zd.addEventListener("touchstart",e=>this.Tf(e.touches),{passive:!0}),this.Zd.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Td!==null&&this.qd.kf!==void 0){const n=op(e.touches[0],e.touches[1])/this.Rd;this.qd.kf(this.Td,n),Mi(e)}},{passive:!1}),this.Zd.addEventListener("touchend",e=>{this.Tf(e.touches)}))}Tf(e){e.length===1&&(this.Dd=!1),e.length!==2||this.Dd||this.vd?this.Rf():this.Df(e)}Df(e){const n=this.Zd.getBoundingClientRect()||{left:0,top:0};this.Td={_t:(e[0].clientX-n.left+(e[1].clientX-n.left))/2,ut:(e[0].clientY-n.top+(e[1].clientY-n.top))/2},this.Rd=op(e[0],e[1]),this.qd.Pf!==void 0&&this.qd.Pf(),this.Jd()}Rf(){this.Td!==null&&(this.Td=null,this.qd.yf!==void 0&&this.qd.yf())}xf(e){if(this.Pd&&this.Pd(),this.Nd(e)||!this.Ad)return;const n=this.Fd(e);this.jd(n,this.qd.Vf),this.Ad=!Qa()}wf(e){const n=Xa(e.touches,W(this.Ed));if(n===null)return;const i=this.Fd(e,n);this.Ud(i,this.qd.If),this.bd=!0,this.vd=!0}Nd(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:xo(e)<this.Bd+500}Ud(e,n){n&&n.call(this.qd,e)}jd(e,n){n&&n.call(this.qd,e)}Fd(e,n){const i=n||e,r=this.Zd.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-r.left,localY:i.clientY-r.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Bf:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Ef:e.type,Af:i.target,a_:e.view,zf:()=>{e.type!=="touchstart"&&Mi(e)}}}}function op(t,e){const n=t.clientX-e.clientX,i=t.clientY-e.clientY;return Math.sqrt(n*n+i*i)}function Mi(t){t.cancelable&&t.preventDefault()}function nn(t){return{_t:t.pageX,ut:t.pageY}}function xo(t){return t.timeStamp||performance.now()}function Xa(t,e){for(let n=0;n<t.length;++n)if(t[n].identifier===e)return t[n];return null}class qC{constructor(e,n,i){this.Lf=null,this.Of=null,this.Nf=!0,this.Ff=null,this.Wf=e,this.Hf=e.Uf()[n],this.$f=e.Uf()[i],this.qf=document.createElement("tr"),this.qf.style.height="1px",this.Yf=document.createElement("td"),this.Yf.style.position="relative",this.Yf.style.padding="0",this.Yf.style.margin="0",this.Yf.setAttribute("colspan","3"),this.jf(),this.qf.appendChild(this.Yf),this.Nf=this.Wf.N().layout.panes.enableResize,this.Nf?this.Kf():(this.Lf=null,this.Of=null)}m(){this.Of!==null&&this.Of.m()}Xf(){return this.qf}Zf(){return we({width:this.Hf.Zf().width,height:1})}Gf(){return we({width:this.Hf.Gf().width,height:1*window.devicePixelRatio})}Jf(e,n,i){const r=this.Gf();e.fillStyle=this.Wf.N().layout.panes.separatorColor,e.fillRect(n,i,r.width,r.height)}kt(){this.jf(),this.Wf.N().layout.panes.enableResize!==this.Nf&&(this.Nf=this.Wf.N().layout.panes.enableResize,this.Nf?this.Kf():(this.Lf!==null&&(this.Yf.removeChild(this.Lf.Qf),this.Yf.removeChild(this.Lf.tp),this.Lf=null),this.Of!==null&&(this.Of.m(),this.Of=null)))}Kf(){const e=document.createElement("div"),n=e.style;n.position="fixed",n.display="none",n.zIndex="49",n.top="0",n.left="0",n.width="100%",n.height="100%",n.cursor="row-resize",this.Yf.appendChild(e);const i=document.createElement("div"),r=i.style;r.position="absolute",r.zIndex="50",r.top="-4px",r.height="9px",r.width="100%",r.backgroundColor="",r.cursor="row-resize",this.Yf.appendChild(i);const s={if:this.ip.bind(this),Vf:this.sp.bind(this),bf:this.np.bind(this),gf:this.np.bind(this),uf:this.ep.bind(this),lf:this.ep.bind(this),pf:this.rp.bind(this),df:this.rp.bind(this)};this.Of=new ql(i,s,{hf:()=>!1,af:()=>!0}),this.Lf={tp:i,Qf:e}}jf(){this.Yf.style.background=this.Wf.N().layout.panes.separatorColor}ip(e){this.Lf!==null&&(this.Lf.tp.style.backgroundColor=this.Wf.N().layout.panes.separatorHoverColor)}sp(e){this.Lf!==null&&this.Ff===null&&(this.Lf.tp.style.backgroundColor="")}np(e){if(this.Lf===null)return;const n=this.Hf.hp().Io()+this.$f.hp().Io(),i=n/(this.Hf.Zf().height+this.$f.Zf().height),r=30*i;n<=2*r||(this.Ff={ap:e.pageY,lp:this.Hf.hp().Io(),op:n-r,_p:n,up:i,cp:r},this.Lf.Qf.style.display="block")}ep(e){const n=this.Ff;if(n===null)return;const i=(e.pageY-n.ap)*n.up,r=sr(n.lp+i,n.cp,n.op);this.Hf.hp().Bo(r),this.$f.hp().Bo(n._p-r),this.Wf.Qt().Bh()}rp(e){this.Ff!==null&&this.Lf!==null&&(this.Ff=null,this.Lf.Qf.style.display="none")}}function Ja(t,e){return t.dp-e.dp}function Za(t,e,n){const i=(t.dp-e.dp)/(t.wt-e.wt);return Math.sign(i)*Math.min(Math.abs(i),n)}class QC{constructor(e,n,i,r){this.fp=null,this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=0,this.Mp=0,this.bp=e,this.Sp=n,this.xp=i,this.Mn=r}Cp(e,n){if(this.fp!==null){if(this.fp.wt===n)return void(this.fp.dp=e);if(Math.abs(this.fp.dp-e)<this.Mn)return}this.mp=this.vp,this.vp=this.pp,this.pp=this.fp,this.fp={wt:n,dp:e}}le(e,n){if(this.fp===null||this.pp===null||n-this.fp.wt>50)return;let i=0;const r=Za(this.fp,this.pp,this.Sp),s=Ja(this.fp,this.pp),o=[r],l=[s];if(i+=s,this.vp!==null){const c=Za(this.pp,this.vp,this.Sp);if(Math.sign(c)===Math.sign(r)){const h=Ja(this.pp,this.vp);if(o.push(c),l.push(h),i+=h,this.mp!==null){const u=Za(this.vp,this.mp,this.Sp);if(Math.sign(u)===Math.sign(r)){const d=Ja(this.vp,this.mp);o.push(u),l.push(d),i+=d}}}}let a=0;for(let c=0;c<o.length;++c)a+=l[c]/i*o[c];Math.abs(a)<this.bp||(this.wp={dp:e,wt:n},this.Mp=a,this.gp=function(c,h){const u=Math.log(h);return Math.log(1*u/-c)/u}(Math.abs(a),this.xp))}Ru(e){const n=W(this.wp),i=e-n.wt;return n.dp+this.Mp*(Math.pow(this.xp,i)-1)/Math.log(this.xp)}Tu(e){return this.wp===null||this.Pp(e)===this.gp}Pp(e){const n=e-W(this.wp).wt;return Math.min(n,this.gp)}}class XC{constructor(e,n){this.kp=void 0,this.yp=void 0,this.Tp=void 0,this.ps=!1,this.Rp=e,this.Dp=n,this.Vp()}kt(){this.Vp()}Ip(){this.kp&&this.Rp.removeChild(this.kp),this.yp&&this.Rp.removeChild(this.yp),this.kp=void 0,this.yp=void 0}Bp(){return this.ps!==this.Ep()||this.Tp!==this.Ap()}Ap(){return this.Dp.Qt().Xi().J(this.Dp.N().layout.textColor)>160?"dark":"light"}Ep(){return this.Dp.N().layout.attributionLogo}zp(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}Vp(){this.Bp()&&(this.Ip(),this.ps=this.Ep(),this.ps&&(this.Tp=this.Ap(),this.yp=document.createElement("style"),this.yp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.zp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark",this.Tp==="dark"),this.Rp.appendChild(this.yp),this.Rp.appendChild(this.kp)))}}function bi(t,e){const n=W(t.ownerDocument).createElement("canvas");t.appendChild(n);const i=Fx(n,{options:{allowResizeObserver:!0},transform:(r,s)=>({width:Math.max(r.width,s.width),height:Math.max(r.height,s.height)})});return i.resizeCanvasElement(e),i}function ki(t){t.width=1,t.height=1,t.getContext("2d")?.clearRect(0,0,1,1)}function Su(t,e,n,i){t.ih&&t.ih(e,n,i)}function Uo(t,e,n,i){t.nt(e,n,i)}function xu(t,e,n,i){const r=t(n,i);for(const s of r){const o=s.Tt(i);o!==null&&e(o)}}function ec(t,e){return n=>function(i){return i.Ft!==void 0}(n)?(n.Ft()?.wa()??"")!==e?[]:n.ta?.(t)??[]:[]}function lp(t,e,n,i){if(!t.length)return;let r=0;const s=t[0].$t(i,!0);let o=e===1?n/2-(t[0].Fi()-s/2):t[0].Fi()-s/2-n/2;o=Math.max(0,o);for(let l=1;l<t.length;l++){const a=t[l],c=t[l-1],h=c.$t(i,!1),u=a.Fi(),d=c.Fi();if(e===1?u>d-h:u<d+h){const f=d-h*e;a.Wi(f);const p=f-e*h/2;if((e===1?p<0:p>n)&&o>0){const g=e===1?-1-p:p-n,S=Math.min(g,o);for(let m=r;m<t.length;m++)t[m].Wi(t[m].Fi()+e*S);o-=S}}else r=l,o=e===1?d-h-u:u-(d+h)}}class ap{constructor(e,n,i,r){this.Yi=null,this.Lp=null,this.Op=!1,this.Np=new vl(200),this.Fp=null,this.Wp=0,this.Hp=!1,this.Up=()=>{this.Hp||this.Pt.$p().Qt().ar()},this.qp=()=>{this.Hp||this.Pt.$p().Qt().ar()},this.Pt=e,this.Ps=n,this.bl=n.layout,this.Gu=i,this.Yp=r==="left",this.jp=ec("normal",r),this.Kp=ec("top",r),this.Xp=ec("bottom",r),this.Yf=document.createElement("div"),this.Yf.style.height="100%",this.Yf.style.overflow="hidden",this.Yf.style.width="25px",this.Yf.style.left="0",this.Yf.style.position="relative",this.Zp=bi(this.Yf,we({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const s=this.Zp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Gp=bi(this.Yf,we({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const o=this.Gp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const l={bf:this.np.bind(this),gf:this.np.bind(this),uf:this.ep.bind(this),lf:this.ep.bind(this),Sf:this.Jp.bind(this),pf:this.rp.bind(this),df:this.rp.bind(this),Kd:this.Qp.bind(this),$d:this.Qp.bind(this),if:this.tv.bind(this),Vf:this.sp.bind(this)};this.Of=new ql(this.Gp.canvasElement,l,{hf:()=>!this.Ps.handleScroll.vertTouchDrag,af:()=>!0})}m(){this.Of.m(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),ki(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),ki(this.Zp.canvasElement),this.Zp.dispose(),this.Yi!==null&&this.Yi.no().u(this),this.Yi=null}Xf(){return this.Yf}P(){return this.bl.fontSize}iv(){const e=this.Gu.N();return this.Fp!==e.k&&(this.Np.In(),this.Fp=e.k),e}sv(){if(this.Yi===null)return 0;let e=0;const n=this.iv(),i=W(this.Zp.canvasElement.getContext("2d",{colorSpace:this.Pt.$p().N().layout.colorSpace}));i.save();const r=this.Yi.Va();i.font=this.nv(),r.length>0&&(e=Math.max(this.Np.Vi(i,r[0].Ga),this.Np.Vi(i,r[r.length-1].Ga)));const s=this.ev();for(let c=s.length;c--;){const h=this.Np.Vi(i,s[c].ri());h>e&&(e=h)}const o=this.Yi.zt();if(o!==null&&this.Lp!==null&&(l=this.Ps.crosshair).mode!==2&&l.horzLine.visible&&l.horzLine.labelVisible){const c=this.Yi.Ts(1,o),h=this.Yi.Ts(this.Lp.height-2,o);e=Math.max(e,this.Np.Vi(i,this.Yi.Zi(Math.floor(Math.min(c,h))+.11111111111111,o)),this.Np.Vi(i,this.Yi.Zi(Math.ceil(Math.max(c,h))-.11111111111111,o)))}var l;i.restore();const a=e||34;return wu(Math.ceil(n.S+n.C+n.I+n.B+5+a))}rv(e){this.Lp!==null&&pi(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`)}hv(){return W(this.Lp).width}_s(e){this.Yi!==e&&(this.Yi!==null&&this.Yi.no().u(this),this.Yi=e,e.no().i(this.ul.bind(this),this))}Ft(){return this.Yi}In(){const e=this.Pt.hp();this.Pt.$p().Qt().Zo(e,W(this.Ft()))}av(e){if(this.Lp===null)return;const n={colorSpace:this.Pt.$p().N().layout.colorSpace};if(e!==1){this.lv(),this.Zp.applySuggestedBitmapSize();const r=xi(this.Zp,n);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.ov(s),this._v(s)}),this.Pt.uv(r,this.Xp),this.cv(r),this.Pt.uv(r,this.jp),this.dv(r))}this.Gp.applySuggestedBitmapSize();const i=xi(this.Gp,n);i!==null&&(i.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.fv(i),this.Pt.uv(i,this.Kp))}Gf(){return this.Zp.bitmapSize}Jf(e,n,i){const r=this.Gf();r.width>0&&r.height>0&&e.drawImage(this.Zp.canvasElement,n,i)}kt(){this.Yi?.Va()}np(e){if(this.Yi===null||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.$p().Qt(),i=this.Pt.hp();this.Op=!0,n.Uo(i,this.Yi,e.localY)}ep(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.$p().Qt(),i=this.Pt.hp(),r=this.Yi;n.$o(i,r,e.localY)}Jp(){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.$p().Qt(),n=this.Pt.hp(),i=this.Yi;this.Op&&(this.Op=!1,e.qo(n,i))}rp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.$p().Qt(),i=this.Pt.hp();this.Op=!1,n.qo(i,this.Yi)}Qp(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.In()}tv(e){this.Yi!==null&&(!this.Pt.$p().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Vl()||this.pv(1))}sp(e){this.pv(0)}ev(){const e=[],n=this.Yi===null?void 0:this.Yi;return(i=>{for(let r=0;r<i.length;++r){const s=i[r].Ws(this.Pt.hp(),n);for(let o=0;o<s.length;o++)e.push(s[o])}})(this.Pt.hp().Dt()),e}ov({context:e,bitmapSize:n}){const{width:i,height:r}=n,s=this.Pt.hp().Qt(),o=s.$(),l=s.Fc();o===l?Hl(e,0,0,i,r,o):Jy(e,0,0,i,r,o,l)}_v({context:e,bitmapSize:n,horizontalPixelRatio:i}){if(this.Lp===null||this.Yi===null||!this.Yi.N().borderVisible)return;e.fillStyle=this.Yi.N().borderColor;const r=Math.max(1,Math.floor(this.iv().S*i));let s;s=this.Yp?n.width-r:0,e.fillRect(s,0,r,n.height)}cv(e){if(this.Lp===null||this.Yi===null)return;const n=this.Yi.Va(),i=this.Yi.N(),r=this.iv(),s=this.Yp?this.Lp.width-r.C:0;i.borderVisible&&i.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:l,verticalPixelRatio:a})=>{o.fillStyle=i.borderColor;const c=Math.max(1,Math.floor(a)),h=Math.floor(.5*a),u=Math.round(r.C*l);o.beginPath();for(const d of n)o.rect(Math.floor(s*l),Math.round(d.ka*a)-h,u,c);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{o.font=this.nv(),o.fillStyle=i.textColor??this.bl.textColor,o.textAlign=this.Yp?"right":"left",o.textBaseline="middle";const l=this.Yp?Math.round(s-r.I):Math.round(s+r.C+r.I),a=n.map(c=>this.Np.Di(o,c.Ga));for(let c=n.length;c--;){const h=n[c];o.fillText(h.Ga,l,h.ka+a[c])}})}lv(){if(this.Lp===null||this.Yi===null)return;let e=this.Lp.height/2;const n=[],i=this.Yi.Dt().slice(),r=this.Pt.hp(),s=this.iv();this.Yi===r.$n()&&this.Pt.hp().Dt().forEach(a=>{r.Un(a)&&i.push(a)});const o=this.Yi.ba()[0],l=this.Yi;i.forEach(a=>{const c=a.Ws(r,l);c.forEach(h=>{h.Wi(null),h.Hi()&&n.push(h)}),o===a&&c.length>0&&(e=c[0].Bi())}),n.forEach(a=>a.Wi(a.Bi())),this.Yi.N().alignLabels&&this.vv(n,s,e)}vv(e,n,i){if(this.Lp===null)return;const r=e.filter(o=>o.Bi()<=i),s=e.filter(o=>o.Bi()>i);r.sort((o,l)=>l.Bi()-o.Bi()),r.length&&s.length&&s.push(r[0]),s.sort((o,l)=>o.Bi()-l.Bi());for(const o of e){const l=Math.floor(o.$t(n)/2),a=o.Bi();a>-l&&a<l&&o.Wi(l),a>this.Lp.height-l&&a<this.Lp.height+l&&o.Wi(this.Lp.height-l)}lp(r,1,this.Lp.height,n),lp(s,-1,this.Lp.height,n)}dv(e){if(this.Lp===null)return;const n=this.ev(),i=this.iv(),r=this.Yp?"right":"left";n.forEach(s=>{s.Ui()&&s.Tt(W(this.Yi)).nt(e,i,this.Np,r)})}fv(e){if(this.Lp===null||this.Yi===null)return;const n=this.Pt.$p().Qt(),i=[],r=this.Pt.hp(),s=n._c().Ws(r,this.Yi);s.length&&i.push(s);const o=this.iv(),l=this.Yp?"right":"left";i.forEach(a=>{a.forEach(c=>{c.Tt(W(this.Yi)).nt(e,o,this.Np,l)})})}pv(e){this.Yf.style.cursor=e===1?"ns-resize":"default"}ul(){const e=this.sv();this.Wp<e&&this.Pt.$p().Qt().Bh(),this.Wp=e}nv(){return yl(this.bl.fontSize,this.bl.fontFamily)}}function JC(t,e){return t.Jh?.(e)??[]}function cp(t,e){return t.Fs?.(e)??[]}function up(t,e){return t.us?.(e)??[]}function ZC(t,e){return t.Xh?.(e)??[]}class Uh{constructor(e,n){this.Lp=we({width:0,height:0}),this.mv=null,this.wv=null,this.gv=null,this.Mv=null,this.bv=!1,this.Sv=new Fe,this.xv=new Fe,this.Cv=0,this.Pv=!1,this.kv=null,this.yv=!1,this.Tv=null,this.Rv=null,this.Hp=!1,this.Up=()=>{this.Hp||this.Dv===null||this.ts().ar()},this.qp=()=>{this.Hp||this.Dv===null||this.ts().ar()},this.Dp=e,this.Dv=n,this.Dv.t_().i(this.Vv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.Bv=document.createElement("td"),this.Bv.style.padding="0",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Iv.appendChild(i),this.Zp=bi(i,we({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const r=this.Zp.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Gp=bi(i,we({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const s=this.Gp.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.qf=document.createElement("tr"),this.qf.appendChild(this.Bv),this.qf.appendChild(this.Iv),this.qf.appendChild(this.Ev),this.Av(),this.Of=new ql(this.Gp.canvasElement,this,{hf:()=>this.kv===null&&!this.Dp.N().handleScroll.vertTouchDrag,af:()=>this.kv===null&&!this.Dp.N().handleScroll.horzTouchDrag})}m(){this.mv!==null&&this.mv.m(),this.wv!==null&&this.wv.m(),this.gv=null,this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),ki(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),ki(this.Zp.canvasElement),this.Zp.dispose(),this.Dv!==null&&(this.Dv.t_().u(this),this.Dv.m()),this.Of.m()}hp(){return W(this.Dv)}zv(e){this.Dv!==null&&this.Dv.t_().u(this),this.Dv=e,this.Dv!==null&&this.Dv.t_().i(Uh.prototype.Vv.bind(this),this,!0),this.Av(),this.Dp.Uf().indexOf(this)===this.Dp.Uf().length-1?(this.gv=this.gv??new XC(this.Iv,this.Dp),this.gv.kt()):(this.gv?.Ip(),this.gv=null)}$p(){return this.Dp}Xf(){return this.qf}Av(){if(this.Dv!==null&&(this.Lv(),this.ts().js().length!==0)){if(this.mv!==null){const e=this.Dv.Wo();this.mv._s(W(e))}if(this.wv!==null){const e=this.Dv.Ho();this.wv._s(W(e))}}}Ov(){this.mv!==null&&this.mv.kt(),this.wv!==null&&this.wv.kt()}Io(){return this.Dv!==null?this.Dv.Io():0}Bo(e){this.Dv&&this.Dv.Bo(e)}if(e){if(!this.Dv)return;this.Nv();const n=e.localX,i=e.localY;this.Fv(n,i,e)}bf(e){this.Nv(),this.Wv(),this.Fv(e.localX,e.localY,e)}sf(e){if(!this.Dv)return;this.Nv();const n=e.localX,i=e.localY;this.Fv(n,i,e)}vf(e){this.Dv!==null&&(this.Nv(),this.Hv(e))}Kd(e){this.Dv!==null&&this.Uv(this.xv,e)}$d(e){this.Kd(e)}uf(e){this.Nv(),this.$v(e),this.Fv(e.localX,e.localY,e)}pf(e){this.Dv!==null&&(this.Nv(),this.Pv=!1,this.qv(e))}ff(e){this.Dv!==null&&this.Hv(e)}If(e){if(this.Pv=!0,this.kv===null){const n={x:e.localX,y:e.localY};this.Yv(n,n,e)}}Vf(e){this.Dv!==null&&(this.Nv(),this.Dv.Qt().ac(null),this.jv())}Kv(){return this.Sv}Xv(){return this.xv}Pf(){this.Cv=1,this.ts().hn()}kf(e,n){if(!this.Dp.N().handleScale.pinch)return;const i=5*(n-this.Cv);this.Cv=n,this.ts().Mc(e._t,i)}gf(e){this.Pv=!1,this.yv=this.kv!==null,this.Wv();const n=this.ts()._c();this.kv!==null&&n.Vt()&&(this.Tv={x:n.si(),y:n.ni()},this.kv={x:e.localX,y:e.localY})}lf(e){if(this.Dv===null)return;const n=e.localX,i=e.localY;if(this.kv===null)this.$v(e);else{this.yv=!1;const r=W(this.Tv),s=r.x+(n-this.kv.x),o=r.y+(i-this.kv.y);this.Fv(s,o,e)}}df(e){this.$p().N().trackingMode.exitMode===0&&(this.yv=!0),this.Zv(),this.qv(e)}jn(e,n){const i=this.Dv;return i===null?null:cv(i,e,n)}Gv(e,n){W(n==="left"?this.mv:this.wv).rv(we({width:e,height:this.Lp.height}))}Zf(){return this.Lp}rv(e){pi(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Iv.style.width=e.width+"px",this.Iv.style.height=e.height+"px")}Jv(){const e=W(this.Dv);e.Fo(e.Wo()),e.Fo(e.Ho());for(const n of e.ba())if(e.Un(n)){const i=n.Ft();i!==null&&e.Fo(i),n.Ns()}for(const n of e.s_())n.Ns()}Gf(){return this.Zp.bitmapSize}Jf(e,n,i){const r=this.Gf();r.width>0&&r.height>0&&e.drawImage(this.Zp.canvasElement,n,i)}av(e){if(e===0||this.Dv===null)return;e>1&&this.Jv(),this.mv!==null&&this.mv.av(e),this.wv!==null&&this.wv.av(e);const n={colorSpace:this.Dp.N().layout.colorSpace};if(e!==1){this.Zp.applySuggestedBitmapSize();const r=xi(this.Zp,n);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.ov(s)}),this.Dv&&(this.Qv(r,JC),this.tm(r),this.Qv(r,cp),this.Qv(r,up)))}this.Gp.applySuggestedBitmapSize();const i=xi(this.Gp,n);i!==null&&(i.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.im(i),this.Qv(i,ZC),this.Qv(i,up))}sm(){return this.mv}nm(){return this.wv}uv(e,n){this.Qv(e,n)}Vv(){this.Dv!==null&&this.Dv.t_().u(this),this.Dv=null}Hv(e){this.Uv(this.Sv,e)}Uv(e,n){const i=n.localX,r=n.localY;e.v()&&e.p(this.ts().Et().uu(i),{x:i,y:r},n)}ov({context:e,bitmapSize:n}){const{width:i,height:r}=n,s=this.ts(),o=s.$(),l=s.Fc();o===l?Hl(e,0,0,i,r,l):Jy(e,0,0,i,r,o,l)}tm(e){const n=W(this.Dv),i=n.i_().lr().Tt(n);i!==null&&i.nt(e,!1)}im(e){this.rm(e,cp,Uo,this.ts()._c())}Qv(e,n){const i=W(this.Dv),r=i.Dt(),s=i.s_();for(const o of s)this.rm(e,n,Su,o);for(const o of r)this.rm(e,n,Su,o);for(const o of s)this.rm(e,n,Uo,o);for(const o of r)this.rm(e,n,Uo,o)}rm(e,n,i,r){const s=W(this.Dv),o=s.Qt().hc(),l=o!==null&&o.n_===r,a=o!==null&&l&&o.e_!==void 0?o.e_.Xn:void 0;xu(n,c=>i(c,e,l,a),r,s)}Lv(){if(this.Dv===null)return;const e=this.Dp,n=this.Dv.Wo().N().visible,i=this.Dv.Ho().N().visible;n||this.mv===null||(this.Bv.removeChild(this.mv.Xf()),this.mv.m(),this.mv=null),i||this.wv===null||(this.Ev.removeChild(this.wv.Xf()),this.wv.m(),this.wv=null);const r=e.Qt().Vc();n&&this.mv===null&&(this.mv=new ap(this,e.N(),r,"left"),this.Bv.appendChild(this.mv.Xf())),i&&this.wv===null&&(this.wv=new ap(this,e.N(),r,"right"),this.Ev.appendChild(this.wv.Xf()))}hm(e){return e.Bf&&this.Pv||this.kv!==null}am(e){return Math.max(0,Math.min(e,this.Lp.width-1))}lm(e){return Math.max(0,Math.min(e,this.Lp.height-1))}Fv(e,n,i){this.ts().yc(this.am(e),this.lm(n),i,W(this.Dv))}jv(){this.ts().Rc()}Zv(){this.yv&&(this.kv=null,this.jv())}Yv(e,n,i){this.kv=e,this.yv=!1,this.Fv(n.x,n.y,i);const r=this.ts()._c();this.Tv={x:r.si(),y:r.ni()}}ts(){return this.Dp.Qt()}qv(e){if(!this.bv)return;const n=this.ts(),i=this.hp();if(n.Ko(i,i.ys()),this.Mv=null,this.bv=!1,n.Cc(),this.Rv!==null){const r=performance.now(),s=n.Et();this.Rv.le(s.wu(),r),this.Rv.Tu(r)||n._n(this.Rv)}}Nv(){this.kv=null}Wv(){if(this.Dv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)W(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Dv.ys().Ki()&&this.ts().Et().Ki()}}$v(e){if(this.Dv===null)return;const n=this.ts(),i=n.Et();if(i.Ki())return;const r=this.Dp.N(),s=r.handleScroll,o=r.kineticScroll;if((!s.pressedMouseMove||e.Bf)&&(!s.horzTouchDrag&&!s.vertTouchDrag||!e.Bf))return;const l=this.Dv.ys(),a=performance.now();if(this.Mv!==null||this.hm(e)||(this.Mv={x:e.clientX,y:e.clientY,ed:a,om:e.localX,_m:e.localY}),this.Mv!==null&&!this.bv&&(this.Mv.x!==e.clientX||this.Mv.y!==e.clientY)){if(e.Bf&&o.touch||!e.Bf&&o.mouse){const c=i.vu();this.Rv=new QC(.2/c,7/c,.997,15/c),this.Rv.Cp(i.wu(),this.Mv.ed)}else this.Rv=null;l.Ki()||n.Yo(this.Dv,l,e.localY),n.Sc(e.localX),this.bv=!0}this.bv&&(l.Ki()||n.jo(this.Dv,l,e.localY),n.xc(e.localX),this.Rv!==null&&this.Rv.Cp(i.wu(),a))}}class hp{constructor(e,n,i,r,s){this.xt=!0,this.Lp=we({width:0,height:0}),this.Up=()=>this.av(3),this.Yp=e==="left",this.Gu=i.Vc,this.Ps=n,this.um=r,this.dm=s,this.Yf=document.createElement("div"),this.Yf.style.width="25px",this.Yf.style.height="100%",this.Yf.style.overflow="hidden",this.Zp=bi(this.Yf,we({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up)}m(){this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),ki(this.Zp.canvasElement),this.Zp.dispose()}Xf(){return this.Yf}Zf(){return this.Lp}rv(e){pi(this.Lp,e)||(this.Lp=e,this.Zp.resizeCanvasElement(e),this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`,this.xt=!0)}av(e){if(e<3&&!this.xt||this.Lp.width===0||this.Lp.height===0)return;this.xt=!1,this.Zp.applySuggestedBitmapSize();const n=xi(this.Zp,{colorSpace:this.Ps.layout.colorSpace});n!==null&&n.useBitmapCoordinateSpace(i=>{this.ov(i),this._v(i)})}Gf(){return this.Zp.bitmapSize}Jf(e,n,i){const r=this.Gf();r.width>0&&r.height>0&&e.drawImage(this.Zp.canvasElement,n,i)}_v({context:e,bitmapSize:n,horizontalPixelRatio:i,verticalPixelRatio:r}){if(!this.um())return;e.fillStyle=this.Ps.timeScale.borderColor;const s=Math.floor(this.Gu.N().S*i),o=Math.floor(this.Gu.N().S*r),l=this.Yp?n.width-s:0;e.fillRect(l,0,s,o)}ov({context:e,bitmapSize:n}){Hl(e,0,0,n.width,n.height,this.dm())}}function $h(t){return e=>e.ia?.(t)??[]}const eb=$h("normal"),tb=$h("top"),nb=$h("bottom");class ib{constructor(e,n){this.fm=null,this.pm=null,this.M=null,this.vm=!1,this.Lp=we({width:0,height:0}),this.wm=new Fe,this.Np=new vl(5),this.Hp=!1,this.Up=()=>{this.Hp||this.Dp.Qt().ar()},this.qp=()=>{this.Hp||this.Dp.Qt().ar()},this.Dp=e,this.o_=n,this.Ps=e.N().layout,this.kp=document.createElement("tr"),this.gm=document.createElement("td"),this.gm.style.padding="0",this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.Yf=document.createElement("td"),this.Yf.style.height="25px",this.Yf.style.padding="0",this.bm=document.createElement("div"),this.bm.style.width="100%",this.bm.style.height="100%",this.bm.style.position="relative",this.bm.style.overflow="hidden",this.Yf.appendChild(this.bm),this.Zp=bi(this.bm,we({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const i=this.Zp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Gp=bi(this.bm,we({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const r=this.Gp.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.kp.appendChild(this.gm),this.kp.appendChild(this.Yf),this.kp.appendChild(this.Mm),this.Sm(),this.Dp.Qt().Vo().i(this.Sm.bind(this),this),this.Of=new ql(this.Gp.canvasElement,this,{hf:()=>!0,af:()=>!this.Dp.N().handleScroll.horzTouchDrag})}m(){this.Of.m(),this.fm!==null&&this.fm.m(),this.pm!==null&&this.pm.m(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),ki(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),ki(this.Zp.canvasElement),this.Zp.dispose()}Xf(){return this.kp}xm(){return this.fm}Cm(){return this.pm}bf(e){if(this.vm)return;this.vm=!0;const n=this.Dp.Qt();!n.Et().Ki()&&this.Dp.N().handleScale.axisPressedMouseMove.time&&n.gc(e.localX)}gf(e){this.bf(e)}Sf(){const e=this.Dp.Qt();!e.Et().Ki()&&this.vm&&(this.vm=!1,this.Dp.N().handleScale.axisPressedMouseMove.time&&e.kc())}uf(e){const n=this.Dp.Qt();!n.Et().Ki()&&this.Dp.N().handleScale.axisPressedMouseMove.time&&n.Pc(e.localX)}lf(e){this.uf(e)}pf(){this.vm=!1;const e=this.Dp.Qt();e.Et().Ki()&&!this.Dp.N().handleScale.axisPressedMouseMove.time||e.kc()}df(){this.pf()}Kd(){this.Dp.N().handleScale.axisDoubleClickReset.time&&this.Dp.Qt().cn()}$d(){this.Kd()}if(){this.Dp.Qt().N().handleScale.axisPressedMouseMove.time&&this.pv(1)}Vf(){this.pv(0)}Zf(){return this.Lp}Pm(){return this.wm}km(e,n,i){pi(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`,this.wm.p(e)),this.fm!==null&&this.fm.rv(we({width:n,height:e.height})),this.pm!==null&&this.pm.rv(we({width:i,height:e.height}))}ym(){const e=this.Tm();return Math.ceil(e.S+e.C+e.P+e.A+e.V+e.Rm)}kt(){this.Dp.Qt().Et().Va()}Gf(){return this.Zp.bitmapSize}Jf(e,n,i){const r=this.Gf();r.width>0&&r.height>0&&e.drawImage(this.Zp.canvasElement,n,i)}av(e){if(e===0)return;const n={colorSpace:this.Ps.colorSpace};if(e!==1){this.Zp.applySuggestedBitmapSize();const r=xi(this.Zp,n);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.ov(s),this._v(s),this.Dm(r,nb)}),this.cv(r),this.Dm(r,eb)),this.fm!==null&&this.fm.av(e),this.pm!==null&&this.pm.av(e)}this.Gp.applySuggestedBitmapSize();const i=xi(this.Gp,n);i!==null&&(i.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.Vm([...this.Dp.Qt().js(),this.Dp.Qt()._c()],i),this.Dm(i,tb))}Dm(e,n){const i=this.Dp.Qt().js();for(const r of i)xu(n,s=>Su(s,e,!1,void 0),r,void 0);for(const r of i)xu(n,s=>Uo(s,e,!1,void 0),r,void 0)}ov({context:e,bitmapSize:n}){Hl(e,0,0,n.width,n.height,this.Dp.Qt().Fc())}_v({context:e,bitmapSize:n,verticalPixelRatio:i}){if(this.Dp.N().timeScale.borderVisible){e.fillStyle=this.Im();const r=Math.max(1,Math.floor(this.Tm().S*i));e.fillRect(0,0,n.width,r)}}cv(e){const n=this.Dp.Qt().Et(),i=n.Va();if(!i||i.length===0)return;const r=this.o_.maxTickMarkWeight(i),s=this.Tm(),o=n.N();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:l,horizontalPixelRatio:a,verticalPixelRatio:c})=>{l.strokeStyle=this.Im(),l.fillStyle=this.Im();const h=Math.max(1,Math.floor(a)),u=Math.floor(.5*a);l.beginPath();const d=Math.round(s.C*c);for(let f=i.length;f--;){const p=Math.round(i[f].coord*a);l.rect(p-u,0,h,d)}l.fill()}),e.useMediaCoordinateSpace(({context:l})=>{const a=s.S+s.C+s.A+s.P/2;l.textAlign="center",l.textBaseline="middle",l.fillStyle=this.H(),l.font=this.nv();for(const c of i)if(c.weight<r){const h=c.needAlignCoordinate?this.Bm(l,c.coord,c.label):c.coord;l.fillText(c.label,h,a)}this.Dp.N().timeScale.allowBoldLabels&&(l.font=this.Em());for(const c of i)if(c.weight>=r){const h=c.needAlignCoordinate?this.Bm(l,c.coord,c.label):c.coord;l.fillText(c.label,h,a)}})}Bm(e,n,i){const r=this.Np.Vi(e,i),s=r/2,o=Math.floor(n-s)+.5;return o<0?n+=Math.abs(0-o):o+r>this.Lp.width&&(n-=Math.abs(this.Lp.width-(o+r))),n}Vm(e,n){const i=this.Tm();for(const r of e)for(const s of r.cs())s.Tt().nt(n,i)}Im(){return this.Dp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}nv(){return yl(this.F(),this.Ps.fontFamily)}Em(){return yl(this.F(),this.Ps.fontFamily,"bold")}Tm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new vl,Rm:0});const e=this.M,n=this.nv();if(e.k!==n){const i=this.F();e.P=i,e.k=n,e.A=3*i/12,e.V=3*i/12,e.Ji=9*i/12,e.L=0,e.Rm=4*i/12,e.Gi.In()}return this.M}pv(e){this.Yf.style.cursor=e===1?"ew-resize":"default"}Sm(){const e=this.Dp.Qt(),n=e.N();n.leftPriceScale.visible||this.fm===null||(this.gm.removeChild(this.fm.Xf()),this.fm.m(),this.fm=null),n.rightPriceScale.visible||this.pm===null||(this.Mm.removeChild(this.pm.Xf()),this.pm.m(),this.pm=null);const i={Vc:this.Dp.Qt().Vc()},r=()=>n.leftPriceScale.borderVisible&&e.Et().N().borderVisible,s=()=>e.Fc();n.leftPriceScale.visible&&this.fm===null&&(this.fm=new hp("left",n,i,r,s),this.gm.appendChild(this.fm.Xf())),n.rightPriceScale.visible&&this.pm===null&&(this.pm=new hp("right",n,i,r,s),this.Mm.appendChild(this.pm.Xf()))}}const rb=!!yr&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!yr&&(navigator?.userAgentData?.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class sb{constructor(e,n,i){var r;this.Am=[],this.zm=[],this.Lm=0,this.sl=0,this.Mo=0,this.Om=0,this.Nm=0,this.Fm=null,this.Wm=!1,this.Sv=new Fe,this.xv=new Fe,this.Ku=new Fe,this.Hm=null,this.Um=null,this.Rp=e,this.Ps=n,this.o_=i,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(r=this.kp).style.userSelect="none",r.style.webkitUserSelect="none",r.style.msUserSelect="none",r.style.MozUserSelect="none",r.style.webkitTapHighlightColor="transparent",this.$m=document.createElement("table"),this.$m.setAttribute("cellspacing","0"),this.kp.appendChild(this.$m),this.qm=this.Ym.bind(this),tc(this.Ps)&&this.jm(!0),this.ts=new VC(this.Zu.bind(this),this.Ps,i),this.Qt().uc().i(this.Km.bind(this),this),this.Xm=new ib(this,this.o_),this.$m.appendChild(this.Xm.Xf());const s=n.autoSize&&this.Zm();let o=this.Ps.width,l=this.Ps.height;if(s||o===0||l===0){const a=e.getBoundingClientRect();o=o||a.width,l=l||a.height}this.Gm(o,l),this.Jm(),e.appendChild(this.kp),this.Qm(),this.ts.Et().Iu().i(this.ts.Bh.bind(this.ts),this),this.ts.Vo().i(this.ts.Bh.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}Uf(){return this.Am}tw(){return this.Xm}m(){this.jm(!1),this.Lm!==0&&window.cancelAnimationFrame(this.Lm),this.ts.uc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m();for(const e of this.Am)this.$m.removeChild(e.Xf()),e.Kv().u(this),e.Xv().u(this),e.m();this.Am=[];for(const e of this.zm)this.iw(e);this.zm=[],W(this.Xm).m(),this.kp.parentElement!==null&&this.kp.parentElement.removeChild(this.kp),this.Ku.m(),this.Sv.m(),this.xv.m(),this.sw()}Gm(e,n,i=!1){if(this.sl===n&&this.Mo===e)return;const r=function(l){const a=Math.floor(l.width),c=Math.floor(l.height);return we({width:a-a%2,height:c-c%2})}(we({width:e,height:n}));this.sl=r.height,this.Mo=r.width;const s=this.sl+"px",o=this.Mo+"px";W(this.kp).style.height=s,W(this.kp).style.width=o,this.$m.style.height=s,this.$m.style.width=o,i?this.nw(qe.gn(),performance.now()):this.ts.Bh()}av(e){e===void 0&&(e=qe.gn());for(let n=0;n<this.Am.length;n++)this.Am[n].av(e.en(n).tn);this.Ps.timeScale.visible&&this.Xm.av(e.nn())}hr(e){const n=tc(this.Ps);this.ts.hr(e);const i=tc(this.Ps);i!==n&&this.jm(i),e.layout?.panes&&this.ew(),this.Qm(),this.rw(e)}Kv(){return this.Sv}Xv(){return this.xv}uc(){return this.Ku}hw(){this.Fm!==null&&(this.nw(this.Fm,performance.now()),this.Fm=null);const e=this.aw(null),n=document.createElement("canvas");n.width=e.width,n.height=e.height;const i=W(n.getContext("2d"));return this.aw(i),n}lw(e){return e==="left"&&!this.ow()||e==="right"&&!this._w()||this.Am.length===0?0:W(e==="left"?this.Am[0].sm():this.Am[0].nm()).hv()}uw(){return this.Ps.autoSize&&this.Hm!==null}tp(){return this.kp}cw(e){this.Um=e,this.Um?this.tp().style.setProperty("cursor",e):this.tp().style.removeProperty("cursor")}dw(){return this.Um}fw(e){return Ct(this.Am[e]).Zf()}ew(){this.zm.forEach(e=>{e.kt()})}rw(e){(e.autoSize!==void 0||!this.Hm||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Hm&&this.Zm(),e.autoSize===!1&&this.Hm!==null&&this.sw(),e.autoSize||e.width===void 0&&e.height===void 0||this.Gm(e.width||this.Mo,e.height||this.sl))}aw(e){let n=0,i=0;const r=this.Am[0],s=(l,a)=>{let c=0;for(let h=0;h<this.Am.length;h++){const u=this.Am[h],d=W(l==="left"?u.sm():u.nm()),f=d.Gf();if(e!==null&&d.Jf(e,a,c),c+=f.height,h<this.Am.length-1){const p=this.zm[h],g=p.Gf();e!==null&&p.Jf(e,a,c),c+=g.height}}};this.ow()&&(s("left",0),n+=W(r.sm()).Gf().width);for(let l=0;l<this.Am.length;l++){const a=this.Am[l],c=a.Gf();if(e!==null&&a.Jf(e,n,i),i+=c.height,l<this.Am.length-1){const h=this.zm[l],u=h.Gf();e!==null&&h.Jf(e,n,i),i+=u.height}}n+=r.Gf().width,this._w()&&(s("right",n),n+=W(r.nm()).Gf().width);const o=(l,a,c)=>{W(l==="left"?this.Xm.xm():this.Xm.Cm()).Jf(W(e),a,c)};if(this.Ps.timeScale.visible){const l=this.Xm.Gf();if(e!==null){let a=0;this.ow()&&(o("left",a,i),a=W(r.sm()).Gf().width),this.Xm.Jf(e,a,i),a+=l.width,this._w()&&o("right",a,i)}i+=l.height}return we({width:n,height:i})}pw(){let e=0,n=0,i=0;for(const S of this.Am)this.ow()&&(n=Math.max(n,W(S.sm()).sv(),this.Ps.leftPriceScale.minimumWidth)),this._w()&&(i=Math.max(i,W(S.nm()).sv(),this.Ps.rightPriceScale.minimumWidth)),e+=S.Io();n=wu(n),i=wu(i);const r=this.Mo,s=this.sl,o=Math.max(r-n-i,0),l=1*this.zm.length,a=this.Ps.timeScale.visible;let c=a?Math.max(this.Xm.ym(),this.Ps.timeScale.minimumHeight):0;var h;c=(h=c)+h%2;const u=l+c,d=s<u?0:s-u,f=d/e;let p=0;const g=window.devicePixelRatio||1;for(let S=0;S<this.Am.length;++S){const m=this.Am[S];m.zv(this.ts.$s()[S]);let y=0,w=0;w=S===this.Am.length-1?Math.ceil((d-p)*g)/g:Math.round(m.Io()*f*g)/g,y=Math.max(w,2),p+=y,m.rv(we({width:o,height:y})),this.ow()&&m.Gv(n,"left"),this._w()&&m.Gv(i,"right"),m.hp()&&this.ts.cc(m.hp(),y)}this.Xm.km(we({width:a?o:0,height:c}),a?n:0,a?i:0),this.ts.Eo(o),this.Om!==n&&(this.Om=n),this.Nm!==i&&(this.Nm=i)}jm(e){e?this.kp.addEventListener("wheel",this.qm,{passive:!1}):this.kp.removeEventListener("wheel",this.qm)}mw(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return rb?1/window.devicePixelRatio:1}Ym(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const n=this.mw(e),i=n*e.deltaX/100,r=-n*e.deltaY/100;if(e.cancelable&&e.preventDefault(),r!==0&&this.Ps.handleScale.mouseWheel){const s=Math.sign(r)*Math.min(1,Math.abs(r)),o=e.clientX-this.kp.getBoundingClientRect().left;this.Qt().Mc(o,s)}i!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().bc(-80*i)}nw(e,n){const i=e.nn();i===3&&this.ww(),i!==3&&i!==2||(this.gw(e),this.Mw(e,n),this.Xm.kt(),this.Am.forEach(r=>{r.Ov()}),this.Fm?.nn()===3&&(this.Fm.vn(e),this.ww(),this.gw(this.Fm),this.Mw(this.Fm,n),e=this.Fm,this.Fm=null)),this.av(e)}Mw(e,n){for(const i of e.pn())this.mn(i,n)}gw(e){const n=this.ts.$s();for(let i=0;i<n.length;i++)e.en(i).sn&&n[i].Go()}mn(e,n){const i=this.ts.Et();switch(e.an){case 0:i.Eu();break;case 1:i.Au(e.Wt);break;case 2:i.dn(e.Wt);break;case 3:i.fn(e.Wt);break;case 4:i.bu();break;case 5:e.Wt.Tu(n)||i.fn(e.Wt.Ru(n))}}Zu(e){this.Fm!==null?this.Fm.vn(e):this.Fm=e,this.Wm||(this.Wm=!0,this.Lm=window.requestAnimationFrame(n=>{if(this.Wm=!1,this.Lm=0,this.Fm!==null){const i=this.Fm;this.Fm=null,this.nw(i,n);for(const r of i.pn())if(r.an===5&&!r.Wt.Tu(n)){this.Qt()._n(r.Wt);break}}}))}ww(){this.Jm()}iw(e){this.$m.removeChild(e.Xf()),e.m()}Jm(){const e=this.ts.$s(),n=e.length,i=this.Am.length;for(let r=n;r<i;r++){const s=Ct(this.Am.pop());this.$m.removeChild(s.Xf()),s.Kv().u(this),s.Xv().u(this),s.m();const o=this.zm.pop();o!==void 0&&this.iw(o)}for(let r=i;r<n;r++){const s=new Uh(this,e[r]);if(s.Kv().i(this.bw.bind(this,s),this),s.Xv().i(this.Sw.bind(this,s),this),this.Am.push(s),r>0){const o=new qC(this,r-1,r);this.zm.push(o),this.$m.insertBefore(o.Xf(),this.Xm.Xf())}this.$m.insertBefore(s.Xf(),this.Xm.Xf())}for(let r=0;r<n;r++){const s=e[r],o=this.Am[r];o.hp()!==s?o.zv(s):o.Av()}this.Qm(),this.pw()}xw(e,n,i,r){const s=new Map;e!==null&&this.ts.js().forEach(u=>{const d=u.Xs().Fr(e);d!==null&&s.set(u,d)});let o;if(e!==null){const u=this.ts.Et().ss(e)?.originalTime;u!==void 0&&(o=u)}const l=this.Qt().hc(),a=l!==null&&l.n_ instanceof Gl?l.n_:void 0,c=l!==null&&l.e_!==void 0?l.e_.Kn:void 0,h=this.Cw(r);return{Pw:o,Re:e??void 0,kw:n??void 0,yw:h!==-1?h:void 0,Tw:a,Rw:s,Dw:c,Vw:i??void 0}}Cw(e){let n=-1;if(e)n=this.Am.indexOf(e);else{const i=this.Qt()._c().Us();i!==null&&(n=this.Qt().$s().indexOf(i))}return n}bw(e,n,i,r){this.Sv.p(()=>this.xw(n,i,r,e))}Sw(e,n,i,r){this.xv.p(()=>this.xw(n,i,r,e))}Km(e,n,i){this.cw(this.Qt().hc()?.h_??null),this.Ku.p(()=>this.xw(e,n,i))}Qm(){const e=this.Ps.timeScale.visible?"":"none";this.Xm.Xf().style.display=e}ow(){return this.Am[0].hp().Wo().N().visible}_w(){return this.Am[0].hp().Ho().N().visible}Zm(){return"ResizeObserver"in window&&(this.Hm=new ResizeObserver(e=>{const n=e[e.length-1];n&&this.Gm(n.contentRect.width,n.contentRect.height)}),this.Hm.observe(this.Rp,{box:"border-box"}),!0)}sw(){this.Hm!==null&&this.Hm.disconnect(),this.Hm=null}}function tc(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function ob(t){return t.open===void 0&&t.value===void 0}function lb(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function dp(t,e,n,i){const r=n.value,s={Re:e,wt:t,Wt:[r,r,r,r],Pw:i};return n.color!==void 0&&(s.R=n.color),s}function ab(t,e,n,i){const r=n.value,s={Re:e,wt:t,Wt:[r,r,r,r],Pw:i};return n.lineColor!==void 0&&(s.vt=n.lineColor),n.topColor!==void 0&&(s.mr=n.topColor),n.bottomColor!==void 0&&(s.wr=n.bottomColor),s}function cb(t,e,n,i){const r=n.value,s={Re:e,wt:t,Wt:[r,r,r,r],Pw:i};return n.topLineColor!==void 0&&(s.gr=n.topLineColor),n.bottomLineColor!==void 0&&(s.Mr=n.bottomLineColor),n.topFillColor1!==void 0&&(s.br=n.topFillColor1),n.topFillColor2!==void 0&&(s.Sr=n.topFillColor2),n.bottomFillColor1!==void 0&&(s.Cr=n.bottomFillColor1),n.bottomFillColor2!==void 0&&(s.Pr=n.bottomFillColor2),s}function ub(t,e,n,i){const r={Re:e,wt:t,Wt:[n.open,n.high,n.low,n.close],Pw:i};return n.color!==void 0&&(r.R=n.color),r}function hb(t,e,n,i){const r={Re:e,wt:t,Wt:[n.open,n.high,n.low,n.close],Pw:i};return n.color!==void 0&&(r.R=n.color),n.borderColor!==void 0&&(r.Ht=n.borderColor),n.wickColor!==void 0&&(r.vr=n.wickColor),r}function db(t,e,n,i,r){const s=Ct(r)(n),o=Math.max(...s),l=Math.min(...s),a=s[s.length-1],c=[a,o,l,a],{time:h,color:u,...d}=n;return{Re:e,wt:t,Wt:c,Pw:i,se:d,R:u}}function Ur(t){return t.Wt!==void 0}function fp(t,e){return e.customValues!==void 0&&(t.Iw=e.customValues),t}function ii(t){return(e,n,i,r,s,o)=>function(l,a){return a?a(l):ob(l)}(i,o)?fp({wt:e,Re:n,Pw:r},i):fp(t(e,n,i,r,s),i)}function pp(t){return{Candlestick:ii(hb),Bar:ii(ub),Area:ii(ab),Baseline:ii(cb),Histogram:ii(dp),Line:ii(dp),Custom:ii(db)}[t]}function mp(t){return{Re:0,Bw:new Map,Hh:t}}function gp(t,e){if(t!==void 0&&t.length!==0)return{Ew:e.key(t[0].wt),Aw:e.key(t[t.length-1].wt)}}function yp(t){let e;return t.forEach(n=>{e===void 0&&(e=n.Pw)}),Ct(e)}class fb{constructor(e){this.zw=new Map,this.Lw=new Map,this.Ow=new Map,this.Nw=[],this.o_=e}m(){this.zw.clear(),this.Lw.clear(),this.Ow.clear(),this.Nw=[]}Fw(e,n){let i=this.zw.size!==0,r=!1;const s=this.Lw.get(e);if(s!==void 0)if(this.Lw.size===1)i=!1,r=!0,this.zw.clear();else for(const a of this.Nw)a.pointData.Bw.delete(e)&&(r=!0);let o=[];if(n.length!==0){const a=n.map(f=>f.time),c=this.o_.createConverterToInternalObj(n),h=pp(e.Rr()),u=e.da(),d=e.pa();o=n.map((f,p)=>{const g=c(f.time),S=this.o_.key(g);let m=this.zw.get(S);m===void 0&&(m=mp(g),this.zw.set(S,m),r=!0);const y=h(g,m.Re,f,a[p],u,d);return m.Bw.set(e,y),y})}i&&this.Ww(),this.Hw(e,o);let l=-1;if(r){const a=[];this.zw.forEach(c=>{a.push({timeWeight:0,time:c.Hh,pointData:c,originalTime:yp(c.Bw)})}),a.sort((c,h)=>this.o_.key(c.time)-this.o_.key(h.time)),l=this.Uw(a)}return this.$w(e,l,function(a,c,h){const u=gp(a,h),d=gp(c,h);if(u!==void 0&&d!==void 0)return{qw:!1,zh:u.Aw>=d.Aw&&u.Ew>=d.Ew}}(this.Lw.get(e),s,this.o_))}Ec(e){return this.Fw(e,[])}Yw(e,n,i){const r=n;(function(S){S.Pw===void 0&&(S.Pw=S.time)})(r),this.o_.preprocessData(n);const s=this.o_.createConverterToInternalObj([n])(n.time),o=this.Ow.get(e);if(!i&&o!==void 0&&this.o_.key(s)<this.o_.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${s}`);let l=this.zw.get(this.o_.key(s));if(i&&l===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const a=l===void 0;l===void 0&&(l=mp(s),this.zw.set(this.o_.key(s),l));const c=pp(e.Rr()),h=e.da(),u=e.pa(),d=c(s,l.Re,n,r.Pw,h,u);l.Bw.set(e,d),i?this.jw(e,d,l.Re):this.Kw(e,d);const f={zh:Ur(d),qw:i};if(!a)return this.$w(e,-1,f);const p={timeWeight:0,time:l.Hh,pointData:l,originalTime:yp(l.Bw)},g=gr(this.Nw,this.o_.key(p.time),(S,m)=>this.o_.key(S.time)<m);this.Nw.splice(g,0,p);for(let S=g;S<this.Nw.length;++S)nc(this.Nw[S].pointData,S);return this.o_.fillWeightsForPoints(this.Nw,g),this.$w(e,g,f)}Kw(e,n){let i=this.Lw.get(e);i===void 0&&(i=[],this.Lw.set(e,i));const r=i.length!==0?i[i.length-1]:null;r===null||this.o_.key(n.wt)>this.o_.key(r.wt)?Ur(n)&&i.push(n):Ur(n)?i[i.length-1]=n:i.splice(-1,1),this.Ow.set(e,n.wt)}jw(e,n,i){const r=this.Lw.get(e);if(r===void 0)return;const s=gr(r,i,(o,l)=>o.Re<l);Ur(n)?r[s]=n:r.splice(s,1)}Hw(e,n){n.length!==0?(this.Lw.set(e,n.filter(Ur)),this.Ow.set(e,n[n.length-1].wt)):(this.Lw.delete(e),this.Ow.delete(e))}Ww(){for(const e of this.Nw)e.pointData.Bw.size===0&&this.zw.delete(this.o_.key(e.time))}Uw(e){let n=-1;for(let i=0;i<this.Nw.length&&i<e.length;++i){const r=this.Nw[i],s=e[i];if(this.o_.key(r.time)!==this.o_.key(s.time)){n=i;break}s.timeWeight=r.timeWeight,nc(s.pointData,i)}if(n===-1&&this.Nw.length!==e.length&&(n=Math.min(this.Nw.length,e.length)),n===-1)return-1;for(let i=n;i<e.length;++i)nc(e[i].pointData,i);return this.o_.fillWeightsForPoints(e,n),this.Nw=e,n}Xw(){if(this.Lw.size===0)return null;let e=0;return this.Lw.forEach(n=>{n.length!==0&&(e=Math.max(e,n[n.length-1].Re))}),e}$w(e,n,i){const r={Oo:new Map,Et:{ou:this.Xw()}};if(n!==-1)this.Lw.forEach((s,o)=>{r.Oo.set(o,{se:s,Zw:o===e?i:void 0})}),this.Lw.has(e)||r.Oo.set(e,{se:[],Zw:i}),r.Et.Gw=this.Nw,r.Et.Jw=n;else{const s=this.Lw.get(e);r.Oo.set(e,{se:s||[],Zw:i})}return r}}function nc(t,e){t.Re=e,t.Bw.forEach(n=>{n.Re=e})}function pb(t,e){return t.wt<e}function mb(t,e){return e<t.wt}function gb(t,e,n){const i=e.Uh(),r=e.bi(),s=gr(t,i,pb),o=sv(t,r,mb);if(!n)return{from:s,to:o};let l=s,a=o;return s>0&&s<t.length&&t[s].wt>=i&&(l=s-1),o>0&&o<t.length&&t[o-1].wt<=r&&(a=o+1),{from:l,to:a}}class jh{constructor(e,n,i){this.Qw=!0,this.tg=!0,this.ig=!0,this.sg=[],this.ng=null,this.Jn=e,this.Qn=n,this.eg=i}kt(e){this.Qw=!0,e==="data"&&(this.tg=!0),e==="options"&&(this.ig=!0)}Tt(){return this.Jn.Vt()?(this.rg(),this.ng===null?null:this.hg):null}ag(){this.sg=this.sg.map(e=>({...e,...this.Jn.Rh().Dr(e.wt)}))}lg(){this.ng=null}rg(){this.tg&&(this.og(),this.tg=!1),this.ig&&(this.ag(),this.ig=!1),this.Qw&&(this._g(),this.Qw=!1)}_g(){const e=this.Jn.Ft(),n=this.Qn.Et();if(this.lg(),n.Ki()||e.Ki())return;const i=n.Pe();if(i===null||this.Jn.Xs().zr()===0)return;const r=this.Jn.zt();r!==null&&(this.ng=gb(this.sg,i,this.eg),this.ug(e,n,r.Wt),this.cg())}}class yb{constructor(e,n){this.dg=e,this.Yi=n}nt(e,n,i){this.dg.draw(e,this.Yi,n,i)}}class vb extends jh{constructor(e,n,i){super(e,n,!1),this.sh=i,this.hg=new yb(this.sh.renderer(),r=>{const s=e.zt();return s===null?null:e.Ft().Nt(r,s.Wt)})}fa(e){return this.sh.priceValueBuilder(e)}va(e){return this.sh.isWhitespace(e)}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(n=>({wt:n.Re,_t:NaN,...e.Dr(n.Re),fg:n.se}))}ug(e,n){n._u(this.sg,Rs(this.ng))}cg(){this.sh.update({bars:this.sg.map(wb),barSpacing:this.Qn.Et().vu(),visibleRange:this.ng},this.Jn.N())}}function wb(t){return{x:t._t,time:t.wt,originalData:t.fg,barColor:t.cr}}const Sb={color:"#2196f3"},xb=(t,e,n)=>{const i=zn(n);return new vb(t,e,i)};function Bh(t){const e={value:t.Wt[3],time:t.Pw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function vp(t){const e=Bh(t);return t.R!==void 0&&(e.color=t.R),e}function Cb(t){const e=Bh(t);return t.vt!==void 0&&(e.lineColor=t.vt),t.mr!==void 0&&(e.topColor=t.mr),t.wr!==void 0&&(e.bottomColor=t.wr),e}function bb(t){const e=Bh(t);return t.gr!==void 0&&(e.topLineColor=t.gr),t.Mr!==void 0&&(e.bottomLineColor=t.Mr),t.br!==void 0&&(e.topFillColor1=t.br),t.Sr!==void 0&&(e.topFillColor2=t.Sr),t.Cr!==void 0&&(e.bottomFillColor1=t.Cr),t.Pr!==void 0&&(e.bottomFillColor2=t.Pr),e}function dv(t){const e={open:t.Wt[0],high:t.Wt[1],low:t.Wt[2],close:t.Wt[3],time:t.Pw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function kb(t){const e=dv(t);return t.R!==void 0&&(e.color=t.R),e}function Eb(t){const e=dv(t),{R:n,Ht:i,vr:r}=t;return n!==void 0&&(e.color=n),i!==void 0&&(e.borderColor=i),r!==void 0&&(e.wickColor=r),e}function Cu(t){return{Area:Cb,Line:vp,Baseline:bb,Histogram:vp,Bar:kb,Candlestick:Eb,Custom:Tb}[t]}function Tb(t){const e=t.Pw;return{...t.se,time:e}}const _b={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},Ab={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},Pb={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Qy,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},ic={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},Rb={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function wp(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:Pb,crosshair:_b,grid:Ab,overlayPriceScales:{...ic},leftPriceScale:{...ic,visible:!1},rightPriceScale:{...ic,visible:!0},timeScale:Rb,localization:{locale:yr?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class fv{constructor(e,n,i){this.Wf=e,this.pg=n,this.vg=i??0}applyOptions(e){this.Wf.Qt().lc(this.pg,e,this.vg)}options(){return this.Yi().N()}width(){return Yl(this.pg)?this.Wf.lw(this.pg):0}setVisibleRange(e){this.setAutoScale(!1),this.Yi().Wl(new ut(e.from,e.to))}getVisibleRange(){const e=this.Yi().Qe();return e===null?null:{from:e.$e(),to:e.qe()}}setAutoScale(e){this.applyOptions({autoScale:e})}Yi(){return W(this.Wf.Qt().oc(this.pg,this.vg)).Ft}}class Nb{constructor(e,n,i,r){this.Wf=e,this.Pt=i,this.mg=n,this.wg=r}getHeight(){return this.Pt.$t()}setHeight(e){const n=this.Wf.Qt(),i=n.Hc(this.Pt);n.fc(i,e)}getStretchFactor(){return this.Pt.Io()}setStretchFactor(e){this.Pt.Bo(e),this.Wf.Qt().Bh()}paneIndex(){return this.Wf.Qt().Hc(this.Pt)}moveTo(e){const n=this.paneIndex();n!==e&&(Qe(e>=0&&e<this.Wf.Uf().length,"Invalid pane index"),this.Wf.Qt().mc(n,e))}getSeries(){return this.Pt.Oo().map(e=>this.mg(e))??[]}getHTMLElement(){const e=this.Wf.Uf();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].Xf():null}attachPrimitive(e){this.Pt.ua(e),e.attached&&e.attached({chart:this.wg,requestUpdate:()=>this.Pt.Qt().Bh()})}detachPrimitive(e){this.Pt.ca(e)}priceScale(e){if(this.Pt.Do(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new fv(this.Wf,e,this.paneIndex())}setPreserveEmptyPane(e){this.Pt.zo(e)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(e,n={},i=0){return this.wg.addCustomSeries(e,n,i)}addSeries(e,n={}){return this.wg.addSeries(e,n,this.paneIndex())}}const Ib={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class Sp{constructor(e){this.ir=e}applyOptions(e){this.ir.hr(e)}options(){return this.ir.N()}gg(){return this.ir}}class Mb{constructor(e,n,i,r,s,o){this.Mg=new Fe,this.Jn=e,this.bg=n,this.Sg=i,this.o_=s,this.wg=r,this.xg=o}m(){this.Mg.m()}priceFormatter(){return this.Jn.ra()}priceToCoordinate(e){const n=this.Jn.zt();return n===null?null:this.Jn.Ft().Nt(e,n.Wt)}coordinateToPrice(e){const n=this.Jn.zt();return n===null?null:this.Jn.Ft().Ts(e,n.Wt)}barsInLogicalRange(e){if(e===null)return null;const n=new or(new ss(e.from,e.to)).k_(),i=this.Jn.Xs();if(i.Ki())return null;const r=i.Fr(n.Uh(),1),s=i.Fr(n.bi(),-1),o=W(i.Lr()),l=W(i.Ks());if(r!==null&&s!==null&&r.Re>s.Re)return{barsBefore:e.from-o,barsAfter:l-e.to};const a={barsBefore:r===null||r.Re===o?e.from-o:r.Re-o,barsAfter:s===null||s.Re===l?l-e.to:l-s.Re};return r!==null&&s!==null&&(a.from=r.Pw,a.to=s.Pw),a}setData(e){this.o_,this.Jn.Rr(),this.bg.Cg(this.Jn,e),this.Pg("full")}update(e,n=!1){this.Jn.Rr(),this.bg.kg(this.Jn,e,n),this.Pg("update")}dataByIndex(e,n){const i=this.Jn.Xs().Fr(e,n);return i===null?null:Cu(this.seriesType())(i)}data(){const e=Cu(this.seriesType());return this.Jn.Xs().Hr().map(n=>e(n))}subscribeDataChanged(e){this.Mg.i(e)}unsubscribeDataChanged(e){this.Mg._(e)}applyOptions(e){this.Jn.hr(e)}options(){return gn(this.Jn.N())}priceScale(){return this.Sg.priceScale(this.Jn.Ft().wa(),this.getPane().paneIndex())}createPriceLine(e){const n=Pt(gn(Ib),e),i=this.Jn.Oh(n);return new Sp(i)}removePriceLine(e){this.Jn.Nh(e.gg())}priceLines(){return this.Jn.Fh().map(e=>new Sp(e))}seriesType(){return this.Jn.Rr()}attachPrimitive(e){this.Jn.ua(e),e.attached&&e.attached({chart:this.wg,series:this,requestUpdate:()=>this.Jn.Qt().Bh(),horzScaleBehavior:this.o_})}detachPrimitive(e){this.Jn.ca(e),e.detached&&e.detached(),this.Jn.Qt().Bh()}getPane(){const e=this.Jn,n=W(this.Jn.Qt().Hn(e));return this.xg(n)}moveToPane(e){this.Jn.Qt().Oc(this.Jn,e)}seriesOrder(){const e=this.Jn.Qt().Hn(this.Jn);return e===null?-1:e.Oo().indexOf(this.Jn)}setSeriesOrder(e){const n=this.Jn.Qt().Hn(this.Jn);n!==null&&n.Qo(this.Jn,e)}Pg(e){this.Mg.v()&&this.Mg.p(e)}}class Db{constructor(e,n,i){this.yg=new Fe,this.z_=new Fe,this.wm=new Fe,this.ts=e,this.uh=e.Et(),this.Xm=n,this.uh.Du().i(this.Tg.bind(this)),this.uh.Vu().i(this.Rg.bind(this)),this.Xm.Pm().i(this.Dg.bind(this)),this.o_=i}m(){this.uh.Du().u(this),this.uh.Vu().u(this),this.Xm.Pm().u(this),this.yg.m(),this.z_.m(),this.wm.m()}scrollPosition(){return this.uh.wu()}scrollToPosition(e,n){n?this.uh.yu(e,1e3):this.ts.fn(e)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){const e=this.uh.su();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const n={from:this.o_.convertHorzItemToInternal(e.from),to:this.o_.convertHorzItemToInternal(e.to)},i=this.uh.hu(n);this.ts.zc(i)}getVisibleLogicalRange(){const e=this.uh.iu();return e===null?null:{from:e.Uh(),to:e.bi()}}setVisibleLogicalRange(e){Qe(e.from<=e.to,"The from index cannot be after the to index."),this.ts.zc(e)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Eu()}logicalToCoordinate(e){const n=this.ts.Et();return n.Ki()?null:n.qt(e)}coordinateToLogical(e){return this.uh.Ki()?null:this.uh.uu(e)}timeToIndex(e,n){const i=this.o_.convertHorzItemToInternal(e);return this.uh.J_(i,n)}timeToCoordinate(e){const n=this.timeToIndex(e,!1);return n===null?null:this.uh.qt(n)}coordinateToTime(e){const n=this.ts.Et(),i=n.uu(e),r=n.ss(i);return r===null?null:r.originalTime}width(){return this.Xm.Zf().width}height(){return this.Xm.Zf().height}subscribeVisibleTimeRangeChange(e){this.yg.i(e)}unsubscribeVisibleTimeRangeChange(e){this.yg._(e)}subscribeVisibleLogicalRangeChange(e){this.z_.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.z_._(e)}subscribeSizeChange(e){this.wm.i(e)}unsubscribeSizeChange(e){this.wm._(e)}applyOptions(e){this.uh.hr(e)}options(){return{...gn(this.uh.N()),barSpacing:this.uh.vu()}}Tg(){this.yg.v()&&this.yg.p(this.getVisibleRange())}Rg(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Dg(e){this.wm.p(e.width,e.height)}}function Ob(t){if(t===void 0||t.type==="custom")return;const e=t;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(n){if(n>=1)return 0;let i=0;for(;i<8;i++){const r=Math.round(n);if(Math.abs(r-n)<1e-8)return i;n*=10}return i}(e.minMove))}function xp(t){return function(e){if(mo(e.handleScale)){const i=e.handleScale;e.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:i,axisDoubleClickReset:r}=e.handleScale;mo(i)&&(e.handleScale.axisPressedMouseMove={time:i,price:i}),mo(r)&&(e.handleScale.axisDoubleClickReset={time:r,price:r})}const n=e.handleScroll;mo(n)&&(e.handleScroll={horzTouchDrag:n,vertTouchDrag:n,mouseWheel:n,pressedMouseMove:n})}(t),t}class Lb{constructor(e,n,i){this.Vg=new Map,this.Ig=new Map,this.Bg=new Fe,this.Eg=new Fe,this.Ag=new Fe,this.$u=new WeakMap,this.zg=new fb(n);const r=i===void 0?gn(wp()):Pt(gn(wp()),xp(i));this.Lg=n,this.Wf=new sb(e,r,n),this.Wf.Kv().i(o=>{this.Bg.v()&&this.Bg.p(this.Og(o()))},this),this.Wf.Xv().i(o=>{this.Eg.v()&&this.Eg.p(this.Og(o()))},this),this.Wf.uc().i(o=>{this.Ag.v()&&this.Ag.p(this.Og(o()))},this);const s=this.Wf.Qt();this.Ng=new Db(s,this.Wf.tw(),this.Lg)}remove(){this.Wf.Kv().u(this),this.Wf.Xv().u(this),this.Wf.uc().u(this),this.Ng.m(),this.Wf.m(),this.Vg.clear(),this.Ig.clear(),this.Bg.m(),this.Eg.m(),this.Ag.m(),this.zg.m()}resize(e,n,i){this.autoSizeActive()||this.Wf.Gm(e,n,i)}addCustomSeries(e,n={},i=0){const r=(s=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...Sb,...s.defaultOptions()},Fg:xb,Wg:s}))(zn(e));return this.Hg(r,n,i)}addSeries(e,n={},i=0){return this.Hg(e,n,i)}removeSeries(e){const n=Ct(this.Vg.get(e)),i=this.zg.Ec(n);this.Wf.Qt().Ec(n),this.Ug(i),this.Vg.delete(e),this.Ig.delete(n)}Cg(e,n){this.Ug(this.zg.Fw(e,n))}kg(e,n,i){this.Ug(this.zg.Yw(e,n,i))}subscribeClick(e){this.Bg.i(e)}unsubscribeClick(e){this.Bg._(e)}subscribeCrosshairMove(e){this.Ag.i(e)}unsubscribeCrosshairMove(e){this.Ag._(e)}subscribeDblClick(e){this.Eg.i(e)}unsubscribeDblClick(e){this.Eg._(e)}priceScale(e,n=0){return new fv(this.Wf,e,n)}timeScale(){return this.Ng}applyOptions(e){this.Wf.hr(xp(e))}options(){return this.Wf.N()}takeScreenshot(){return this.Wf.hw()}addPane(e=!1){const n=this.Wf.Qt().Uc();return n.zo(e),this.$g(n)}removePane(e){this.Wf.Qt().dc(e)}swapPanes(e,n){this.Wf.Qt().vc(e,n)}autoSizeActive(){return this.Wf.uw()}chartElement(){return this.Wf.tp()}panes(){return this.Wf.Qt().$s().map(e=>this.$g(e))}paneSize(e=0){const n=this.Wf.fw(e);return{height:n.height,width:n.width}}setCrosshairPosition(e,n,i){const r=this.Vg.get(i);if(r===void 0)return;const s=this.Wf.Qt().Hn(r);s!==null&&this.Wf.Qt().Tc(e,n,s)}clearCrosshairPosition(){this.Wf.Qt().Rc(!0)}horzBehaviour(){return this.Lg}Hg(e,n={},i=0){Qe(e.Fg!==void 0),Ob(n.priceFormat),e.type==="Candlestick"&&function(a){a.borderColor!==void 0&&(a.borderUpColor=a.borderColor,a.borderDownColor=a.borderColor),a.wickColor!==void 0&&(a.wickUpColor=a.wickColor,a.wickDownColor=a.wickColor)}(n);const r=Pt(gn(Gy),gn(e.defaultOptions),n),s=e.Fg,o=new Gl(this.Wf.Qt(),e.type,r,s,e.Wg);this.Wf.Qt().Ic(o,i);const l=new Mb(o,this,this,this,this.Lg,a=>this.$g(a));return this.Vg.set(l,o),this.Ig.set(o,l),l}Ug(e){const n=this.Wf.Qt();n.Dc(e.Et.ou,e.Et.Gw,e.Et.Jw),e.Oo.forEach((i,r)=>r.ht(i.se,i.Zw)),n.Et().j_(),n.pu()}qg(e){return Ct(this.Ig.get(e))}Og(e){const n=new Map;e.Rw.forEach((r,s)=>{const o=s.Rr(),l=Cu(o)(r);if(o!=="Custom")Qe(lb(l));else{const a=s.pa();Qe(!a||a(l)===!1)}n.set(this.qg(s),l)});const i=e.Tw!==void 0&&this.Ig.has(e.Tw)?this.qg(e.Tw):void 0;return{time:e.Pw,logical:e.Re,point:e.kw,paneIndex:e.yw,hoveredSeries:i,hoveredObjectId:e.Dw,seriesData:n,sourceEvent:e.Vw}}$g(e){let n=this.$u.get(e);return n||(n=new Nb(this.Wf,i=>this.qg(i),e,this),this.$u.set(e,n)),n}}function Fb(t){if(Us(t)){const e=document.getElementById(t);return Qe(e!==null,`Cannot find element in DOM with id=${t}`),e}return t}function zb(t,e,n){const i=Fb(t),r=new Lb(i,e,n);return e.setOptions(r.options()),r}function Cp(t,e){return zb(t,new rp,rp.ad(e))}class Vh extends jh{constructor(e,n){super(e,n,!0)}ug(e,n,i){n._u(this.sg,Rs(this.ng)),e.$l(this.sg,i,Rs(this.ng))}Yg(e,n){return{wt:e,gt:n,_t:NaN,ut:NaN}}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(n=>{const i=n.Wt[3];return this.jg(n.Re,i,e)})}}function pv(t,e,n,i,r,s,o){if(e.length===0||i.from>=e.length||i.to<=0)return;const{context:l,horizontalPixelRatio:a,verticalPixelRatio:c}=t,h=e[i.from];let u=s(t,h),d=h;if(i.to-i.from<2){const f=r/2;l.beginPath();const p={_t:h._t-f,ut:h.ut},g={_t:h._t+f,ut:h.ut};l.moveTo(p._t*a,p.ut*c),l.lineTo(g._t*a,g.ut*c),o(t,u,p,g)}else{const f=(g,S)=>{o(t,u,d,S),l.beginPath(),u=g,d=S};let p=d;l.beginPath(),l.moveTo(h._t*a,h.ut*c);for(let g=i.from+1;g<i.to;++g){p=e[g];const S=s(t,p);switch(n){case 0:l.lineTo(p._t*a,p.ut*c);break;case 1:l.lineTo(p._t*a,e[g-1].ut*c),S!==u&&(f(S,p),l.lineTo(p._t*a,e[g-1].ut*c)),l.lineTo(p._t*a,p.ut*c);break;case 2:{const[m,y]=Ub(e,g-1,g);l.bezierCurveTo(m._t*a,m.ut*c,y._t*a,y.ut*c,p._t*a,p.ut*c);break}}n!==1&&S!==u&&(f(S,p),l.moveTo(p._t*a,p.ut*c))}(d!==p||d===p&&n===1)&&o(t,u,d,p)}}const bp=6;function rc(t,e){return{_t:t._t-e._t,ut:t.ut-e.ut}}function kp(t,e){return{_t:t._t/e,ut:t.ut/e}}function Ub(t,e,n){const i=Math.max(0,e-1),r=Math.min(t.length-1,n+1);var s,o;return[(s=t[e],o=kp(rc(t[n],t[i]),bp),{_t:s._t+o._t,ut:s.ut+o.ut}),rc(t[n],kp(rc(t[r],t[e]),bp))]}function $b(t,e){const n=t.context;n.strokeStyle=e,n.stroke()}class jb extends kn{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et(e){if(this.rt===null)return;const{ot:n,lt:i,Kg:r,Xg:s,ct:o,Xt:l,Zg:a}=this.rt;if(i===null)return;const c=e.context;c.lineCap="butt",c.lineWidth=o*e.verticalPixelRatio,Ci(c,l),c.lineJoin="round";const h=this.Gg.bind(this);s!==void 0&&pv(e,n,s,i,r,h,$b),a&&function(u,d,f,p,g){if(p.to-p.from<=0)return;const{horizontalPixelRatio:S,verticalPixelRatio:m,context:y}=u;let w=null;const b=Math.max(1,Math.floor(S))%2/2,A=f*m+b;for(let E=p.to-1;E>=p.from;--E){const P=d[E];if(P){const R=g(u,P);R!==w&&(y.beginPath(),w!==null&&y.fill(),y.fillStyle=R,w=R);const D=Math.round(P._t*S)+b,_=P.ut*m;y.moveTo(D,_),y.arc(D,_,A,0,2*Math.PI)}}y.fill()}(e,n,a,i,h)}}class mv extends jb{Gg(e,n){return n.vt}}class Bb extends Vh{constructor(){super(...arguments),this.hg=new mv}jg(e,n,i){return{...this.Yg(e,n),...i.Dr(e)}}cg(){const e=this.Jn.N(),n={ot:this.sg,Xt:e.lineStyle,Xg:e.lineVisible?e.lineType:void 0,ct:e.lineWidth,Zg:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,lt:this.ng,Kg:this.Qn.Et().vu()};this.hg.ht(n)}}const gv={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Fg:(t,e)=>new Bb(t,e)};function Vb(t,e,n,i,r){const{context:s,horizontalPixelRatio:o,verticalPixelRatio:l}=e;s.lineTo(r._t*o,t*l),s.lineTo(i._t*o,t*l),s.closePath(),s.fillStyle=n,s.fill()}class Hb extends kn{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et(e){if(this.rt===null)return;const{ot:n,lt:i,Kg:r,ct:s,Xt:o,Xg:l}=this.rt,a=this.rt.eM??(this.rt.rM?0:e.mediaSize.height);if(i===null)return;const c=e.context;c.lineCap="butt",c.lineJoin="round",c.lineWidth=s,Ci(c,o),c.lineWidth=1,pv(e,n,l,i,r,this.hM.bind(this),Vb.bind(null,a))}}class Wb{aM(e,n){const i=this.lM,{oM:r,_M:s,uM:o,cM:l,eM:a,dM:c,fM:h}=n;if(this.pM===void 0||i===void 0||i.oM!==r||i._M!==s||i.uM!==o||i.cM!==l||i.eM!==a||i.dM!==c||i.fM!==h){const{verticalPixelRatio:u}=e,d=a||c>0?u:1,f=c*d,p=h===e.bitmapSize.height?h:h*d,g=(a??0)*d,S=e.context.createLinearGradient(0,f,0,p);if(S.addColorStop(0,r),a!=null){const m=sr((g-f)/(p-f),0,1);S.addColorStop(m,s),S.addColorStop(m,o)}S.addColorStop(1,l),this.pM=S,this.lM=n}return this.pM}}class Yb extends Hb{constructor(){super(...arguments),this.vM=new Wb}hM(e,n){return this.vM.aM(e,{oM:n.mr,_M:"",uM:"",cM:n.wr,dM:this.rt?.dM??0,fM:e.bitmapSize.height})}}class Kb extends Vh{constructor(e,n){super(e,n),this.hg=new Xy,this.MM=new Yb,this.bM=new mv,this.hg.st([this.MM,this.bM])}jg(e,n,i){return{...this.Yg(e,n),...i.Dr(e)}}cg(){const e=this.Jn.N();if(this.ng===null||this.sg.length===0)return;let n;if(e.relativeGradient){n=this.sg[this.ng.from].ut;for(let i=this.ng.from;i<this.ng.to;i++){const r=this.sg[i];r.ut<n&&(n=r.ut)}}this.MM.ht({Xg:e.lineType,ot:this.sg,Xt:e.lineStyle,ct:e.lineWidth,eM:null,dM:n,rM:e.invertFilledArea,lt:this.ng,Kg:this.Qn.Et().vu()}),this.bM.ht({Xg:e.lineVisible?e.lineType:void 0,ot:this.sg,Xt:e.lineStyle,ct:e.lineWidth,lt:this.ng,Kg:this.Qn.Et().vu(),Zg:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}const Gb={type:"Area",isBuiltIn:!0,defaultOptions:{topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,relativeGradient:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Fg:(t,e)=>new Kb(t,e)};class qb extends jh{constructor(e,n){super(e,n,!1)}ug(e,n,i){n._u(this.sg,Rs(this.ng)),e.Yl(this.sg,i,Rs(this.ng))}yM(e,n,i){return{wt:e,qh:n.Wt[0],Yh:n.Wt[1],jh:n.Wt[2],Kh:n.Wt[3],_t:NaN,jl:NaN,Kl:NaN,Xl:NaN,Zl:NaN}}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(n=>this.jg(n.Re,n,e))}}class Qb extends kn{constructor(){super(...arguments),this.Yt=null,this.SM=0}ht(e){this.Yt=e}et(e){if(this.Yt===null||this.Yt.Xs.length===0||this.Yt.lt===null)return;const{horizontalPixelRatio:n}=e;this.SM=function(s,o){if(s>=2.5&&s<=4)return Math.floor(3*o);const l=1-.2*Math.atan(Math.max(4,s)-4)/(.5*Math.PI),a=Math.floor(s*l*o),c=Math.floor(s*o),h=Math.min(a,c);return Math.max(Math.floor(o),h)}(this.Yt.vu,n),this.SM>=2&&Math.floor(n)%2!=this.SM%2&&this.SM--;const i=this.Yt.Xs;this.Yt.TM&&this.RM(e,i,this.Yt.lt),this.Yt.Mi&&this._v(e,i,this.Yt.lt);const r=this.DM(n);(!this.Yt.Mi||this.SM>2*r)&&this.VM(e,i,this.Yt.lt)}RM(e,n,i){if(this.Yt===null)return;const{context:r,horizontalPixelRatio:s,verticalPixelRatio:o}=e;let l="",a=Math.min(Math.floor(s),Math.floor(this.Yt.vu*s));a=Math.max(Math.floor(s),Math.min(a,this.SM));const c=Math.floor(.5*a);let h=null;for(let u=i.from;u<i.to;u++){const d=n[u];d.pr!==l&&(r.fillStyle=d.pr,l=d.pr);const f=Math.round(Math.min(d.jl,d.Zl)*o),p=Math.round(Math.max(d.jl,d.Zl)*o),g=Math.round(d.Kl*o),S=Math.round(d.Xl*o);let m=Math.round(s*d._t)-c;const y=m+a-1;h!==null&&(m=Math.max(h+1,m),m=Math.min(m,y));const w=y-m+1;r.fillRect(m,g,w,f-g),r.fillRect(m,p+1,w,S-p),h=y}}DM(e){let n=Math.floor(1*e);this.SM<=2*n&&(n=Math.floor(.5*(this.SM-1)));const i=Math.max(Math.floor(e),n);return this.SM<=2*i?Math.max(Math.floor(e),Math.floor(1*e)):i}_v(e,n,i){if(this.Yt===null)return;const{context:r,horizontalPixelRatio:s,verticalPixelRatio:o}=e;let l="";const a=this.DM(s);let c=null;for(let h=i.from;h<i.to;h++){const u=n[h];u.dr!==l&&(r.fillStyle=u.dr,l=u.dr);let d=Math.round(u._t*s)-Math.floor(.5*this.SM);const f=d+this.SM-1,p=Math.round(Math.min(u.jl,u.Zl)*o),g=Math.round(Math.max(u.jl,u.Zl)*o);if(c!==null&&(d=Math.max(c+1,d),d=Math.min(d,f)),this.Yt.vu*s>2*a)Qx(r,d,p,f-d+1,g-p+1,a);else{const S=f-d+1;r.fillRect(d,p,S,g-p+1)}c=f}}VM(e,n,i){if(this.Yt===null)return;const{context:r,horizontalPixelRatio:s,verticalPixelRatio:o}=e;let l="";const a=this.DM(s);for(let c=i.from;c<i.to;c++){const h=n[c];let u=Math.round(Math.min(h.jl,h.Zl)*o),d=Math.round(Math.max(h.jl,h.Zl)*o),f=Math.round(h._t*s)-Math.floor(.5*this.SM),p=f+this.SM-1;if(h.cr!==l){const g=h.cr;r.fillStyle=g,l=g}this.Yt.Mi&&(f+=a,u+=a,p-=a,d-=a),u>d||r.fillRect(f,u,p-f+1,d-u+1)}}}class Xb extends qb{constructor(){super(...arguments),this.hg=new Qb}jg(e,n,i){return{...this.yM(e,n,i),...i.Dr(e)}}cg(){const e=this.Jn.N();this.hg.ht({Xs:this.sg,vu:this.Qn.Et().vu(),TM:e.wickVisible,Mi:e.borderVisible,lt:this.ng})}}const Jb={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Fg:(t,e)=>new Xb(t,e)};class Zb extends kn{constructor(){super(...arguments),this.Yt=null,this.IM=[]}ht(e){this.Yt=e,this.IM=[]}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.Yt===null||this.Yt.ot.length===0||this.Yt.lt===null)return;this.IM.length||this.BM(n);const r=Math.max(1,Math.floor(i)),s=Math.round(this.Yt.EM*i)-Math.floor(r/2),o=s+r;for(let l=this.Yt.lt.from;l<this.Yt.lt.to;l++){const a=this.Yt.ot[l],c=this.IM[l-this.Yt.lt.from],h=Math.round(a.ut*i);let u,d;e.fillStyle=a.cr,h<=s?(u=h,d=o):(u=s,d=h-Math.floor(r/2)+r),e.fillRect(c.Uh,u,c.bi-c.Uh+1,d-u)}}BM(e){if(this.Yt===null||this.Yt.ot.length===0||this.Yt.lt===null)return void(this.IM=[]);const n=Math.ceil(this.Yt.vu*e)<=1?0:Math.max(1,Math.floor(e)),i=Math.round(this.Yt.vu*e)-n;this.IM=new Array(this.Yt.lt.to-this.Yt.lt.from);for(let s=this.Yt.lt.from;s<this.Yt.lt.to;s++){const o=this.Yt.ot[s],l=Math.round(o._t*e);let a,c;if(i%2){const h=(i-1)/2;a=l-h,c=l+h}else{const h=i/2;a=l-h,c=l+h-1}this.IM[s-this.Yt.lt.from]={Uh:a,bi:c,AM:l,ne:o._t*e,wt:o.wt}}for(let s=this.Yt.lt.from+1;s<this.Yt.lt.to;s++){const o=this.IM[s-this.Yt.lt.from],l=this.IM[s-this.Yt.lt.from-1];o.wt===l.wt+1&&o.Uh-l.bi!==n+1&&(l.AM>l.ne?l.bi=o.Uh-n-1:o.Uh=l.bi+n+1)}let r=Math.ceil(this.Yt.vu*e);for(let s=this.Yt.lt.from;s<this.Yt.lt.to;s++){const o=this.IM[s-this.Yt.lt.from];o.bi<o.Uh&&(o.bi=o.Uh);const l=o.bi-o.Uh+1;r=Math.min(l,r)}if(n>0&&r<4)for(let s=this.Yt.lt.from;s<this.Yt.lt.to;s++){const o=this.IM[s-this.Yt.lt.from];o.bi-o.Uh+1>r&&(o.AM>o.ne?o.bi-=1:o.Uh+=1)}}}class e1 extends Vh{constructor(){super(...arguments),this.hg=new Zb}jg(e,n,i){return{...this.Yg(e,n),...i.Dr(e)}}cg(){const e={ot:this.sg,vu:this.Qn.Et().vu(),lt:this.ng,EM:this.Jn.Ft().Nt(this.Jn.N().base,W(this.Jn.zt()).Wt)};this.hg.ht(e)}}const t1={type:"Histogram",isBuiltIn:!0,defaultOptions:{color:"#26a69a",base:0},Fg:(t,e)=>new e1(t,e)};({...Gy});function yv(t,e){return function(){return t.apply(e,arguments)}}const{toString:n1}=Object.prototype,{getPrototypeOf:Hh}=Object,{iterator:Ql,toStringTag:vv}=Symbol,Xl=(t=>e=>{const n=n1.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Jt=t=>(t=t.toLowerCase(),e=>Xl(e)===t),Jl=t=>e=>typeof e===t,{isArray:br}=Array,Ns=Jl("undefined");function $s(t){return t!==null&&!Ns(t)&&t.constructor!==null&&!Ns(t.constructor)&&St(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const wv=Jt("ArrayBuffer");function i1(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&wv(t.buffer),e}const r1=Jl("string"),St=Jl("function"),Sv=Jl("number"),js=t=>t!==null&&typeof t=="object",s1=t=>t===!0||t===!1,$o=t=>{if(Xl(t)!=="object")return!1;const e=Hh(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(vv in t)&&!(Ql in t)},o1=t=>{if(!js(t)||$s(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},l1=Jt("Date"),a1=Jt("File"),c1=Jt("Blob"),u1=Jt("FileList"),h1=t=>js(t)&&St(t.pipe),d1=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||St(t.append)&&((e=Xl(t))==="formdata"||e==="object"&&St(t.toString)&&t.toString()==="[object FormData]"))},f1=Jt("URLSearchParams"),[p1,m1,g1,y1]=["ReadableStream","Request","Response","Headers"].map(Jt),v1=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bs(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,r;if(typeof t!="object"&&(t=[t]),br(t))for(i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else{if($s(t))return;const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let l;for(i=0;i<o;i++)l=s[i],e.call(null,t[l],l,t)}}function xv(t,e){if($s(t))return null;e=e.toLowerCase();const n=Object.keys(t);let i=n.length,r;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const hi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Cv=t=>!Ns(t)&&t!==hi;function bu(){const{caseless:t}=Cv(this)&&this||{},e={},n=(i,r)=>{const s=t&&xv(e,r)||r;$o(e[s])&&$o(i)?e[s]=bu(e[s],i):$o(i)?e[s]=bu({},i):br(i)?e[s]=i.slice():e[s]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Bs(arguments[i],n);return e}const w1=(t,e,n,{allOwnKeys:i}={})=>(Bs(e,(r,s)=>{n&&St(r)?t[s]=yv(r,n):t[s]=r},{allOwnKeys:i}),t),S1=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),x1=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},C1=(t,e,n,i)=>{let r,s,o;const l={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),s=r.length;s-- >0;)o=r[s],(!i||i(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=n!==!1&&Hh(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},b1=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},k1=t=>{if(!t)return null;if(br(t))return t;let e=t.length;if(!Sv(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},E1=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Hh(Uint8Array)),T1=(t,e)=>{const i=(t&&t[Ql]).call(t);let r;for(;(r=i.next())&&!r.done;){const s=r.value;e.call(t,s[0],s[1])}},_1=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},A1=Jt("HTMLFormElement"),P1=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,r){return i.toUpperCase()+r}),Ep=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),R1=Jt("RegExp"),bv=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};Bs(n,(r,s)=>{let o;(o=e(r,s,t))!==!1&&(i[s]=o||r)}),Object.defineProperties(t,i)},N1=t=>{bv(t,(e,n)=>{if(St(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(St(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},I1=(t,e)=>{const n={},i=r=>{r.forEach(s=>{n[s]=!0})};return br(t)?i(t):i(String(t).split(e)),n},M1=()=>{},D1=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function O1(t){return!!(t&&St(t.append)&&t[vv]==="FormData"&&t[Ql])}const L1=t=>{const e=new Array(10),n=(i,r)=>{if(js(i)){if(e.indexOf(i)>=0)return;if($s(i))return i;if(!("toJSON"in i)){e[r]=i;const s=br(i)?[]:{};return Bs(i,(o,l)=>{const a=n(o,r+1);!Ns(a)&&(s[l]=a)}),e[r]=void 0,s}}return i};return n(t,0)},F1=Jt("AsyncFunction"),z1=t=>t&&(js(t)||St(t))&&St(t.then)&&St(t.catch),kv=((t,e)=>t?setImmediate:e?((n,i)=>(hi.addEventListener("message",({source:r,data:s})=>{r===hi&&s===n&&i.length&&i.shift()()},!1),r=>{i.push(r),hi.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",St(hi.postMessage)),U1=typeof queueMicrotask<"u"?queueMicrotask.bind(hi):typeof process<"u"&&process.nextTick||kv,$1=t=>t!=null&&St(t[Ql]),I={isArray:br,isArrayBuffer:wv,isBuffer:$s,isFormData:d1,isArrayBufferView:i1,isString:r1,isNumber:Sv,isBoolean:s1,isObject:js,isPlainObject:$o,isEmptyObject:o1,isReadableStream:p1,isRequest:m1,isResponse:g1,isHeaders:y1,isUndefined:Ns,isDate:l1,isFile:a1,isBlob:c1,isRegExp:R1,isFunction:St,isStream:h1,isURLSearchParams:f1,isTypedArray:E1,isFileList:u1,forEach:Bs,merge:bu,extend:w1,trim:v1,stripBOM:S1,inherits:x1,toFlatObject:C1,kindOf:Xl,kindOfTest:Jt,endsWith:b1,toArray:k1,forEachEntry:T1,matchAll:_1,isHTMLForm:A1,hasOwnProperty:Ep,hasOwnProp:Ep,reduceDescriptors:bv,freezeMethods:N1,toObjectSet:I1,toCamelCase:P1,noop:M1,toFiniteNumber:D1,findKey:xv,global:hi,isContextDefined:Cv,isSpecCompliantForm:O1,toJSONObject:L1,isAsyncFn:F1,isThenable:z1,setImmediate:kv,asap:U1,isIterable:$1};function le(t,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}I.inherits(le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:I.toJSONObject(this.config),code:this.code,status:this.status}}});const Ev=le.prototype,Tv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Tv[t]={value:t}});Object.defineProperties(le,Tv);Object.defineProperty(Ev,"isAxiosError",{value:!0});le.from=(t,e,n,i,r,s)=>{const o=Object.create(Ev);return I.toFlatObject(t,o,function(a){return a!==Error.prototype},l=>l!=="isAxiosError"),le.call(o,t.message,e,n,i,r),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const j1=null;function ku(t){return I.isPlainObject(t)||I.isArray(t)}function _v(t){return I.endsWith(t,"[]")?t.slice(0,-2):t}function Tp(t,e,n){return t?t.concat(e).map(function(r,s){return r=_v(r),!n&&s?"["+r+"]":r}).join(n?".":""):e}function B1(t){return I.isArray(t)&&!t.some(ku)}const V1=I.toFlatObject(I,{},null,function(e){return/^is[A-Z]/.test(e)});function Zl(t,e,n){if(!I.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=I.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,S){return!I.isUndefined(S[g])});const i=n.metaTokens,r=n.visitor||h,s=n.dots,o=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&I.isSpecCompliantForm(e);if(!I.isFunction(r))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(I.isDate(p))return p.toISOString();if(I.isBoolean(p))return p.toString();if(!a&&I.isBlob(p))throw new le("Blob is not supported. Use a Buffer instead.");return I.isArrayBuffer(p)||I.isTypedArray(p)?a&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function h(p,g,S){let m=p;if(p&&!S&&typeof p=="object"){if(I.endsWith(g,"{}"))g=i?g:g.slice(0,-2),p=JSON.stringify(p);else if(I.isArray(p)&&B1(p)||(I.isFileList(p)||I.endsWith(g,"[]"))&&(m=I.toArray(p)))return g=_v(g),m.forEach(function(w,b){!(I.isUndefined(w)||w===null)&&e.append(o===!0?Tp([g],b,s):o===null?g:g+"[]",c(w))}),!1}return ku(p)?!0:(e.append(Tp(S,g,s),c(p)),!1)}const u=[],d=Object.assign(V1,{defaultVisitor:h,convertValue:c,isVisitable:ku});function f(p,g){if(!I.isUndefined(p)){if(u.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));u.push(p),I.forEach(p,function(m,y){(!(I.isUndefined(m)||m===null)&&r.call(e,m,I.isString(y)?y.trim():y,g,d))===!0&&f(m,g?g.concat(y):[y])}),u.pop()}}if(!I.isObject(t))throw new TypeError("data must be an object");return f(t),e}function _p(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Wh(t,e){this._pairs=[],t&&Zl(t,this,e)}const Av=Wh.prototype;Av.append=function(e,n){this._pairs.push([e,n])};Av.toString=function(e){const n=e?function(i){return e.call(this,i,_p)}:_p;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function H1(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Pv(t,e,n){if(!e)return t;const i=n&&n.encode||H1;I.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let s;if(r?s=r(e,n):s=I.isURLSearchParams(e)?e.toString():new Wh(e,n).toString(i),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Ap{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){I.forEach(this.handlers,function(i){i!==null&&e(i)})}}const Rv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},W1=typeof URLSearchParams<"u"?URLSearchParams:Wh,Y1=typeof FormData<"u"?FormData:null,K1=typeof Blob<"u"?Blob:null,G1={isBrowser:!0,classes:{URLSearchParams:W1,FormData:Y1,Blob:K1},protocols:["http","https","file","blob","url","data"]},Yh=typeof window<"u"&&typeof document<"u",Eu=typeof navigator=="object"&&navigator||void 0,q1=Yh&&(!Eu||["ReactNative","NativeScript","NS"].indexOf(Eu.product)<0),Q1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",X1=Yh&&window.location.href||"http://localhost",J1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Yh,hasStandardBrowserEnv:q1,hasStandardBrowserWebWorkerEnv:Q1,navigator:Eu,origin:X1},Symbol.toStringTag,{value:"Module"})),it={...J1,...G1};function Z1(t,e){return Zl(t,new it.classes.URLSearchParams,{visitor:function(n,i,r,s){return it.isNode&&I.isBuffer(n)?(this.append(i,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function ek(t){return I.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function tk(t){const e={},n=Object.keys(t);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],e[s]=t[s];return e}function Nv(t){function e(n,i,r,s){let o=n[s++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),a=s>=n.length;return o=!o&&I.isArray(r)?r.length:o,a?(I.hasOwnProp(r,o)?r[o]=[r[o],i]:r[o]=i,!l):((!r[o]||!I.isObject(r[o]))&&(r[o]=[]),e(n,i,r[o],s)&&I.isArray(r[o])&&(r[o]=tk(r[o])),!l)}if(I.isFormData(t)&&I.isFunction(t.entries)){const n={};return I.forEachEntry(t,(i,r)=>{e(ek(i),r,n,0)}),n}return null}function nk(t,e,n){if(I.isString(t))try{return(e||JSON.parse)(t),I.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const Vs={transitional:Rv,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",r=i.indexOf("application/json")>-1,s=I.isObject(e);if(s&&I.isHTMLForm(e)&&(e=new FormData(e)),I.isFormData(e))return r?JSON.stringify(Nv(e)):e;if(I.isArrayBuffer(e)||I.isBuffer(e)||I.isStream(e)||I.isFile(e)||I.isBlob(e)||I.isReadableStream(e))return e;if(I.isArrayBufferView(e))return e.buffer;if(I.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Z1(e,this.formSerializer).toString();if((l=I.isFileList(e))||i.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return Zl(l?{"files[]":e}:e,a&&new a,this.formSerializer)}}return s||r?(n.setContentType("application/json",!1),nk(e)):e}],transformResponse:[function(e){const n=this.transitional||Vs.transitional,i=n&&n.forcedJSONParsing,r=this.responseType==="json";if(I.isResponse(e)||I.isReadableStream(e))return e;if(e&&I.isString(e)&&(i&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?le.from(l,le.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:it.classes.FormData,Blob:it.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};I.forEach(["delete","get","head","post","put","patch"],t=>{Vs.headers[t]={}});const ik=I.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rk=t=>{const e={};let n,i,r;return t&&t.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),i=o.substring(r+1).trim(),!(!n||e[n]&&ik[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},Pp=Symbol("internals");function $r(t){return t&&String(t).trim().toLowerCase()}function jo(t){return t===!1||t==null?t:I.isArray(t)?t.map(jo):String(t)}function sk(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const ok=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function sc(t,e,n,i,r){if(I.isFunction(i))return i.call(this,e,n);if(r&&(e=n),!!I.isString(e)){if(I.isString(i))return e.indexOf(i)!==-1;if(I.isRegExp(i))return i.test(e)}}function lk(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function ak(t,e){const n=I.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(r,s,o){return this[i].call(this,e,r,s,o)},configurable:!0})})}let xt=class{constructor(e){e&&this.set(e)}set(e,n,i){const r=this;function s(l,a,c){const h=$r(a);if(!h)throw new Error("header name must be a non-empty string");const u=I.findKey(r,h);(!u||r[u]===void 0||c===!0||c===void 0&&r[u]!==!1)&&(r[u||a]=jo(l))}const o=(l,a)=>I.forEach(l,(c,h)=>s(c,h,a));if(I.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(I.isString(e)&&(e=e.trim())&&!ok(e))o(rk(e),n);else if(I.isObject(e)&&I.isIterable(e)){let l={},a,c;for(const h of e){if(!I.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[c=h[0]]=(a=l[c])?I.isArray(a)?[...a,h[1]]:[a,h[1]]:h[1]}o(l,n)}else e!=null&&s(n,e,i);return this}get(e,n){if(e=$r(e),e){const i=I.findKey(this,e);if(i){const r=this[i];if(!n)return r;if(n===!0)return sk(r);if(I.isFunction(n))return n.call(this,r,i);if(I.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=$r(e),e){const i=I.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||sc(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let r=!1;function s(o){if(o=$r(o),o){const l=I.findKey(i,o);l&&(!n||sc(i,i[l],l,n))&&(delete i[l],r=!0)}}return I.isArray(e)?e.forEach(s):s(e),r}clear(e){const n=Object.keys(this);let i=n.length,r=!1;for(;i--;){const s=n[i];(!e||sc(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const n=this,i={};return I.forEach(this,(r,s)=>{const o=I.findKey(i,s);if(o){n[o]=jo(r),delete n[s];return}const l=e?lk(s):String(s).trim();l!==s&&delete n[s],n[l]=jo(r),i[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return I.forEach(this,(i,r)=>{i!=null&&i!==!1&&(n[r]=e&&I.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[Pp]=this[Pp]={accessors:{}}).accessors,r=this.prototype;function s(o){const l=$r(o);i[l]||(ak(r,o),i[l]=!0)}return I.isArray(e)?e.forEach(s):s(e),this}};xt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);I.reduceDescriptors(xt.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});I.freezeMethods(xt);function oc(t,e){const n=this||Vs,i=e||n,r=xt.from(i.headers);let s=i.data;return I.forEach(t,function(l){s=l.call(n,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function Iv(t){return!!(t&&t.__CANCEL__)}function kr(t,e,n){le.call(this,t??"canceled",le.ERR_CANCELED,e,n),this.name="CanceledError"}I.inherits(kr,le,{__CANCEL__:!0});function Mv(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new le("Request failed with status code "+n.status,[le.ERR_BAD_REQUEST,le.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function ck(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function uk(t,e){t=t||10;const n=new Array(t),i=new Array(t);let r=0,s=0,o;return e=e!==void 0?e:1e3,function(a){const c=Date.now(),h=i[s];o||(o=c),n[r]=a,i[r]=c;let u=s,d=0;for(;u!==r;)d+=n[u++],u=u%t;if(r=(r+1)%t,r===s&&(s=(s+1)%t),c-o<e)return;const f=h&&c-h;return f?Math.round(d*1e3/f):void 0}}function hk(t,e){let n=0,i=1e3/e,r,s;const o=(c,h=Date.now())=>{n=h,r=null,s&&(clearTimeout(s),s=null),t(...c)};return[(...c)=>{const h=Date.now(),u=h-n;u>=i?o(c,h):(r=c,s||(s=setTimeout(()=>{s=null,o(r)},i-u)))},()=>r&&o(r)]}const Cl=(t,e,n=3)=>{let i=0;const r=uk(50,250);return hk(s=>{const o=s.loaded,l=s.lengthComputable?s.total:void 0,a=o-i,c=r(a),h=o<=l;i=o;const u={loaded:o,total:l,progress:l?o/l:void 0,bytes:a,rate:c||void 0,estimated:c&&l&&h?(l-o)/c:void 0,event:s,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(u)},n)},Rp=(t,e)=>{const n=t!=null;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},Np=t=>(...e)=>I.asap(()=>t(...e)),dk=it.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,it.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(it.origin),it.navigator&&/(msie|trident)/i.test(it.navigator.userAgent)):()=>!0,fk=it.hasStandardBrowserEnv?{write(t,e,n,i,r,s){const o=[t+"="+encodeURIComponent(e)];I.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),I.isString(i)&&o.push("path="+i),I.isString(r)&&o.push("domain="+r),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function pk(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function mk(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Dv(t,e,n){let i=!pk(e);return t&&(i||n==!1)?mk(t,e):e}const Ip=t=>t instanceof xt?{...t}:t;function Ei(t,e){e=e||{};const n={};function i(c,h,u,d){return I.isPlainObject(c)&&I.isPlainObject(h)?I.merge.call({caseless:d},c,h):I.isPlainObject(h)?I.merge({},h):I.isArray(h)?h.slice():h}function r(c,h,u,d){if(I.isUndefined(h)){if(!I.isUndefined(c))return i(void 0,c,u,d)}else return i(c,h,u,d)}function s(c,h){if(!I.isUndefined(h))return i(void 0,h)}function o(c,h){if(I.isUndefined(h)){if(!I.isUndefined(c))return i(void 0,c)}else return i(void 0,h)}function l(c,h,u){if(u in e)return i(c,h);if(u in t)return i(void 0,c)}const a={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(c,h,u)=>r(Ip(c),Ip(h),u,!0)};return I.forEach(Object.keys({...t,...e}),function(h){const u=a[h]||r,d=u(t[h],e[h],h);I.isUndefined(d)&&u!==l||(n[h]=d)}),n}const Ov=t=>{const e=Ei({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:s,headers:o,auth:l}=e;e.headers=o=xt.from(o),e.url=Pv(Dv(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let a;if(I.isFormData(n)){if(it.hasStandardBrowserEnv||it.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((a=o.getContentType())!==!1){const[c,...h]=a?a.split(";").map(u=>u.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...h].join("; "))}}if(it.hasStandardBrowserEnv&&(i&&I.isFunction(i)&&(i=i(e)),i||i!==!1&&dk(e.url))){const c=r&&s&&fk.read(s);c&&o.set(r,c)}return e},gk=typeof XMLHttpRequest<"u",yk=gk&&function(t){return new Promise(function(n,i){const r=Ov(t);let s=r.data;const o=xt.from(r.headers).normalize();let{responseType:l,onUploadProgress:a,onDownloadProgress:c}=r,h,u,d,f,p;function g(){f&&f(),p&&p(),r.cancelToken&&r.cancelToken.unsubscribe(h),r.signal&&r.signal.removeEventListener("abort",h)}let S=new XMLHttpRequest;S.open(r.method.toUpperCase(),r.url,!0),S.timeout=r.timeout;function m(){if(!S)return;const w=xt.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),A={data:!l||l==="text"||l==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:w,config:t,request:S};Mv(function(P){n(P),g()},function(P){i(P),g()},A),S=null}"onloadend"in S?S.onloadend=m:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(m)},S.onabort=function(){S&&(i(new le("Request aborted",le.ECONNABORTED,t,S)),S=null)},S.onerror=function(){i(new le("Network Error",le.ERR_NETWORK,t,S)),S=null},S.ontimeout=function(){let b=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const A=r.transitional||Rv;r.timeoutErrorMessage&&(b=r.timeoutErrorMessage),i(new le(b,A.clarifyTimeoutError?le.ETIMEDOUT:le.ECONNABORTED,t,S)),S=null},s===void 0&&o.setContentType(null),"setRequestHeader"in S&&I.forEach(o.toJSON(),function(b,A){S.setRequestHeader(A,b)}),I.isUndefined(r.withCredentials)||(S.withCredentials=!!r.withCredentials),l&&l!=="json"&&(S.responseType=r.responseType),c&&([d,p]=Cl(c,!0),S.addEventListener("progress",d)),a&&S.upload&&([u,f]=Cl(a),S.upload.addEventListener("progress",u),S.upload.addEventListener("loadend",f)),(r.cancelToken||r.signal)&&(h=w=>{S&&(i(!w||w.type?new kr(null,t,S):w),S.abort(),S=null)},r.cancelToken&&r.cancelToken.subscribe(h),r.signal&&(r.signal.aborted?h():r.signal.addEventListener("abort",h)));const y=ck(r.url);if(y&&it.protocols.indexOf(y)===-1){i(new le("Unsupported protocol "+y+":",le.ERR_BAD_REQUEST,t));return}S.send(s||null)})},vk=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let i=new AbortController,r;const s=function(c){if(!r){r=!0,l();const h=c instanceof Error?c:this.reason;i.abort(h instanceof le?h:new kr(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,s(new le(`timeout ${e} of ms exceeded`,le.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:a}=i;return a.unsubscribe=()=>I.asap(l),a}},wk=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let i=0,r;for(;i<n;)r=i+e,yield t.slice(i,r),i=r},Sk=async function*(t,e){for await(const n of xk(t))yield*wk(n,e)},xk=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:i}=await e.read();if(n)break;yield i}}finally{await e.cancel()}},Mp=(t,e,n,i)=>{const r=Sk(t,e);let s=0,o,l=a=>{o||(o=!0,i&&i(a))};return new ReadableStream({async pull(a){try{const{done:c,value:h}=await r.next();if(c){l(),a.close();return}let u=h.byteLength;if(n){let d=s+=u;n(d)}a.enqueue(new Uint8Array(h))}catch(c){throw l(c),c}},cancel(a){return l(a),r.return()}},{highWaterMark:2})},ea=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Lv=ea&&typeof ReadableStream=="function",Ck=ea&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Fv=(t,...e)=>{try{return!!t(...e)}catch{return!1}},bk=Lv&&Fv(()=>{let t=!1;const e=new Request(it.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),Dp=64*1024,Tu=Lv&&Fv(()=>I.isReadableStream(new Response("").body)),bl={stream:Tu&&(t=>t.body)};ea&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!bl[e]&&(bl[e]=I.isFunction(t[e])?n=>n[e]():(n,i)=>{throw new le(`Response type '${e}' is not supported`,le.ERR_NOT_SUPPORT,i)})})})(new Response);const kk=async t=>{if(t==null)return 0;if(I.isBlob(t))return t.size;if(I.isSpecCompliantForm(t))return(await new Request(it.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(I.isArrayBufferView(t)||I.isArrayBuffer(t))return t.byteLength;if(I.isURLSearchParams(t)&&(t=t+""),I.isString(t))return(await Ck(t)).byteLength},Ek=async(t,e)=>{const n=I.toFiniteNumber(t.getContentLength());return n??kk(e)},Tk=ea&&(async t=>{let{url:e,method:n,data:i,signal:r,cancelToken:s,timeout:o,onDownloadProgress:l,onUploadProgress:a,responseType:c,headers:h,withCredentials:u="same-origin",fetchOptions:d}=Ov(t);c=c?(c+"").toLowerCase():"text";let f=vk([r,s&&s.toAbortSignal()],o),p;const g=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let S;try{if(a&&bk&&n!=="get"&&n!=="head"&&(S=await Ek(h,i))!==0){let A=new Request(e,{method:"POST",body:i,duplex:"half"}),E;if(I.isFormData(i)&&(E=A.headers.get("content-type"))&&h.setContentType(E),A.body){const[P,R]=Rp(S,Cl(Np(a)));i=Mp(A.body,Dp,P,R)}}I.isString(u)||(u=u?"include":"omit");const m="credentials"in Request.prototype;p=new Request(e,{...d,signal:f,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:i,duplex:"half",credentials:m?u:void 0});let y=await fetch(p,d);const w=Tu&&(c==="stream"||c==="response");if(Tu&&(l||w&&g)){const A={};["status","statusText","headers"].forEach(D=>{A[D]=y[D]});const E=I.toFiniteNumber(y.headers.get("content-length")),[P,R]=l&&Rp(E,Cl(Np(l),!0))||[];y=new Response(Mp(y.body,Dp,P,()=>{R&&R(),g&&g()}),A)}c=c||"text";let b=await bl[I.findKey(bl,c)||"text"](y,t);return!w&&g&&g(),await new Promise((A,E)=>{Mv(A,E,{data:b,headers:xt.from(y.headers),status:y.status,statusText:y.statusText,config:t,request:p})})}catch(m){throw g&&g(),m&&m.name==="TypeError"&&/Load failed|fetch/i.test(m.message)?Object.assign(new le("Network Error",le.ERR_NETWORK,t,p),{cause:m.cause||m}):le.from(m,m&&m.code,t,p)}}),_u={http:j1,xhr:yk,fetch:Tk};I.forEach(_u,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Op=t=>`- ${t}`,_k=t=>I.isFunction(t)||t===null||t===!1,zv={getAdapter:t=>{t=I.isArray(t)?t:[t];const{length:e}=t;let n,i;const r={};for(let s=0;s<e;s++){n=t[s];let o;if(i=n,!_k(n)&&(i=_u[(o=String(n)).toLowerCase()],i===void 0))throw new le(`Unknown adapter '${o}'`);if(i)break;r[o||"#"+s]=i}if(!i){const s=Object.entries(r).map(([l,a])=>`adapter ${l} `+(a===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(Op).join(`
`):" "+Op(s[0]):"as no adapter specified";throw new le("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:_u};function lc(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new kr(null,t)}function Lp(t){return lc(t),t.headers=xt.from(t.headers),t.data=oc.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),zv.getAdapter(t.adapter||Vs.adapter)(t).then(function(i){return lc(t),i.data=oc.call(t,t.transformResponse,i),i.headers=xt.from(i.headers),i},function(i){return Iv(i)||(lc(t),i&&i.response&&(i.response.data=oc.call(t,t.transformResponse,i.response),i.response.headers=xt.from(i.response.headers))),Promise.reject(i)})}const Uv="1.11.0",ta={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{ta[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const Fp={};ta.transitional=function(e,n,i){function r(s,o){return"[Axios v"+Uv+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,l)=>{if(e===!1)throw new le(r(o," has been removed"+(n?" in "+n:"")),le.ERR_DEPRECATED);return n&&!Fp[o]&&(Fp[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,l):!0}};ta.spelling=function(e){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function Ak(t,e,n){if(typeof t!="object")throw new le("options must be an object",le.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const s=i[r],o=e[s];if(o){const l=t[s],a=l===void 0||o(l,s,t);if(a!==!0)throw new le("option "+s+" must be "+a,le.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new le("Unknown option "+s,le.ERR_BAD_OPTION)}}const Bo={assertOptions:Ak,validators:ta},rn=Bo.validators;let mi=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Ap,response:new Ap}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ei(this.defaults,n);const{transitional:i,paramsSerializer:r,headers:s}=n;i!==void 0&&Bo.assertOptions(i,{silentJSONParsing:rn.transitional(rn.boolean),forcedJSONParsing:rn.transitional(rn.boolean),clarifyTimeoutError:rn.transitional(rn.boolean)},!1),r!=null&&(I.isFunction(r)?n.paramsSerializer={serialize:r}:Bo.assertOptions(r,{encode:rn.function,serialize:rn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Bo.assertOptions(n,{baseUrl:rn.spelling("baseURL"),withXsrfToken:rn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&I.merge(s.common,s[n.method]);s&&I.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=xt.concat(o,s);const l=[];let a=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(a=a&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let h,u=0,d;if(!a){const p=[Lp.bind(this),void 0];for(p.unshift(...l),p.push(...c),d=p.length,h=Promise.resolve(n);u<d;)h=h.then(p[u++],p[u++]);return h}d=l.length;let f=n;for(u=0;u<d;){const p=l[u++],g=l[u++];try{f=p(f)}catch(S){g.call(this,S);break}}try{h=Lp.call(this,f)}catch(p){return Promise.reject(p)}for(u=0,d=c.length;u<d;)h=h.then(c[u++],c[u++]);return h}getUri(e){e=Ei(this.defaults,e);const n=Dv(e.baseURL,e.url,e.allowAbsoluteUrls);return Pv(n,e.params,e.paramsSerializer)}};I.forEach(["delete","get","head","options"],function(e){mi.prototype[e]=function(n,i){return this.request(Ei(i||{},{method:e,url:n,data:(i||{}).data}))}});I.forEach(["post","put","patch"],function(e){function n(i){return function(s,o,l){return this.request(Ei(l||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}mi.prototype[e]=n(),mi.prototype[e+"Form"]=n(!0)});let Pk=class $v{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(l=>{i.subscribe(l),s=l}).then(r);return o.cancel=function(){i.unsubscribe(s)},o},e(function(s,o,l){i.reason||(i.reason=new kr(s,o,l),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=i=>{e.abort(i)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new $v(function(r){e=r}),cancel:e}}};function Rk(t){return function(n){return t.apply(null,n)}}function Nk(t){return I.isObject(t)&&t.isAxiosError===!0}const Au={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Au).forEach(([t,e])=>{Au[e]=t});function jv(t){const e=new mi(t),n=yv(mi.prototype.request,e);return I.extend(n,mi.prototype,e,{allOwnKeys:!0}),I.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return jv(Ei(t,r))},n}const pe=jv(Vs);pe.Axios=mi;pe.CanceledError=kr;pe.CancelToken=Pk;pe.isCancel=Iv;pe.VERSION=Uv;pe.toFormData=Zl;pe.AxiosError=le;pe.Cancel=pe.CanceledError;pe.all=function(e){return Promise.all(e)};pe.spread=Rk;pe.isAxiosError=Nk;pe.mergeConfig=Ei;pe.AxiosHeaders=xt;pe.formToJSON=t=>Nv(I.isHTMLForm(t)?new FormData(t):t);pe.getAdapter=zv.getAdapter;pe.HttpStatusCode=Au;pe.default=pe;const{Axios:RI,AxiosError:NI,CanceledError:II,isCancel:MI,CancelToken:DI,VERSION:OI,all:LI,Cancel:FI,isAxiosError:zI,spread:UI,toFormData:$I,AxiosHeaders:jI,HttpStatusCode:BI,formToJSON:VI,getAdapter:HI,mergeConfig:WI}=pe,Bv=typeof window<"u"?window.location.origin:"http://localhost:8000",Vv=new Set(["localhost","127.0.0.1","host.docker.internal"]),Hv=t=>{if(!t)return null;if(typeof window>"u")return t;try{const e=window,{hostname:n,protocol:i}=e.location;if(!n)return t;const r=new URL(t);return i==="https:"&&r.protocol!=="https:"&&(r.protocol="https:"),n==="host.docker.internal"&&Vv.has(r.hostname)&&(r.hostname=n),r.toString().replace(/\/$/,"")}catch(e){return console.warn("Failed to normalize API URL for environment",e),t}},ln=globalThis,Co=t=>{if(!t)return Bv;const e=Hv(t)??t;if(ln.__API_URL__=e,typeof window<"u"){const n=window;n.__API_URL__=e,typeof n.getApiUrl!="function"&&(n.getApiUrl=Bt)}return typeof ln.getApiUrl!="function"&&(ln.getApiUrl=Bt),e},Ik=()=>{try{const t=import.meta?.env?.VITE_API_URL;return typeof t=="string"&&t.length>0?Hv(t)??t:null}catch(t){return console.warn("Unable to read VITE_API_URL from import.meta",t),null}},Mk=()=>{const t=[];if(typeof ln.__apiUrlResolver__=="function"&&t.push(ln.__apiUrlResolver__),typeof window<"u"){const e=window;typeof e.getApiUrl=="function"&&e.getApiUrl!==Bt&&t.push(e.getApiUrl),typeof e.__API_URL__=="string"&&t.push(e.__API_URL__)}typeof ln.getApiUrl=="function"&&ln.getApiUrl!==Bt&&t.push(ln.getApiUrl),typeof ln.__API_URL__=="string"&&t.push(ln.__API_URL__);for(const e of t)if(e)try{if(typeof e=="string"&&e.length>0)return e;if(typeof e=="function"){const n=e();if(typeof n=="string"&&n.length>0)return n}}catch(n){console.warn("Custom API URL resolver failed",n)}return null},Dk=()=>{if(typeof window>"u")return null;const t=window,{protocol:e,hostname:n,port:i}=t.location,r=e==="https:"?"https:":"http:";if(Vv.has(n))return`${r}//${n}:8000`;const s=i?`:${i}`:"";return`${r}//${n}${s}`};function Bt(){try{const t=Ik();if(t)return Co(t);const e=Mk();if(e)return Co(e);const n=Dk();if(n)return Co(n)}catch(t){console.error("Failed to resolve API URL, falling back to default",t)}return Co(Bv)}const Ok=typeof window<"u"?window.location.origin:"http://localhost:8000";function An(){const t=globalThis,e=[];if(typeof window<"u"){const n=window;e.push(n.__API_URL__),typeof n.getApiUrl=="function"&&e.push(n.getApiUrl)}e.push(t.__API_URL__),typeof t.getApiUrl=="function"&&e.push(t.getApiUrl),e.push(Bt);for(const n of e)if(n)try{if(typeof n=="string"&&n.length>0)return n;if(typeof n=="function"){const i=n();if(typeof i=="string"&&i.length>0)return i}}catch(i){console.warn("API URL resolver failed; continuing to next candidate",i)}return Ok}class Lk{cache=new Map;cacheTimeout=1e4;getCached(e){const n=this.cache.get(e);return n&&Date.now()-n.timestamp<this.cacheTimeout?n.data:null}setCache(e,n){this.cache.set(e,{data:n,timestamp:Date.now()})}async getStockPrice(e){const n=`price-${e}`,i=this.getCached(n);if(i)return i;try{const r=An(),s=await pe.get(`${r}/api/stock-price`,{params:{symbol:e}});return this.setCache(n,s.data),s.data}catch(r){throw console.error(`Error fetching stock price for ${e}:`,r),new Error(`Failed to fetch stock price for ${e}: ${r}`)}}async getMultipleStockPrices(e){const n=e.map(i=>this.getStockPrice(i));return Promise.all(n)}async getStockHistory(e,n=50){const i=`history-${e}-${n}`,r=this.getCached(i);if(r)return r;try{const s=An(),o=await pe.get(`${s}/api/stock-history`,{params:{symbol:e,days:n}});return this.setCache(i,o.data),o.data}catch(s){throw console.error(`Error fetching stock history for ${e}:`,s),s}}async getComprehensiveData(e){try{const n=An();return(await pe.get(`${n}/api/comprehensive-stock-data`,{params:{symbol:e}})).data}catch(n){throw console.error(`Error fetching comprehensive data for ${e}:`,n),n}}async getStockNews(e){try{const n=An();return(await pe.get(`${n}/api/stock-news`,{params:{symbol:e}})).data.news||[]}catch(n){return console.error(`Error fetching news for ${e}:`,n),[]}}async getAnalystRatings(e){try{const n=An();return(await pe.get(`${n}/api/analyst-ratings`,{params:{symbol:e}})).data.ratings||[]}catch(n){return console.error(`Error fetching analyst ratings for ${e}:`,n),[]}}async getMarketOverview(){const e="market-overview",n=this.getCached(e);if(n)return n;try{const i=An(),s=(await pe.get(`${i}/api/market-overview`)).data;return s.movers&&!s.top_gainers&&(s.top_gainers=s.movers.gainers||[],s.top_losers=s.movers.losers||[]),this.setCache(e,s),s}catch(i){throw console.error("Error fetching market overview:",i),i}}async searchSymbols(e,n=20){const i=`search-${e}-${n}`,r=this.getCached(i);if(r)return r;const s=An(),o=await pe.get(`${s}/api/symbol-search`,{params:{query:e,limit:n},timeout:5e3});return this.setCache(i,o.data),o.data}async getMarketMovers(){try{const e=An();return(await pe.get(`${e}/api/market-movers`)).data}catch(e){return console.error("Error fetching market movers:",e),{trending:[]}}}calculateTechnicalLevels(e){if(!e||e.length===0)return{};e.map(c=>c.close);const n=e.map(c=>c.high),i=e.map(c=>c.low),r=Math.max(...n.slice(-20)),s=Math.min(...i.slice(-20)),o=r*.98,l=(r+s)/2,a=s*1.02;return{qe_level:Math.round(o*100)/100,st_level:Math.round(l*100)/100,ltb_level:Math.round(a*100)/100}}getLevelBadge(e,n){if(!n)return null;const{qe_level:i,st_level:r,ltb_level:s}=n,l=[{level:"QE",distance:Math.abs(e-(i||0))},{level:"ST",distance:Math.abs(e-(r||0))},{level:"LTB",distance:Math.abs(e-(s||0))}].reduce((a,c)=>c.distance<a.distance?c:a);return l.distance/e<.05?l.level:null}clearCache(){this.cache.clear()}}const Un=new Lk;class Fk{baseUrl;toolsCache;cacheTimestamp;constructor(){this.baseUrl="https://gvses-market-insights.fly.dev",this.toolsCache=new Map,this.cacheTimestamp=null}async getAllTools(){if(this.cacheTimestamp&&Date.now()-this.cacheTimestamp<5*60*1e3)return{tools:Array.from(this.toolsCache.values()),count:this.toolsCache.size,categories:Array.from(new Set(Array.from(this.toolsCache.values()).map(e=>e.category)))};try{const e=await fetch(`${this.baseUrl}/api/agent/tools/chart`);if(!e.ok)throw new Error(`Failed to fetch chart tools: ${e.statusText}`);const n=await e.json();return this.toolsCache.clear(),n.tools.forEach(i=>{this.toolsCache.set(i.name,i)}),this.cacheTimestamp=Date.now(),n}catch(e){throw console.error("Error fetching chart tools:",e),e}}async searchTools(e,n=5){try{const i=new URLSearchParams({query:e,top_k:n.toString()}),r=await fetch(`${this.baseUrl}/api/agent/tools/chart/search?${i}`);if(!r.ok)throw new Error(`Failed to search chart tools: ${r.statusText}`);return await r.json()}catch(i){throw console.error("Error searching chart tools:",i),i}}getTool(e){return this.toolsCache.get(e)}getToolsByCategory(e){return Array.from(this.toolsCache.values()).filter(n=>n.category===e)}getCommandForTool(e,n){const i=this.toolsCache.get(e);if(!i)return console.warn(`Tool not found: ${e}`),null;if(i.category.endsWith("_indicator"))return n.enabled!==!1?i.frontend_command:`HIDE:${i.frontend_command.split(":")[1]}`;if(i.category==="drawing_tool"){const r=Object.entries(n).map(([s,o])=>`${s}=${o}`).join(",");return`${i.frontend_command}:${r}`}return i.frontend_command}getIndicatorTools(){return Array.from(this.toolsCache.values()).filter(e=>e.category.includes("indicator"))}getDrawingTools(){return Array.from(this.toolsCache.values()).filter(e=>e.category==="drawing_tool")}getToolKnowledge(e){const n=this.toolsCache.get(e);return!n||!n.knowledge_source||n.knowledge_source.length===0?null:n.knowledge_source.map(i=>`${i.source}: ${i.text_preview}`).join(`

`)}async mapVoiceCommandToTool(e){try{const n=await this.searchTools(e,1);if(n.count===0)return{tool:null,command:null,parameters:{}};const i=n.tools[0],r=this._inferParametersFromVoice(e,i),s=this.getCommandForTool(i.name,r);return{tool:i,command:s,parameters:r}}catch(n){return console.error("Error mapping voice command to tool:",n),{tool:null,command:null,parameters:{}}}}_inferParametersFromVoice(e,n){const i={},r=e.toLowerCase();if(n.category.includes("indicator")&&(r.includes("show")||r.includes("add")||r.includes("enable")?i.enabled=!0:r.includes("hide")||r.includes("remove")||r.includes("disable")?i.enabled=!1:i.enabled=!0),n.category==="drawing_tool"){const s=r.match(/\d+(\.\d+)?/g);s&&n.parameters.price&&(i.price=parseFloat(s[0])),r.includes("support")?i.type="support":r.includes("resistance")?i.type="resistance":r.includes("pivot")&&(i.type="pivot")}return i}async initialize(){await this.getAllTools()}clearCache(){this.toolsCache.clear(),this.cacheTimestamp=null}}const Wv=new Fk;Wv.initialize().catch(t=>{console.error("Failed to initialize chart tool service:",t)});class zk{callbacks={};currentSymbol="TSLA";chartRef=null;companyToTicker={NVIDIA:"NVDA",APPLE:"AAPL",MICROSOFT:"MSFT",GOOGLE:"GOOGL",ALPHABET:"GOOGL",AMAZON:"AMZN",META:"META",FACEBOOK:"META",NETFLIX:"NFLX",TESLA:"TSLA",INTEL:"INTC",AMD:"AMD",ORACLE:"ORCL",SALESFORCE:"CRM",ADOBE:"ADBE",CISCO:"CSCO",IBM:"IBM",BROADCOM:"AVGO",QUALCOMM:"QCOM","TEXAS INSTRUMENTS":"TXN",PAYPAL:"PYPL",SPOTIFY:"SPOT",SQUARE:"SQ",BLOCK:"SQ",SHOPIFY:"SHOP",UBER:"UBER",LYFT:"LYFT",AIRBNB:"ABNB",ZOOM:"ZM",DOCUSIGN:"DOCU",PALANTIR:"PLTR",SNOWFLAKE:"SNOW",DATABRICKS:"DBX",CLOUDFLARE:"NET",CROWDSTRIKE:"CRWD",OKTA:"OKTA",TWILIO:"TWLO",SLACK:"WORK",ATLASSIAN:"TEAM",ASANA:"ASAN",MONDAY:"MNDY",UNITY:"U",ROBLOX:"RBLX",COINBASE:"COIN",ROBINHOOD:"HOOD",DRAFTKINGS:"DKNG",PINTEREST:"PINS",SNAP:"SNAP",SNAPCHAT:"SNAP",TWITTER:"TWTR",X:"TWTR",JPMORGAN:"JPM","JP MORGAN":"JPM",CHASE:"JPM","BANK OF AMERICA":"BAC","WELLS FARGO":"WFC",GOLDMAN:"GS","GOLDMAN SACHS":"GS","MORGAN STANLEY":"MS",CITIGROUP:"C",CITI:"C","AMERICAN EXPRESS":"AXP",AMEX:"AXP",BERKSHIRE:"BRK.B","BERKSHIRE HATHAWAY":"BRK.B",BLACKROCK:"BLK","CHARLES SCHWAB":"SCHW",SCHWAB:"SCHW",VISA:"V",MASTERCARD:"MA",FIDELITY:"FNF",WALMART:"WMT",TARGET:"TGT",COSTCO:"COST","HOME DEPOT":"HD",LOWES:"LOW",NIKE:"NKE",ADIDAS:"ADDYY",STARBUCKS:"SBUX",MCDONALDS:"MCD","COCA COLA":"KO",COKE:"KO",PEPSI:"PEP",PEPSICO:"PEP",DISNEY:"DIS",WARNER:"WBD",PARAMOUNT:"PARA",COMCAST:"CMCSA",VERIZON:"VZ","AT&T":"T",ATT:"T","T-MOBILE":"TMUS",TMOBILE:"TMUS","JOHNSON & JOHNSON":"JNJ",JNJ:"JNJ",PFIZER:"PFE",MODERNA:"MRNA",ABBVIE:"ABBV",MERCK:"MRK",LILLY:"LLY","ELI LILLY":"LLY",BRISTOL:"BMY","BRISTOL MYERS":"BMY",ASTRAZENECA:"AZN",NOVARTIS:"NVS",ROCHE:"RHHBY",ABBOTT:"ABT",MEDTRONIC:"MDT",CVS:"CVS",WALGREENS:"WBA",UNITEDHEALTH:"UNH",ANTHEM:"ANTM",CIGNA:"CI",HUMANA:"HUM",FORD:"F","GENERAL MOTORS":"GM",GM:"GM",TOYOTA:"TM",HONDA:"HMC",VOLKSWAGEN:"VWAGY",VW:"VWAGY",BMW:"BMWYY",MERCEDES:"DMLRY",FERRARI:"RACE",RIVIAN:"RIVN",LUCID:"LCID",NIO:"NIO",XPENG:"XPEV","LI AUTO":"LI",BOEING:"BA",AIRBUS:"EADSY",DELTA:"DAL",UNITED:"UAL","AMERICAN AIRLINES":"AAL",SOUTHWEST:"LUV",JETBLUE:"JBLU",SPIRIT:"SAVE",ALASKA:"ALK",BOOKING:"BKNG",EXPEDIA:"EXPE",MARRIOTT:"MAR",HILTON:"HLT",HYATT:"H",CARNIVAL:"CCL","ROYAL CARIBBEAN":"RCL",NORWEGIAN:"NCLH",EXXON:"XOM",EXXONMOBIL:"XOM",CHEVRON:"CVX",SHELL:"SHEL",BP:"BP",CONOCOPHILLIPS:"COP",MARATHON:"MRO",OCCIDENTAL:"OXY",SCHLUMBERGER:"SLB",HALLIBURTON:"HAL",ALIBABA:"BABA",TENCENT:"TCEHY",BAIDU:"BIDU",JD:"JD",PINDUODUO:"PDD",MEITUAN:"MPNGY",BYTEDANCE:"BDNCE",XIAOMI:"XIACF",BYD:"BYDDY",SAMSUNG:"SSNLF",SONY:"SONY",NINTENDO:"NTDOY",SOFTBANK:"SFTBY",RAKUTEN:"RKUNY",NESTLE:"NSRGY",UNILEVER:"UL",LVMH:"LVMUY",ASML:"ASML",TSMC:"TSM","TAIWAN SEMICONDUCTOR":"TSM",INFOSYS:"INFY",WIPRO:"WIT",TATA:"TTM",RELIANCE:"RELI",ARAMCO:"ARMCO",PETROBRAS:"PBR",VALE:"VALE",MERCADOLIBRE:"MELI",NUBANK:"NU",STONE:"STNE",PAGSEGURO:"PAGS",SPY:"SPY","S&P":"SPY","S&P 500":"SPY",QQQ:"QQQ",NASDAQ:"QQQ",DIA:"DIA",DOW:"DIA","DOW JONES":"DIA",IWM:"IWM",RUSSELL:"IWM",VTI:"VTI",VOO:"VOO",VANGUARD:"VTI",ARK:"ARKK",ARKK:"ARKK",ARKG:"ARKG",ARKQ:"ARKQ",ARKW:"ARKW",GLD:"GLD",GOLD:"GLD",SLV:"SLV",SILVER:"SLV",USO:"USO",OIL:"USO"};cryptoToTicker={BITCOIN:{gecko:"bitcoin",yahoo:"BTC-USD",cmc:"BTC"},BTC:{gecko:"bitcoin",yahoo:"BTC-USD",cmc:"BTC"},ETHEREUM:{gecko:"ethereum",yahoo:"ETH-USD",cmc:"ETH"},ETH:{gecko:"ethereum",yahoo:"ETH-USD",cmc:"ETH"},BINANCE:{gecko:"binancecoin",yahoo:"BNB-USD",cmc:"BNB"},BNB:{gecko:"binancecoin",yahoo:"BNB-USD",cmc:"BNB"},CARDANO:{gecko:"cardano",yahoo:"ADA-USD",cmc:"ADA"},ADA:{gecko:"cardano",yahoo:"ADA-USD",cmc:"ADA"},SOLANA:{gecko:"solana",yahoo:"SOL-USD",cmc:"SOL"},SOL:{gecko:"solana",yahoo:"SOL-USD",cmc:"SOL"},XRP:{gecko:"ripple",yahoo:"XRP-USD",cmc:"XRP"},RIPPLE:{gecko:"ripple",yahoo:"XRP-USD",cmc:"XRP"},DOGECOIN:{gecko:"dogecoin",yahoo:"DOGE-USD",cmc:"DOGE"},DOGE:{gecko:"dogecoin",yahoo:"DOGE-USD",cmc:"DOGE"},POLYGON:{gecko:"matic-network",yahoo:"MATIC-USD",cmc:"MATIC"},MATIC:{gecko:"matic-network",yahoo:"MATIC-USD",cmc:"MATIC"},POLKADOT:{gecko:"polkadot",yahoo:"DOT-USD",cmc:"DOT"},DOT:{gecko:"polkadot",yahoo:"DOT-USD",cmc:"DOT"},CHAINLINK:{gecko:"chainlink",yahoo:"LINK-USD",cmc:"LINK"},LINK:{gecko:"chainlink",yahoo:"LINK-USD",cmc:"LINK"},AVALANCHE:{gecko:"avalanche-2",yahoo:"AVAX-USD",cmc:"AVAX"},AVAX:{gecko:"avalanche-2",yahoo:"AVAX-USD",cmc:"AVAX"},UNISWAP:{gecko:"uniswap",yahoo:"UNI-USD",cmc:"UNI"},UNI:{gecko:"uniswap",yahoo:"UNI-USD",cmc:"UNI"},LITECOIN:{gecko:"litecoin",yahoo:"LTC-USD",cmc:"LTC"},LTC:{gecko:"litecoin",yahoo:"LTC-USD",cmc:"LTC"},COSMOS:{gecko:"cosmos",yahoo:"ATOM-USD",cmc:"ATOM"},ATOM:{gecko:"cosmos",yahoo:"ATOM-USD",cmc:"ATOM"},STELLAR:{gecko:"stellar",yahoo:"XLM-USD",cmc:"XLM"},XLM:{gecko:"stellar",yahoo:"XLM-USD",cmc:"XLM"},MONERO:{gecko:"monero",yahoo:"XMR-USD",cmc:"XMR"},XMR:{gecko:"monero",yahoo:"XMR-USD",cmc:"XMR"},TRON:{gecko:"tron",yahoo:"TRX-USD",cmc:"TRX"},TRX:{gecko:"tron",yahoo:"TRX-USD",cmc:"TRX"},"ETHEREUM CLASSIC":{gecko:"ethereum-classic",yahoo:"ETC-USD",cmc:"ETC"},ETC:{gecko:"ethereum-classic",yahoo:"ETC-USD",cmc:"ETC"},FILECOIN:{gecko:"filecoin",yahoo:"FIL-USD",cmc:"FIL"},FIL:{gecko:"filecoin",yahoo:"FIL-USD",cmc:"FIL"},AAVE:{gecko:"aave",yahoo:"AAVE-USD",cmc:"AAVE"},COMPOUND:{gecko:"compound-governance-token",yahoo:"COMP-USD",cmc:"COMP"},COMP:{gecko:"compound-governance-token",yahoo:"COMP-USD",cmc:"COMP"},MAKER:{gecko:"maker",yahoo:"MKR-USD",cmc:"MKR"},MKR:{gecko:"maker",yahoo:"MKR-USD",cmc:"MKR"},SUSHI:{gecko:"sushi",yahoo:"SUSHI-USD",cmc:"SUSHI"},SUSHISWAP:{gecko:"sushi",yahoo:"SUSHI-USD",cmc:"SUSHI"},CURVE:{gecko:"curve-dao-token",yahoo:"CRV-USD",cmc:"CRV"},CRV:{gecko:"curve-dao-token",yahoo:"CRV-USD",cmc:"CRV"},FANTOM:{gecko:"fantom",yahoo:"FTM-USD",cmc:"FTM"},FTM:{gecko:"fantom",yahoo:"FTM-USD",cmc:"FTM"},ALGORAND:{gecko:"algorand",yahoo:"ALGO-USD",cmc:"ALGO"},ALGO:{gecko:"algorand",yahoo:"ALGO-USD",cmc:"ALGO"},NEAR:{gecko:"near",yahoo:"NEAR-USD",cmc:"NEAR"},"NEAR PROTOCOL":{gecko:"near",yahoo:"NEAR-USD",cmc:"NEAR"},FLOW:{gecko:"flow",yahoo:"FLOW-USD",cmc:"FLOW"},HEDERA:{gecko:"hedera-hashgraph",yahoo:"HBAR-USD",cmc:"HBAR"},HBAR:{gecko:"hedera-hashgraph",yahoo:"HBAR-USD",cmc:"HBAR"},"INTERNET COMPUTER":{gecko:"internet-computer",yahoo:"ICP-USD",cmc:"ICP"},ICP:{gecko:"internet-computer",yahoo:"ICP-USD",cmc:"ICP"},"THE SANDBOX":{gecko:"the-sandbox",yahoo:"SAND-USD",cmc:"SAND"},SAND:{gecko:"the-sandbox",yahoo:"SAND-USD",cmc:"SAND"},DECENTRALAND:{gecko:"decentraland",yahoo:"MANA-USD",cmc:"MANA"},MANA:{gecko:"decentraland",yahoo:"MANA-USD",cmc:"MANA"},AXIE:{gecko:"axie-infinity",yahoo:"AXS-USD",cmc:"AXS"},AXS:{gecko:"axie-infinity",yahoo:"AXS-USD",cmc:"AXS"},ENJIN:{gecko:"enjincoin",yahoo:"ENJ-USD",cmc:"ENJ"},ENJ:{gecko:"enjincoin",yahoo:"ENJ-USD",cmc:"ENJ"},GALA:{gecko:"gala",yahoo:"GALA-USD",cmc:"GALA"},THETA:{gecko:"theta-token",yahoo:"THETA-USD",cmc:"THETA"},VECHAIN:{gecko:"vechain",yahoo:"VET-USD",cmc:"VET"},VET:{gecko:"vechain",yahoo:"VET-USD",cmc:"VET"},ZILLIQA:{gecko:"zilliqa",yahoo:"ZIL-USD",cmc:"ZIL"},ZIL:{gecko:"zilliqa",yahoo:"ZIL-USD",cmc:"ZIL"},SHIBA:{gecko:"shiba-inu",yahoo:"SHIB-USD",cmc:"SHIB"},SHIB:{gecko:"shiba-inu",yahoo:"SHIB-USD",cmc:"SHIB"},"SHIBA INU":{gecko:"shiba-inu",yahoo:"SHIB-USD",cmc:"SHIB"},TETHER:{gecko:"tether",yahoo:"USDT-USD",cmc:"USDT"},USDT:{gecko:"tether",yahoo:"USDT-USD",cmc:"USDT"},USDC:{gecko:"usd-coin",yahoo:"USDC-USD",cmc:"USDC"},"USD COIN":{gecko:"usd-coin",yahoo:"USDC-USD",cmc:"USDC"},BUSD:{gecko:"binance-usd",yahoo:"BUSD-USD",cmc:"BUSD"},DAI:{gecko:"dai",yahoo:"DAI-USD",cmc:"DAI"},FRAX:{gecko:"frax",yahoo:"FRAX-USD",cmc:"FRAX"},TUSD:{gecko:"true-usd",yahoo:"TUSD-USD",cmc:"TUSD"},PAX:{gecko:"paxos-standard",yahoo:"PAX-USD",cmc:"PAX"},PAXOS:{gecko:"paxos-standard",yahoo:"PAX-USD",cmc:"PAX"}};symbolConflicts={AMP:{stock:"AMP",crypto:{gecko:"amp-token",yahoo:"AMP-USD",cmc:"AMP"}},ADA:{stock:"ADA",crypto:{gecko:"cardano",yahoo:"ADA-USD",cmc:"ADA"}},LINK:{stock:"LINK",crypto:{gecko:"chainlink",yahoo:"LINK-USD",cmc:"LINK"}},UNI:{stock:"UNI",crypto:{gecko:"uniswap",yahoo:"UNI-USD",cmc:"UNI"}},DOT:{stock:"DOT",crypto:{gecko:"polkadot",yahoo:"DOT-USD",cmc:"DOT"}},COMP:{stock:"COMP",crypto:{gecko:"compound-governance-token",yahoo:"COMP-USD",cmc:"COMP"}},CRV:{stock:"CRV",crypto:{gecko:"curve-dao-token",yahoo:"CRV-USD",cmc:"CRV"}},FLOW:{stock:"FLOW",crypto:{gecko:"flow",yahoo:"FLOW-USD",cmc:"FLOW"}},SAND:{stock:"SAND",crypto:{gecko:"the-sandbox",yahoo:"SAND-USD",cmc:"SAND"}}};commandPatterns={symbol:/(?:CHART|SHOW|DISPLAY|SWITCH TO|CHANGE TO|LOAD|VIEW|PULL UP)[:\s]+([A-Z]{1,5}(?:-USD)?)|(?:show(?:ing)? (?:me |you )?|display(?:ing)?|load(?:ing)?|switch(?:ing)? to|change to|here(?:'s| is))?\s*(?:the )?(NVIDIA|APPLE|TESLA|MICROSOFT|AMAZON|GOOGLE|META|FACEBOOK|NETFLIX|[A-Z]{1,5})(?:'s)?\s*(?:chart|stock|ticker|price|data)?/i,timeframe:/(?:TIMEFRAME|TIME|PERIOD|RANGE|VIEW)[:\s]+(1D|5D|1W|2W|1M|3M|6M|1Y|2Y|5Y|YTD|ALL|MAX)|(?:show |display |set )?(one|1) ?(day|week|month|year)|(?:show |display |set )?(five|5) ?(days?|weeks?|months?|years?)|(?:year to date|ytd|all time|maximum)/i,indicator:/(?:ADD|SHOW|HIDE|REMOVE|TOGGLE|DISPLAY)[:\s]+(MA|EMA|SMA|RSI|MACD|VOLUME|VOL|BOLLINGER|BB|VWAP|STOCHASTIC|ATR)|(?:add |show |display |toggle )?(moving average|exponential moving|rsi|macd|volume|bollinger bands?|vwap)/i,zoom:/(?:ZOOM)[:\s]+(IN|OUT|\d+%?)|zoom ?(in|out)(?: ?(\d+))?%?|(?:closer|further|magnify|shrink)/i,scroll:/(?:SCROLL|GO TO|NAVIGATE TO|JUMP TO)[:\s]+(\d{4}-\d{2}-\d{2}|\w+)|(?:go to |scroll to |jump to |show )?(yesterday|today|last week|last month|beginning|end)/i,style:/(?:STYLE|VIEW|TYPE|CHART TYPE)[:\s]+(CANDLES?|LINE|AREA|BARS?|HEIKIN|HOLLOW)|(?:switch to |change to |use )?(candlestick|candle|line|area|bar|heikin ashi|hollow candle)s?(?: chart)?/i,reset:/(?:RESET|FIT|AUTO)[:\s]*(VIEW|SCALE|ZOOM)?|reset (?:the )?(?:chart|view|zoom)|fit (?:to )?(?:screen|content)|auto ?scale/i,crosshair:/(?:CROSSHAIR|CURSOR)[:\s]+(ON|OFF|TOGGLE)|(?:show|hide|toggle)(?: the)? crosshair/i};registerCallbacks(e){this.callbacks={...this.callbacks,...e}}setChartRef(e){this.chartRef=e}detectAssetType(e){const n=/crypto|coin|token|bitcoin|ethereum|blockchain|defi|web3|nft|mining|wallet|satoshi/i,i=/stock|share|equity|company|corporation|nasdaq|nyse|s&p|dow|earnings|dividend|ipo/i;return n.test(e)?"crypto":i.test(e)?"stock":"auto"}isValidSymbol(e){if(!e||e.length<1)return!1;const n=e.toUpperCase();return[/^[A-Z]{1,5}$/,/^[A-Z]{2,5}-USD$/,/^[A-Z]{2,5}-(USDT|USDC|EUR|BTC|ETH)$/,/^BRK\.[AB]$/].some(r=>r.test(n))}async resolveSymbolWithSearch(e){try{console.log(`Searching for symbol with query: "${e}"`);const n=await Un.searchSymbols(e,5);if(n.results.length>0){const i=n.results[0];return console.log(`Found symbol: ${i.symbol} (${i.name}) via Alpaca search`),{symbol:i.symbol,type:"stock",name:i.name}}return console.log(`No symbols found for query: "${e}"`),null}catch(n){return console.error(`Error searching for symbol "${e}":`,n),null}}resolveSymbol(e,n,i){const r=e.toUpperCase();if(!this.isValidSymbol(r))return console.warn(`Invalid symbol rejected: ${r}`),null;if(this.symbolConflicts[r])if(n==="crypto"){const s=this.symbolConflicts[r].crypto,o=this.selectTradingPair(s,i);return{symbol:o.symbol,type:"crypto",tradingPair:o.pair}}else return n==="stock"?{symbol:this.symbolConflicts[r].stock,type:"stock"}:(console.log(`Symbol ${r} exists as both stock and crypto, defaulting to stock`),{symbol:this.symbolConflicts[r].stock,type:"stock"});if(this.companyToTicker[r])return{symbol:this.companyToTicker[r],type:"stock"};if(this.cryptoToTicker[r]){const s=this.selectTradingPair(this.cryptoToTicker[r],i);return{symbol:s.symbol,type:"crypto",tradingPair:s.pair}}if(r.match(/-USD$|-USDT$|-USDC$|-EUR$|-BTC$|-ETH$/)){const s=r.match(/(USD|USDT|USDC|EUR|BTC|ETH)$/);return{symbol:r,type:"crypto",tradingPair:s?.[1]}}if(n==="crypto"&&r.length<=5&&!r.includes("-")){const s=i||"USD";return{symbol:`${r}-${s}`,type:"crypto",tradingPair:s}}return this.isValidSymbol(r)&&n!=="crypto"?{symbol:r,type:"stock"}:null}selectTradingPair(e,n){if(n){const i=n.toUpperCase();if(i==="USDT"||i==="USDC"||i==="EUR"||i==="BTC"||i==="ETH")return{symbol:`${e.yahoo.replace(/-USD$/,"")}-${i}`,pair:i}}return{symbol:e.yahoo,pair:"USD"}}parseDrawingCommand(e){const n=e.split(":");switch(n[0]){case"SUPPORT":return{type:"drawing",value:{action:"support",price:parseFloat(n[1])},timestamp:Date.now()};case"RESISTANCE":return{type:"drawing",value:{action:"resistance",price:parseFloat(n[1])},timestamp:Date.now()};case"ENTRY":return{type:"drawing",value:{action:"entry",price:parseFloat(n[1])},timestamp:Date.now()};case"TARGET":return{type:"drawing",value:{action:"target",price:parseFloat(n[1])},timestamp:Date.now()};case"STOPLOSS":return{type:"drawing",value:{action:"stoploss",price:parseFloat(n[1])},timestamp:Date.now()};case"TRENDLINE":return{type:"drawing",value:{action:"trendline",startPrice:parseFloat(n[1]),startTime:parseInt(n[2]),endPrice:parseFloat(n[3]),endTime:parseInt(n[4])},timestamp:Date.now()};case"FIBONACCI":return{type:"drawing",value:{action:"fibonacci",high:parseFloat(n[1]),low:parseFloat(n[2])},timestamp:Date.now()};case"PATTERN":return{type:"drawing",value:{action:"pattern",patternType:n[1],startCandle:parseInt(n[2]),endCandle:parseInt(n[3])},timestamp:Date.now()};default:return null}}async parseAgentResponse(e,n){const i=[];try{const g=await Wv.mapVoiceCommandToTool(e);if(g.tool&&g.command){console.log(`Knowledge-based tool match: ${g.tool.name}`,g);const S=this.convertToolCommandToChartCommand(g.command,g.tool,g.parameters);S&&i.push(S)}}catch(g){console.warn("Knowledge-based tool mapping failed, falling back to pattern matching:",g)}if(n&&n.length>0)for(const g of n){const S=this.parseDrawingCommand(g);if(S)i.push(S);else if(g.startsWith("CHART:")){const m=g.substring(6);i.push({type:"symbol",value:m,timestamp:Date.now()})}else if(g.startsWith("TIMEFRAME:")){const m=g.substring(10);i.push({type:"timeframe",value:m,timestamp:Date.now()})}}const r=this.detectAssetType(e),s=e.match(/\b(USDT|USDC|EUR|BTC|ETH)\s*(pair|trading|market)?\b/i),o=s?s[1]:void 0,l=e.match(this.commandPatterns.symbol);if(l){const g=l[1]||l[2];if(g){let S=await this.resolveSymbolWithSearch(g);if(!S){const m=this.resolveSymbol(g,r,o);m&&(S={symbol:m.symbol,type:m.type,name:g})}S?(console.log(`Resolved "${g}" to ${S.type} symbol: ${S.symbol}${S.name?` (${S.name})`:""}`),i.push({type:"symbol",value:S.symbol,metadata:{assetType:S.type,companyName:S.name},timestamp:Date.now()})):console.log(`Could not resolve symbol: "${g}"`)}}const a=e.match(this.commandPatterns.timeframe);a&&i.push({type:"timeframe",value:a[1],timestamp:Date.now()});const c=e.match(this.commandPatterns.indicator);if(c){const g=c[0].split(/[:\s]+/)[0].toUpperCase(),S=g==="ADD"||g==="SHOW";i.push({type:"indicator",value:{name:c[1],enabled:S},timestamp:Date.now()})}const h=e.match(this.commandPatterns.zoom);if(h){let g=0;h[1]==="IN"?g=1.2:h[1]==="OUT"?g=.8:g=parseFloat(h[1])/100,i.push({type:"zoom",value:g,timestamp:Date.now()})}const u=e.match(this.commandPatterns.scroll);u&&i.push({type:"scroll",value:u[1],timestamp:Date.now()});const d=e.match(this.commandPatterns.style);if(d){const g=d[1]||d[2],S={CANDLE:"candles",CANDLES:"candles",CANDLESTICK:"candles",LINE:"line",AREA:"area",BAR:"candles",BARS:"candles",HEIKIN:"candles",HOLLOW:"candles"};i.push({type:"style",value:S[g?.toUpperCase()]||"candles",timestamp:Date.now()})}e.match(this.commandPatterns.reset)&&i.push({type:"reset",value:"view",timestamp:Date.now()});const p=e.match(this.commandPatterns.crosshair);if(p){const g=p[1]?.toUpperCase()||"TOGGLE";i.push({type:"crosshair",value:g==="ON"||g==="TOGGLE"&&!this.chartRef?.options()?.crosshair?.mode,timestamp:Date.now()})}return i}convertToolCommandToChartCommand(e,n,i){const r=e.split(":"),s=r[0];return s==="INDICATOR"||s==="HIDE"?{type:"indicator",value:{name:r[1],enabled:s==="INDICATOR"},metadata:{knowledgeBased:!0,toolName:n.name,description:n.description},timestamp:Date.now()}:s==="DRAW"?{type:"drawing",value:{action:r[1].toLowerCase(),...i},metadata:{knowledgeBased:!0,toolName:n.name},timestamp:Date.now()}:null}executeDrawingCommand(e){return console.log("Drawing command received by base service:",e.action),!1}executeCommand(e){let n="",i=!1;try{switch(e.type){case"drawing":i=this.executeDrawingCommand(e.value),i?n=`Drew ${e.value.action} ${e.value.price?`at $${e.value.price}`:""}`:n="Failed to execute drawing";break;case"symbol":this.callbacks.onSymbolChange?(this.currentSymbol=e.value,this.callbacks.onSymbolChange(e.value,e.metadata),n=`${e.metadata?.assetType==="crypto"?"":""} Switched to ${e.value}`,i=!0):n="Symbol change not available";break;case"timeframe":this.callbacks.onTimeframeChange?(this.callbacks.onTimeframeChange(e.value),n=`Timeframe: ${e.value}`,i=!0):n="Timeframe change not available";break;case"indicator":this.callbacks.onIndicatorToggle?(this.callbacks.onIndicatorToggle(e.value.name,e.value.enabled),n=`${e.value.enabled?"Added":"Removed"} ${e.value.name}`,i=!0):n="Indicator toggle not available";break;case"zoom":if(this.callbacks.onZoomChange&&this.chartRef)try{const r=this.chartRef.timeScale();e.value>1?(r.zoomIn(),n="Zoomed in"):(r.zoomOut(),n="Zoomed out"),i=!0}catch(r){console.error("Zoom error:",r),n="Zoom function not available"}else n="Zoom control not available";break;case"scroll":if(this.callbacks.onScrollToTime&&this.chartRef){let r;const s=e.value||"";if(s&&s.match&&s.match(/\d{4}-\d{2}-\d{2}/))r=new Date(s).getTime()/1e3,n=`Scrolled to ${s}`;else if(s){const o=new Date;switch(s.toLowerCase()){case"yesterday":r=(o.getTime()-864e5)/1e3,n="Scrolled to yesterday";break;case"last week":r=(o.getTime()-6048e5)/1e3,n="Scrolled to last week";break;case"last month":r=(o.getTime()-2592e6)/1e3,n="Scrolled to last month";break;default:r=o.getTime()/1e3,n="Scrolled to current time"}}this.chartRef.timeScale().scrollToPosition(r,!1),i=!0}else n="Scroll control not available";break;case"style":this.callbacks.onStyleChange?(this.callbacks.onStyleChange(e.value),n=`Style: ${{candles:"Candlestick",line:"Line",area:"Area"}[e.value]||e.value}`,i=!0):n="Style change not available";break;case"reset":if(this.chartRef)try{this.chartRef.timeScale().fitContent(),n="Chart view reset",i=!0}catch{n="Failed to reset view"}else n="Chart not available";break;case"crosshair":if(this.chartRef)try{const r=e.value?1:0;this.chartRef.applyOptions({crosshair:{mode:r}}),n=`Crosshair ${e.value?"enabled":"disabled"}`,i=!0}catch{n="Failed to toggle crosshair"}else n="Chart not available";break;default:n=`Unknown command: ${e.type}`}this.callbacks.onCommandExecuted&&this.callbacks.onCommandExecuted(e,i,n),console.log(`Chart Command: ${n} (${i?"Success":"Failed"})`)}catch(r){const s=`Error: ${r.message||"Command failed"}`;return console.error("Error executing chart command:",r),this.callbacks.onCommandError&&this.callbacks.onCommandError(s),this.callbacks.onCommandExecuted&&this.callbacks.onCommandExecuted(e,!1,s),!1}return i}async processAgentResponse(e,n){const i=await this.parseAgentResponse(e,n),r=[];for(const s of i)this.executeCommand(s)&&r.push(s);return r}getChartState(){return{symbol:this.currentSymbol,hasChart:!!this.chartRef}}static formatCommandExample(e,n){switch(e){case"symbol":return`CHART:${n}`;case"timeframe":return`TIMEFRAME:${n}`;case"indicator":return`ADD:${n}`;case"zoom":return`ZOOM:${n}`;case"scroll":return`SCROLL:${n}`;case"style":return`STYLE:${n}`;default:return""}}}const nt=new zk;class Uk{chartRef=null;mainSeriesRef=null;indicatorDispatch=null;drawingsMap=new Map;annotationsMap=new Map;overlayControls={};baseService=nt;initialize(e,n,i){this.chartRef=e,this.mainSeriesRef=n,this.indicatorDispatch=i,this.baseService.setChartRef(e),console.log("Enhanced chart control initialized")}get drawings(){return this.drawingsMap}get annotations(){return this.annotationsMap}setChartRef(e){this.chartRef=e,this.baseService.setChartRef(e)}getChartRef(){return this.chartRef}setOverlayControls(e){this.overlayControls={...this.overlayControls,...e}}toggleIndicator(e,n){if(!this.indicatorDispatch)return"Indicator controls not available";const r={ma20:{indicator:"movingAverages",subIndicator:"ma20"},ma50:{indicator:"movingAverages",subIndicator:"ma50"},ma200:{indicator:"movingAverages",subIndicator:"ma200"},"moving average 20":{indicator:"movingAverages",subIndicator:"ma20"},"moving average 50":{indicator:"movingAverages",subIndicator:"ma50"},"moving average 200":{indicator:"movingAverages",subIndicator:"ma200"},bollinger:{indicator:"bollingerBands"},"bollinger bands":{indicator:"bollingerBands"},rsi:{indicator:"rsi"},macd:{indicator:"macd"},fibonacci:{indicator:"fibonacci"},"support resistance":{indicator:"supportResistance"}}[e.toLowerCase()]||{indicator:e};return n?(this.indicatorDispatch({type:"TOGGLE_INDICATOR",payload:r}),(e.toLowerCase()==="rsi"||e.toLowerCase()==="macd")&&this.indicatorDispatch({type:"SET_OSCILLATOR_PANE",payload:{show:!0,type:e.toLowerCase()}})):this.indicatorDispatch({type:"TOGGLE_INDICATOR",payload:r}),this.overlayControls.setOverlayVisibility?.(e,n),`${e} ${n?"enabled":"disabled"}`}applyIndicatorPreset(e){if(!this.indicatorDispatch)return"Indicator controls not available";switch(this.indicatorDispatch({type:"RESET_TO_DEFAULTS"}),this.overlayControls.clearOverlays?.(),e){case"basic":return this.toggleIndicator("ma20",!0),this.toggleIndicator("ma50",!0),"Applied basic analysis (MA20, MA50)";case"advanced":return this.toggleIndicator("ma20",!0),this.toggleIndicator("ma50",!0),this.toggleIndicator("ma200",!0),this.toggleIndicator("bollinger bands",!0),this.toggleIndicator("rsi",!0),"Applied advanced analysis (MAs, Bollinger, RSI)";case"momentum":return this.toggleIndicator("rsi",!0),this.toggleIndicator("macd",!0),"Applied momentum indicators (RSI, MACD)";case"trend":return this.toggleIndicator("ma20",!0),this.toggleIndicator("ma50",!0),this.toggleIndicator("ma200",!0),"Applied trend indicators (MA20, MA50, MA200)";case"volatility":return this.toggleIndicator("bollinger bands",!0),this.toggleIndicator("support resistance",!0),"Applied volatility indicators (Bollinger Bands, Support/Resistance)";default:return"Unknown preset"}}drawTrendLine(e,n,i,r,s,o="#FF6B35"){if(!this.chartRef)return"Chart not available";try{const l=this.chartRef.addSeries(gv,{color:o,lineWidth:2,crosshairMarkerVisible:!1,lastValueVisible:!1,priceLineVisible:!1});l.setData([{time:e,value:n},{time:i,value:r}]);const a=`trend_${Date.now()}`;return this.annotationsMap.set(a,l),`Drew ${s?s+" ":""}trend line from $${n.toFixed(2)} to $${r.toFixed(2)}`}catch(l){return console.error("Error drawing trend line:",l),"Failed to draw trend line"}}highlightLevel(e,n,i){if(!this.chartRef||!this.mainSeriesRef)return"Chart not available";const r={support:"#22c55e",resistance:"#ef4444",pivot:"#f59e0b"};try{const s=this.mainSeriesRef.createPriceLine({price:e,color:r[n],lineWidth:2,lineStyle:2,axisLabelVisible:!0,title:i||`${n.charAt(0).toUpperCase()+n.slice(1)} $${e.toFixed(2)}`});return this.drawingsMap.set(`${n}_${e}`,s),`Highlighted ${n} level at $${e.toFixed(2)}`}catch(s){return console.error("Error highlighting level:",s),`Error: ${s}`}return"Failed to highlight level"}clearDrawings(){return this.drawingsMap.forEach(e=>{e&&e.remove&&e.remove()}),this.drawingsMap.clear(),this.chartRef&&this.annotationsMap.forEach(e=>{try{this.chartRef.removeSeries(e)}catch(n){console.error("Error removing series:",n)}}),this.annotationsMap.clear(),this.overlayControls.clearOverlays?.(),"Cleared all drawings"}highlightPattern(e,n,i){!this.chartRef||!this.mainSeriesRef||(n.map(r=>{let s="#3b82f6",o="";return i.includes("bullish")?(s="#22c55e",o=""):i.includes("bearish")?(s="#ef4444",o=""):i==="doji"?(s="#f59e0b",o=""):i==="breakout"&&(s="#8b5cf6",o=""),{time:r,position:"aboveBar",color:s,shape:"circle",text:o}}),this.overlayControls.highlightPattern?.(i,{title:i}))}drawSupportResistanceLevels(e){!this.chartRef||!this.mainSeriesRef||(e.support?.forEach((n,i)=>{const r=this.mainSeriesRef.createPriceLine({price:n,color:"#22c55e",lineWidth:1,lineStyle:2,title:`S${i+1}`,axisLabelVisible:!0});this.drawingsMap.set(`support_${i}`,r)}),e.resistance?.forEach((n,i)=>{const r=this.mainSeriesRef.createPriceLine({price:n,color:"#ef4444",lineWidth:1,lineStyle:2,title:`R${i+1}`,axisLabelVisible:!0});this.drawingsMap.set(`resistance_${i}`,r)}))}async processPatternResults(e){if(!e)return"No patterns to display";if(e.active_levels&&this.drawSupportResistanceLevels(e.active_levels),e.detected&&e.detected.length>0){const n=e.detected.sort((i,r)=>r.confidence-i.confidence)[0];if(n){const i=[];for(let r=n.start_candle;r<=n.end_candle;r++)i.push(r);return this.highlightPattern(n.id,i,n.type),this.overlayControls.highlightPattern?.(n.type,{title:n.description||n.type,description:n.agent_explanation,indicator:n.related_indicator}),`Showing ${n.description} (${n.confidence}% confidence)`}}return e.agent_explanation||"Pattern analysis complete"}async processIndicatorCommand(e){const n=e.toLowerCase();if(n.includes("moving average")||n.includes("ma "))return n.includes("20")||n.includes("twenty")?this.toggleIndicator("ma20",!n.includes("hide")&&!n.includes("remove")):n.includes("50")||n.includes("fifty")?this.toggleIndicator("ma50",!n.includes("hide")&&!n.includes("remove")):n.includes("200")||n.includes("two hundred")?this.toggleIndicator("ma200",!n.includes("hide")&&!n.includes("remove")):(this.toggleIndicator("ma20",!0),this.toggleIndicator("ma50",!0),this.toggleIndicator("ma200",!0),"Enabled all moving averages");if(n.includes("bollinger"))return this.toggleIndicator("bollinger bands",!n.includes("hide")&&!n.includes("remove"));if(n.includes("rsi"))return this.toggleIndicator("rsi",!n.includes("hide")&&!n.includes("remove"));if(n.includes("macd"))return this.toggleIndicator("macd",!n.includes("hide")&&!n.includes("remove"));if(n.includes("fibonacci")||n.includes("fib"))return this.toggleIndicator("fibonacci",!n.includes("hide")&&!n.includes("remove"));if(n.includes("support")||n.includes("resistance"))return this.toggleIndicator("support resistance",!n.includes("hide")&&!n.includes("remove"));if(n.includes("basic analysis"))return this.applyIndicatorPreset("basic");if(n.includes("advanced analysis"))return this.applyIndicatorPreset("advanced");if(n.includes("momentum"))return this.applyIndicatorPreset("momentum");if(n.includes("trend analysis"))return this.applyIndicatorPreset("trend");if(n.includes("volatility"))return this.applyIndicatorPreset("volatility");if(n.includes("clear")&&(n.includes("drawing")||n.includes("line")))return this.clearDrawings();const i=n.match(/\$?(\d+(?:\.\d+)?)/);if(i){const s=parseFloat(i[1]);if(n.includes("support"))return this.highlightLevel(s,"support");if(n.includes("resistance"))return this.highlightLevel(s,"resistance")}const r=await this.baseService.parseAgentResponse(e);if(r.length>0){for(const s of r)this.baseService.executeCommand(s);return`Executed ${r.length} chart command(s)`}return""}getIndicatorExplanation(e){return{ma20:"The 20-day moving average shows short-term trend direction",ma50:"The 50-day moving average indicates medium-term trend",ma200:"The 200-day moving average represents long-term trend","bollinger bands":"Bollinger Bands show volatility and potential support/resistance levels",rsi:"RSI measures momentum - above 70 is overbought, below 30 is oversold",macd:"MACD shows the relationship between two moving averages, useful for trend changes",fibonacci:"Fibonacci levels identify potential reversal points","support resistance":"Support and resistance levels show where price tends to bounce"}[e.toLowerCase()]||`${e} helps analyze price movements`}setIndicatorDispatch(e){this.indicatorDispatch=e,console.log("Indicator dispatch connected to enhanced chart control")}revealPattern(e,n){return n?.indicator&&this.overlayControls.setOverlayVisibility?.(n.indicator,!0),this.overlayControls.highlightPattern?.(e,n),`Highlighting ${e}`}async processEnhancedResponse(e){const n=[],i=this.parseDrawingCommands(e);for(const o of i){const l=this.executeDrawingCommand(o);l&&n.push({type:"drawing",command:o,result:l})}const r=await this.processIndicatorCommand(e);r&&n.push({type:"indicator",result:r});const s=await this.baseService.parseAgentResponse(e);for(const o of s)this.baseService.executeCommand(o)&&n.push(o);return n}parseDrawingCommands(e){const n=[],i=e.split(/\s+/).filter(Boolean);for(const r of i){if(r.startsWith("DRAW:")){const s=r.split(":");if(s.length<2)continue;switch(s[1]){case"LEVEL":{if(s.length>=5){const[,,l,a,c]=s,h=parseFloat(c);l&&a&&!Number.isNaN(h)&&n.push({action:"pattern_level",patternId:l,levelType:a,price:h})}break}case"TARGET":{if(s.length>=4){const[,,l,a]=s,c=parseFloat(a);l&&!Number.isNaN(c)&&n.push({action:"pattern_target",patternId:l,price:c})}break}case"TRENDLINE":{if(s.length>=7){const[,,l,a,c,h,u]=s,d=parseInt(a,10),f=parseFloat(c),p=parseInt(h,10),g=parseFloat(u);l&&!Number.isNaN(d)&&!Number.isNaN(f)&&!Number.isNaN(p)&&!Number.isNaN(g)&&n.push({action:"pattern_trendline",patternId:l,startTime:d,startPrice:f,endTime:p,endPrice:g})}break}}continue}if(r.startsWith("ANNOTATE:PATTERN:")){const s=r.split(":");if(s.length>=4){const o=s[2],l=s[3];o&&l&&n.push({action:"pattern_annotation",patternId:o,status:l})}continue}if(r.startsWith("CLEAR:PATTERN:")){const s=r.split(":");if(s.length>=3){const o=s[2];o&&n.push({action:"clear_pattern",patternId:o})}continue}if(r==="CLEAR:ALL"){n.push({action:"clear_all"});continue}if(r.startsWith("SUPPORT:")){const s=parseFloat(r.substring(8));Number.isNaN(s)||n.push({action:"support",price:s});continue}if(r.startsWith("RESISTANCE:")){const s=parseFloat(r.substring(11));Number.isNaN(s)||n.push({action:"resistance",price:s});continue}if(r.startsWith("FIBONACCI:")){const[s,o]=r.substring(10).split(":"),l=parseFloat(s),a=parseFloat(o);!Number.isNaN(l)&&!Number.isNaN(a)&&n.push({action:"fibonacci",high:l,low:a});continue}if(r.startsWith("TRENDLINE:")){const s=r.substring(10).split(":");if(s.length>=4){const[o,l,a,c]=s,h=parseFloat(o),u=parseInt(l,10),d=parseFloat(a),f=parseInt(c,10);!Number.isNaN(h)&&!Number.isNaN(u)&&!Number.isNaN(d)&&!Number.isNaN(f)&&n.push({action:"trendline",startPrice:h,startTime:u,endPrice:d,endTime:f})}continue}if(r.startsWith("ENTRY:")){const s=parseFloat(r.substring(6));Number.isNaN(s)||n.push({action:"entry",price:s});continue}if(r.startsWith("TARGET:")){const s=parseFloat(r.substring(7));Number.isNaN(s)||n.push({action:"target",price:s});continue}if(r.startsWith("STOPLOSS:")){const s=parseFloat(r.substring(9));Number.isNaN(s)||n.push({action:"stoploss",price:s});continue}}return n}executeDrawingCommand(e){try{switch(e.action){case"pattern_level":{const i=e.levelType?e.levelType.toLowerCase():"pivot",r=i==="support"?"support":i==="resistance"?"resistance":"pivot",s=`${e.patternId} ${i}`.trim();return this.highlightLevel(e.price,r,s)}case"pattern_target":{const i=e.patternId?`${e.patternId} target`:"Target";return this.highlightLevel(e.price,"pivot",i)}case"pattern_trendline":return this.drawTrendLine(e.startTime,e.startPrice,e.endTime,e.endPrice,`${e.patternId} trend`);case"pattern_annotation":return this.overlayControls.highlightPattern?.(e.patternId,{title:`${e.patternId} ${e.status}`,description:`Pattern status updated to ${e.status}`}),`Annotated ${e.patternId} as ${e.status}`;case"clear_pattern":return this.clearDrawings(),`Cleared drawings for ${e.patternId}`;case"clear_all":return this.clearDrawings(),"Cleared all pattern drawings";case"fibonacci":return[{level:0,price:e.low},{level:.236,price:e.low+(e.high-e.low)*.236},{level:.382,price:e.low+(e.high-e.low)*.382},{level:.5,price:e.low+(e.high-e.low)*.5},{level:.618,price:e.low+(e.high-e.low)*.618},{level:.786,price:e.low+(e.high-e.low)*.786},{level:1,price:e.high}].forEach(i=>{this.highlightLevel(parseFloat(i.price.toFixed(2)),"pivot",`Fib ${(i.level*100).toFixed(1)}%`)}),`Fibonacci levels from ${e.low} to ${e.high}`;case"trendline":return this.drawTrendLine(e.startTime,e.startPrice,e.endTime,e.endPrice),"Trend line drawn";case"support":return this.highlightLevel(e.price,"support"),`Support level at ${e.price}`;case"resistance":return this.highlightLevel(e.price,"resistance"),`Resistance level at ${e.price}`;case"entry":return this.highlightLevel(e.price,"pivot","Entry"),`Entry level at ${e.price}`;case"target":return this.highlightLevel(e.price,"pivot","Target"),`Target level at ${e.price}`;case"stoploss":return this.highlightLevel(e.price,"pivot","Stop"),`Stop loss at ${e.price}`;default:return null}}catch(n){return console.error("Error executing drawing command:",n),null}}registerCallbacks(e){this.baseService.registerCallbacks(e)}}const We=new Uk,Yv={symbol:"AAPL",timeframe:"1D",indicators:{movingAverages:{ma20:{enabled:!0,color:"#2962FF",lineWidth:2,showInMainChart:!0},ma50:{enabled:!1,color:"#FF6B35",lineWidth:2,showInMainChart:!0},ma200:{enabled:!1,color:"#4CAF50",lineWidth:2,showInMainChart:!0}},bollingerBands:{enabled:!1,period:20,standardDeviations:2,color:"#9C27B0",lineWidth:1,showInMainChart:!0},rsi:{enabled:!1,period:14,overbought:70,oversold:30,color:"#FF9800",showInOscillator:!0},macd:{enabled:!1,fastPeriod:12,slowPeriod:26,signalPeriod:9,color:"#00BCD4",showInOscillator:!0},fibonacci:{enabled:!1,autoDetectSwings:!0,showInMainChart:!0},supportResistance:{enabled:!1,sensitivity:.5,maxLevels:5,showInMainChart:!0}},cache:{},ui:{showOscillatorPane:!1,selectedOscillator:null,isPanelCollapsed:!1,autoRefresh:!0,refreshInterval:3e4},loading:{},errors:{}};function $k(t,e){switch(e.type){case"SET_SYMBOL":return{...t,symbol:e.payload,cache:{}};case"SET_TIMEFRAME":return{...t,timeframe:e.payload,cache:{}};case"TOGGLE_INDICATOR":{const{indicator:n,subIndicator:i}=e.payload;if(i&&n==="movingAverages")return{...t,indicators:{...t.indicators,movingAverages:{...t.indicators.movingAverages,[i]:{...t.indicators.movingAverages[i],enabled:!t.indicators.movingAverages[i].enabled}}}};const r=t.indicators[n];return"enabled"in r?{...t,indicators:{...t.indicators,[n]:{...r,enabled:!r.enabled}}}:t}case"UPDATE_INDICATOR_CONFIG":{const{indicator:n,config:i}=e.payload;return{...t,indicators:{...t.indicators,[n]:{...t.indicators[n],...i}}}}case"SET_INDICATOR_DATA":{const{key:n,data:i,ttl:r=3e4}=e.payload;return{...t,cache:{...t.cache,[n]:{data:i,timestamp:Date.now(),ttl:r}}}}case"CLEAR_CACHE":if(e.payload){const{[e.payload]:n,...i}=t.cache;return{...t,cache:i}}return{...t,cache:{}};case"SET_OSCILLATOR_PANE":return{...t,ui:{...t.ui,showOscillatorPane:e.payload.show,selectedOscillator:e.payload.type||t.ui.selectedOscillator}};case"SET_AUTO_REFRESH":return{...t,ui:{...t.ui,autoRefresh:e.payload}};case"SET_REFRESH_INTERVAL":return{...t,ui:{...t.ui,refreshInterval:e.payload}};case"SET_LOADING":return{...t,loading:{...t.loading,[e.payload.indicator]:e.payload.loading}};case"SET_ERROR":return{...t,errors:{...t.errors,[e.payload.indicator]:e.payload.error}};case"BATCH_UPDATE":return{...t,...e.payload};case"RESET_TO_DEFAULTS":return Yv;case"HYDRATE_FROM_STORAGE":return{...t,...e.payload,cache:{},loading:{},errors:{}};default:return t}}const Kv=k.createContext(null);function jk({children:t}){const[e,n]=k.useReducer($k,Yv);return k.useEffect(()=>{const i={symbol:e.symbol,timeframe:e.timeframe,indicators:e.indicators,ui:e.ui};localStorage.setItem("indicatorSettings",JSON.stringify(i))},[e.symbol,e.timeframe,e.indicators,e.ui]),k.useEffect(()=>{const i=localStorage.getItem("indicatorSettings");if(i)try{const r=JSON.parse(i);n({type:"HYDRATE_FROM_STORAGE",payload:r})}catch(r){console.error("Failed to hydrate indicator settings:",r)}},[]),k.useEffect(()=>{if(!e.ui.autoRefresh)return;const i=setInterval(()=>{const r=Date.now(),s=[];Object.entries(e.cache).forEach(([o,l])=>{r-l.timestamp>l.ttl&&s.push(o)}),s.forEach(o=>{n({type:"CLEAR_CACHE",payload:o})})},e.ui.refreshInterval);return()=>clearInterval(i)},[e.ui.autoRefresh,e.ui.refreshInterval,e.cache]),v.jsx(Kv.Provider,{value:{state:e,dispatch:n},children:t})}function na(){const t=k.useContext(Kv);if(!t)throw new Error("useIndicatorContext must be used within an IndicatorProvider");return t}function Bk(t){const{state:e}=na(),n=e.cache[t];return n?Date.now()-n.timestamp>n.ttl?null:n.data:null}class Vk{static formatTimeSeries(e,n="line"){return!e||!Array.isArray(e)?[]:e.map(i=>({time:this.normalizeTimestamp(i.time),value:parseFloat(i.value?.toString()||"0")})).sort((i,r)=>i.time-r.time)}static normalizeTimestamp(e){return e>4102444800?Math.floor(e/1e3):Math.floor(e)}static formatMovingAverages(e){return e?{ma20:e.ma20?this.formatTimeSeries(e.ma20,"line"):[],ma50:e.ma50?this.formatTimeSeries(e.ma50,"line"):[],ma200:e.ma200?this.formatTimeSeries(e.ma200,"line"):[]}:{}}static formatBollingerBands(e){return e?{upper:this.formatTimeSeries(e.upper,"line"),middle:this.formatTimeSeries(e.middle,"line"),lower:this.formatTimeSeries(e.lower,"line")}:null}static formatRSI(e){return e?{values:this.formatTimeSeries(e.values,"line"),current:e.current,overbought:e.overbought||70,oversold:e.oversold||30,signal:e.signal}:null}static formatMACD(e){return e?{macdLine:this.formatTimeSeries(e.macd_line,"line"),signalLine:this.formatTimeSeries(e.signal_line,"line"),histogram:this.formatTimeSeries(e.histogram,"histogram")}:null}static formatFibonacciLevels(e){return e?[{level:0,value:e.fib_0,label:"0%"},{level:.236,value:e.fib_236,label:"23.6%"},{level:.382,value:e.fib_382,label:"38.2%"},{level:.5,value:e.fib_500,label:"50%"},{level:.618,value:e.fib_618,label:"61.8%"},{level:.786,value:e.fib_786,label:"78.6%"},{level:1,value:e.fib_1000,label:"100%"}].map(({level:i,value:r,label:s})=>({price:r,color:this.getFibonacciColor(i),lineWidth:1,lineStyle:2,title:`Fib ${s}`,axisLabelVisible:!0})):[]}static getFibonacciColor(e){return{0:"rgba(255, 82, 82, 0.8)",.236:"rgba(255, 152, 0, 0.7)",.382:"rgba(255, 193, 7, 0.7)",.5:"rgba(76, 175, 80, 0.7)",.618:"rgba(33, 150, 243, 0.7)",.786:"rgba(103, 58, 183, 0.7)",1:"rgba(96, 125, 139, 0.8)"}[e]||"rgba(128, 128, 128, 0.5)"}static formatSupportResistance(e){if(!e)return{support:[],resistance:[]};const n=(i,r)=>i.map((s,o)=>({price:s,color:r==="support"?"rgba(76, 175, 80, 0.5)":"rgba(244, 67, 54, 0.5)",lineWidth:1,lineStyle:1,title:`${r==="support"?"S":"R"}${o+1}`,axisLabelVisible:!0}));return{support:n(e.support_levels||[],"support"),resistance:n(e.resistance_levels||[],"resistance")}}static alignTimeSeries(e){const n=new Set;Object.values(e).forEach(s=>{s.forEach(o=>n.add(o.time))});const i=Array.from(n).sort((s,o)=>s-o),r={};return Object.entries(e).forEach(([s,o])=>{const l=new Map(o.map(a=>[a.time,a.value]));r[s]=i.map(a=>{const c=l.get(a);if(c!==void 0)return{time:a,value:c};const h=i[i.indexOf(a)-1],u=h?l.get(h):void 0;return{time:a,value:u||0}})}),r}static formatIndicatorResponse(e){return{symbol:e.symbol,currentPrice:e.current_price,timestamp:e.timestamp,dataSource:e.data_source,period:e.calculation_period,indicators:{movingAverages:this.formatMovingAverages(e.indicators.moving_averages),bollingerBands:this.formatBollingerBands(e.indicators.bollinger),rsi:this.formatRSI(e.indicators.rsi),macd:this.formatMACD(e.indicators.macd),fibonacci:this.formatFibonacciLevels(e.indicators.fibonacci),supportResistance:this.formatSupportResistance(e.indicators.support_resistance)}}}static isDataStale(e,n=30){return Date.now()/1e3-e>n}}function Hk(t,e){const[n,i]=k.useState(t);return k.useEffect(()=>{const r=setTimeout(()=>{i(t)},e);return()=>{clearTimeout(r)}},[t,e]),n}const Wk=Bt();function Yk(t={}){const{autoFetch:e=!0,debounceMs:n=300,cacheEnabled:i=!0}=t,{state:r,dispatch:s}=na(),o=k.useRef(null),[l,a]=k.useState({data:null,loading:!1,error:null,lastUpdated:null}),c=Hk(r.symbol,n),h=k.useCallback(()=>{const w=Object.entries(r.indicators).filter(([b,A])=>"enabled"in A?A.enabled:"ma20"in A?A.ma20.enabled||A.ma50.enabled||A.ma200.enabled:!1).map(([b])=>b).join("-");return`${r.symbol}-${r.timeframe}-${w}`},[r.symbol,r.timeframe,r.indicators]),u=Bk(h()),d=k.useCallback(async w=>{const b=[],{movingAverages:A}=r.indicators;if((A.ma20.enabled||A.ma50.enabled||A.ma200.enabled)&&b.push("moving_averages"),r.indicators.bollingerBands.enabled&&b.push("bollinger"),r.indicators.rsi.enabled&&b.push("rsi"),r.indicators.macd.enabled&&b.push("macd"),r.indicators.fibonacci.enabled&&b.push("fibonacci"),r.indicators.supportResistance.enabled&&b.push("support_resistance"),b.length===0)return a({data:null,loading:!1,error:null,lastUpdated:null}),null;s({type:"SET_LOADING",payload:{indicator:"all",loading:!0}}),a(E=>({...E,loading:!0,error:null}));try{const E=await pe.get(`${Wk}/api/technical-indicators`,{params:{symbol:r.symbol,indicators:b.join(","),days:Kk(r.timeframe)},signal:w}),P=Vk.formatIndicatorResponse(E.data);if(i){const R=h();s({type:"SET_INDICATOR_DATA",payload:{key:R,data:P,ttl:3e4}})}return a({data:P,loading:!1,error:null,lastUpdated:new Date}),s({type:"SET_LOADING",payload:{indicator:"all",loading:!1}}),P}catch(E){const P=pe.isCancel(E)||E?.code==="ERR_CANCELED"||E?.name==="CanceledError"||E?.name==="AbortError";if(s({type:"SET_LOADING",payload:{indicator:"all",loading:!1}}),P)return a(D=>({...D,loading:!1})),null;const R=pe.isAxiosError(E)?E.message:"Failed to fetch indicator data";throw s({type:"SET_ERROR",payload:{indicator:"all",error:R}}),a(D=>({...D,loading:!1,error:R})),E}},[r.symbol,r.timeframe,r.indicators,s,i,h]),f=k.useCallback(async()=>{o.current&&o.current.abort(),o.current=new AbortController;try{return await d(o.current.signal)}catch(w){return pe.isCancel(w)||w?.name==="AbortError"||w?.name==="CanceledError"||w?.code==="ERR_CANCELED"||console.error("Failed to refetch indicator data:",w),null}},[d]),p=k.useCallback((w,b)=>{s({type:"TOGGLE_INDICATOR",payload:{indicator:w,subIndicator:b}})},[s]),g=k.useCallback((w,b)=>{s({type:"UPDATE_INDICATOR_CONFIG",payload:{indicator:w,config:b}})},[s]),S=k.useCallback((w,b)=>{s({type:"SET_OSCILLATOR_PANE",payload:{show:w,type:b}})},[s]),m=k.useCallback(()=>{s({type:"CLEAR_CACHE"})},[s]),y=k.useCallback(()=>{s({type:"RESET_TO_DEFAULTS"})},[s]);return k.useEffect(()=>{if(!e)return;if(u&&i){a({data:u,loading:!1,error:null,lastUpdated:new Date});return}const w=new AbortController;return o.current=w,d(w.signal).catch(b=>{pe.isCancel(b)||b?.name==="AbortError"||b?.name==="CanceledError"||b?.code==="ERR_CANCELED"||console.error("Auto-fetch failed:",b)}),()=>{w.abort()}},[c,r.timeframe,r.indicators,e,i,u,d]),k.useEffect(()=>()=>{o.current&&o.current.abort()},[]),{state:{...l,symbol:r.symbol,timeframe:r.timeframe,indicators:r.indicators,ui:r.ui,isOscillatorVisible:r.ui.showOscillatorPane,selectedOscillator:r.ui.selectedOscillator},actions:{refetch:f,toggleIndicator:p,updateIndicatorConfig:g,setOscillatorPane:S,clearCache:m,resetToDefaults:y,setSymbol:w=>s({type:"SET_SYMBOL",payload:w}),setTimeframe:w=>s({type:"SET_TIMEFRAME",payload:w}),setAutoRefresh:w=>s({type:"SET_AUTO_REFRESH",payload:w}),setRefreshInterval:w=>s({type:"SET_REFRESH_INTERVAL",payload:w})}}}function Kk(t){return{"10S":1,"30S":1,"1m":1,"3m":1,"5m":1,"10m":1,"15m":1,"30m":1,"1H":2,"2H":3,"3H":3,"4H":5,"6H":5,"8H":7,"12H":7,"1D":1,"2D":2,"3D":3,"5D":5,"1W":7,"1M":30,"3M":90,"6M":180,"1Y":365,"2Y":730,"3Y":1095,"5Y":1825,YTD:Math.floor((Date.now()-new Date(new Date().getFullYear(),0,1).getTime())/864e5),MAX:3650}[t]||30}function zp(t){const e=k.useRef(new Map),n=k.useCallback((d,f,p={type:"line"})=>{if(!t)return null;let g=e.current.get(d);if(!g){const S={color:p.color||"#2962FF",lineWidth:p.lineWidth||2,crosshairMarkerVisible:!0,priceScaleId:p.priceScaleId||"right",paneId:p.paneId,visible:p.visible!==!1,title:p.title||d};switch(p.type){case"histogram":g=t.addSeries(t1,{...S,priceFormat:{type:"volume"}});break;case"area":g=t.addSeries(Gb,{...S,lineWidth:p.lineWidth||2,topColor:p.color?`${p.color}33`:"rgba(41, 98, 255, 0.2)",bottomColor:p.color?`${p.color}05`:"rgba(41, 98, 255, 0.05)"});break;case"line":default:g=t.addSeries(gv,S);break}e.current.set(d,g)}if(f&&f.length>0)try{g.setData(f)}catch(S){console.error(`Error updating series ${d}:`,S)}return g},[t]),i=k.useCallback(d=>{if(!t)return!1;const f=e.current.get(d);if(!f)return!1;try{return t.removeSeries(f),e.current.delete(d),!0}catch(p){return console.error(`Error removing series ${d}:`,p),!1}},[t]),r=k.useCallback((d,f)=>{const p=e.current.get(d);p&&p.applyOptions({visible:f})},[]),s=k.useCallback((d,f)=>{const p=e.current.get(d);p&&p.applyOptions({color:f})},[]),o=k.useCallback(d=>e.current.get(d),[]),l=k.useCallback(()=>{t&&(e.current.forEach((d,f)=>{try{t.removeSeries(d)}catch(p){console.error(`Error removing series ${f}:`,p)}}),e.current.clear())},[t]),a=k.useCallback(d=>{d.forEach(({id:f,data:p,config:g})=>{n(f,p,g)})},[n]),c=k.useCallback((d,f,p={})=>{const g=e.current.get(d);return g?g.createPriceLine({price:f,color:p.color||"rgba(128, 128, 128, 0.5)",lineWidth:p.lineWidth||1,lineStyle:p.lineStyle||2,axisLabelVisible:p.axisLabelVisible!==!1,title:p.title||""}):null},[]),h=k.useCallback(()=>Array.from(e.current.keys()),[]),u=k.useCallback(d=>e.current.has(d),[]);return{addOrUpdateSeries:n,removeSeries:i,removeAllSeries:l,getSeries:o,hasSeries:u,getActiveSeriesIds:h,setSeriesVisibility:r,setSeriesColor:s,batchUpdateSeries:a,addPriceLine:c,seriesMap:e.current}}function Gk({onIndicatorToggle:t,onDrawingToolSelect:e,onChartTypeChange:n,onTimeframeChange:i}){const[r,s]=k.useState(null),[o,l]=k.useState("candlestick"),[a,c]=k.useState(!1),[h,u]=k.useState(!1),d=[{id:"trendline",icon:"",label:"Trend Line"},{id:"horizontal",icon:"",label:"Horizontal Line"},{id:"vertical",icon:"",label:"Vertical Line"},{id:"rectangle",icon:"",label:"Rectangle"},{id:"fibonacci",icon:"",label:"Fibonacci Retracement"},{id:"text",icon:"A",label:"Text"}],f=[{id:"ma",label:"Moving Averages"},{id:"bollinger",label:"Bollinger Bands"},{id:"rsi",label:"RSI"},{id:"macd",label:"MACD"},{id:"volume",label:"Volume"},{id:"stochastic",label:"Stochastic"}],p=[{id:"candlestick",icon:"",label:"Candlestick"},{id:"line",icon:"",label:"Line"},{id:"area",icon:"",label:"Area"},{id:"bars",icon:"",label:"Bars"}],g=m=>{const y=r===m?null:m;s(y),e?.(y||"none")},S=m=>{l(m),n?.(m)};return v.jsxs("div",{className:"chart-toolbar",children:[v.jsx("div",{className:"toolbar-section",children:v.jsxs("div",{className:"toolbar-dropdown",children:[v.jsxs("button",{className:"toolbar-button chart-type-button",children:[v.jsx("span",{className:"button-icon",children:p.find(m=>m.id===o)?.icon}),v.jsx("span",{className:"button-label",children:p.find(m=>m.id===o)?.label}),v.jsx("span",{className:"dropdown-arrow",children:""})]}),v.jsx("div",{className:"dropdown-menu chart-type-menu",children:p.map(m=>v.jsxs("button",{className:`dropdown-item ${o===m.id?"active":""}`,onClick:()=>S(m.id),children:[v.jsx("span",{className:"item-icon",children:m.icon}),v.jsx("span",{children:m.label})]},m.id))})]})}),v.jsx("div",{className:"toolbar-divider"}),v.jsxs("div",{className:"toolbar-section",children:[v.jsxs("button",{className:`toolbar-button ${h?"active":""}`,onClick:()=>u(!h),title:"Drawing Tools",children:[v.jsx("span",{className:"button-icon",children:""}),v.jsx("span",{className:"button-label",children:"Draw"})]}),h&&v.jsxs("div",{className:"toolbar-dropdown-panel drawing-tools-panel",children:[v.jsx("div",{className:"panel-header",children:"Drawing Tools"}),v.jsx("div",{className:"tool-grid",children:d.map(m=>v.jsxs("button",{className:`tool-button ${r===m.id?"active":""}`,onClick:()=>g(m.id),title:m.label,children:[v.jsx("span",{className:"tool-icon",children:m.icon}),v.jsx("span",{className:"tool-label",children:m.label})]},m.id))})]})]}),v.jsx("div",{className:"toolbar-divider"}),v.jsxs("div",{className:"toolbar-section",children:[v.jsxs("button",{className:`toolbar-button ${a?"active":""}`,onClick:()=>c(!a),title:"Indicators",children:[v.jsx("span",{className:"button-icon",children:""}),v.jsx("span",{className:"button-label",children:"Indicators"})]}),a&&v.jsxs("div",{className:"toolbar-dropdown-panel indicators-panel",children:[v.jsx("div",{className:"panel-header",children:"Technical Indicators"}),v.jsx("div",{className:"indicator-list",children:f.map(m=>v.jsxs("button",{className:"indicator-item",onClick:()=>t?.(m.id),children:[v.jsx("span",{className:"indicator-checkbox",children:""}),v.jsx("span",{children:m.label})]},m.id))})]})]}),v.jsx("div",{className:"toolbar-divider"}),v.jsxs("div",{className:"toolbar-section toolbar-actions",children:[v.jsx("button",{className:"toolbar-button",title:"Zoom In",children:v.jsx("span",{className:"button-icon",children:"+"})}),v.jsx("button",{className:"toolbar-button",title:"Zoom Out",children:v.jsx("span",{className:"button-icon",children:"-"})}),v.jsx("button",{className:"toolbar-button",title:"Fit Content",children:v.jsx("span",{className:"button-icon",children:""})}),v.jsx("button",{className:"toolbar-button",title:"Screenshot",children:v.jsx("span",{className:"button-icon",children:""})}),v.jsx("button",{className:"toolbar-button",title:"Settings",children:v.jsx("span",{className:"button-icon",children:""})})]})]})}function qk({symbol:t,days:e=100,technicalLevels:n,onChartReady:i}){const r=k.useRef(null),s=k.useRef(null),o=k.useRef(null),l=k.useRef(null),a=k.useRef(null),[c,h]=k.useState(!0),[u,d]=k.useState(null),[f,p]=k.useState({}),[g,S]=k.useState(!1),{state:m}=Yk(),{dispatch:y}=na(),w=zp(g?s.current:null),b=zp(g?l.current:null),[A,E]=k.useState({movingAverages:!1,bollinger:!1,rsi:!1,macd:!1}),[P,R]=k.useState(null),D=A.rsi&&m.indicators.rsi.enabled||A.macd&&m.indicators.macd.enabled,_=k.useCallback(O=>{const F=O.toLowerCase();return F.includes("bollinger")?"bollinger":F.includes("macd")?"macd":F.includes("rsi")?"rsi":F.includes("ma")||F.includes("moving average")||["ma20","ma50","ma200"].includes(F)?"movingAverages":null},[]),j=k.useCallback((O,F)=>{const oe=_(O);oe&&E(fe=>fe[oe]===F?fe:{...fe,[oe]:F})},[_]),B=k.useCallback(()=>{E({movingAverages:!1,bollinger:!1,rsi:!1,macd:!1}),R(null)},[]);k.useEffect(()=>(We.setOverlayControls({setOverlayVisibility:j,clearOverlays:B,highlightPattern:(O,F)=>{F?.indicator&&j(F.indicator,!0),R({title:F?.title||O,description:F?.description})}}),()=>{We.setOverlayControls({setOverlayVisibility:void 0,clearOverlays:void 0,highlightPattern:void 0})}),[j,B]),k.useEffect(()=>{if(!P)return;const O=setTimeout(()=>R(null),6e3);return()=>clearTimeout(O)},[P]);const J=k.useRef(!0),Z=k.useRef(!1),X=k.useRef(null),te=k.useRef([]),se=k.useRef(t),$=k.useCallback(()=>{if(!(Z.current||!s.current||!o.current))try{const O={};if(n?.sell_high_level){const F=o.current.priceToCoordinate(n.sell_high_level);F!=null&&!isNaN(F)&&(O.sell_high=F)}if(n?.buy_low_level){const F=o.current.priceToCoordinate(n.buy_low_level);F!=null&&!isNaN(F)&&(O.buy_low=F)}if(n?.btd_level){const F=o.current.priceToCoordinate(n.btd_level);F!=null&&!isNaN(F)&&(O.btd=F)}J.current&&p(O)}catch(O){console.debug("Error updating label positions:",O)}},[n]),z=k.useRef($);k.useEffect(()=>{z.current=$},[$]);const C=k.useCallback(async O=>{X.current&&X.current.abort(),X.current=new AbortController,h(!0),d(null);try{const F=await Un.getStockHistory(O,e);if(!J.current||X.current.signal.aborted)return null;if(!F.candles||F.candles.length===0)throw new Error(`No historical data available for ${O}`);return F.candles.map(fe=>({time:fe.time||fe.date,open:fe.open,high:fe.high,low:fe.low,close:fe.close})).sort((fe,Vt)=>fe.time-Vt.time)}catch(F){if(F.name==="AbortError"||!J.current)return null;console.error("Error fetching chart data:",F);const oe=F?.response?.data?.detail?.message||F?.message||"Failed to load chart data";return J.current&&d(oe),null}finally{J.current&&h(!1)}},[e]),N=k.useCallback(async O=>{if(Z.current||!o.current)return;const F=await C(O);if(F&&F.length>0&&!Z.current&&o.current)try{o.current.setData(F),s.current&&s.current.timeScale().fitContent()}catch(oe){console.debug("Error updating chart data:",oe)}},[C]),U=k.useCallback(()=>{if(!(Z.current||!o.current))try{if(te.current.forEach(F=>{try{o.current?.removePriceLine(F)}catch{}}),te.current=[],n?.sell_high_level){const F=o.current.createPriceLine({price:n.sell_high_level,color:"#10b981",lineWidth:2,lineStyle:2,axisLabelVisible:!0,title:""});te.current.push(F)}if(n?.buy_low_level){const F=o.current.createPriceLine({price:n.buy_low_level,color:"#eab308",lineWidth:2,lineStyle:2,axisLabelVisible:!0,title:""});te.current.push(F)}if(n?.btd_level){const F=o.current.createPriceLine({price:n.btd_level,color:"#3b82f6",lineWidth:2,lineStyle:2,axisLabelVisible:!0,title:""});te.current.push(F)}const O=n;if(O?.entry_points?.length&&O.entry_points.forEach((F,oe)=>{const fe=o.current.createPriceLine({price:F,color:"#22c55e",lineWidth:2,lineStyle:1,axisLabelVisible:!0,title:`Entry ${oe+1}`});te.current.push(fe)}),O?.stop_loss){const F=o.current.createPriceLine({price:O.stop_loss,color:"#ef4444",lineWidth:2,lineStyle:0,axisLabelVisible:!0,title:"Stop"});te.current.push(F)}O?.targets?.length&&O.targets.forEach((F,oe)=>{const fe=o.current.createPriceLine({price:F,color:"#a855f7",lineWidth:2,lineStyle:1,axisLabelVisible:!0,title:`T${oe+1}`});te.current.push(fe)}),O?.support_levels?.length&&O.support_levels.forEach(F=>{const oe=o.current.createPriceLine({price:F,color:"#fb923c",lineWidth:1,lineStyle:3,axisLabelVisible:!0,title:"S"});te.current.push(oe)}),O?.resistance_levels?.length&&O.resistance_levels.forEach(F=>{const oe=o.current.createPriceLine({price:F,color:"#06b6d4",lineWidth:1,lineStyle:3,axisLabelVisible:!0,title:"R"});te.current.push(oe)}),setTimeout(()=>z.current(),100)}catch(O){console.debug("Error updating technical levels:",O)}},[n]),x=k.useCallback(()=>{if(!(Z.current||!s.current||!r.current))try{s.current.applyOptions({width:r.current.clientWidth}),z.current()}catch(O){console.debug("Error handling resize:",O)}},[]);k.useEffect(()=>{if(!r.current)return;J.current=!0,Z.current=!1,se.current=t;const O=Cp(r.current,{layout:{background:{type:xl.Solid,color:"white"},textColor:"#333"},width:r.current.clientWidth,height:300,grid:{vertLines:{color:"#f0f0f0"},horzLines:{color:"#f0f0f0"}},crosshair:{mode:1},rightPriceScale:{borderColor:"#e0e0e0"},timeScale:{borderColor:"#e0e0e0",timeVisible:!0,secondsVisible:!1}}),F=O.addSeries(Jb,{upColor:"#22c55e",downColor:"#ef4444",borderDownColor:"#ef4444",borderUpColor:"#22c55e",wickDownColor:"#ef4444",wickUpColor:"#22c55e"});return s.current=O,o.current=F,S(!0),window.addEventListener("resize",x),N(t).then(()=>{U(),setTimeout(()=>z.current(),200),setTimeout(async()=>{try{const oe=r.current?.querySelector("canvas");if(oe){const fe=oe.toDataURL("image/png").split(",")[1];await fetch("https://gvses-market-insights.fly.dev/api/agent/chart-snapshot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbol:t,timeframe:"1D",image_base64:fe,auto_analyze:!1})}),console.log(`Chart snapshot captured for ${t}`)}}catch(oe){console.warn("Failed to capture chart snapshot:",oe)}},500)}),We.initialize(O,F,y),window.enhancedChartControl=We,window.enhancedChartControlReady=!0,i&&!Z.current&&i(O),()=>{J.current=!1,Z.current=!0,S(!1),window.enhancedChartControlReady=!1,X.current&&X.current.abort(),window.removeEventListener("resize",x),te.current=[],nt&&nt.setChartRef(null),B();try{O.remove()}catch{}s.current=null,o.current=null}},[t,e]),k.useEffect(()=>{if(!g||!s.current||Z.current)return;const O=s.current,F=O.timeScale(),oe=()=>{!Z.current&&J.current&&z.current()};F.subscribeVisibleLogicalRangeChange(oe),O.subscribeCrosshairMove(oe),F.subscribeVisibleTimeRangeChange(oe)},[g]),k.useEffect(()=>{se.current!==t&&s.current&&!Z.current&&(se.current=t,N(t))},[t,N]),k.useEffect(()=>{s.current&&!Z.current&&U()},[n,U]),k.useEffect(()=>{if(s.current&&!Z.current&&n){const O=[];return O.push(setTimeout(()=>z.current(),100)),O.push(setTimeout(()=>z.current(),300)),O.push(setTimeout(()=>z.current(),600)),()=>{O.forEach(F=>clearTimeout(F))}}},[n]),k.useEffect(()=>{if(!s.current||!m.data)return;const{indicators:O}=m.data;if(!O)return;const{movingAverages:F}=m.indicators,oe=A.movingAverages&&(F.ma20.enabled||F.ma50.enabled||F.ma200.enabled);oe&&O.movingAverages?.ma20?w.addOrUpdateSeries("ma20",O.movingAverages.ma20,{type:"line",color:F.ma20.color,lineWidth:F.ma20.lineWidth}):w.removeSeries("ma20"),oe&&O.movingAverages?.ma50?w.addOrUpdateSeries("ma50",O.movingAverages.ma50,{type:"line",color:F.ma50.color,lineWidth:F.ma50.lineWidth}):w.removeSeries("ma50"),oe&&O.movingAverages?.ma200?w.addOrUpdateSeries("ma200",O.movingAverages.ma200,{type:"line",color:F.ma200.color,lineWidth:F.ma200.lineWidth}):w.removeSeries("ma200"),A.bollinger&&m.indicators.bollingerBands.enabled&&O.bollingerBands?(w.addOrUpdateSeries("bb-upper",O.bollingerBands.upper,{type:"line",color:m.indicators.bollingerBands.color,lineWidth:1}),w.addOrUpdateSeries("bb-middle",O.bollingerBands.middle,{type:"line",color:m.indicators.bollingerBands.color,lineWidth:1}),w.addOrUpdateSeries("bb-lower",O.bollingerBands.lower,{type:"line",color:m.indicators.bollingerBands.color,lineWidth:1})):(w.removeSeries("bb-upper"),w.removeSeries("bb-middle"),w.removeSeries("bb-lower"))},[m.data,m.indicators,w,A]),k.useEffect(()=>{const O=A.rsi&&m.indicators.rsi.enabled,F=A.macd&&m.indicators.macd.enabled,oe=O||F;if(oe&&!l.current&&a.current){const fe=Cp(a.current,{layout:{background:{type:xl.Solid,color:"white"},textColor:"#333"},width:a.current.clientWidth,height:150,grid:{vertLines:{color:"#f0f0f0"},horzLines:{color:"#f0f0f0"}},rightPriceScale:{borderColor:"#e0e0e0"},timeScale:{borderColor:"#e0e0e0",visible:!1}});l.current=fe,s.current&&s.current.timeScale().subscribeVisibleLogicalRangeChange(Vt=>{Vt&&l.current&&l.current.timeScale().setVisibleLogicalRange(Vt)})}else!oe&&l.current&&(l.current.remove(),l.current=null)},[m.indicators.rsi.enabled,m.indicators.macd.enabled,A]),k.useEffect(()=>{if(!l.current||!m.data){b.removeSeries("rsi"),b.removeSeries("macd-line"),b.removeSeries("macd-signal"),b.removeSeries("macd-histogram");return}const{indicators:O}=m.data;if(O){if(A.rsi&&m.indicators.rsi.enabled&&O.rsi){b.addOrUpdateSeries("rsi",O.rsi.values,{type:"line",color:m.indicators.rsi.color,lineWidth:2});const F=b.getSeries("rsi");F&&(F.createPriceLine({price:m.indicators.rsi.overbought||70,color:"rgba(255, 0, 0, 0.3)",lineWidth:1,lineStyle:2,axisLabelVisible:!0,title:"Overbought"}),F.createPriceLine({price:m.indicators.rsi.oversold||30,color:"rgba(0, 255, 0, 0.3)",lineWidth:1,lineStyle:2,axisLabelVisible:!0,title:"Oversold"}))}else b.removeSeries("rsi");A.macd&&m.indicators.macd.enabled&&O.macd?(b.addOrUpdateSeries("macd-line",O.macd.macdLine,{type:"line",color:"#2962FF",lineWidth:2}),b.addOrUpdateSeries("macd-signal",O.macd.signalLine,{type:"line",color:"#FF6B35",lineWidth:2}),b.addOrUpdateSeries("macd-histogram",O.macd.histogram,{type:"histogram",color:"#26A69A"})):(b.removeSeries("macd-line"),b.removeSeries("macd-signal"),b.removeSeries("macd-histogram"))}},[m.data,m.indicators,A,b]);const G=O=>{O==="ma"?j("movingAverages",!A.movingAverages):O==="bollinger"?j("bollinger",!A.bollinger):O==="rsi"?j("rsi",!A.rsi):O==="macd"&&j("macd",!A.macd)},re=O=>{console.log("Drawing tool selected:",O)},K=O=>{console.log("Chart type changed:",O)};return v.jsxs("div",{className:"trading-chart-container",children:[v.jsx(Gk,{onIndicatorToggle:G,onDrawingToolSelect:re,onChartTypeChange:K}),c&&v.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,background:"rgba(255, 255, 255, 0.9)",padding:"10px 20px",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:"Loading chart data..."}),u&&!c&&v.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,background:"rgba(255, 255, 255, 0.95)",padding:"20px",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",border:"2px solid #ef4444",maxWidth:"400px",textAlign:"center"},children:[v.jsx("div",{style:{color:"#ef4444",fontWeight:"bold",marginBottom:"10px"},children:"Chart Error"}),v.jsx("div",{style:{color:"#666",fontSize:"14px",lineHeight:"1.4"},children:u})]}),P&&!c&&!u&&v.jsxs("div",{className:"pattern-highlight-banner",children:[v.jsx("strong",{children:P.title}),P.description&&v.jsx("span",{children:P.description})]}),v.jsx("div",{ref:r,className:"main-chart",style:{opacity:c||u?.3:1,height:D?"calc(100% - 160px)":"100%"}}),D&&v.jsx("div",{className:"oscillator-chart",ref:a}),!c&&!u&&v.jsxs(v.Fragment,{children:[f.sell_high!==void 0&&n?.sell_high_level&&v.jsx("div",{style:{position:"absolute",left:"2px",top:`${f.sell_high}px`,transform:"translateY(-50%)",backgroundColor:"rgba(255, 255, 255, 0.75)",color:"#10b981",padding:"2px 8px",border:"1px solid #10b981",borderRadius:"4px",fontSize:"11px",fontWeight:"700",zIndex:10,whiteSpace:"nowrap"},children:"Sell High"}),f.buy_low!==void 0&&n?.buy_low_level&&v.jsx("div",{style:{position:"absolute",left:"2px",top:`${f.buy_low}px`,transform:"translateY(-50%)",backgroundColor:"rgba(255, 255, 255, 0.75)",color:"#eab308",padding:"2px 8px",border:"1px solid #eab308",borderRadius:"4px",fontSize:"11px",fontWeight:"700",zIndex:10,whiteSpace:"nowrap"},children:"Buy Low"}),f.btd!==void 0&&n?.btd_level&&v.jsx("div",{style:{position:"absolute",left:"2px",top:`${f.btd}px`,transform:"translateY(-50%)",backgroundColor:"rgba(255, 255, 255, 0.75)",color:"#3b82f6",padding:"2px 8px",border:"1px solid #3b82f6",borderRadius:"4px",fontSize:"11px",fontWeight:"700",zIndex:10,whiteSpace:"nowrap"},children:"BTD"})]})]})}const Qk=["10S","30S","1M","3M","5M","10M","15M","30M","1H","2H","3H","4H","6H","8H","12H","1D","2D","3D","5D","1W","1M_CAL","1Y","2Y","3Y"],Xk=({selected:t,options:e=Qk,onChange:n})=>v.jsx("div",{className:"time-range-selector",children:e.map(i=>v.jsx("button",{className:`time-range-button ${t===i?"active":""}`,onClick:()=>n(i),children:i},i))});class Jk{baseUrl;sessionId;constructor(){this.baseUrl=Bt(),this.sessionId=this.generateSessionId()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}async sendQuery(e,n){const i={query:e,conversation_history:n,stream:!1,session_id:this.sessionId};console.log("[AGENT ORCHESTRATOR SERVICE]  Making HTTP request to /api/agent/orchestrate"),console.log("[AGENT ORCHESTRATOR SERVICE]  Request payload:",{query:i.query,historyLength:i.conversation_history?.length||0,sessionId:i.session_id});const r=await fetch(`${this.baseUrl}/api/agent/orchestrate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(console.log("[AGENT ORCHESTRATOR SERVICE]  HTTP response received:",{status:r.status,statusText:r.statusText,ok:r.ok}),!r.ok){const o=`Agent orchestrator error: ${r.status} ${r.statusText}`;throw console.error("[AGENT ORCHESTRATOR SERVICE] ",o),new Error(o)}const s=await r.json();return console.log("[AGENT ORCHESTRATOR SERVICE]  Parsed JSON response:",{hasText:!!s.text,textLength:s.text?.length||0,textPreview:s.text?.substring(0,100),toolsUsed:s.tools_used}),s}async getHealth(){const e=await fetch(`${this.baseUrl}/api/agent/health`);if(!e.ok)throw new Error(`Health check failed: ${e.status} ${e.statusText}`);return await e.json()}async getTools(){const e=await fetch(`${this.baseUrl}/api/agent/tools`);if(!e.ok)throw new Error(`Tools fetch failed: ${e.status} ${e.statusText}`);return await e.json()}async clearCache(){const e=await fetch(`${this.baseUrl}/api/agent/clear-cache`,{method:"POST"});if(!e.ok)throw new Error(`Cache clear failed: ${e.status} ${e.statusText}`);return await e.json()}async getChartSnapshot(e,n,i=!1){const r=new URLSearchParams;n&&r.append("timeframe",n),i&&r.append("include_image","true");const s=`${this.baseUrl}/api/agent/chart-snapshot/${e.toUpperCase()}${r.toString()?"?"+r.toString():""}`;try{const o=await fetch(s);return o.status===404?null:o.ok?await o.json():(console.error(`Chart snapshot fetch failed: ${o.status} ${o.statusText}`),null)}catch(o){return console.error("Error fetching chart snapshot:",o),null}}convertMessageHistory(e){return e.map(n=>({role:n.role,content:n.content}))}async streamQuery(e,n,i){const r={query:e,conversation_history:n,stream:!0,session_id:this.sessionId},s=await fetch(`${this.baseUrl}/api/agent/stream`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw new Error(`Stream error: ${s.status} ${s.statusText}`);const o=s.body?.getReader();if(!o)throw new Error("No reader available for streaming response");const l=new TextDecoder;let a="";try{for(;;){const{done:c,value:h}=await o.read();if(c)break;a+=l.decode(h,{stream:!0});const u=a.split(`
`);a=u.pop()||"";for(const d of u)if(d.startsWith("data: ")){const f=d.slice(6);if(f==="[DONE]")continue;try{const p=JSON.parse(f);if(p.type==="structured_data"){const g=p.data;i&&i({type:"structured",data:g})}else p.type==="content"?i&&i({type:"content",text:p.text}):p.type==="tool_start"?i&&i({type:"tool_start",tool:p.tool}):p.type==="tool_result"?i&&i({type:"tool_result",tool:p.tool,data:p.data}):p.type==="done"&&i&&i({type:"done"})}catch(p){console.error("Error parsing SSE chunk:",p)}}}}finally{o.releaseLock()}}getSessionId(){return this.sessionId}newSession(){return this.sessionId=this.generateSessionId(),this.sessionId}}const Vo=new Jk;class ia{static instance=null;websocket=null;signedUrlPromise=null;connectionPromise=null;signedUrlCache=null;listeners=new Map;constructor(){}static getInstance(){return this.instance||(this.instance=new ia),this.instance}addListener(e,n){this.listeners.set(e,n)}removeListener(e){this.listeners.delete(e)}async getConnection(e,n){if(this.websocket&&this.websocket.readyState===WebSocket.OPEN)return console.log("[ConnectionManager] Returning existing open WebSocket"),this.websocket;if(this.connectionPromise)return console.log("[ConnectionManager] Connection already in progress, returning existing promise"),this.connectionPromise;console.log("[ConnectionManager] Creating new WebSocket connection"),this.connectionPromise=this.createConnection(e,n);try{return await this.connectionPromise}catch(i){throw this.connectionPromise=null,i}}async getSignedUrl(e,n){return this.signedUrlCache&&Date.now()-this.signedUrlCache.timestamp<3e5?(console.log("[ConnectionManager] Using cached signed URL"),this.signedUrlCache.url):this.signedUrlPromise?(console.log("[ConnectionManager] Signed URL request already in progress"),this.signedUrlPromise):(console.log("[ConnectionManager] Fetching new signed URL"),this.signedUrlPromise=fetch(`${e}/elevenlabs/signed-url${n?`?agent_id=${n}`:""}`).then(i=>{if(!i.ok)throw new Error("Failed to get signed URL");return i.json()}).then(i=>(this.signedUrlCache={url:i.signed_url,timestamp:Date.now()},this.signedUrlPromise=null,console.log("[ConnectionManager] Signed URL cached successfully"),i.signed_url)).catch(i=>{throw this.signedUrlPromise=null,i}),this.signedUrlPromise)}async createConnection(e,n){try{const i=await this.getSignedUrl(e,n),r=new WebSocket(i);return r.onopen=()=>{console.log("[ConnectionManager] WebSocket connected!"),this.websocket=r,this.connectionPromise=null,this.listeners.forEach(o=>{o.onConnectionChange?.(!0)});const s={type:"conversation_initiation_client_data"};console.log("[ConnectionManager] Sending init message:",s),r.send(JSON.stringify(s))},r.onmessage=s=>{const o=JSON.parse(s.data);console.log("[ConnectionManager] Message type:",o.type);const l=o.user_transcription_event?.user_transcript,a=o.agent_response_event?.agent_response,c=o.agent_response_correction_event?.corrected_agent_response,h=o.audio_event?.audio_base_64,u=o.ping_event,d=o.interruption_event?.reason;switch(o.type){case"user_transcript":l&&this.listeners.forEach(f=>{f.onUserTranscript?.(l)});break;case"agent_response":a&&this.listeners.forEach(f=>{f.onAgentResponse?.(a)});break;case"agent_response_correction":c&&this.listeners.forEach(f=>{f.onAgentResponse?.(c)});break;case"audio":h&&this.listeners.forEach(f=>{f.onAudioChunk?.(h)});break;case"ping":{const f=u?.event_id,p=u?.ping_ms??0;console.log(`[ConnectionManager] Ping received - event_id: ${f}, delay: ${p}ms`),setTimeout(()=>{if(r.readyState===WebSocket.OPEN){const g={type:"pong",event_id:f};console.log(`[ConnectionManager] Sending pong for event ${f}`),r.send(JSON.stringify(g))}else console.warn(`[ConnectionManager] Cannot send pong - WebSocket not open (state: ${r.readyState})`)},p);break}case"interruption":d?console.log("[ConnectionManager] Conversation interrupted:",d):console.log("[ConnectionManager] Conversation interrupted with no reason provided");break}},r.onerror=s=>{console.error("[ConnectionManager] WebSocket error:",s),console.error("[ConnectionManager] Error details:",{type:s.type,target:s.target,timeStamp:s.timeStamp,readyState:r.readyState})},r.onclose=s=>{console.log("[ConnectionManager] WebSocket closed"),console.log("[ConnectionManager] Close event details:",{code:s.code,reason:s.reason||"No reason provided",wasClean:s.wasClean,timeStamp:s.timeStamp}),s.code===1e3?console.log("[ConnectionManager] Normal closure"):s.code===1001?console.log("[ConnectionManager] Endpoint going away"):s.code===1006?console.log("[ConnectionManager] Abnormal closure - connection lost"):s.code===1009?console.log("[ConnectionManager] Message too large"):s.code===1011?console.log("[ConnectionManager] Server error"):s.code>=4e3&&console.log("[ConnectionManager] Custom/Application error"),this.websocket=null,this.connectionPromise=null,this.listeners.forEach(o=>{o.onConnectionChange?.(!1)})},new Promise((s,o)=>{const l=setTimeout(()=>{r.readyState!==WebSocket.OPEN&&(r.close(),o(new Error("WebSocket connection timeout")))},1e4);r.addEventListener("open",()=>{clearTimeout(l),s(r)}),r.addEventListener("error",()=>{clearTimeout(l),o(new Error("WebSocket connection failed"))})})}catch(i){throw this.connectionPromise=null,i}}sendTextMessage(e){this.websocket?.readyState===WebSocket.OPEN?this.websocket.send(JSON.stringify({type:"user_message",text:e})):console.warn("[ConnectionManager] Cannot send text - WebSocket not connected")}sendAudioChunk(e){this.websocket?.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify({user_audio_chunk:e}))}closeConnection(){console.log("[ConnectionManager] Closing WebSocket connection"),this.websocket&&(this.websocket.close(),this.websocket=null),this.connectionPromise=null,this.listeners.forEach(e=>{e.onConnectionChange?.(!1)})}isConnected(){return this.websocket?.readyState===WebSocket.OPEN}clearCache(){this.signedUrlCache=null}}const Zk=Object.freeze(Object.defineProperty({__proto__:null,ElevenLabsConnectionManager:ia},Symbol.toStringTag,{value:"Module"})),eE=(t={})=>{const{onUserTranscript:e,onAgentResponse:n,onAudioChunk:i,onConnectionChange:r,apiUrl:s=Bt()}=t,[o,l]=k.useState(!1),[a,c]=k.useState(!1),[h,u]=k.useState(null),[d,f]=k.useState([]),p=k.useRef(ia.getInstance()),g=k.useRef(crypto.randomUUID()),S=k.useRef([]),m=k.useRef(!1),y=k.useCallback(async()=>{if(m.current||S.current.length===0)return;m.current=!0;const P=S.current.shift();if(P)try{const R=atob(P),D=new Uint8Array(R.length);for(let G=0;G<R.length;G++)D[G]=R.charCodeAt(G);const _=16e3,j=1,B=16,J=_*j*(B/8),Z=j*(B/8),X=D.length,te=44+X,se=new ArrayBuffer(te),$=new DataView(se),z=(G,re)=>{for(let K=0;K<re.length;K++)$.setUint8(G+K,re.charCodeAt(K))};z(0,"RIFF"),$.setUint32(4,te-8,!0),z(8,"WAVE"),z(12,"fmt "),$.setUint32(16,16,!0),$.setUint16(20,1,!0),$.setUint16(22,j,!0),$.setUint32(24,_,!0),$.setUint32(28,J,!0),$.setUint16(32,Z,!0),$.setUint16(34,B,!0),z(36,"data"),$.setUint32(40,X,!0),new Uint8Array(se,44).set(D);const N=new Blob([se],{type:"audio/wav"}),U=URL.createObjectURL(N),x=new Audio(U);x.onended=()=>{URL.revokeObjectURL(U),m.current=!1,y()},x.onerror=G=>{console.error("Audio playback error:",G),URL.revokeObjectURL(U),m.current=!1,y()},await x.play()}catch(R){console.error("Error playing audio:",R),m.current=!1,y()}else m.current=!1},[]);k.useEffect(()=>{const P=g.current;return p.current.addListener(P,{apiUrl:s,onUserTranscript:R=>{const D={role:"user",content:R,timestamp:new Date().toISOString()};f(_=>[..._,D]),e?.(R)},onAgentResponse:R=>{const D={role:"assistant",content:R,timestamp:new Date().toISOString()};f(_=>[..._,D]),n?.(R)},onAudioChunk:R=>{S.current.push(R),y(),i?.(R)},onConnectionChange:R=>{l(R),r?.(R),R||c(!1)}}),p.current.isConnected()&&l(!0),()=>{p.current.removeListener(P)}},[s,e,n,i,r,y]);const w=k.useCallback(async P=>{if(o){console.log("Already connected");return}c(!0),u(null);const R=setTimeout(()=>{console.warn("ElevenLabs connection timeout - clearing loading state"),c(!1),u("Connection timeout - please try again")},15e3);try{await p.current.getConnection(s,P),clearTimeout(R),c(!1)}catch(D){clearTimeout(R),u(D instanceof Error?D.message:"Failed to start conversation"),c(!1)}},[o,s]),b=k.useCallback(()=>{p.current.closeConnection(),S.current=[]},[]),A=k.useCallback(P=>{p.current.sendTextMessage(P)},[]),E=k.useCallback(P=>{p.current.sendAudioChunk(P)},[]);return{isConnected:o,isLoading:a,error:h,messages:d,startConversation:w,stopConversation:b,sendTextMessage:A,sendAudioChunk:E}};let tE=t=>crypto.getRandomValues(new Uint8Array(t)),nE=(t,e,n)=>{let i=(2<<Math.log2(t.length-1))-1,r=-~(1.6*i*e/t.length);return(s=e)=>{let o="";for(;;){let l=n(r),a=r|0;for(;a--;)if(o+=t[l[a]&i]||"",o.length>=s)return o}}},iE=(t,e=21)=>nE(t,e|0,tE);var rE={},Gv=class{eventHandlers={};clearEventHandlers(){this.eventHandlers={}}on(t,e){this.eventHandlers[t]=this.eventHandlers[t]||[],this.eventHandlers[t].push(e)}once(t,e){const n=i=>(this.off(t,n),e(i));this.on(t,n)}off(t,e){const n=this.eventHandlers[t]||[];if(e){const i=n.indexOf(e);if(i<0)throw new Error(`Could not turn off specified event listener for "${t}": not found as a listener`);n.splice(i,1)}else delete this.eventHandlers[t]}async waitForNext(t,{timeoutMs:e}={}){return new Promise((n,i)=>{this.once(t,n),e!==void 0&&setTimeout(()=>i(new Error(`Timeout waiting for "${t}"`)),e)})}dispatch(t,e){const n=this.eventHandlers[t]||[];for(const i of n)i(e)}},ac=!!globalThis.document;function sE(){return!!globalThis.WebSocket}function oE(t){try{return typeof process<"u"?rE?.[t]:void 0}catch{return}}function Be(t,e){if(!t)throw e?typeof e=="string"?new Error(e):e:new Error("Assertion failed")}function lE(t){const e=new ArrayBuffer(t.length*2),n=new DataView(e);let i=0;for(let r=0;r<t.length;r++,i+=2){const s=Math.max(-1,Math.min(1,t[r]));n.setInt16(i,s<0?s*32768:s*32767,!0)}return e}function aE(t){const e=atob(t),n=e.length,i=new Uint8Array(n);for(let r=0;r<n;r++)i[r]=e.charCodeAt(r);return i.buffer}function cE(t){t instanceof Float32Array?t=lE(t):t instanceof Int16Array&&(t=t.buffer);const e=new Uint8Array(t),n=32768;let i="";for(let r=0;r<e.length;r+=n){const s=e.subarray(r,r+n);i+=String.fromCharCode.apply(null,s)}return btoa(i)}function qv(t,e){if(t instanceof ArrayBuffer&&(t=new Int16Array(t)),e instanceof ArrayBuffer&&(e=new Int16Array(e)),!(t instanceof Int16Array)||!(e instanceof Int16Array))throw new TypeError("Both items must be Int16Array");const n=new Int16Array(t.length+e.length);for(const[i,r]of t.entries())n[i]=r;for(const[i,r]of e.entries())n[t.length+i]=r;return n}var uE="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",hE=iE(uE,21);function dE(t,e=21){const n=hE(e);return`${t}${n}`}var fE=t=>new Promise(e=>setTimeout(()=>e(),t));function pE(t,{maxLimit:e=200}={}){if(!t)return t;const n=structuredClone(t);return n.item?.content?.find(i=>i.audio)&&(n.item.content=n.item.content.map(({audio:i,c:r})=>i?{...r,audio:"<base64 redacted...>"}:r)),n.audio&&(n.audio="<audio redacted...>"),n.delta?.length>e&&(n.delta=n.delta.slice(0,e)+"... (truncated)"),n}var mE=class extends Gv{model;url;apiKey;debug;ws;constructor({model:t="gpt-realtime-2025-08-28",url:e="wss://api.openai.com/v1/realtime",apiKey:n=oE("OPENAI_API_KEY"),dangerouslyAllowAPIKeyInBrowser:i,debug:r}={}){if(super(),this.model=t,this.url=e,this.apiKey=n,this.debug=!!r,ac&&this.apiKey&&!i)throw new Error('Unable to provide API key in the browser without "dangerouslyAllowAPIKeyInBrowser" set to true')}get isConnected(){return!!this.ws}async connect(){if(this.isConnected)return;!this.apiKey&&!ac&&console.warn(`No apiKey provided for connection to "${this.url}"`);const t=new URL(this.url);if(t.searchParams.set("model",this.model),sE()){ac&&this.apiKey&&console.warn("Warning: Connecting using API key in the browser, this is not recommended");const e=new WebSocket(t.toString(),["realtime",this.apiKey?`openai-insecure-api-key.${this.apiKey}`:void 0,"openai-beta.realtime-v1"].filter(Boolean));return e.addEventListener("message",n=>{const i=JSON.parse(n.data);this.receive(i.type,i)}),new Promise((n,i)=>{const r=()=>{this.disconnect(e),i(new Error(`Could not connect to "${this.url}"`))};e.addEventListener("error",r),e.addEventListener("open",()=>{this._log(`Connected to "${this.url}"`),e.removeEventListener("error",r),e.addEventListener("error",()=>{this.disconnect(e),this._log(`Error, disconnected from "${this.url}"`),this.dispatch("close",{type:"close",error:!0})}),e.addEventListener("close",()=>{this.disconnect(e),this._log(`Disconnected from "${this.url}"`),this.dispatch("close",{type:"close",error:!1})}),this.ws=e,n(!0)})})}else{const e=await yu(()=>import("./browser-tuD4LoiR.js").then(i=>i.b),[]),n=new e.WebSocket(t.toString(),[],{finishRequest:i=>{i.setHeader("OpenAI-Beta","realtime=v1"),this.apiKey&&(i.setHeader("Authorization",`Bearer ${this.apiKey}`),i.setHeader("api-key",this.apiKey)),i.end()}});return n.on("message",i=>{const r=JSON.parse(i.toString());this.receive(r.type,r)}),new Promise((i,r)=>{const s=()=>{this.disconnect(n),r(new Error(`Could not connect to "${this.url}"`))};n.on("error",s),n.on("open",()=>{this._log(`Connected to "${this.url}"`),n.removeListener("error",s),n.on("error",()=>{this._log(`Error, disconnected from "${this.url}"`),this.disconnect(n),this.dispatch("close",{type:"close",error:!0})}),n.on("close",()=>{this.disconnect(n),this._log(`Disconnected from "${this.url}"`),this.dispatch("close",{type:"close",error:!1})}),this.ws=n,i()})})}}disconnect(t){this.ws&&(!t||this.ws===t)&&(this.ws?.close(),this.ws=void 0)}receive(t,e){this._log("received:",t,e),this.dispatch(t,e),this.dispatch(`server.${t}`,e),this.dispatch("server.*",e)}send(t,e={}){if(!this.isConnected)throw new Error("RealtimeAPI is not connected");if(e=e||{},typeof e!="object")throw new TypeError("data must be an object");const n={event_id:dE("evt_"),type:t,...e};this.dispatch(t,n),this.dispatch(`client.${t}`,n),this.dispatch("client.*",n),this._log("sent:",t,n),this.ws.send(JSON.stringify(n))}_log(...t){const n=[`[Websocket/${new Date().toISOString()}]`].concat(t).map(i=>typeof i=="object"&&i!==null?JSON.stringify(pE(i),null,2):i);this.debug&&console.log(...n)}},gE=class{defaultFrequency=24e3;frequency;debug;itemLookup={};items=[];responseLookup={};responses=[];queuedSpeechItems={};queuedTranscriptItems={};queuedInputAudio;constructor({frequency:t=this.defaultFrequency,debug:e=!1}={}){t===void 0&&(t=this.defaultFrequency),Be(t>0,`Invalid frequency: ${t}`),this.frequency=t,this.debug=e,this.clear()}clear(){this.itemLookup={},this.items=[],this.responseLookup={},this.responses=[],this.queuedSpeechItems={},this.queuedTranscriptItems={},this.queuedInputAudio=void 0}queueInputAudio(t){this.queuedInputAudio=t}processEvent(t,...e){Be(t.event_id,'Missing "event_id" on event'),Be(t.type,'Missing "type" on event');const n=this.EventProcessors[t.type];Be(n,`Missing event processor for "${t.type}"`);try{return n.call(this,t,...e)}catch(i){return this.debug&&console.error(`Error processing event "${t.type}":`,i.message,t),{}}}getItem(t){return this.itemLookup[t]}getItems(){return this.items.slice()}EventProcessors={"conversation.item.created":t=>{const{item:e}=t,n={...structuredClone(e),formatted:{audio:new Int16Array(0),text:"",transcript:""}};if(this.itemLookup[n.id]||(this.itemLookup[n.id]=n,this.items.push(n)),this.queuedSpeechItems[n.id]?.audio&&(n.formatted.audio=this.queuedSpeechItems[n.id].audio,delete this.queuedSpeechItems[n.id]),n.content){const i=n.content.filter(r=>r.type==="text"||r.type==="input_text");for(const r of i)n.formatted.text+=r.text}return this.queuedTranscriptItems[n.id]&&(n.formatted.transcript=this.queuedTranscriptItems[n.id].transcript,delete this.queuedTranscriptItems[n.id]),n.type==="message"?n.role==="user"?(n.status="completed",this.queuedInputAudio&&(n.formatted.audio=this.queuedInputAudio,this.queuedInputAudio=void 0)):n.status="in_progress":n.type==="function_call"?(n.formatted.tool={type:"function",name:n.name,call_id:n.call_id,arguments:""},n.status="in_progress"):n.type==="function_call_output"&&(n.status="completed",n.formatted.output=n.output),{item:n}},"conversation.item.truncated":t=>{const{item_id:e,audio_end_ms:n}=t,i=this.itemLookup[e];if(!i)throw new Error(`item.truncated: Item "${e}" not found`);const r=Math.floor(n*this.frequency/1e3);return i.formatted.transcript="",i.formatted.audio=i.formatted.audio.slice(0,r),{item:i}},"conversation.item.deleted":t=>{const{item_id:e}=t,n=this.itemLookup[e];if(!n)throw new Error(`item.deleted: Item "${e}" not found`);delete this.itemLookup[n.id];const i=this.items.indexOf(n);return i>=0&&this.items.splice(i,1),{item:n}},"conversation.item.input_audio_transcription.completed":t=>{const{item_id:e,content_index:n,transcript:i}=t,r=this.itemLookup[e],s=i||" ";return r?(r.content[n]&&(r.content[n].transcript=i),r.formatted.transcript=s,{item:r,delta:{transcript:i}}):(this.queuedTranscriptItems[e]={transcript:s},{})},"input_audio_buffer.speech_started":t=>{const{item_id:e,audio_start_ms:n}=t,i=this.itemLookup[e];return this.queuedSpeechItems[e]={audio_start_ms:n},{item:i}},"input_audio_buffer.speech_stopped":(t,e)=>{const{item_id:n,audio_end_ms:i}=t,r=this.itemLookup[n];this.queuedSpeechItems[n]||(this.queuedSpeechItems[n]={audio_start_ms:i});const s=this.queuedSpeechItems[n];if(Be(s,`Speech item not found for "${n}"`),s.audio_end_ms=i,e){const o=Math.floor(s.audio_start_ms*this.frequency/1e3),l=Math.floor(s.audio_end_ms*this.frequency/1e3);s.audio=e.slice(o,l)}return{item:r}},"response.created":t=>{const{response:e}=t;return this.responseLookup[e.id]||(this.responseLookup[e.id]=e,this.responses.push(e)),{response:e}},"response.output_item.added":t=>{const{response_id:e,item:n}=t,i=this.responseLookup[e];if(!i)throw new Error(`response.output_item.added: Response "${e}" not found`);return i.output.push(n),{item:n,response:i}},"response.output_item.done":t=>{const{item:e}=t;if(!e)throw new Error('response.output_item.done: Missing "item"');const n=this.itemLookup[e.id];if(!n)throw new Error(`response.output_item.done: Item "${e.id}" not found`);return n.status=e.status,{item:n}},"response.content_part.added":t=>{const{item_id:e,part:n}=t,i=this.itemLookup[e];if(!i)throw new Error(`response.content_part.added: Item "${e}" not found`);return i.content.push(n),{item:i}},"response.audio_transcript.delta":t=>{const{item_id:e,content_index:n,delta:i}=t,r=this.itemLookup[e];if(!r)throw new Error(`response.audio_transcript.delta: Item "${e}" not found`);return r.content[n].transcript+=i,r.formatted.transcript+=i,{item:r,delta:{transcript:i}}},"response.audio.delta":t=>{const{item_id:e,content_index:n,delta:i}=t,r=this.itemLookup[e];if(!r)throw new Error(`response.audio.delta: Item "${e}" not found`);const s=aE(i),o=new Int16Array(s);return r.formatted.audio=qv(r.formatted.audio,o),{item:r,delta:{audio:o}}},"response.text.delta":t=>{const{item_id:e,content_index:n,delta:i}=t,r=this.itemLookup[e];if(!r)throw new Error(`response.text.delta: Item "${e}" not found`);return r.content[n].text+=i,r.formatted.text+=i,{item:r,delta:{text:i}}},"response.function_call_arguments.delta":t=>{const{item_id:e,delta:n}=t,i=this.itemLookup[e];if(!i)throw new Error(`response.function_call_arguments.delta: Item "${e}" not found`);return i.arguments+=n,i.formatted.tool.arguments+=n,{item:i,delta:{arguments:n}}}}},yE=class extends Gv{defaultSessionConfig;sessionConfig;relay;realtime;conversation;inputAudioBuffer;sessionCreated;tools;constructor({sessionConfig:t,relay:e=!1,...n}={}){super(),this.defaultSessionConfig={modalities:["text","audio"],voice:"alloy",input_audio_format:"pcm16",output_audio_format:"pcm16",input_audio_transcription:{model:"whisper-1"},turn_detection:null,tools:[],tool_choice:"auto",temperature:.8,max_response_output_tokens:4096,...t},this.sessionConfig={},this.sessionCreated=!1,this.tools={},this.inputAudioBuffer=new Int16Array(0),this.relay=!!e,this.realtime=new mE(n),this.conversation=new gE({debug:n.debug}),this._resetConfig(),this._addAPIEventHandlers()}_resetConfig(){this.sessionCreated=!1,this.tools={},this.sessionConfig=structuredClone(this.defaultSessionConfig),this.inputAudioBuffer=new Int16Array(0)}_addAPIEventHandlers(){this.realtime.on("client.*",i=>{this.dispatch("realtime.event",{type:"realtime.event",time:new Date().toISOString(),source:"client",event:i})}),this.realtime.on("server.*",i=>{this.dispatch("realtime.event",{type:"realtime.event",time:new Date().toISOString(),source:"server",event:i})}),this.realtime.on("server.session.created",()=>{this.sessionCreated=!0});const t=(i,...r)=>this.isConnected?this.conversation.processEvent(i,...r):{},e=(i,...r)=>{const s=t(i,...r);return s.item&&this.dispatch("conversation.updated",{type:"conversation.updated",...s}),s},n=async i=>{if(!this.isRelay){try{const r=JSON.parse(i.arguments),s=this.tools[i.name];if(!s){console.warn(`Tool "${i.name}" not found`);return}const o=await Promise.resolve(s.handler(r));this.realtime.send("conversation.item.create",{item:{type:"function_call_output",call_id:i.call_id,output:JSON.stringify(o)}})}catch(r){console.warn(`Error calling tool "${i.name}":`,r.message),this.realtime.send("conversation.item.create",{item:{type:"function_call_output",call_id:i.call_id,output:JSON.stringify({error:r.message})}})}this.createResponse()}};this.realtime.on("server.response.created",t),this.realtime.on("server.response.output_item.added",t),this.realtime.on("server.response.content_part.added",t),this.realtime.on("server.input_audio_buffer.speech_started",i=>{t(i),this.dispatch("conversation.interrupted",i)}),this.realtime.on("server.input_audio_buffer.speech_stopped",i=>{t(i,this.inputAudioBuffer)}),this.realtime.on("server.conversation.item.created",i=>{const r=e(i);r.item&&(this.dispatch("conversation.item.appended",{type:"conversation.item.appended",...r}),r.item.status==="completed"&&this.dispatch("conversation.item.completed",{type:"conversation.item.completed",...r}))}),this.realtime.on("server.conversation.item.truncated",e),this.realtime.on("server.conversation.item.deleted",e),this.realtime.on("server.conversation.item.input_audio_transcription.completed",e),this.realtime.on("server.response.audio_transcript.delta",e),this.realtime.on("server.response.audio.delta",e),this.realtime.on("server.response.text.delta",e),this.realtime.on("server.response.function_call_arguments.delta",e),this.realtime.on("server.response.output_item.done",async i=>{const r=e(i);r.item?.formatted&&(r.item.status==="completed"&&this.dispatch("conversation.item.completed",{type:"conversation.item.completed",...r}),r.item.formatted.tool&&n(r.item.formatted.tool))})}get isConnected(){return this.realtime.isConnected}get isRelay(){return this.relay}reset(){this.disconnect(),this.clearEventHandlers(),this.realtime.clearEventHandlers(),this._resetConfig(),this._addAPIEventHandlers()}async connect(){this.isConnected||(await this.realtime.connect(),this.updateSession())}async waitForSessionCreated(){for(Be(this.isConnected,"Not connected, use .connect() first");!this.sessionCreated;)await fE(1)}disconnect(){this.sessionCreated=!1,this.realtime.disconnect(),this.conversation.clear()}getTurnDetectionType(){return this.sessionConfig.turn_detection?.type}addTool(t,e){Be(!this.isRelay,"Unable to add tools in relay mode"),Be(t?.name,"Missing tool name in definition");const{name:n}=t;Be(typeof e=="function",`Tool "${n}" handler must be a function`),this.tools[n]={definition:{type:"function",...t},handler:e},this.updateSession()}removeTool(t){Be(!this.isRelay,"Unable to add tools in relay mode"),Be(this.tools[t],`Tool "${t}" does not exist, can not be removed.`),delete this.tools[t],this.updateSession()}deleteItem(t){this.realtime.send("conversation.item.delete",{item_id:t})}updateSession(t={}){const e=Object.values(this.tools).map(({definition:n})=>n);this.sessionConfig={...this.sessionConfig,...t,tools:e},this.isConnected&&!this.isRelay&&this.realtime.send("session.update",{session:structuredClone(this.sessionConfig)})}sendUserMessageContent(t){Be(!this.isRelay,"Unable to send messages directly in relay mode"),t.length&&this.realtime.send("conversation.item.create",{item:{type:"message",role:"user",content:t}}),this.createResponse()}appendInputAudio(t){Be(!this.isRelay,"Unable to append input audio directly in relay mode"),t.byteLength>0&&(this.realtime.send("input_audio_buffer.append",{audio:cE(t)}),this.inputAudioBuffer=qv(this.inputAudioBuffer,t))}createResponse(){Be(!this.isRelay,"Unable to create a response directly in relay mode"),!this.getTurnDetectionType()&&this.inputAudioBuffer.byteLength>0&&(this.realtime.send("input_audio_buffer.commit"),this.conversation.queueInputAudio(this.inputAudioBuffer),this.inputAudioBuffer=new Int16Array(0)),this.realtime.send("response.create")}cancelResponse(t,e=0){if(Be(!this.isRelay,"Unable to cancel a response directly in relay mode"),!t){this.realtime.send("response.cancel");return}const n=this.conversation.getItem(t);Be(n,`Could not find item "${t}"`),Be(n.type==="message",'Can only cancelResponse messages with type "message"'),Be(n.role==="assistant",'Can only cancelResponse messages with role "assistant"'),this.realtime.send("response.cancel");const i=n.content.findIndex(r=>r.type==="audio");return Be(i>=0,`Could not find audio on item ${t} to cancel`),this.realtime.send("conversation.item.truncate",{item_id:t,content_index:i,audio_end_ms:Math.floor(e/this.conversation.defaultFrequency*1e3)}),n}async waitForNextItem(){return(await this.waitForNext("conversation.item.appended")).item}async waitForNextCompletedItem(){return(await this.waitForNext("conversation.item.completed")).item}};class vr{client;config;connected=!1;sessionId;apiKey="";relaySessionId=null;constructor(e){this.config=e,this.sessionId=e.sessionId||`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,console.log(" OpenAIRealtimeService initialized"),console.log(" Config.relayServerUrl:",e.relayServerUrl),this.client=null}setupEventHandlers(){const e=this.client;e.on("error",i=>{console.error(" RealtimeClient error:",i),this.connected=!1,this.config.onError?.(i),this.config.onDisconnected?.()}),e.on("realtime.event",({source:i,event:r})=>{i==="server"&&r.type==="session.created"&&(this.connected=!0,this.config.onConnected&&this.config.onConnected()),i==="server"&&r.type==="session.updated"&&console.log(" OpenAI session updated:",r.session),i==="server"&&r.type==="error"&&(console.error(" OpenAI server error:",r?.error?.message||JSON.stringify(r?.error)),this.connected=!1,this.config.onError?.(r.error),this.config.onDisconnected?.())});const n=new Map;e.on("conversation.interrupted",()=>{console.log("Conversation interrupted (user started speaking)")}),e.on("conversation.item.input_audio_transcription.delta",i=>{if(!i.delta)return;console.log(" [STT DELTA] User speech transcription:",i.delta);const r=`user-${i.item_id}`,s=n.get(r)??{role:"user",content:""};s.content+=i.delta,n.set(r,s),this.config.onTranscript?.(s.content,!1,i.item_id)}),e.on("conversation.item.input_audio_transcription.completed",i=>{if(!i.transcript)return;console.log(" [STT COMPLETE] Final user transcript:",i.transcript);const r=`user-${i.item_id}`;n.set(r,{role:"user",content:i.transcript}),this.config.onTranscript?.(i.transcript,!0,i.item_id)}),e.on("conversation.item.input_audio_transcription.failed",i=>{console.error(" [STT FAILED]",i.error)}),e.on("response.output_audio_transcript.delta",i=>{console.log(" [TTS TRANSCRIPT] Assistant speech:",i.delta)}),e.on("response.output_audio.delta",i=>{if(i.delta){console.log(" [TTS AUDIO] Received audio chunk:",i.delta.length,"bytes");const r=this.base64ToInt16Array(i.delta);console.log(" [TTS AUDIO] Converted to Int16Array:",r.length,"samples"),console.log(" [TTS AUDIO] Calling onAudioResponse callback"),this.config.onAudioResponse?.(r),console.log(" [TTS AUDIO] onAudioResponse callback completed")}}),e.on("response.output_audio.done",i=>{console.log(" [TTS AUDIO] Complete")}),e.on("response.done",i=>{console.log(" [TTS RESPONSE] Complete")}),e.on("input_audio_buffer.speech_started",()=>{console.log(" [VAD] User started speaking")}),e.on("input_audio_buffer.speech_stopped",()=>{console.log(" [VAD] User stopped speaking")}),e.on("conversation.item.completed",({item:i})=>{if(console.log(` [COMPLETED] Item completed - Type: ${i.type}, Role: ${i.role}, Status: ${i.status}`),i.type==="message"){const r=`${i.role}-${i.id}`;if(i.role==="user"){const s=n.get(r);s?.content&&this.config.onTranscript?.(s.content,!0,i.id)}n.delete(r)}i.type==="function_call"&&this.config.onToolCall?.(i.name||"unknown",i.arguments)})}async updateSession(){this.client,console.log(" Configuring session with server_vad turn detection...");try{const e=this.client;typeof e.updateSession=="function"?await e.updateSession({turn_detection:{type:"server_vad",threshold:.5,silence_duration_ms:500,prefix_padding_ms:100},modalities:["text","audio"],voice:"alloy",input_audio_transcription:{model:"whisper-1"}}):e.session&&typeof e.session.update=="function"?await e.session.update({turn_detection:{type:"server_vad",threshold:.5,silence_duration_ms:500,prefix_padding_ms:100},modalities:["text","audio"],voice:"alloy",input_audio_transcription:{model:"whisper-1"}}):console.warn(" RealtimeClient instance does not expose updateSession API; skipping configuration"),console.log(" Session configured successfully with automatic turn detection")}catch(e){throw console.error(" Failed to update session:",e),e}}async connect(){try{console.log(" Connecting to OpenAI Realtime API...");const e=Bt(),n=await fetch(`${e}/openai/realtime/session`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error(`Failed to create session: ${n.statusText}`);const i=await n.json();this.relaySessionId=i.session_id||i.id||null,this.relaySessionId&&(this.sessionId=this.relaySessionId),this.apiKey=i.api_key||i.client_secret?.value||"";let r=i.ws_url;r?r.startsWith("ws")||(r=`${e.replace(/^http/,"ws")}${r}`):r=`${e.replace(/^http/,"ws")}/realtime-relay/${i.session_id}`,this.client=new yE({url:r,apiKey:this.apiKey||"relay-server",dangerouslyAllowAPIKeyInBrowser:!0}),this.setupEventHandlers(),await this.client.connect(),await this.updateSession()}catch(e){console.error(" Failed to connect to OpenAI Realtime API:",e),console.error("  OpenAI Realtime API requires beta access. Visit https://platform.openai.com/settings");const n=new Error(e.message+`

 OpenAI Realtime API requires beta access.
Please visit https://platform.openai.com/settings to request access.`);throw this.connected=!1,this.relaySessionId=null,this.config.onError?.(n),this.config.onDisconnected?.(),n}}async disconnect(){try{this.connected&&(this.client.disconnect(),this.connected=!1,this.config.onDisconnected?.(),console.log("Disconnected from OpenAI Realtime API"))}catch(e){console.error("Error disconnecting from OpenAI Realtime API:",e),this.config.onError?.(e)}}isConnected(){return this.connected}sendTextMessage(e){if(!this.connected)throw console.error(" Cannot send TTS: Not connected to OpenAI"),new Error("Not connected to OpenAI Realtime API");console.log(" [TTS] Creating assistant message for TTS"),this.client.realtime.send("conversation.item.create",{item:{type:"message",role:"assistant",content:[{type:"text",text:e}]}}),this.client.realtime.send("response.create",{response:{output_modalities:["audio"],instructions:"Generate audio output for the previous assistant message exactly as written.",conversation:"none"}}),console.log(" [TTS] Waiting for response.audio.delta events")}sendAudioData(e){if(!this.connected)throw new Error("Not connected to OpenAI Realtime API");console.log(" Sending",e.length,"audio samples to OpenAI Realtime API"),this.client.appendInputAudio(e)}createResponse(){if(!this.connected)throw new Error("Not connected to OpenAI Realtime API");this.client.createResponse()}interruptResponse(){if(!this.connected)return;const n=this.client.conversation.getItems().find(i=>i.type==="response"&&i.status==="in_progress");if(n?.id)try{this.client.cancelResponse(n.id,0),console.log(" Cancelled active response:",n.id)}catch(i){console.warn(" Cancel failed (response may have completed):",i)}else console.log(" No active response to cancel")}base64ToInt16Array(e){const n=atob(e),i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return new Int16Array(i.buffer)}getConversationHistory(){return this.client.conversation.getItems()}getSessionId(){return this.sessionId}}function vE(t={}){const e={onConnected:()=>console.log("Voice assistant connected"),onDisconnected:()=>console.log("Voice assistant disconnected"),onError:n=>console.error("Voice assistant error:",n),onTranscript:(n,i)=>console.log(i?"Assistant:":"User:",n),onAudioResponse:n=>console.log("Received audio response:",n.length,"samples"),onToolCall:(n,i)=>console.log("Tool called:",n,i),onToolResult:(n,i)=>console.log("Tool result:",n,i),...t};return new vr(e)}const wE=Object.freeze(Object.defineProperty({__proto__:null,OpenAIRealtimeService:vr,createOpenAIRealtimeService:vE,default:vr},Symbol.toStringTag,{value:"Module"})),Qv=t=>{const{onAudioData:e,onError:n}=t,[i,r]=k.useState(!1),s=k.useRef(null),o=k.useRef(null),l=k.useRef(null),a=k.useRef(null),c=k.useRef({onAudioData:e,onError:n});c.current={onAudioData:e,onError:n};const h=k.useCallback(async()=>{if(console.log(" [AUDIO PROCESSOR] ========== startRecording() CALLED =========="),console.log(" [AUDIO PROCESSOR] Checking navigator.mediaDevices availability:",!!navigator.mediaDevices),console.log(" [AUDIO PROCESSOR] Checking getUserMedia availability:",!!navigator.mediaDevices?.getUserMedia),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){const d=new Error("getUserMedia not supported in this browser");console.error(" [AUDIO PROCESSOR]",d.message),c.current.onError?.(d);return}try{console.log(" [AUDIO PROCESSOR] About to call getUserMedia()...");const d=await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,sampleRate:24e3,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});console.log(" [AUDIO PROCESSOR] getUserMedia() completed successfully!"),console.log(" [AUDIO PROCESSOR] Stream obtained:",d),o.current=d,console.log(" [AUDIO PROCESSOR] Microphone access granted");const f=new AudioContext({sampleRate:24e3});s.current=f,f.state==="suspended"&&await f.resume(),console.log(" AudioContext created, state:",f.state);const p=f.createMediaStreamSource(d);l.current=p;const g=f.createScriptProcessor(4096,1,1);a.current=g,g.onaudioprocess=S=>{const m=S.inputBuffer.getChannelData(0),y=new Int16Array(m.length);for(let w=0;w<m.length;w++){const b=Math.max(-1,Math.min(1,m[w]));y[w]=b<0?b*32768:b*32767}c.current.onAudioData(y)},p.connect(g),g.connect(f.destination),r(!0),console.log(" Recording started, sending audio to OpenAI...")}catch(d){console.error(" Failed to start microphone recording:",d);const f=d instanceof Error?d:new Error("Microphone access denied");c.current.onError?.(f),r(!1)}},[]),u=k.useCallback(()=>{console.log(" Stopping microphone recording..."),a.current&&(a.current.disconnect(),a.current.onaudioprocess=null,a.current=null),l.current&&(l.current.disconnect(),l.current=null),s.current&&(s.current.close(),s.current=null),o.current&&(o.current.getTracks().forEach(d=>d.stop()),o.current=null),r(!1),console.log(" Recording stopped")},[]);return{isRecording:i,startRecording:h,stopRecording:u}},SE=(t={})=>{console.log("%c [HOOK INIT] useOpenAIRealtimeConversation HOOK CALLED","background: #222; color: #bada55; font-size: 16px; font-weight: bold;");const{onUserTranscript:e,onAgentResponse:n,onAudioChunk:i,onConnectionChange:r,onToolCall:s,onToolResult:o,apiUrl:l=Bt(),sessionId:a,relayServerUrl:c}=t,[h,u]=k.useState(!1);console.log("%c [HOOK INIT] Initial isConnected state:","background: #222; color: #bada55",h);const[d,f]=k.useState(!1),[p,g]=k.useState(null),[S,m]=k.useState([]);k.useEffect(()=>{console.log("%c [STATE CHANGE] isConnected changed to:","background: #ff6b6b; color: white; font-size: 14px; font-weight: bold;",h)},[h]);const y=k.useRef(null),w=k.useRef([]),b=k.useRef(!1),A=k.useRef(null),E=Qv({onAudioData:N=>{y.current&&h&&(console.log(" Sending",N.length,"audio samples to OpenAI"),y.current.sendAudioData(N))},onError:N=>{console.error("Microphone error:",N),g(N.message)}}),P=k.useRef({onUserTranscript:e,onAgentResponse:n,onAudioChunk:i,onConnectionChange:r,onToolCall:s,onToolResult:o});k.useEffect(()=>{P.current={onUserTranscript:e,onAgentResponse:n,onAudioChunk:i,onConnectionChange:r,onToolCall:s,onToolResult:o}});const R=k.useCallback(async()=>(A.current||(A.current=new AudioContext({sampleRate:24e3}),A.current.state==="suspended"&&await A.current.resume()),A.current),[]),D=k.useCallback(async()=>{if(b.current||w.current.length===0){console.log(" playNextAudio: Skipping - isPlaying:",b.current,"queueLength:",w.current.length);return}console.log(" playNextAudio: Starting playback"),b.current=!0;const N=w.current.shift();if(N)try{console.log(" playNextAudio: Got audio data with",N.length,"samples");const U=await R();console.log(" playNextAudio: Audio context initialized, state:",U.state),U.state==="suspended"&&(console.log(" playNextAudio: AudioContext suspended, attempting to resume..."),await U.resume(),console.log(" playNextAudio: AudioContext resumed, new state:",U.state));const x=new Float32Array(N.length);for(let K=0;K<N.length;K++)x[K]=N[K]/32768;const G=U.createBuffer(1,x.length,24e3);G.copyToChannel(x,0);const re=U.createBufferSource();re.buffer=G,re.connect(U.destination),re.onended=()=>{console.log(" playNextAudio: Playback ended"),b.current=!1,D()},console.log(" playNextAudio: Starting audio playback now..."),re.start(),console.log(" playNextAudio: Audio playback started!")}catch(U){console.error(" Error playing OpenAI audio:",U),b.current=!1,D()}else console.log(" playNextAudio: No audio data, clearing playing flag"),b.current=!1},[R]),{isRecording:_,startRecording:j,stopRecording:B}=E;console.log(" [RENDER] Component rendered with isConnected:",h,"isRecording:",_),k.useEffect(()=>(y.current||(y.current=new vr({sessionId:a,onConnected:()=>{console.log(" [HOOK onConnected] ========== CALLBACK RECEIVED =========="),console.log(" [HOOK onConnected] About to call setIsConnected(true)"),u(!0),console.log(" [HOOK onConnected] setIsConnected(true) COMPLETED"),console.log(" [HOOK onConnected] Setting isLoading to false"),f(!1),console.log(" [HOOK onConnected] About to call external onConnectionChange callback"),P.current.onConnectionChange?.(!0),console.log(" [HOOK onConnected] ========== CALLBACK COMPLETED ==========")},onDisconnected:()=>{u(!1),f(!1),P.current.onConnectionChange?.(!1)},onError:N=>{console.error("OpenAI Realtime error:",N),g(N?.message||"OpenAI connection error"),f(!1),u(!1),P.current.onConnectionChange?.(!1)},onTranscript:(N,U,x)=>{if(U){const G=x||`assistant-${Date.now()}-${Math.random()}`;m(re=>{const K=re.findIndex(O=>O.id===G);if(K>=0){const O=[...re];return O[K]={...O[K],content:N},O}else{const O={id:G,role:"assistant",content:N,timestamp:new Date().toISOString()};return[...re,O]}}),P.current.onAgentResponse?.(N)}else{const G=x||`user-${Date.now()}-${Math.random()}`;m(re=>{const K=re.findIndex(O=>O.id===G);if(K>=0){const O=[...re];return O[K]={...O[K],content:N},O}else{const O={id:G,role:"user",content:N,timestamp:new Date().toISOString()};return[...re,O]}}),P.current.onUserTranscript?.(N)}},onAudioResponse:N=>{if(console.log(" HOOK: Audio received, queuing for playback:",N.length,"samples"),console.log(" HOOK: Current queue length:",w.current.length),console.log(" HOOK: Is playing:",b.current),w.current.push(N),D(),P.current.onAudioChunk){const U=btoa(String.fromCharCode(...new Uint8Array(N.buffer)));P.current.onAudioChunk(U)}},onToolCall:(N,U)=>{console.log("OpenAI tool called:",N,U),P.current.onToolCall?.(N,U)},onToolResult:(N,U)=>{console.log("OpenAI tool result:",N,U),P.current.onToolResult?.(N,U)}})),()=>{y.current&&(y.current.disconnect(),y.current=null)}),[a]);const J=k.useCallback(async N=>{if(h){console.log("Already connected to OpenAI Realtime");return}f(!0),g(null),console.log(" [START] Step 1: Requesting microphone access BEFORE connecting...");try{await j(),console.log(" [START] Microphone access granted and recording started")}catch(x){const G=x instanceof Error?x.message:"Microphone access denied";g(G),f(!1),console.error(" [START] Failed to start microphone:",x);return}try{const x=await R();x.state==="suspended"&&(console.log(" Resuming AudioContext on user interaction..."),await x.resume(),console.log(" AudioContext state after resume:",x.state))}catch(x){console.warn("Failed to initialize AudioContext:",x)}console.log(" [START] Step 2: Connecting to OpenAI Realtime API...");const U=setTimeout(()=>{console.warn("OpenAI Realtime connection timeout - clearing loading state"),f(!1),g("Connection timeout - please try again")},15e3);try{if(y.current)await y.current.connect(),clearTimeout(U),console.log(" [START] Connected to OpenAI Realtime API");else throw clearTimeout(U),new Error("OpenAI service not initialized")}catch(x){clearTimeout(U);const G=x instanceof Error?x.message:"Failed to connect to OpenAI Realtime";g(G),f(!1),B(),console.error("Failed to start OpenAI conversation:",x)}},[h,j,B,R]),Z=k.useCallback(()=>{_&&B(),y.current&&y.current.disconnect(),w.current=[],b.current=!1},[_,B]),X=k.useCallback(N=>{y.current&&h?y.current.sendTextMessage(N):console.warn("Cannot send text message - not connected to OpenAI Realtime")},[h]),te=k.useCallback(N=>{if(y.current&&h)try{const U=atob(N),x=new Uint8Array(U.length);for(let re=0;re<U.length;re++)x[re]=U.charCodeAt(re);const G=new Int16Array(x.buffer);y.current.sendAudioData(G)}catch(U){console.error("Failed to decode audio chunk:",U)}else console.warn("Cannot send audio chunk - not connected to OpenAI Realtime")},[h]),se=k.useCallback(()=>{y.current&&h&&y.current.createResponse()},[h]),$=k.useCallback(()=>{y.current&&h&&y.current.interruptResponse()},[h]),z=k.useCallback(()=>y.current?y.current.getConversationHistory():[],[]),C=k.useCallback(()=>y.current?y.current.getAvailableTools():[],[]);return{isConnected:h,isLoading:d,error:p,messages:S,startConversation:J,stopConversation:Z,sendTextMessage:X,sendAudioChunk:te,createResponse:se,interruptResponse:$,getConversationHistory:z,getAvailableTools:C,service:y.current}},xE=(t={})=>{const{onMessage:e,onConnectionChange:n,onError:i,onThinking:r,apiUrl:s=Bt(),sessionId:o}=t,[l,a]=k.useState(!1),[c,h]=k.useState(!1),[u,d]=k.useState(!1),[f,p]=k.useState(null),[g,S]=k.useState([]),[m,y]=k.useState(null),w=k.useRef(null),b=k.useRef([]),A=k.useRef(!1),E=k.useRef(null),P=k.useRef([]),R=Qv({onAudioData:N=>{w.current&&l&&w.current.sendAudioData(N)},onError:N=>{console.error("Agent Voice: Microphone error:",N);const U=N.message||"Microphone access failed";p(U),B.current.onError?.(U)}}),{isRecording:D,startRecording:_,stopRecording:j}=R,B=k.useRef({onMessage:e,onConnectionChange:n,onError:i,onThinking:r});k.useEffect(()=>{B.current={onMessage:e,onConnectionChange:n,onError:i,onThinking:r}},[e,n,i,r]),k.useEffect(()=>{const N=async()=>{try{const x=await fetch(`${s}/health`);if(x.ok){const G=await x.json();y(G.openai_relay?.active===!0)}else y(!1)}catch(x){console.error("Health check failed:",x),y(!1)}};N();const U=setInterval(N,3e4);return()=>clearInterval(U)},[s]);const J=k.useCallback(async()=>(E.current||(E.current=new AudioContext,E.current.state==="suspended"&&await E.current.resume()),E.current),[]),Z=k.useCallback(async()=>{if(A.current||b.current.length===0)return;A.current=!0;const N=b.current.shift();if(N)try{const U=await J(),x=new Float32Array(N.length);for(let K=0;K<N.length;K++)x[K]=N[K]/32768;const G=U.createBuffer(1,x.length,24e3);G.copyToChannel(x,0);const re=U.createBufferSource();re.buffer=G,re.connect(U.destination),re.onended=()=>{A.current=!1,Z()},re.start()}catch(U){console.error("Error playing agent voice audio:",U),A.current=!1,Z()}else A.current=!1},[J]),X=k.useCallback(async N=>{if(!N||N.length===0)return;const U=N.join(" ");try{await We.processEnhancedResponse(U)}catch(x){console.warn("Enhanced chart command processing failed (non-critical):",x)}},[]),te=k.useCallback(async(N,U="voice")=>{try{d(!0),B.current.onThinking?.(!0);const x={id:`user-${Date.now()}-${Math.random()}`,role:"user",content:N,timestamp:new Date().toISOString(),source:U};S(F=>[...F,x]),B.current.onMessage?.(x),P.current.push({role:"user",content:N}),console.log("[AGENT VOICE]  Calling agentOrchestratorService.sendQuery() with:",{userTranscript:N,historyLength:P.current.length});const G=await Vo.sendQuery(N,P.current.slice(-10));console.log("[AGENT VOICE]  Received agent response:",{hasText:!!G.text,textLength:G.text?.length||0,textPreview:G.text?.substring(0,100),toolsUsed:G.tools_used,hasData:!!G.data,hasChartCommands:!!(G.chart_commands||G.data?.chart_commands)}),await X(G.chart_commands||G.data?.chart_commands);const re={...G.data||{}};G.chart_commands?.length&&(re.chart_commands=G.chart_commands);const K={id:`assistant-${Date.now()}-${Math.random()}`,role:"assistant",content:G.text,timestamp:new Date().toISOString(),source:U,toolsUsed:G.tools_used,data:re};S(F=>[...F,K]),B.current.onMessage?.(K),P.current.push({role:"assistant",content:G.text});const O=w.current?.isConnected()||!1;console.log(" [TTS CHECK] source:",U,"hasRef:",!!w.current,"reactState:",l,"actualConnection:",O),U==="voice"&&w.current&&O?(console.log("[AGENT VOICE]  Sending to TTS:",G.text.substring(0,100)),w.current.sendTextMessage(G.text)):(console.log(" [TTS CHECK] TTS SKIPPED - Condition not met"),console.log(" [TTS CHECK] Reason - source:",U,"hasRef:",!!w.current,"actuallyConnected:",O))}catch(x){console.error("Agent orchestrator error:",x);const G=x instanceof Error?x.message:"Failed to get agent response";p(G),B.current.onError?.(G)}finally{d(!1),B.current.onThinking?.(!1)}},[l,X]);k.useEffect(()=>(w.current||(w.current=new vr({sessionId:o,onConnected:()=>{console.log(" [AGENT VOICE HOOK] onConnected callback FIRED"),console.log(" [AGENT VOICE HOOK] About to call setIsConnected(true)"),a(!0),console.log(" [AGENT VOICE HOOK] setIsConnected(true) CALLED"),h(!1),console.log(" [AGENT VOICE HOOK] About to call onConnectionChange callback"),B.current.onConnectionChange?.(!0),console.log(" [AGENT VOICE HOOK] onConnected callback COMPLETED")},onDisconnected:()=>{console.log("Agent Voice: OpenAI disconnected"),a(!1),h(!1),B.current.onConnectionChange?.(!1)},onError:N=>{console.error("Agent Voice: OpenAI error:",N);const U=N?.message||"Voice connection error";p(U),h(!1),a(!1),B.current.onConnectionChange?.(!1),B.current.onError?.(U)},onTranscript:(N,U)=>{console.log(` [AGENT VOICE] Transcript received - Final: ${U}, Text: "${N}"`),U?(console.log(" [AGENT VOICE] User final transcript received, sending to agent:",N),te(N,"voice")):console.log(" [AGENT VOICE] Partial transcript (waiting for final)")},onAudioResponse:N=>{b.current.push(N),Z()},onToolCall:()=>{},onToolResult:()=>{}})),()=>{w.current&&(w.current.disconnect(),w.current=null)}),[o]);const se=k.useCallback(async()=>{if(console.log(" [CONNECT] ==================== connect() CALLED ===================="),console.log(" [CONNECT] backendHealthy:",m),console.log(" [CONNECT] openAIServiceRef.current exists:",!!w.current),console.log(" [CONNECT] isConnected:",l),console.log(" [CONNECT] isLoading:",c),m===!1){console.error(" [CONNECT] BLOCKED: Backend not healthy");const N="Backend not ready. Please check server status.";p(N),B.current.onError?.(N);return}if(console.log(" [CONNECT] Backend health check PASSED"),w.current&&!l&&!c){console.log(" [CONNECT] All conditions MET - proceeding with connection"),h(!0),p(null),console.log(" [AGENT VOICE] Step 1: Requesting microphone access...");try{await _(),console.log(" [AGENT VOICE] Microphone access granted and recording started"),console.log(" [AGENT VOICE] Step 2: Connecting to OpenAI Realtime..."),await w.current.connect(),console.log(" [AGENT VOICE] Connected to OpenAI Realtime")}catch(N){const U=N instanceof Error?N.message:"Connection failed";console.error(" [AGENT VOICE] Connection failed:",N),p(U),h(!1),D&&j(),B.current.onError?.(U)}}else console.error(" [CONNECT] BLOCKED: Conditions not met"),console.error(" [CONNECT] - openAIServiceRef.current exists:",!!w.current),console.error(" [CONNECT] - isConnected (should be false):",l),console.error(" [CONNECT] - isLoading (should be false):",c),w.current||console.error(" [CONNECT] ERROR: OpenAI service ref is null!"),l&&console.error(" [CONNECT] ERROR: Already connected!"),c&&console.error(" [CONNECT] ERROR: Already loading!")},[l,c,m,_,j,D]),$=k.useCallback(()=>{console.log(" [AGENT VOICE] Disconnecting..."),D&&(console.log(" [AGENT VOICE] Stopping microphone recording"),j()),w.current&&l&&(console.log(" [AGENT VOICE] Closing OpenAI connection"),w.current.disconnect()),b.current=[],A.current=!1,console.log(" [AGENT VOICE] Disconnected successfully")},[l,D,j]),z=k.useCallback(async N=>{await te(N,"text")},[te]),C=k.useCallback(()=>{S([]),P.current=[],Vo.newSession()},[]);return{isConnected:l,isLoading:c,isThinking:u,isRecording:D,error:f,messages:g,backendHealthy:m,connect:se,disconnect:$,sendTextMessage:z,clearConversation:C,sessionId:Vo.getSessionId()}};function CE(t={}){const{enabled:e=!0,pollingInterval:n=1e3,onCommandExecuted:i,onError:r}=t,s=k.useRef(null),o=k.useRef(!1),l=k.useRef(""),a=k.useCallback(async f=>{try{await fetch(`https://gvses-market-insights.fly.dev/api/chart/commands/${f}`,{method:"DELETE"})}catch(p){console.error("Failed to acknowledge command:",p)}},[]),c=k.useCallback(async f=>{let p=!1,g="";try{switch(f.type){case"symbol_change":const S=f.data.symbol;if(S){const A={type:"symbol",value:S,metadata:{assetType:"stock",source:"mcp_api"},timestamp:Date.now()};p=nt.executeCommand(A),g=p?`Chart symbol changed to ${S}`:"Failed to change symbol"}break;case"timeframe_change":const m=f.data.timeframe;if(m){const A={type:"timeframe",value:m,timestamp:Date.now()};p=nt.executeCommand(A),g=p?`Timeframe changed to ${m}`:"Failed to change timeframe"}break;case"indicator_toggle":const{indicator:y,enabled:w}=f.data;if(y!==void 0&&w!==void 0){const A={type:"indicator",value:{name:y,enabled:w},timestamp:Date.now()};p=nt.executeCommand(A),g=p?`${y} indicator ${w?"enabled":"disabled"}`:`Failed to ${w?"enable":"disable"} ${y}`}break;case"capture_snapshot":p=!0,g="Chart snapshot capture initiated (frontend implementation pending)";break;case"style_change":const b=f.data.style;if(b){const A={type:"style",value:b,timestamp:Date.now()};p=nt.executeCommand(A),g=p?`Chart style changed to ${b}`:"Failed to change style"}break;default:g=`Unknown command type: ${f.type}`;break}return i&&i(f,p,g),console.log(`Chart Command ${f.id}: ${g} (${p?"Success":"Failed"})`),p}catch(S){const m=`Error executing command ${f.id}: ${S.message}`;return console.error(m),r&&r(m),i&&i(f,!1,m),!1}},[i,r]),h=k.useCallback(async()=>{if(!o.current){o.current=!0;try{const f=await fetch("https://gvses-market-insights.fly.dev/api/chart/commands");if(!f.ok)throw new Error(`HTTP ${f.status}: ${f.statusText}`);const g=(await f.json()).commands||[];for(const S of g){if(S.id===l.current)continue;console.log(`Processing chart command: ${S.type}`,S.data);const m=await c(S);await a(S.id),l.current=S.id;break}}catch(f){const p=`Chart command polling error: ${f.message}`;console.error(p),r&&r(p)}finally{o.current=!1}}},[c,a,r]);k.useEffect(()=>{if(!e){s.current&&(clearInterval(s.current),s.current=null);return}return s.current=setInterval(h,n),h(),()=>{s.current&&(clearInterval(s.current),s.current=null)}},[e,n,h]);const u=k.useCallback(()=>{h()},[h]);return{isProcessing:o.current,manualPoll:u,lastProcessedCommand:l.current}}function bE({command:t,type:e,duration:n=2e3,onClose:i}){const[r,s]=k.useState(!1),[o,l]=k.useState(!1);if(k.useEffect(()=>{if(t){s(!0),l(!1);const h=setTimeout(()=>{l(!0),setTimeout(()=>{s(!1),i?.()},300)},n);return()=>clearTimeout(h)}},[t,n,i]),!r)return null;const a=()=>{switch(e){case"success":return"";case"error":return"";case"info":default:return""}},c=()=>{switch(e){case"success":return"toast-success";case"error":return"toast-error";case"info":default:return"toast-info"}};return v.jsxs("div",{className:`command-toast ${c()} ${o?"toast-exit":"toast-enter"}`,children:[v.jsx("span",{className:"toast-icon",children:a()}),v.jsx("span",{className:"toast-message",children:t})]})}class kE{commandHistory={commands:[],currentIndex:-1,maxHistory:50};contextState={currentSymbol:"TSLA",currentTimeframe:"1D",previousSymbol:"",previousTimeframe:"",lastCommandTime:Date.now(),sessionCommands:0};callbacks={};chartRef=null;nlpPatterns={multiCommand:/\b(and|then|also|plus|with|while)\b/gi,relative:{previous:/(?:go |switch |return )?(?:back|previous|last|prior)/i,next:/(?:go |switch )?(?:forward|next)/i,more:/(?:zoom |scroll )?(?:more|further|deeper)/i,less:/(?:zoom |scroll )?(?:less|out|wider)/i},contextual:{comparison:/compare (?:with|to|against) (\w+)/i,correlation:/correlate (?:with|to) (\w+)/i,overlay:/overlay (?:with)? (\w+)/i,split:/split (?:screen|view) (?:with)? (\w+)/i},temporal:{today:/today(?:'s)?|current day/i,yesterday:/yesterday(?:'s)?/i,thisWeek:/this week/i,lastWeek:/last week/i,thisMonth:/this month/i,lastMonth:/last month/i,thisYear:/this year|year to date|ytd/i,lastYear:/last year/i,earnings:/(?:last|next|recent) earnings/i,dividend:/(?:last|next) (?:dividend|ex-div)/i},advanced:{fibonacci:/(?:add|show|draw) (?:fibonacci|fib)/i,trendline:/(?:add|draw) (?:trend ?line|support|resistance)/i,pattern:/(?:find|show|detect) (?:pattern|formation|setup)/i,alert:/(?:set|create) (?:alert|notification) (?:at|when) ([\d.]+)/i,annotation:/(?:add|place) (?:note|annotation|comment)/i}};constructor(){this.setupBaseCallbacks()}setupBaseCallbacks(){nt.registerCallbacks({onCommandExecuted:(e,n,i)=>{n&&this.addToHistory(e)}})}async parseWithGPT5(e){try{const n=`Parse this trading command into structured format:
"${e}"

Extract:
- intent (symbol_change, timeframe_change, indicator_add, zoom, etc.)
- entities (symbol name, timeframe value, indicator type, etc.)
- confidence score (0-1)
- multiple commands if present

Current context:
- Current symbol: ${this.contextState.currentSymbol}
- Current timeframe: ${this.contextState.currentTimeframe}
- Previous symbol: ${this.contextState.previousSymbol}

Return as JSON.`;return this.enhancedRegexParse(e)}catch(n){return console.error("GPT-5 parsing failed, using fallback:",n),this.enhancedRegexParse(e)}}enhancedRegexParse(e){const n=[],i=e.split(this.nlpPatterns.multiCommand);for(const r of i)if(!(!r||r.length<2)){this.nlpPatterns.relative.previous.test(r)&&n.push({intent:"symbol_change",entities:{symbol:this.contextState.previousSymbol},confidence:.9});for(const[s,o]of Object.entries(this.nlpPatterns.temporal))o.test(r)&&n.push({intent:"temporal_navigation",entities:{action:s},confidence:.85});for(const[s,o]of Object.entries(this.nlpPatterns.advanced))o.test(r)&&n.push({intent:"advanced_operation",entities:{action:s},confidence:.8})}return n}async processEnhancedResponse(e){console.log("[Enhanced] Processing voice response:",e);const n=await this.parseWithGPT5(e),i=[];for(const r of n){const s=await this.nlpToChartCommand(r);s&&(s.rawText=e,s.confidence=r.confidence,s.context={previousSymbol:this.contextState.previousSymbol,previousTimeframe:this.contextState.previousTimeframe,commandIndex:i.length},i.push(s))}for(const r of i)await this.executeEnhancedCommand(r);return this.contextState.sessionCommands+=i.length,this.contextState.lastCommandTime=Date.now(),i}async nlpToChartCommand(e){switch(e.intent){case"symbol_change":if(e.entities.symbol){const i=await this.resolveSymbolSemantically(e.entities.symbol);if(i)return{type:"symbol",value:i.symbol,metadata:{assetType:i.type,companyName:i.name},timestamp:Date.now()}}break;case"timeframe_change":if(e.entities.timeframe)return{type:"timeframe",value:this.normalizeTimeframe(e.entities.timeframe),timestamp:Date.now()};break;case"temporal_navigation":return this.handleTemporalNavigation(e.entities.action||"");case"advanced_operation":return this.handleAdvancedOperation(e.entities.action||"");default:return(await nt.parseAgentResponse(e.entities.symbol||""))[0]||null}return null}async resolveSymbolSemantically(e){const n=`symbol_${e.toLowerCase()}`,i=sessionStorage.getItem(n);if(i)return JSON.parse(i);try{const r=await Un.searchSymbols(e,5);if(r.results.length>0){const s={symbol:r.results[0].symbol,type:"stock",name:r.results[0].name};return sessionStorage.setItem(n,JSON.stringify(s)),s}}catch(r){console.error("Semantic symbol resolution failed:",r)}return null}handleTemporalNavigation(e){const n=new Date;let i;switch(e){case"today":i=n;break;case"yesterday":i=new Date(n.getTime()-864e5);break;case"thisWeek":i=new Date(n.getTime()-n.getDay()*864e5);break;case"lastWeek":i=new Date(n.getTime()-(n.getDay()+7)*864e5);break;case"thisMonth":i=new Date(n.getFullYear(),n.getMonth(),1);break;case"lastMonth":i=new Date(n.getFullYear(),n.getMonth()-1,1);break;default:i=n}return{type:"scroll",value:i.toISOString().split("T")[0],timestamp:Date.now()}}handleAdvancedOperation(e){switch(e){case"fibonacci":return{type:"indicator",value:{name:"FIBONACCI",enabled:!0},timestamp:Date.now()};case"trendline":return console.log("Trendline drawing requested"),null;case"pattern":return console.log("Pattern detection requested"),null;default:return null}}async executeEnhancedCommand(e){e.type==="symbol"?(this.contextState.previousSymbol=this.contextState.currentSymbol,this.contextState.currentSymbol=e.value):e.type==="timeframe"&&(this.contextState.previousTimeframe=this.contextState.currentTimeframe,this.contextState.currentTimeframe=e.value);const n=nt.executeCommand(e);return n&&this.addToHistory(e),n}addToHistory(e){this.commandHistory.commands=this.commandHistory.commands.slice(0,this.commandHistory.currentIndex+1),this.commandHistory.commands.push(e),this.commandHistory.currentIndex++,this.commandHistory.commands.length>this.commandHistory.maxHistory&&(this.commandHistory.commands.shift(),this.commandHistory.currentIndex--)}async undo(){if(this.commandHistory.currentIndex>0){this.commandHistory.currentIndex--;const e=this.commandHistory.commands[this.commandHistory.currentIndex];return e.context?.previousSymbol&&await nt.executeCommand({type:"symbol",value:e.context.previousSymbol,timestamp:Date.now()}),!0}return!1}async redo(){if(this.commandHistory.currentIndex<this.commandHistory.commands.length-1){this.commandHistory.currentIndex++;const e=this.commandHistory.commands[this.commandHistory.currentIndex];return await this.executeEnhancedCommand(e)}return!1}getHistory(){return this.commandHistory.commands.slice(0,this.commandHistory.currentIndex+1)}getContext(){return{...this.contextState,historyLength:this.commandHistory.commands.length,canUndo:this.commandHistory.currentIndex>0,canRedo:this.commandHistory.currentIndex<this.commandHistory.commands.length-1}}normalizeTimeframe(e){const n={day:"1D","1 day":"1D","one day":"1D",daily:"1D","5 days":"5D","five days":"5D",week:"1W","1 week":"1W","one week":"1W",weekly:"1W",month:"1M","1 month":"1M","one month":"1M",monthly:"1M","3 months":"3M","three months":"3M",quarter:"3M","6 months":"6M","six months":"6M","half year":"6M",year:"1Y","1 year":"1Y","one year":"1Y",yearly:"1Y",annual:"1Y",ytd:"YTD","year to date":"YTD",all:"ALL","all time":"ALL",max:"ALL",maximum:"ALL","1h":"H1","one hour":"H1",hour:"H1","2h":"H2","two hours":"H2","3h":"H3","three hours":"H3","4h":"H4","four hours":"H4","6h":"H6","six hours":"H6","8h":"H8","eight hours":"H8","30m":"M30","30 min":"M30","30 minutes":"M30","15m":"M15","15 min":"M15","15 minutes":"M15","5m":"M5","5 min":"M5","5 minutes":"M5","1m":"M1","1 min":"M1","one minute":"M1","10s":"S10","10 sec":"S10","10 seconds":"S10"},i=e.trim().toLowerCase(),r=n[i];if(!r){const s=i.match(/^(\d+)\s*h$/),o=i.match(/^(\d+)\s*m(in|inute|inutes)?$/),l=i.match(/^(\d+)\s*s(ec|econd|econds)?$/);if(s)return`H${s[1]}`;if(o)return`M${o[1]}`;if(l)return`S${l[1]}`}return r||e.toUpperCase()}registerCallbacks(e){this.callbacks={...this.callbacks,...e},nt.registerCallbacks(e)}setChartRef(e){this.chartRef=e,nt.setChartRef(e)}async getSuggestions(e){const n=[];if(e.length>=2)try{(await Un.searchSymbols(e,5)).results.forEach(s=>{n.push(`Show ${s.name} (${s.symbol})`)})}catch(r){console.error("Failed to get symbol suggestions:",r)}return["zoom in","zoom out","reset view","add moving average","show RSI","switch to line chart","go to last month","compare with SPY","show me Apple","display Microsoft chart"].forEach(r=>{r.toLowerCase().includes(e.toLowerCase())&&n.push(r)}),n.slice(0,10)}}const Di=new kE,EE=({isVisible:t=!0,position:e="right",maxHeight:n=400})=>{const[i,r]=k.useState([]),[s,o]=k.useState({}),[l,a]=k.useState([]),[c,h]=k.useState(!1),[u,d]=k.useState("");k.useEffect(()=>{const y=()=>{r(Di.getHistory()),o(Di.getContext())};y();const w=setInterval(y,1e3);return()=>clearInterval(w)},[]),k.useEffect(()=>{const w=setTimeout(async()=>{if(u.length>=2){const b=await Di.getSuggestions(u);a(b)}else a([])},300);return()=>clearTimeout(w)},[u]);const f=async()=>{await Di.undo()},p=async()=>{await Di.redo()},g=async y=>{await Di.processEnhancedResponse(y),d(""),a([])},S=y=>{const w={symbol:"",timeframe:"",indicator:"",zoom:"",scroll:"",style:"",reset:"",crosshair:""};return v.jsxs("div",{className:"command-history-item",children:[v.jsx("span",{className:"command-icon",children:w[y.type]||""}),v.jsx("span",{className:"command-type",children:y.type}),v.jsx("span",{className:"command-value",children:typeof y.value=="object"?JSON.stringify(y.value):y.value}),y.confidence&&v.jsxs("span",{className:"command-confidence",title:"Confidence",children:[Math.round(y.confidence*100),"%"]})]},y.timestamp)},m=[{category:"Navigation",commands:["Show me Microsoft","Display Apple chart","Go back to previous stock","Switch to Tesla"]},{category:"Timeframes",commands:["Show last month","Display year to date","Zoom to this week","View 5 day chart"]},{category:"Multi-Commands",commands:["Show Apple and zoom to 1 month","Display Tesla with RSI indicator","Switch to Microsoft then add moving average","Show NVDA and change to line chart"]},{category:"Analysis",commands:["Add moving average","Show RSI indicator","Display volume bars","Add Bollinger bands"]},{category:"Chart Controls",commands:["Zoom in more","Reset the view","Switch to candlestick chart","Toggle crosshair"]}];return t?v.jsxs("div",{className:`voice-command-helper ${e} ${c?"expanded":"collapsed"}`,children:[v.jsxs("div",{className:"helper-header",onClick:()=>h(!c),children:[v.jsx("span",{className:"helper-title",children:" Voice Commands"}),v.jsx("span",{className:"helper-toggle",children:c?"":""})]}),c&&v.jsxs("div",{className:"helper-content",style:{maxHeight:n},children:[v.jsxs("div",{className:"context-status",children:[v.jsxs("div",{className:"status-row",children:[v.jsx("span",{className:"status-label",children:"Current:"}),v.jsxs("span",{className:"status-value",children:[s.currentSymbol," / ",s.currentTimeframe]})]}),v.jsxs("div",{className:"status-row",children:[v.jsx("span",{className:"status-label",children:"Commands:"}),v.jsxs("span",{className:"status-value",children:[s.sessionCommands||0," this session"]})]}),v.jsxs("div",{className:"history-controls",children:[v.jsx("button",{onClick:f,disabled:!s.canUndo,title:"Undo last command",children:" Undo"}),v.jsx("button",{onClick:p,disabled:!s.canRedo,title:"Redo command",children:" Redo"})]})]}),v.jsxs("div",{className:"command-search",children:[v.jsx("input",{type:"text",placeholder:"Type a command or company name...",value:u,onChange:y=>d(y.target.value),onKeyDown:y=>{y.key==="Enter"&&u.trim()&&g(u.trim())},className:"search-input"}),l.length>0&&v.jsx("div",{className:"suggestions-dropdown",children:l.map((y,w)=>v.jsx("div",{className:"suggestion-item",onClick:()=>g(y),children:y},w))})]}),i.length>0&&v.jsxs("div",{className:"command-history",children:[v.jsx("h4",{children:"Recent Commands"}),v.jsx("div",{className:"history-list",children:i.slice(-5).reverse().map(S)})]}),v.jsxs("div",{className:"example-commands",children:[v.jsx("h4",{children:"Try Saying..."}),m.map(y=>v.jsxs("details",{className:"command-category",children:[v.jsx("summary",{children:y.category}),v.jsx("div",{className:"command-list",children:y.commands.map((w,b)=>v.jsxs("div",{className:"example-command",onClick:()=>g(w),children:['"',w,'"']},b))})]},y.category))]}),v.jsxs("div",{className:"voice-tips",children:[v.jsx("h4",{children:" Pro Tips"}),v.jsxs("ul",{children:[v.jsx("li",{children:'Say company names naturally: "Show me Microsoft"'}),v.jsx("li",{children:'Combine commands: "Display Apple and zoom to 1 month"'}),v.jsx("li",{children:'Use relative commands: "Go back" or "Zoom in more"'}),v.jsx("li",{children:'Navigate by time: "Show last earnings" or "Go to yesterday"'})]})]})]})]}):null};function TE(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const _E=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,AE=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,PE={};function Up(t,e){return(PE.jsx?AE:_E).test(t)}const RE=/[ \t\n\f\r]/g;function NE(t){return typeof t=="object"?t.type==="text"?$p(t.value):!1:$p(t)}function $p(t){return t.replace(RE,"")===""}class Hs{constructor(e,n,i){this.normal=n,this.property=e,i&&(this.space=i)}}Hs.prototype.normal={};Hs.prototype.property={};Hs.prototype.space=void 0;function Xv(t,e){const n={},i={};for(const r of t)Object.assign(n,r.property),Object.assign(i,r.normal);return new Hs(n,i,e)}function Pu(t){return t.toLowerCase()}class bt{constructor(e,n){this.attribute=n,this.property=e}}bt.prototype.attribute="";bt.prototype.booleanish=!1;bt.prototype.boolean=!1;bt.prototype.commaOrSpaceSeparated=!1;bt.prototype.commaSeparated=!1;bt.prototype.defined=!1;bt.prototype.mustUseProperty=!1;bt.prototype.number=!1;bt.prototype.overloadedBoolean=!1;bt.prototype.property="";bt.prototype.spaceSeparated=!1;bt.prototype.space=void 0;let IE=0;const ae=Pi(),$e=Pi(),Ru=Pi(),H=Pi(),Ce=Pi(),lr=Pi(),Et=Pi();function Pi(){return 2**++IE}const Nu=Object.freeze(Object.defineProperty({__proto__:null,boolean:ae,booleanish:$e,commaOrSpaceSeparated:Et,commaSeparated:lr,number:H,overloadedBoolean:Ru,spaceSeparated:Ce},Symbol.toStringTag,{value:"Module"})),cc=Object.keys(Nu);class Kh extends bt{constructor(e,n,i,r){let s=-1;if(super(e,n),jp(this,"space",r),typeof i=="number")for(;++s<cc.length;){const o=cc[s];jp(this,cc[s],(i&Nu[o])===Nu[o])}}}Kh.prototype.defined=!0;function jp(t,e,n){n&&(t[e]=n)}function Er(t){const e={},n={};for(const[i,r]of Object.entries(t.properties)){const s=new Kh(i,t.transform(t.attributes||{},i),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(i)&&(s.mustUseProperty=!0),e[i]=s,n[Pu(i)]=i,n[Pu(s.attribute)]=i}return new Hs(e,n,t.space)}const Jv=Er({properties:{ariaActiveDescendant:null,ariaAtomic:$e,ariaAutoComplete:null,ariaBusy:$e,ariaChecked:$e,ariaColCount:H,ariaColIndex:H,ariaColSpan:H,ariaControls:Ce,ariaCurrent:null,ariaDescribedBy:Ce,ariaDetails:null,ariaDisabled:$e,ariaDropEffect:Ce,ariaErrorMessage:null,ariaExpanded:$e,ariaFlowTo:Ce,ariaGrabbed:$e,ariaHasPopup:null,ariaHidden:$e,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ce,ariaLevel:H,ariaLive:null,ariaModal:$e,ariaMultiLine:$e,ariaMultiSelectable:$e,ariaOrientation:null,ariaOwns:Ce,ariaPlaceholder:null,ariaPosInSet:H,ariaPressed:$e,ariaReadOnly:$e,ariaRelevant:null,ariaRequired:$e,ariaRoleDescription:Ce,ariaRowCount:H,ariaRowIndex:H,ariaRowSpan:H,ariaSelected:$e,ariaSetSize:H,ariaSort:null,ariaValueMax:H,ariaValueMin:H,ariaValueNow:H,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Zv(t,e){return e in t?t[e]:e}function ew(t,e){return Zv(t,e.toLowerCase())}const ME=Er({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:lr,acceptCharset:Ce,accessKey:Ce,action:null,allow:null,allowFullScreen:ae,allowPaymentRequest:ae,allowUserMedia:ae,alt:null,as:null,async:ae,autoCapitalize:null,autoComplete:Ce,autoFocus:ae,autoPlay:ae,blocking:Ce,capture:null,charSet:null,checked:ae,cite:null,className:Ce,cols:H,colSpan:null,content:null,contentEditable:$e,controls:ae,controlsList:Ce,coords:H|lr,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ae,defer:ae,dir:null,dirName:null,disabled:ae,download:Ru,draggable:$e,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ae,formTarget:null,headers:Ce,height:H,hidden:Ru,high:H,href:null,hrefLang:null,htmlFor:Ce,httpEquiv:Ce,id:null,imageSizes:null,imageSrcSet:null,inert:ae,inputMode:null,integrity:null,is:null,isMap:ae,itemId:null,itemProp:Ce,itemRef:Ce,itemScope:ae,itemType:Ce,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ae,low:H,manifest:null,max:null,maxLength:H,media:null,method:null,min:null,minLength:H,multiple:ae,muted:ae,name:null,nonce:null,noModule:ae,noValidate:ae,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ae,optimum:H,pattern:null,ping:Ce,placeholder:null,playsInline:ae,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ae,referrerPolicy:null,rel:Ce,required:ae,reversed:ae,rows:H,rowSpan:H,sandbox:Ce,scope:null,scoped:ae,seamless:ae,selected:ae,shadowRootClonable:ae,shadowRootDelegatesFocus:ae,shadowRootMode:null,shape:null,size:H,sizes:null,slot:null,span:H,spellCheck:$e,src:null,srcDoc:null,srcLang:null,srcSet:null,start:H,step:null,style:null,tabIndex:H,target:null,title:null,translate:null,type:null,typeMustMatch:ae,useMap:null,value:$e,width:H,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ce,axis:null,background:null,bgColor:null,border:H,borderColor:null,bottomMargin:H,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ae,declare:ae,event:null,face:null,frame:null,frameBorder:null,hSpace:H,leftMargin:H,link:null,longDesc:null,lowSrc:null,marginHeight:H,marginWidth:H,noResize:ae,noHref:ae,noShade:ae,noWrap:ae,object:null,profile:null,prompt:null,rev:null,rightMargin:H,rules:null,scheme:null,scrolling:$e,standby:null,summary:null,text:null,topMargin:H,valueType:null,version:null,vAlign:null,vLink:null,vSpace:H,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ae,disableRemotePlayback:ae,prefix:null,property:null,results:H,security:null,unselectable:null},space:"html",transform:ew}),DE=Er({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Et,accentHeight:H,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:H,amplitude:H,arabicForm:null,ascent:H,attributeName:null,attributeType:null,azimuth:H,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:H,by:null,calcMode:null,capHeight:H,className:Ce,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:H,diffuseConstant:H,direction:null,display:null,dur:null,divisor:H,dominantBaseline:null,download:ae,dx:null,dy:null,edgeMode:null,editable:null,elevation:H,enableBackground:null,end:null,event:null,exponent:H,externalResourcesRequired:null,fill:null,fillOpacity:H,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:lr,g2:lr,glyphName:lr,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:H,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:H,horizOriginX:H,horizOriginY:H,id:null,ideographic:H,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:H,k:H,k1:H,k2:H,k3:H,k4:H,kernelMatrix:Et,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:H,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:H,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:H,overlineThickness:H,paintOrder:null,panose1:null,path:null,pathLength:H,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ce,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:H,pointsAtY:H,pointsAtZ:H,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Et,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Et,rev:Et,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Et,requiredFeatures:Et,requiredFonts:Et,requiredFormats:Et,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:H,specularExponent:H,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:H,strikethroughThickness:H,string:null,stroke:null,strokeDashArray:Et,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:H,strokeOpacity:H,strokeWidth:null,style:null,surfaceScale:H,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Et,tabIndex:H,tableValues:null,target:null,targetX:H,targetY:H,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Et,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:H,underlineThickness:H,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:H,values:null,vAlphabetic:H,vMathematical:H,vectorEffect:null,vHanging:H,vIdeographic:H,version:null,vertAdvY:H,vertOriginX:H,vertOriginY:H,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:H,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Zv}),tw=Er({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),nw=Er({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:ew}),iw=Er({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),OE={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},LE=/[A-Z]/g,Bp=/-[a-z]/g,FE=/^data[-\w.:]+$/i;function zE(t,e){const n=Pu(e);let i=e,r=bt;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&FE.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(Bp,$E);i="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!Bp.test(s)){let o=s.replace(LE,UE);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}r=Kh}return new r(i,e)}function UE(t){return"-"+t.toLowerCase()}function $E(t){return t.charAt(1).toUpperCase()}const jE=Xv([Jv,ME,tw,nw,iw],"html"),Gh=Xv([Jv,DE,tw,nw,iw],"svg");function BE(t){return t.join(" ").trim()}var qh={},Vp=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,VE=/\n/g,HE=/^\s*/,WE=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,YE=/^:\s*/,KE=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,GE=/^[;\s]*/,qE=/^\s+|\s+$/g,QE=`
`,Hp="/",Wp="*",li="",XE="comment",JE="declaration",ZE=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,i=1;function r(p){var g=p.match(VE);g&&(n+=g.length);var S=p.lastIndexOf(QE);i=~S?p.length-S:i+p.length}function s(){var p={line:n,column:i};return function(g){return g.position=new o(p),c(),g}}function o(p){this.start=p,this.end={line:n,column:i},this.source=e.source}o.prototype.content=t;function l(p){var g=new Error(e.source+":"+n+":"+i+": "+p);if(g.reason=p,g.filename=e.source,g.line=n,g.column=i,g.source=t,!e.silent)throw g}function a(p){var g=p.exec(t);if(g){var S=g[0];return r(S),t=t.slice(S.length),g}}function c(){a(HE)}function h(p){var g;for(p=p||[];g=u();)g!==!1&&p.push(g);return p}function u(){var p=s();if(!(Hp!=t.charAt(0)||Wp!=t.charAt(1))){for(var g=2;li!=t.charAt(g)&&(Wp!=t.charAt(g)||Hp!=t.charAt(g+1));)++g;if(g+=2,li===t.charAt(g-1))return l("End of comment missing");var S=t.slice(2,g-2);return i+=2,r(S),t=t.slice(g),i+=2,p({type:XE,comment:S})}}function d(){var p=s(),g=a(WE);if(g){if(u(),!a(YE))return l("property missing ':'");var S=a(KE),m=p({type:JE,property:Yp(g[0].replace(Vp,li)),value:S?Yp(S[0].replace(Vp,li)):li});return a(GE),m}}function f(){var p=[];h(p);for(var g;g=d();)g!==!1&&(p.push(g),h(p));return p}return c(),f()};function Yp(t){return t?t.replace(qE,li):li}var eT=Yo&&Yo.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qh,"__esModule",{value:!0});qh.default=nT;var tT=eT(ZE);function nT(t,e){var n=null;if(!t||typeof t!="string")return n;var i=(0,tT.default)(t),r=typeof e=="function";return i.forEach(function(s){if(s.type==="declaration"){var o=s.property,l=s.value;r?e(o,l,s):l&&(n=n||{},n[o]=l)}}),n}var ra={};Object.defineProperty(ra,"__esModule",{value:!0});ra.camelCase=void 0;var iT=/^--[a-zA-Z0-9_-]+$/,rT=/-([a-z])/g,sT=/^[^-]+$/,oT=/^-(webkit|moz|ms|o|khtml)-/,lT=/^-(ms)-/,aT=function(t){return!t||sT.test(t)||iT.test(t)},cT=function(t,e){return e.toUpperCase()},Kp=function(t,e){return"".concat(e,"-")},uT=function(t,e){return e===void 0&&(e={}),aT(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(lT,Kp):t=t.replace(oT,Kp),t.replace(rT,cT))};ra.camelCase=uT;var hT=Yo&&Yo.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},dT=hT(qh),fT=ra;function Iu(t,e){var n={};return!t||typeof t!="string"||(0,dT.default)(t,function(i,r){i&&r&&(n[(0,fT.camelCase)(i,e)]=r)}),n}Iu.default=Iu;var pT=Iu;const mT=Bu(pT),rw=sw("end"),Qh=sw("start");function sw(t){return e;function e(n){const i=n&&n.position&&n.position[t]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function gT(t){const e=Qh(t),n=rw(t);if(e&&n)return{start:e,end:n}}function os(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Gp(t.position):"start"in t||"end"in t?Gp(t):"line"in t||"column"in t?Mu(t):""}function Mu(t){return qp(t&&t.line)+":"+qp(t&&t.column)}function Gp(t){return Mu(t&&t.start)+"-"+Mu(t&&t.end)}function qp(t){return t&&typeof t=="number"?t:1}class ot extends Error{constructor(e,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let r="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?r=e:!s.cause&&e&&(o=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof i=="string"){const a=i.indexOf(":");a===-1?s.ruleId=i:(s.source=i.slice(0,a),s.ruleId=i.slice(a+1))}if(!s.place&&s.ancestors&&s.ancestors){const a=s.ancestors[s.ancestors.length-1];a&&(s.place=a.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=l?l.line:void 0,this.name=os(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ot.prototype.file="";ot.prototype.name="";ot.prototype.reason="";ot.prototype.message="";ot.prototype.stack="";ot.prototype.column=void 0;ot.prototype.line=void 0;ot.prototype.ancestors=void 0;ot.prototype.cause=void 0;ot.prototype.fatal=void 0;ot.prototype.place=void 0;ot.prototype.ruleId=void 0;ot.prototype.source=void 0;const Xh={}.hasOwnProperty,yT=new Map,vT=/[A-Z]/g,wT=new Set(["table","tbody","thead","tfoot","tr"]),ST=new Set(["td","th"]),ow="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function xT(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=PT(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=AT(n,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Gh:jE,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=lw(r,t,void 0);return s&&typeof s!="string"?s:r.create(t,r.Fragment,{children:s||void 0},void 0)}function lw(t,e,n){if(e.type==="element")return CT(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return bT(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return ET(t,e,n);if(e.type==="mdxjsEsm")return kT(t,e);if(e.type==="root")return TT(t,e,n);if(e.type==="text")return _T(t,e)}function CT(t,e,n){const i=t.schema;let r=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=Gh,t.schema=r),t.ancestors.push(e);const s=cw(t,e.tagName,!1),o=RT(t,e);let l=Zh(t,e);return wT.has(e.tagName)&&(l=l.filter(function(a){return typeof a=="string"?!NE(a):!0})),aw(t,o,s,e),Jh(o,l),t.ancestors.pop(),t.schema=i,t.create(e,s,o,n)}function bT(t,e){if(e.data&&e.data.estree&&t.evaluater){const i=e.data.estree.body[0];return i.type,t.evaluater.evaluateExpression(i.expression)}Is(t,e.position)}function kT(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Is(t,e.position)}function ET(t,e,n){const i=t.schema;let r=i;e.name==="svg"&&i.space==="html"&&(r=Gh,t.schema=r),t.ancestors.push(e);const s=e.name===null?t.Fragment:cw(t,e.name,!0),o=NT(t,e),l=Zh(t,e);return aw(t,o,s,e),Jh(o,l),t.ancestors.pop(),t.schema=i,t.create(e,s,o,n)}function TT(t,e,n){const i={};return Jh(i,Zh(t,e)),t.create(e,t.Fragment,i,n)}function _T(t,e){return e.value}function aw(t,e,n,i){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=i)}function Jh(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function AT(t,e,n){return i;function i(r,s,o,l){const c=Array.isArray(o.children)?n:e;return l?c(s,o,l):c(s,o)}}function PT(t,e){return n;function n(i,r,s,o){const l=Array.isArray(s.children),a=Qh(i);return e(r,s,o,l,{columnNumber:a?a.column-1:void 0,fileName:t,lineNumber:a?a.line:void 0},void 0)}}function RT(t,e){const n={};let i,r;for(r in e.properties)if(r!=="children"&&Xh.call(e.properties,r)){const s=IT(t,r,e.properties[r]);if(s){const[o,l]=s;t.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&ST.has(e.tagName)?i=l:n[o]=l}}if(i){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function NT(t,e){const n={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&t.evaluater){const s=i.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,t.evaluater.evaluateExpression(l.argument))}else Is(t,e.position);else{const r=i.name;let s;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&t.evaluater){const l=i.value.data.estree.body[0];l.type,s=t.evaluater.evaluateExpression(l.expression)}else Is(t,e.position);else s=i.value===null?!0:i.value;n[r]=s}return n}function Zh(t,e){const n=[];let i=-1;const r=t.passKeys?new Map:yT;for(;++i<e.children.length;){const s=e.children[i];let o;if(t.passKeys){const a=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(a){const c=r.get(a)||0;o=a+"-"+c,r.set(a,c+1)}}const l=lw(t,s,o);l!==void 0&&n.push(l)}return n}function IT(t,e,n){const i=zE(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?TE(n):BE(n)),i.property==="style"){let r=typeof n=="object"?n:MT(t,String(n));return t.stylePropertyNameCase==="css"&&(r=DT(r)),["style",r]}return[t.elementAttributeNameCase==="react"&&i.space?OE[i.property]||i.property:i.attribute,n]}}function MT(t,e){try{return mT(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const i=n,r=new ot("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=t.filePath||void 0,r.url=ow+"#cannot-parse-style-attribute",r}}function cw(t,e,n){let i;if(!n)i={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let s=-1,o;for(;++s<r.length;){const l=Up(r[s])?{type:"Identifier",name:r[s]}:{type:"Literal",value:r[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}i=o}else i=Up(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const r=i.value;return Xh.call(t.components,r)?t.components[r]:r}if(t.evaluater)return t.evaluater.evaluateExpression(i);Is(t)}function Is(t,e){const n=new ot("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=ow+"#cannot-handle-mdx-estrees-without-createevaluater",n}function DT(t){const e={};let n;for(n in t)Xh.call(t,n)&&(e[OT(n)]=t[n]);return e}function OT(t){let e=t.replace(vT,LT);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function LT(t){return"-"+t.toLowerCase()}const uc={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},FT={};function ed(t,e){const n=FT,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,r=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return uw(t,i,r)}function uw(t,e,n){if(zT(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Qp(t.children,e,n)}return Array.isArray(t)?Qp(t,e,n):""}function Qp(t,e,n){const i=[];let r=-1;for(;++r<t.length;)i[r]=uw(t[r],e,n);return i.join("")}function zT(t){return!!(t&&typeof t=="object")}const Xp=document.createElement("i");function td(t){const e="&"+t+";";Xp.innerHTML=e;const n=Xp.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Rt(t,e,n,i){const r=t.length;let s=0,o;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,n=n>0?n:0,i.length<1e4)o=Array.from(i),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<i.length;)o=i.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Ft(t,e){return t.length>0?(Rt(t,t.length,0,e),t):e}const Jp={}.hasOwnProperty;function hw(t){const e={};let n=-1;for(;++n<t.length;)UT(e,t[n]);return e}function UT(t,e){let n;for(n in e){const r=(Jp.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){Jp.call(r,o)||(r[o]=[]);const l=s[o];$T(r[o],Array.isArray(l)?l:l?[l]:[])}}}function $T(t,e){let n=-1;const i=[];for(;++n<e.length;)(e[n].add==="after"?t:i).push(e[n]);Rt(t,0,0,i)}function dw(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Qt(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const at=Zn(/[A-Za-z]/),rt=Zn(/[\dA-Za-z]/),jT=Zn(/[#-'*+\--9=?A-Z^-~]/);function kl(t){return t!==null&&(t<32||t===127)}const Du=Zn(/\d/),BT=Zn(/[\dA-Fa-f]/),VT=Zn(/[!-/:-@[-`{-~]/);function ee(t){return t!==null&&t<-2}function Se(t){return t!==null&&(t<0||t===32)}function ue(t){return t===-2||t===-1||t===32}const sa=Zn(/\p{P}|\p{S}/u),Ti=Zn(/\s/);function Zn(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Tr(t){const e=[];let n=-1,i=0,r=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&rt(t.charCodeAt(n+1))&&rt(t.charCodeAt(n+2)))r=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=t.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),r=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(i,n),encodeURIComponent(o)),i=n+r+1,o=""),r&&(n+=r,r=0)}return e.join("")+t.slice(i)}function de(t,e,n,i){const r=i?i-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(a){return ue(a)?(t.enter(n),l(a)):e(a)}function l(a){return ue(a)&&s++<r?(t.consume(a),l):(t.exit(n),e(a))}}const HT={tokenize:WT};function WT(t){const e=t.attempt(this.parser.constructs.contentInitial,i,r);let n;return e;function i(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),de(t,e,"linePrefix")}function r(l){return t.enter("paragraph"),s(l)}function s(l){const a=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=a),n=a,o(l)}function o(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return ee(l)?(t.consume(l),t.exit("chunkText"),s):(t.consume(l),o)}}const YT={tokenize:KT},Zp={tokenize:GT};function KT(t){const e=this,n=[];let i=0,r,s,o;return l;function l(w){if(i<n.length){const b=n[i];return e.containerState=b[1],t.attempt(b[0].continuation,a,c)(w)}return c(w)}function a(w){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&y();const b=e.events.length;let A=b,E;for(;A--;)if(e.events[A][0]==="exit"&&e.events[A][1].type==="chunkFlow"){E=e.events[A][1].end;break}m(i);let P=b;for(;P<e.events.length;)e.events[P][1].end={...E},P++;return Rt(e.events,A+1,0,e.events.slice(b)),e.events.length=P,c(w)}return l(w)}function c(w){if(i===n.length){if(!r)return d(w);if(r.currentConstruct&&r.currentConstruct.concrete)return p(w);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(Zp,h,u)(w)}function h(w){return r&&y(),m(i),d(w)}function u(w){return e.parser.lazy[e.now().line]=i!==n.length,o=e.now().offset,p(w)}function d(w){return e.containerState={},t.attempt(Zp,f,p)(w)}function f(w){return i++,n.push([e.currentConstruct,e.containerState]),d(w)}function p(w){if(w===null){r&&y(),m(0),t.consume(w);return}return r=r||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),g(w)}function g(w){if(w===null){S(t.exit("chunkFlow"),!0),m(0),t.consume(w);return}return ee(w)?(t.consume(w),S(t.exit("chunkFlow")),i=0,e.interrupt=void 0,l):(t.consume(w),g)}function S(w,b){const A=e.sliceStream(w);if(b&&A.push(null),w.previous=s,s&&(s.next=w),s=w,r.defineSkip(w.start),r.write(A),e.parser.lazy[w.start.line]){let E=r.events.length;for(;E--;)if(r.events[E][1].start.offset<o&&(!r.events[E][1].end||r.events[E][1].end.offset>o))return;const P=e.events.length;let R=P,D,_;for(;R--;)if(e.events[R][0]==="exit"&&e.events[R][1].type==="chunkFlow"){if(D){_=e.events[R][1].end;break}D=!0}for(m(i),E=P;E<e.events.length;)e.events[E][1].end={..._},E++;Rt(e.events,R+1,0,e.events.slice(P)),e.events.length=E}}function m(w){let b=n.length;for(;b-- >w;){const A=n[b];e.containerState=A[1],A[0].exit.call(e,t)}n.length=w}function y(){r.write([null]),s=void 0,r=void 0,e.containerState._closeFlow=void 0}}function GT(t,e,n){return de(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function wr(t){if(t===null||Se(t)||Ti(t))return 1;if(sa(t))return 2}function oa(t,e,n){const i=[];let r=-1;for(;++r<t.length;){const s=t[r].resolveAll;s&&!i.includes(s)&&(e=s(e,n),i.push(s))}return e}const Ou={name:"attention",resolveAll:qT,tokenize:QT};function qT(t,e){let n=-1,i,r,s,o,l,a,c,h;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(i=n;i--;)if(t[i][0]==="exit"&&t[i][1].type==="attentionSequence"&&t[i][1]._open&&e.sliceSerialize(t[i][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[i][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[i][1].end.offset-t[i][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;a=t[i][1].end.offset-t[i][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const u={...t[i][1].end},d={...t[n][1].start};em(u,-a),em(d,a),o={type:a>1?"strongSequence":"emphasisSequence",start:u,end:{...t[i][1].end}},l={type:a>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:d},s={type:a>1?"strongText":"emphasisText",start:{...t[i][1].end},end:{...t[n][1].start}},r={type:a>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},t[i][1].end={...o.start},t[n][1].start={...l.end},c=[],t[i][1].end.offset-t[i][1].start.offset&&(c=Ft(c,[["enter",t[i][1],e],["exit",t[i][1],e]])),c=Ft(c,[["enter",r,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=Ft(c,oa(e.parser.constructs.insideSpan.null,t.slice(i+1,n),e)),c=Ft(c,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",r,e]]),t[n][1].end.offset-t[n][1].start.offset?(h=2,c=Ft(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):h=0,Rt(t,i-1,n-i+3,c),n=i+c.length-h-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function QT(t,e){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,r=wr(i);let s;return o;function o(a){return s=a,t.enter("attentionSequence"),l(a)}function l(a){if(a===s)return t.consume(a),l;const c=t.exit("attentionSequence"),h=wr(a),u=!h||h===2&&r||n.includes(a),d=!r||r===2&&h||n.includes(i);return c._open=!!(s===42?u:u&&(r||!d)),c._close=!!(s===42?d:d&&(h||!u)),e(a)}}function em(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const XT={name:"autolink",tokenize:JT};function JT(t,e,n){let i=0;return r;function r(f){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(f){return at(f)?(t.consume(f),o):f===64?n(f):c(f)}function o(f){return f===43||f===45||f===46||rt(f)?(i=1,l(f)):c(f)}function l(f){return f===58?(t.consume(f),i=0,a):(f===43||f===45||f===46||rt(f))&&i++<32?(t.consume(f),l):(i=0,c(f))}function a(f){return f===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):f===null||f===32||f===60||kl(f)?n(f):(t.consume(f),a)}function c(f){return f===64?(t.consume(f),h):jT(f)?(t.consume(f),c):n(f)}function h(f){return rt(f)?u(f):n(f)}function u(f){return f===46?(t.consume(f),i=0,h):f===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):d(f)}function d(f){if((f===45||rt(f))&&i++<63){const p=f===45?d:u;return t.consume(f),p}return n(f)}}const Ws={partial:!0,tokenize:ZT};function ZT(t,e,n){return i;function i(s){return ue(s)?de(t,r,"linePrefix")(s):r(s)}function r(s){return s===null||ee(s)?e(s):n(s)}}const fw={continuation:{tokenize:t_},exit:n_,name:"blockQuote",tokenize:e_};function e_(t,e,n){const i=this;return r;function r(o){if(o===62){const l=i.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return ue(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function t_(t,e,n){const i=this;return r;function r(o){return ue(o)?de(t,s,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(fw,e,n)(o)}}function n_(t){t.exit("blockQuote")}const pw={name:"characterEscape",tokenize:i_};function i_(t,e,n){return i;function i(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),r}function r(s){return VT(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const mw={name:"characterReference",tokenize:r_};function r_(t,e,n){const i=this;let r=0,s,o;return l;function l(u){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(u),t.exit("characterReferenceMarker"),a}function a(u){return u===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(u),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=rt,h(u))}function c(u){return u===88||u===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(u),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=BT,h):(t.enter("characterReferenceValue"),s=7,o=Du,h(u))}function h(u){if(u===59&&r){const d=t.exit("characterReferenceValue");return o===rt&&!td(i.sliceSerialize(d))?n(u):(t.enter("characterReferenceMarker"),t.consume(u),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(u)&&r++<s?(t.consume(u),h):n(u)}}const tm={partial:!0,tokenize:o_},nm={concrete:!0,name:"codeFenced",tokenize:s_};function s_(t,e,n){const i=this,r={partial:!0,tokenize:A};let s=0,o=0,l;return a;function a(E){return c(E)}function c(E){const P=i.events[i.events.length-1];return s=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,l=E,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),h(E)}function h(E){return E===l?(o++,t.consume(E),h):o<3?n(E):(t.exit("codeFencedFenceSequence"),ue(E)?de(t,u,"whitespace")(E):u(E))}function u(E){return E===null||ee(E)?(t.exit("codeFencedFence"),i.interrupt?e(E):t.check(tm,g,b)(E)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),d(E))}function d(E){return E===null||ee(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),u(E)):ue(E)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),de(t,f,"whitespace")(E)):E===96&&E===l?n(E):(t.consume(E),d)}function f(E){return E===null||ee(E)?u(E):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),p(E))}function p(E){return E===null||ee(E)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),u(E)):E===96&&E===l?n(E):(t.consume(E),p)}function g(E){return t.attempt(r,b,S)(E)}function S(E){return t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),m}function m(E){return s>0&&ue(E)?de(t,y,"linePrefix",s+1)(E):y(E)}function y(E){return E===null||ee(E)?t.check(tm,g,b)(E):(t.enter("codeFlowValue"),w(E))}function w(E){return E===null||ee(E)?(t.exit("codeFlowValue"),y(E)):(t.consume(E),w)}function b(E){return t.exit("codeFenced"),e(E)}function A(E,P,R){let D=0;return _;function _(X){return E.enter("lineEnding"),E.consume(X),E.exit("lineEnding"),j}function j(X){return E.enter("codeFencedFence"),ue(X)?de(E,B,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(X):B(X)}function B(X){return X===l?(E.enter("codeFencedFenceSequence"),J(X)):R(X)}function J(X){return X===l?(D++,E.consume(X),J):D>=o?(E.exit("codeFencedFenceSequence"),ue(X)?de(E,Z,"whitespace")(X):Z(X)):R(X)}function Z(X){return X===null||ee(X)?(E.exit("codeFencedFence"),P(X)):R(X)}}}function o_(t,e,n){const i=this;return r;function r(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return i.parser.lazy[i.now().line]?n(o):e(o)}}const hc={name:"codeIndented",tokenize:a_},l_={partial:!0,tokenize:c_};function a_(t,e,n){const i=this;return r;function r(c){return t.enter("codeIndented"),de(t,s,"linePrefix",5)(c)}function s(c){const h=i.events[i.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?a(c):ee(c)?t.attempt(l_,o,a)(c):(t.enter("codeFlowValue"),l(c))}function l(c){return c===null||ee(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),l)}function a(c){return t.exit("codeIndented"),e(c)}}function c_(t,e,n){const i=this;return r;function r(o){return i.parser.lazy[i.now().line]?n(o):ee(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),r):de(t,s,"linePrefix",5)(o)}function s(o){const l=i.events[i.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):ee(o)?r(o):n(o)}}const u_={name:"codeText",previous:d_,resolve:h_,tokenize:f_};function h_(t){let e=t.length-4,n=3,i,r;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(i=n;++i<e;)if(t[i][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(i=n-1,e++;++i<=e;)r===void 0?i!==e&&t[i][1].type!=="lineEnding"&&(r=i):(i===e||t[i][1].type==="lineEnding")&&(t[r][1].type="codeTextData",i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return t}function d_(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function f_(t,e,n){let i=0,r,s;return o;function o(u){return t.enter("codeText"),t.enter("codeTextSequence"),l(u)}function l(u){return u===96?(t.consume(u),i++,l):(t.exit("codeTextSequence"),a(u))}function a(u){return u===null?n(u):u===32?(t.enter("space"),t.consume(u),t.exit("space"),a):u===96?(s=t.enter("codeTextSequence"),r=0,h(u)):ee(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),a):(t.enter("codeTextData"),c(u))}function c(u){return u===null||u===32||u===96||ee(u)?(t.exit("codeTextData"),a(u)):(t.consume(u),c)}function h(u){return u===96?(t.consume(u),r++,h):r===i?(t.exit("codeTextSequence"),t.exit("codeText"),e(u)):(s.type="codeTextData",c(u))}}class p_{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,n,i){const r=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&jr(this.left,i),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),jr(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),jr(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);jr(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);jr(this.left,n.reverse())}}}function jr(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function gw(t){const e={};let n=-1,i,r,s,o,l,a,c;const h=new p_(t);for(;++n<h.length;){for(;n in e;)n=e[n];if(i=h.get(n),n&&i[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(a=i[1]._tokenizer.events,s=0,s<a.length&&a[s][1].type==="lineEndingBlank"&&(s+=2),s<a.length&&a[s][1].type==="content"))for(;++s<a.length&&a[s][1].type!=="content";)a[s][1].type==="chunkText"&&(a[s][1]._isInFirstContentOfListItem=!0,s++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,m_(h,n)),n=e[n],c=!0);else if(i[1]._container){for(s=n,r=void 0;s--;)if(o=h.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(r&&(h.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;r&&(i[1].end={...h.get(r)[1].start},l=h.slice(r,n),l.unshift(i),h.splice(r,n-r+1,l))}}return Rt(t,0,Number.POSITIVE_INFINITY,h.slice(0)),!c}function m_(t,e){const n=t.get(e)[1],i=t.get(e)[2];let r=e-1;const s=[];let o=n._tokenizer;o||(o=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,a=[],c={};let h,u,d=-1,f=n,p=0,g=0;const S=[g];for(;f;){for(;t.get(++r)[1]!==f;);s.push(r),f._tokenizer||(h=i.sliceStream(f),f.next||h.push(null),u&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(h),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),u=f,f=f.next}for(f=n;++d<l.length;)l[d][0]==="exit"&&l[d-1][0]==="enter"&&l[d][1].type===l[d-1][1].type&&l[d][1].start.line!==l[d][1].end.line&&(g=d+1,S.push(g),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):S.pop(),d=S.length;d--;){const m=l.slice(S[d],S[d+1]),y=s.pop();a.push([y,y+m.length-1]),t.splice(y,2,m)}for(a.reverse(),d=-1;++d<a.length;)c[p+a[d][0]]=p+a[d][1],p+=a[d][1]-a[d][0]-1;return c}const g_={resolve:v_,tokenize:w_},y_={partial:!0,tokenize:S_};function v_(t){return gw(t),t}function w_(t,e){let n;return i;function i(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),r(l)}function r(l){return l===null?s(l):ee(l)?t.check(y_,o,s)(l):(t.consume(l),r)}function s(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function o(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}function S_(t,e,n){const i=this;return r;function r(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),de(t,s,"linePrefix")}function s(o){if(o===null||ee(o))return n(o);const l=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):t.interrupt(i.parser.constructs.flow,n,e)(o)}}function yw(t,e,n,i,r,s,o,l,a){const c=a||Number.POSITIVE_INFINITY;let h=0;return u;function u(m){return m===60?(t.enter(i),t.enter(r),t.enter(s),t.consume(m),t.exit(s),d):m===null||m===32||m===41||kl(m)?n(m):(t.enter(i),t.enter(o),t.enter(l),t.enter("chunkString",{contentType:"string"}),g(m))}function d(m){return m===62?(t.enter(s),t.consume(m),t.exit(s),t.exit(r),t.exit(i),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),f(m))}function f(m){return m===62?(t.exit("chunkString"),t.exit(l),d(m)):m===null||m===60||ee(m)?n(m):(t.consume(m),m===92?p:f)}function p(m){return m===60||m===62||m===92?(t.consume(m),f):f(m)}function g(m){return!h&&(m===null||m===41||Se(m))?(t.exit("chunkString"),t.exit(l),t.exit(o),t.exit(i),e(m)):h<c&&m===40?(t.consume(m),h++,g):m===41?(t.consume(m),h--,g):m===null||m===32||m===40||kl(m)?n(m):(t.consume(m),m===92?S:g)}function S(m){return m===40||m===41||m===92?(t.consume(m),g):g(m)}}function vw(t,e,n,i,r,s){const o=this;let l=0,a;return c;function c(f){return t.enter(i),t.enter(r),t.consume(f),t.exit(r),t.enter(s),h}function h(f){return l>999||f===null||f===91||f===93&&!a||f===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(f):f===93?(t.exit(s),t.enter(r),t.consume(f),t.exit(r),t.exit(i),e):ee(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),h):(t.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===null||f===91||f===93||ee(f)||l++>999?(t.exit("chunkString"),h(f)):(t.consume(f),a||(a=!ue(f)),f===92?d:u)}function d(f){return f===91||f===92||f===93?(t.consume(f),l++,u):u(f)}}function ww(t,e,n,i,r,s){let o;return l;function l(d){return d===34||d===39||d===40?(t.enter(i),t.enter(r),t.consume(d),t.exit(r),o=d===40?41:d,a):n(d)}function a(d){return d===o?(t.enter(r),t.consume(d),t.exit(r),t.exit(i),e):(t.enter(s),c(d))}function c(d){return d===o?(t.exit(s),a(o)):d===null?n(d):ee(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),de(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),h(d))}function h(d){return d===o||d===null||ee(d)?(t.exit("chunkString"),c(d)):(t.consume(d),d===92?u:h)}function u(d){return d===o||d===92?(t.consume(d),h):h(d)}}function ls(t,e){let n;return i;function i(r){return ee(r)?(t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),n=!0,i):ue(r)?de(t,i,n?"linePrefix":"lineSuffix")(r):e(r)}}const x_={name:"definition",tokenize:b_},C_={partial:!0,tokenize:k_};function b_(t,e,n){const i=this;let r;return s;function s(f){return t.enter("definition"),o(f)}function o(f){return vw.call(i,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function l(f){return r=Qt(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),f===58?(t.enter("definitionMarker"),t.consume(f),t.exit("definitionMarker"),a):n(f)}function a(f){return Se(f)?ls(t,c)(f):c(f)}function c(f){return yw(t,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function h(f){return t.attempt(C_,u,u)(f)}function u(f){return ue(f)?de(t,d,"whitespace")(f):d(f)}function d(f){return f===null||ee(f)?(t.exit("definition"),i.parser.defined.push(r),e(f)):n(f)}}function k_(t,e,n){return i;function i(l){return Se(l)?ls(t,r)(l):n(l)}function r(l){return ww(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return ue(l)?de(t,o,"whitespace")(l):o(l)}function o(l){return l===null||ee(l)?e(l):n(l)}}const E_={name:"hardBreakEscape",tokenize:T_};function T_(t,e,n){return i;function i(s){return t.enter("hardBreakEscape"),t.consume(s),r}function r(s){return ee(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const __={name:"headingAtx",resolve:A_,tokenize:P_};function A_(t,e){let n=t.length-2,i=3,r,s;return t[i][1].type==="whitespace"&&(i+=2),n-2>i&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&t[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(r={type:"atxHeadingText",start:t[i][1].start,end:t[n][1].end},s={type:"chunkText",start:t[i][1].start,end:t[n][1].end,contentType:"text"},Rt(t,i,n-i+1,[["enter",r,e],["enter",s,e],["exit",s,e],["exit",r,e]])),t}function P_(t,e,n){let i=0;return r;function r(h){return t.enter("atxHeading"),s(h)}function s(h){return t.enter("atxHeadingSequence"),o(h)}function o(h){return h===35&&i++<6?(t.consume(h),o):h===null||Se(h)?(t.exit("atxHeadingSequence"),l(h)):n(h)}function l(h){return h===35?(t.enter("atxHeadingSequence"),a(h)):h===null||ee(h)?(t.exit("atxHeading"),e(h)):ue(h)?de(t,l,"whitespace")(h):(t.enter("atxHeadingText"),c(h))}function a(h){return h===35?(t.consume(h),a):(t.exit("atxHeadingSequence"),l(h))}function c(h){return h===null||h===35||Se(h)?(t.exit("atxHeadingText"),l(h)):(t.consume(h),c)}}const R_=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],im=["pre","script","style","textarea"],N_={concrete:!0,name:"htmlFlow",resolveTo:D_,tokenize:O_},I_={partial:!0,tokenize:F_},M_={partial:!0,tokenize:L_};function D_(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function O_(t,e,n){const i=this;let r,s,o,l,a;return c;function c(x){return h(x)}function h(x){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(x),u}function u(x){return x===33?(t.consume(x),d):x===47?(t.consume(x),s=!0,g):x===63?(t.consume(x),r=3,i.interrupt?e:C):at(x)?(t.consume(x),o=String.fromCharCode(x),S):n(x)}function d(x){return x===45?(t.consume(x),r=2,f):x===91?(t.consume(x),r=5,l=0,p):at(x)?(t.consume(x),r=4,i.interrupt?e:C):n(x)}function f(x){return x===45?(t.consume(x),i.interrupt?e:C):n(x)}function p(x){const G="CDATA[";return x===G.charCodeAt(l++)?(t.consume(x),l===G.length?i.interrupt?e:B:p):n(x)}function g(x){return at(x)?(t.consume(x),o=String.fromCharCode(x),S):n(x)}function S(x){if(x===null||x===47||x===62||Se(x)){const G=x===47,re=o.toLowerCase();return!G&&!s&&im.includes(re)?(r=1,i.interrupt?e(x):B(x)):R_.includes(o.toLowerCase())?(r=6,G?(t.consume(x),m):i.interrupt?e(x):B(x)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(x):s?y(x):w(x))}return x===45||rt(x)?(t.consume(x),o+=String.fromCharCode(x),S):n(x)}function m(x){return x===62?(t.consume(x),i.interrupt?e:B):n(x)}function y(x){return ue(x)?(t.consume(x),y):_(x)}function w(x){return x===47?(t.consume(x),_):x===58||x===95||at(x)?(t.consume(x),b):ue(x)?(t.consume(x),w):_(x)}function b(x){return x===45||x===46||x===58||x===95||rt(x)?(t.consume(x),b):A(x)}function A(x){return x===61?(t.consume(x),E):ue(x)?(t.consume(x),A):w(x)}function E(x){return x===null||x===60||x===61||x===62||x===96?n(x):x===34||x===39?(t.consume(x),a=x,P):ue(x)?(t.consume(x),E):R(x)}function P(x){return x===a?(t.consume(x),a=null,D):x===null||ee(x)?n(x):(t.consume(x),P)}function R(x){return x===null||x===34||x===39||x===47||x===60||x===61||x===62||x===96||Se(x)?A(x):(t.consume(x),R)}function D(x){return x===47||x===62||ue(x)?w(x):n(x)}function _(x){return x===62?(t.consume(x),j):n(x)}function j(x){return x===null||ee(x)?B(x):ue(x)?(t.consume(x),j):n(x)}function B(x){return x===45&&r===2?(t.consume(x),te):x===60&&r===1?(t.consume(x),se):x===62&&r===4?(t.consume(x),N):x===63&&r===3?(t.consume(x),C):x===93&&r===5?(t.consume(x),z):ee(x)&&(r===6||r===7)?(t.exit("htmlFlowData"),t.check(I_,U,J)(x)):x===null||ee(x)?(t.exit("htmlFlowData"),J(x)):(t.consume(x),B)}function J(x){return t.check(M_,Z,U)(x)}function Z(x){return t.enter("lineEnding"),t.consume(x),t.exit("lineEnding"),X}function X(x){return x===null||ee(x)?J(x):(t.enter("htmlFlowData"),B(x))}function te(x){return x===45?(t.consume(x),C):B(x)}function se(x){return x===47?(t.consume(x),o="",$):B(x)}function $(x){if(x===62){const G=o.toLowerCase();return im.includes(G)?(t.consume(x),N):B(x)}return at(x)&&o.length<8?(t.consume(x),o+=String.fromCharCode(x),$):B(x)}function z(x){return x===93?(t.consume(x),C):B(x)}function C(x){return x===62?(t.consume(x),N):x===45&&r===2?(t.consume(x),C):B(x)}function N(x){return x===null||ee(x)?(t.exit("htmlFlowData"),U(x)):(t.consume(x),N)}function U(x){return t.exit("htmlFlow"),e(x)}}function L_(t,e,n){const i=this;return r;function r(o){return ee(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return i.parser.lazy[i.now().line]?n(o):e(o)}}function F_(t,e,n){return i;function i(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),t.attempt(Ws,e,n)}}const z_={name:"htmlText",tokenize:U_};function U_(t,e,n){const i=this;let r,s,o;return l;function l(C){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(C),a}function a(C){return C===33?(t.consume(C),c):C===47?(t.consume(C),A):C===63?(t.consume(C),w):at(C)?(t.consume(C),R):n(C)}function c(C){return C===45?(t.consume(C),h):C===91?(t.consume(C),s=0,p):at(C)?(t.consume(C),y):n(C)}function h(C){return C===45?(t.consume(C),f):n(C)}function u(C){return C===null?n(C):C===45?(t.consume(C),d):ee(C)?(o=u,se(C)):(t.consume(C),u)}function d(C){return C===45?(t.consume(C),f):u(C)}function f(C){return C===62?te(C):C===45?d(C):u(C)}function p(C){const N="CDATA[";return C===N.charCodeAt(s++)?(t.consume(C),s===N.length?g:p):n(C)}function g(C){return C===null?n(C):C===93?(t.consume(C),S):ee(C)?(o=g,se(C)):(t.consume(C),g)}function S(C){return C===93?(t.consume(C),m):g(C)}function m(C){return C===62?te(C):C===93?(t.consume(C),m):g(C)}function y(C){return C===null||C===62?te(C):ee(C)?(o=y,se(C)):(t.consume(C),y)}function w(C){return C===null?n(C):C===63?(t.consume(C),b):ee(C)?(o=w,se(C)):(t.consume(C),w)}function b(C){return C===62?te(C):w(C)}function A(C){return at(C)?(t.consume(C),E):n(C)}function E(C){return C===45||rt(C)?(t.consume(C),E):P(C)}function P(C){return ee(C)?(o=P,se(C)):ue(C)?(t.consume(C),P):te(C)}function R(C){return C===45||rt(C)?(t.consume(C),R):C===47||C===62||Se(C)?D(C):n(C)}function D(C){return C===47?(t.consume(C),te):C===58||C===95||at(C)?(t.consume(C),_):ee(C)?(o=D,se(C)):ue(C)?(t.consume(C),D):te(C)}function _(C){return C===45||C===46||C===58||C===95||rt(C)?(t.consume(C),_):j(C)}function j(C){return C===61?(t.consume(C),B):ee(C)?(o=j,se(C)):ue(C)?(t.consume(C),j):D(C)}function B(C){return C===null||C===60||C===61||C===62||C===96?n(C):C===34||C===39?(t.consume(C),r=C,J):ee(C)?(o=B,se(C)):ue(C)?(t.consume(C),B):(t.consume(C),Z)}function J(C){return C===r?(t.consume(C),r=void 0,X):C===null?n(C):ee(C)?(o=J,se(C)):(t.consume(C),J)}function Z(C){return C===null||C===34||C===39||C===60||C===61||C===96?n(C):C===47||C===62||Se(C)?D(C):(t.consume(C),Z)}function X(C){return C===47||C===62||Se(C)?D(C):n(C)}function te(C){return C===62?(t.consume(C),t.exit("htmlTextData"),t.exit("htmlText"),e):n(C)}function se(C){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(C),t.exit("lineEnding"),$}function $(C){return ue(C)?de(t,z,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(C):z(C)}function z(C){return t.enter("htmlTextData"),o(C)}}const nd={name:"labelEnd",resolveAll:V_,resolveTo:H_,tokenize:W_},$_={tokenize:Y_},j_={tokenize:K_},B_={tokenize:G_};function V_(t){let e=-1;const n=[];for(;++e<t.length;){const i=t[e][1];if(n.push(t[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",e+=r}}return t.length!==n.length&&Rt(t,0,t.length,n),t}function H_(t,e){let n=t.length,i=0,r,s,o,l;for(;n--;)if(r=t[n][1],s){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;t[n][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(s=n,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(o=n);const a={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},h={type:"labelText",start:{...t[s+i+2][1].end},end:{...t[o-2][1].start}};return l=[["enter",a,e],["enter",c,e]],l=Ft(l,t.slice(s+1,s+i+3)),l=Ft(l,[["enter",h,e]]),l=Ft(l,oa(e.parser.constructs.insideSpan.null,t.slice(s+i+4,o-3),e)),l=Ft(l,[["exit",h,e],t[o-2],t[o-1],["exit",c,e]]),l=Ft(l,t.slice(o+1)),l=Ft(l,[["exit",a,e]]),Rt(t,s,t.length,l),t}function W_(t,e,n){const i=this;let r=i.events.length,s,o;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){s=i.events[r][1];break}return l;function l(d){return s?s._inactive?u(d):(o=i.parser.defined.includes(Qt(i.sliceSerialize({start:s.end,end:i.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(d),t.exit("labelMarker"),t.exit("labelEnd"),a):n(d)}function a(d){return d===40?t.attempt($_,h,o?h:u)(d):d===91?t.attempt(j_,h,o?c:u)(d):o?h(d):u(d)}function c(d){return t.attempt(B_,h,u)(d)}function h(d){return e(d)}function u(d){return s._balanced=!0,n(d)}}function Y_(t,e,n){return i;function i(u){return t.enter("resource"),t.enter("resourceMarker"),t.consume(u),t.exit("resourceMarker"),r}function r(u){return Se(u)?ls(t,s)(u):s(u)}function s(u){return u===41?h(u):yw(t,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(u)}function o(u){return Se(u)?ls(t,a)(u):h(u)}function l(u){return n(u)}function a(u){return u===34||u===39||u===40?ww(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(u):h(u)}function c(u){return Se(u)?ls(t,h)(u):h(u)}function h(u){return u===41?(t.enter("resourceMarker"),t.consume(u),t.exit("resourceMarker"),t.exit("resource"),e):n(u)}}function K_(t,e,n){const i=this;return r;function r(l){return vw.call(i,t,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return i.parser.defined.includes(Qt(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function o(l){return n(l)}}function G_(t,e,n){return i;function i(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),r}function r(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const q_={name:"labelStartImage",resolveAll:nd.resolveAll,tokenize:Q_};function Q_(t,e,n){const i=this;return r;function r(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),s}function s(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(l):e(l)}}const X_={name:"labelStartLink",resolveAll:nd.resolveAll,tokenize:J_};function J_(t,e,n){const i=this;return r;function r(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(o):e(o)}}const dc={name:"lineEnding",tokenize:Z_};function Z_(t,e){return n;function n(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),de(t,e,"linePrefix")}}const Ho={name:"thematicBreak",tokenize:eA};function eA(t,e,n){let i=0,r;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return r=c,l(c)}function l(c){return c===r?(t.enter("thematicBreakSequence"),a(c)):i>=3&&(c===null||ee(c))?(t.exit("thematicBreak"),e(c)):n(c)}function a(c){return c===r?(t.consume(c),i++,a):(t.exit("thematicBreakSequence"),ue(c)?de(t,l,"whitespace")(c):l(c))}}const pt={continuation:{tokenize:rA},exit:oA,name:"list",tokenize:iA},tA={partial:!0,tokenize:lA},nA={partial:!0,tokenize:sA};function iA(t,e,n){const i=this,r=i.events[i.events.length-1];let s=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,o=0;return l;function l(f){const p=i.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!i.containerState.marker||f===i.containerState.marker:Du(f)){if(i.containerState.type||(i.containerState.type=p,t.enter(p,{_container:!0})),p==="listUnordered")return t.enter("listItemPrefix"),f===42||f===45?t.check(Ho,n,c)(f):c(f);if(!i.interrupt||f===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),a(f)}return n(f)}function a(f){return Du(f)&&++o<10?(t.consume(f),a):(!i.interrupt||o<2)&&(i.containerState.marker?f===i.containerState.marker:f===41||f===46)?(t.exit("listItemValue"),c(f)):n(f)}function c(f){return t.enter("listItemMarker"),t.consume(f),t.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||f,t.check(Ws,i.interrupt?n:h,t.attempt(tA,d,u))}function h(f){return i.containerState.initialBlankLine=!0,s++,d(f)}function u(f){return ue(f)?(t.enter("listItemPrefixWhitespace"),t.consume(f),t.exit("listItemPrefixWhitespace"),d):n(f)}function d(f){return i.containerState.size=s+i.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(f)}}function rA(t,e,n){const i=this;return i.containerState._closeFlow=void 0,t.check(Ws,r,s);function r(l){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,de(t,e,"listItemIndent",i.containerState.size+1)(l)}function s(l){return i.containerState.furtherBlankLines||!ue(l)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,o(l)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,t.attempt(nA,e,o)(l))}function o(l){return i.containerState._closeFlow=!0,i.interrupt=void 0,de(t,t.attempt(pt,e,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function sA(t,e,n){const i=this;return de(t,r,"listItemIndent",i.containerState.size+1);function r(s){const o=i.events[i.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===i.containerState.size?e(s):n(s)}}function oA(t){t.exit(this.containerState.type)}function lA(t,e,n){const i=this;return de(t,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(s){const o=i.events[i.events.length-1];return!ue(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const rm={name:"setextUnderline",resolveTo:aA,tokenize:cA};function aA(t,e){let n=t.length,i,r,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){i=n;break}t[n][1].type==="paragraph"&&(r=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[i][1].start},end:{...t[t.length-1][1].end}};return t[r][1].type="setextHeadingText",s?(t.splice(r,0,["enter",o,e]),t.splice(s+1,0,["exit",t[i][1],e]),t[i][1].end={...t[s][1].end}):t[i][1]=o,t.push(["exit",o,e]),t}function cA(t,e,n){const i=this;let r;return s;function s(c){let h=i.events.length,u;for(;h--;)if(i.events[h][1].type!=="lineEnding"&&i.events[h][1].type!=="linePrefix"&&i.events[h][1].type!=="content"){u=i.events[h][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||u)?(t.enter("setextHeadingLine"),r=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),l(c)}function l(c){return c===r?(t.consume(c),l):(t.exit("setextHeadingLineSequence"),ue(c)?de(t,a,"lineSuffix")(c):a(c))}function a(c){return c===null||ee(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const uA={tokenize:hA};function hA(t){const e=this,n=t.attempt(Ws,i,t.attempt(this.parser.constructs.flowInitial,r,de(t,t.attempt(this.parser.constructs.flow,r,t.attempt(g_,r)),"linePrefix")));return n;function i(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function r(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const dA={resolveAll:xw()},fA=Sw("string"),pA=Sw("text");function Sw(t){return{resolveAll:xw(t==="text"?mA:void 0),tokenize:e};function e(n){const i=this,r=this.parser.constructs[t],s=n.attempt(r,o,l);return o;function o(h){return c(h)?s(h):l(h)}function l(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),a}function a(h){return c(h)?(n.exit("data"),s(h)):(n.consume(h),a)}function c(h){if(h===null)return!0;const u=r[h];let d=-1;if(u)for(;++d<u.length;){const f=u[d];if(!f.previous||f.previous.call(i,i.previous))return!0}return!1}}}function xw(t){return e;function e(n,i){let r=-1,s;for(;++r<=n.length;)s===void 0?n[r]&&n[r][1].type==="data"&&(s=r,r++):(!n[r]||n[r][1].type!=="data")&&(r!==s+2&&(n[s][1].end=n[r-1][1].end,n.splice(s+2,r-s-2),r=s+2),s=void 0);return t?t(n,i):n}}function mA(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const i=t[n-1][1],r=e.sliceStream(i);let s=r.length,o=-1,l=0,a;for(;s--;){const c=r[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(c===-2)a=!0,l++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const c={type:n===t.length||a||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:i.start._bufferIndex+o,_index:i.start._index+s,line:i.end.line,column:i.end.column-l,offset:i.end.offset-l},end:{...i.end}};i.end={...c.start},i.start.offset===i.end.offset?Object.assign(i,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const gA={42:pt,43:pt,45:pt,48:pt,49:pt,50:pt,51:pt,52:pt,53:pt,54:pt,55:pt,56:pt,57:pt,62:fw},yA={91:x_},vA={[-2]:hc,[-1]:hc,32:hc},wA={35:__,42:Ho,45:[rm,Ho],60:N_,61:rm,95:Ho,96:nm,126:nm},SA={38:mw,92:pw},xA={[-5]:dc,[-4]:dc,[-3]:dc,33:q_,38:mw,42:Ou,60:[XT,z_],91:X_,92:[E_,pw],93:nd,95:Ou,96:u_},CA={null:[Ou,dA]},bA={null:[42,95]},kA={null:[]},EA=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:bA,contentInitial:yA,disable:kA,document:gA,flow:wA,flowInitial:vA,insideSpan:CA,string:SA,text:xA},Symbol.toStringTag,{value:"Module"}));function TA(t,e,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},s=[];let o=[],l=[];const a={attempt:P(A),check:P(E),consume:y,enter:w,exit:b,interrupt:P(E,{interrupt:!0})},c={code:null,containerState:{},defineSkip:g,events:[],now:p,parser:t,previous:null,sliceSerialize:d,sliceStream:f,write:u};let h=e.tokenize.call(c,a);return e.resolveAll&&s.push(e),c;function u(j){return o=Ft(o,j),S(),o[o.length-1]!==null?[]:(R(e,0),c.events=oa(s,c.events,c),c.events)}function d(j,B){return AA(f(j),B)}function f(j){return _A(o,j)}function p(){const{_bufferIndex:j,_index:B,line:J,column:Z,offset:X}=i;return{_bufferIndex:j,_index:B,line:J,column:Z,offset:X}}function g(j){r[j.line]=j.column,_()}function S(){let j;for(;i._index<o.length;){const B=o[i._index];if(typeof B=="string")for(j=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===j&&i._bufferIndex<B.length;)m(B.charCodeAt(i._bufferIndex));else m(B)}}function m(j){h=h(j)}function y(j){ee(j)?(i.line++,i.column=1,i.offset+=j===-3?2:1,_()):j!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===o[i._index].length&&(i._bufferIndex=-1,i._index++)),c.previous=j}function w(j,B){const J=B||{};return J.type=j,J.start=p(),c.events.push(["enter",J,c]),l.push(J),J}function b(j){const B=l.pop();return B.end=p(),c.events.push(["exit",B,c]),B}function A(j,B){R(j,B.from)}function E(j,B){B.restore()}function P(j,B){return J;function J(Z,X,te){let se,$,z,C;return Array.isArray(Z)?U(Z):"tokenize"in Z?U([Z]):N(Z);function N(K){return O;function O(F){const oe=F!==null&&K[F],fe=F!==null&&K.null,Vt=[...Array.isArray(oe)?oe:oe?[oe]:[],...Array.isArray(fe)?fe:fe?[fe]:[]];return U(Vt)(F)}}function U(K){return se=K,$=0,K.length===0?te:x(K[$])}function x(K){return O;function O(F){return C=D(),z=K,K.partial||(c.currentConstruct=K),K.name&&c.parser.constructs.disable.null.includes(K.name)?re():K.tokenize.call(B?Object.assign(Object.create(c),B):c,a,G,re)(F)}}function G(K){return j(z,C),X}function re(K){return C.restore(),++$<se.length?x(se[$]):te}}}function R(j,B){j.resolveAll&&!s.includes(j)&&s.push(j),j.resolve&&Rt(c.events,B,c.events.length-B,j.resolve(c.events.slice(B),c)),j.resolveTo&&(c.events=j.resolveTo(c.events,c))}function D(){const j=p(),B=c.previous,J=c.currentConstruct,Z=c.events.length,X=Array.from(l);return{from:Z,restore:te};function te(){i=j,c.previous=B,c.currentConstruct=J,c.events.length=Z,l=X,_()}}function _(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function _A(t,e){const n=e.start._index,i=e.start._bufferIndex,r=e.end._index,s=e.end._bufferIndex;let o;if(n===r)o=[t[n].slice(i,s)];else{if(o=t.slice(n,r),i>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(i):o.shift()}s>0&&o.push(t[r].slice(0,s))}return o}function AA(t,e){let n=-1;const i=[];let r;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&r)continue;o=" ";break}default:o=String.fromCharCode(s)}r=s===-2,i.push(o)}return i.join("")}function PA(t){const i={constructs:hw([EA,...(t||{}).extensions||[]]),content:r(HT),defined:[],document:r(YT),flow:r(uA),lazy:{},string:r(fA),text:r(pA)};return i;function r(s){return o;function o(l){return TA(i,s,l)}}}function RA(t){for(;!gw(t););return t}const sm=/[\0\t\n\r]/g;function NA(){let t=1,e="",n=!0,i;return r;function r(s,o,l){const a=[];let c,h,u,d,f;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),u=0,e="",n&&(s.charCodeAt(0)===65279&&u++,n=void 0);u<s.length;){if(sm.lastIndex=u,c=sm.exec(s),d=c&&c.index!==void 0?c.index:s.length,f=s.charCodeAt(d),!c){e=s.slice(u);break}if(f===10&&u===d&&i)a.push(-3),i=void 0;else switch(i&&(a.push(-5),i=void 0),u<d&&(a.push(s.slice(u,d)),t+=d-u),f){case 0:{a.push(65533),t++;break}case 9:{for(h=Math.ceil(t/4)*4,a.push(-2);t++<h;)a.push(-1);break}case 10:{a.push(-4),t=1;break}default:i=!0,t=1}u=d+1}return l&&(i&&a.push(-5),e&&a.push(e),a.push(null)),a}}const IA=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function MA(t){return t.replace(IA,DA)}function DA(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const r=n.charCodeAt(1),s=r===120||r===88;return dw(n.slice(s?2:1),s?16:10)}return td(n)||t}const Cw={}.hasOwnProperty;function OA(t,e,n){return typeof e!="string"&&(n=e,e=void 0),LA(n)(RA(PA(n).document().write(NA()(t,e,!0))))}function LA(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ti),autolinkProtocol:D,autolinkEmail:D,atxHeading:s(Ks),blockQuote:s(fe),characterEscape:D,characterReference:D,codeFenced:s(Vt),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Vt,o),codeText:s(Ri,o),codeTextData:D,data:D,codeFlowValue:D,definition:s(ua),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(ha),hardBreakEscape:s(ei),hardBreakTrailing:s(ei),htmlFlow:s(Gs,o),htmlFlowData:D,htmlText:s(Gs,o),htmlTextData:D,image:s(_r),label:o,link:s(ti),listItem:s(Ar),listItemValue:d,listOrdered:s(Ni,u),listUnordered:s(Ni),paragraph:s(Pr),reference:x,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Ks),strong:s(da),thematicBreak:s(Qs)},exit:{atxHeading:a(),atxHeadingSequence:A,autolink:a(),autolinkEmail:oe,autolinkProtocol:F,blockQuote:a(),characterEscapeValue:_,characterReferenceMarkerHexadecimal:re,characterReferenceMarkerNumeric:re,characterReferenceValue:K,characterReference:O,codeFenced:a(S),codeFencedFence:g,codeFencedFenceInfo:f,codeFencedFenceMeta:p,codeFlowValue:_,codeIndented:a(m),codeText:a(X),codeTextData:_,data:_,definition:a(),definitionDestinationString:b,definitionLabelString:y,definitionTitleString:w,emphasis:a(),hardBreakEscape:a(B),hardBreakTrailing:a(B),htmlFlow:a(J),htmlFlowData:_,htmlText:a(Z),htmlTextData:_,image:a(se),label:z,labelText:$,lineEnding:j,link:a(te),listItem:a(),listOrdered:a(),listUnordered:a(),paragraph:a(),referenceString:G,resourceDestinationString:C,resourceTitleString:N,resource:U,setextHeading:a(R),setextHeadingLineSequence:P,setextHeadingText:E,strong:a(),thematicBreak:a()}};bw(e,(t||{}).mdastExtensions||[]);const n={};return i;function i(M){let Y={type:"root",children:[]};const ne={stack:[Y],tokenStack:[],config:e,enter:l,exit:c,buffer:o,resume:h,data:n},ce=[];let ge=-1;for(;++ge<M.length;)if(M[ge][1].type==="listOrdered"||M[ge][1].type==="listUnordered")if(M[ge][0]==="enter")ce.push(ge);else{const Ae=ce.pop();ge=r(M,Ae,ge)}for(ge=-1;++ge<M.length;){const Ae=e[M[ge][0]];Cw.call(Ae,M[ge][1].type)&&Ae[M[ge][1].type].call(Object.assign({sliceSerialize:M[ge][2].sliceSerialize},ne),M[ge][1])}if(ne.tokenStack.length>0){const Ae=ne.tokenStack[ne.tokenStack.length-1];(Ae[1]||om).call(ne,void 0,Ae[0])}for(Y.position={start:Pn(M.length>0?M[0][1].start:{line:1,column:1,offset:0}),end:Pn(M.length>0?M[M.length-2][1].end:{line:1,column:1,offset:0})},ge=-1;++ge<e.transforms.length;)Y=e.transforms[ge](Y)||Y;return Y}function r(M,Y,ne){let ce=Y-1,ge=-1,Ae=!1,ze,Pe,Zt,Ue;for(;++ce<=ne;){const Re=M[ce];switch(Re[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Re[0]==="enter"?ge++:ge--,Ue=void 0;break}case"lineEndingBlank":{Re[0]==="enter"&&(ze&&!Ue&&!ge&&!Zt&&(Zt=ce),Ue=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ue=void 0}if(!ge&&Re[0]==="enter"&&Re[1].type==="listItemPrefix"||ge===-1&&Re[0]==="exit"&&(Re[1].type==="listUnordered"||Re[1].type==="listOrdered")){if(ze){let en=ce;for(Pe=void 0;en--;){const Dt=M[en];if(Dt[1].type==="lineEnding"||Dt[1].type==="lineEndingBlank"){if(Dt[0]==="exit")continue;Pe&&(M[Pe][1].type="lineEndingBlank",Ae=!0),Dt[1].type="lineEnding",Pe=en}else if(!(Dt[1].type==="linePrefix"||Dt[1].type==="blockQuotePrefix"||Dt[1].type==="blockQuotePrefixWhitespace"||Dt[1].type==="blockQuoteMarker"||Dt[1].type==="listItemIndent"))break}Zt&&(!Pe||Zt<Pe)&&(ze._spread=!0),ze.end=Object.assign({},Pe?M[Pe][1].start:Re[1].end),M.splice(Pe||ce,0,["exit",ze,Re[2]]),ce++,ne++}if(Re[1].type==="listItemPrefix"){const en={type:"listItem",_spread:!1,start:Object.assign({},Re[1].start),end:void 0};ze=en,M.splice(ce,0,["enter",en,Re[2]]),ce++,ne++,Zt=void 0,Ue=!0}}}return M[Y][1]._spread=Ae,ne}function s(M,Y){return ne;function ne(ce){l.call(this,M(ce),ce),Y&&Y.call(this,ce)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(M,Y,ne){this.stack[this.stack.length-1].children.push(M),this.stack.push(M),this.tokenStack.push([Y,ne||void 0]),M.position={start:Pn(Y.start),end:void 0}}function a(M){return Y;function Y(ne){M&&M.call(this,ne),c.call(this,ne)}}function c(M,Y){const ne=this.stack.pop(),ce=this.tokenStack.pop();if(ce)ce[0].type!==M.type&&(Y?Y.call(this,M,ce[0]):(ce[1]||om).call(this,M,ce[0]));else throw new Error("Cannot close `"+M.type+"` ("+os({start:M.start,end:M.end})+"): its not open");ne.position.end=Pn(M.end)}function h(){return ed(this.stack.pop())}function u(){this.data.expectingFirstListItemValue=!0}function d(M){if(this.data.expectingFirstListItemValue){const Y=this.stack[this.stack.length-2];Y.start=Number.parseInt(this.sliceSerialize(M),10),this.data.expectingFirstListItemValue=void 0}}function f(){const M=this.resume(),Y=this.stack[this.stack.length-1];Y.lang=M}function p(){const M=this.resume(),Y=this.stack[this.stack.length-1];Y.meta=M}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function S(){const M=this.resume(),Y=this.stack[this.stack.length-1];Y.value=M.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function m(){const M=this.resume(),Y=this.stack[this.stack.length-1];Y.value=M.replace(/(\r?\n|\r)$/g,"")}function y(M){const Y=this.resume(),ne=this.stack[this.stack.length-1];ne.label=Y,ne.identifier=Qt(this.sliceSerialize(M)).toLowerCase()}function w(){const M=this.resume(),Y=this.stack[this.stack.length-1];Y.title=M}function b(){const M=this.resume(),Y=this.stack[this.stack.length-1];Y.url=M}function A(M){const Y=this.stack[this.stack.length-1];if(!Y.depth){const ne=this.sliceSerialize(M).length;Y.depth=ne}}function E(){this.data.setextHeadingSlurpLineEnding=!0}function P(M){const Y=this.stack[this.stack.length-1];Y.depth=this.sliceSerialize(M).codePointAt(0)===61?1:2}function R(){this.data.setextHeadingSlurpLineEnding=void 0}function D(M){const ne=this.stack[this.stack.length-1].children;let ce=ne[ne.length-1];(!ce||ce.type!=="text")&&(ce=qs(),ce.position={start:Pn(M.start),end:void 0},ne.push(ce)),this.stack.push(ce)}function _(M){const Y=this.stack.pop();Y.value+=this.sliceSerialize(M),Y.position.end=Pn(M.end)}function j(M){const Y=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ne=Y.children[Y.children.length-1];ne.position.end=Pn(M.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Y.type)&&(D.call(this,M),_.call(this,M))}function B(){this.data.atHardBreak=!0}function J(){const M=this.resume(),Y=this.stack[this.stack.length-1];Y.value=M}function Z(){const M=this.resume(),Y=this.stack[this.stack.length-1];Y.value=M}function X(){const M=this.resume(),Y=this.stack[this.stack.length-1];Y.value=M}function te(){const M=this.stack[this.stack.length-1];if(this.data.inReference){const Y=this.data.referenceType||"shortcut";M.type+="Reference",M.referenceType=Y,delete M.url,delete M.title}else delete M.identifier,delete M.label;this.data.referenceType=void 0}function se(){const M=this.stack[this.stack.length-1];if(this.data.inReference){const Y=this.data.referenceType||"shortcut";M.type+="Reference",M.referenceType=Y,delete M.url,delete M.title}else delete M.identifier,delete M.label;this.data.referenceType=void 0}function $(M){const Y=this.sliceSerialize(M),ne=this.stack[this.stack.length-2];ne.label=MA(Y),ne.identifier=Qt(Y).toLowerCase()}function z(){const M=this.stack[this.stack.length-1],Y=this.resume(),ne=this.stack[this.stack.length-1];if(this.data.inReference=!0,ne.type==="link"){const ce=M.children;ne.children=ce}else ne.alt=Y}function C(){const M=this.resume(),Y=this.stack[this.stack.length-1];Y.url=M}function N(){const M=this.resume(),Y=this.stack[this.stack.length-1];Y.title=M}function U(){this.data.inReference=void 0}function x(){this.data.referenceType="collapsed"}function G(M){const Y=this.resume(),ne=this.stack[this.stack.length-1];ne.label=Y,ne.identifier=Qt(this.sliceSerialize(M)).toLowerCase(),this.data.referenceType="full"}function re(M){this.data.characterReferenceType=M.type}function K(M){const Y=this.sliceSerialize(M),ne=this.data.characterReferenceType;let ce;ne?(ce=dw(Y,ne==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ce=td(Y);const ge=this.stack[this.stack.length-1];ge.value+=ce}function O(M){const Y=this.stack.pop();Y.position.end=Pn(M.end)}function F(M){_.call(this,M);const Y=this.stack[this.stack.length-1];Y.url=this.sliceSerialize(M)}function oe(M){_.call(this,M);const Y=this.stack[this.stack.length-1];Y.url="mailto:"+this.sliceSerialize(M)}function fe(){return{type:"blockquote",children:[]}}function Vt(){return{type:"code",lang:null,meta:null,value:""}}function Ri(){return{type:"inlineCode",value:""}}function ua(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ha(){return{type:"emphasis",children:[]}}function Ks(){return{type:"heading",depth:0,children:[]}}function ei(){return{type:"break"}}function Gs(){return{type:"html",value:""}}function _r(){return{type:"image",title:null,url:"",alt:null}}function ti(){return{type:"link",title:null,url:"",children:[]}}function Ni(M){return{type:"list",ordered:M.type==="listOrdered",start:null,spread:M._spread,children:[]}}function Ar(M){return{type:"listItem",spread:M._spread,checked:null,children:[]}}function Pr(){return{type:"paragraph",children:[]}}function da(){return{type:"strong",children:[]}}function qs(){return{type:"text",value:""}}function Qs(){return{type:"thematicBreak"}}}function Pn(t){return{line:t.line,column:t.column,offset:t.offset}}function bw(t,e){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?bw(t,i):FA(t,i)}}function FA(t,e){let n;for(n in e)if(Cw.call(e,n))switch(n){case"canContainEols":{const i=e[n];i&&t[n].push(...i);break}case"transforms":{const i=e[n];i&&t[n].push(...i);break}case"enter":case"exit":{const i=e[n];i&&Object.assign(t[n],i);break}}}function om(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+os({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+os({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+os({start:e.start,end:e.end})+") is still open")}function zA(t){const e=this;e.parser=n;function n(i){return OA(i,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function UA(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function $A(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function jA(t,e){const n=e.value?e.value+`
`:"",i={};e.lang&&(i.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return e.meta&&(r.data={meta:e.meta}),t.patch(e,r),r=t.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},t.patch(e,r),r}function BA(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function VA(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function HA(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=Tr(i.toLowerCase()),s=t.footnoteOrder.indexOf(i);let o,l=t.footnoteCounts.get(i);l===void 0?(l=0,t.footnoteOrder.push(i),o=t.footnoteOrder.length):o=s+1,l+=1,t.footnoteCounts.set(i,l);const a={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,a);const c={type:"element",tagName:"sup",properties:{},children:[a]};return t.patch(e,c),t.applyData(e,c)}function WA(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function YA(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function kw(t,e){const n=e.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const r=t.all(e),s=r[0];s&&s.type==="text"?s.value="["+s.value:r.unshift({type:"text",value:"["});const o=r[r.length-1];return o&&o.type==="text"?o.value+=i:r.push({type:"text",value:i}),r}function KA(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return kw(t,e);const r={src:Tr(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,s),t.applyData(e,s)}function GA(t,e){const n={src:Tr(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,i),t.applyData(e,i)}function qA(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,i),t.applyData(e,i)}function QA(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return kw(t,e);const r={href:Tr(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function XA(t,e){const n={href:Tr(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function JA(t,e,n){const i=t.all(e),r=n?ZA(n):Ew(e),s={},o=[];if(typeof e.checked=="boolean"){const h=i[0];let u;h&&h.type==="element"&&h.tagName==="p"?u=h:(u={type:"element",tagName:"p",properties:{},children:[]},i.unshift(u)),u.children.length>0&&u.children.unshift({type:"text",value:" "}),u.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<i.length;){const h=i[l];(r||l!==0||h.type!=="element"||h.tagName!=="p")&&o.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!r?o.push(...h.children):o.push(h)}const a=i[i.length-1];a&&(r||a.type!=="element"||a.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,c),t.applyData(e,c)}function ZA(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let i=-1;for(;!e&&++i<n.length;)e=Ew(n[i])}return e}function Ew(t){const e=t.spread;return e??t.children.length>1}function eP(t,e){const n={},i=t.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++r<i.length;){const o=i[r];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function tP(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function nP(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function iP(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function rP(t,e){const n=t.all(e),i=n.shift(),r=[];if(i){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([i],!0)};t.patch(e.children[0],o),r.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},l=Qh(e.children[1]),a=rw(e.children[e.children.length-1]);l&&a&&(o.position={start:l,end:a}),r.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function sP(t,e,n){const i=n?n.children:void 0,s=(i?i.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:e.children.length;let a=-1;const c=[];for(;++a<l;){const u=e.children[a],d={},f=o?o[a]:void 0;f&&(d.align=f);let p={type:"element",tagName:s,properties:d,children:[]};u&&(p.children=t.all(u),t.patch(u,p),p=t.applyData(u,p)),c.push(p)}const h={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,h),t.applyData(e,h)}function oP(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const lm=9,am=32;function lP(t){const e=String(t),n=/\r?\n|\r/g;let i=n.exec(e),r=0;const s=[];for(;i;)s.push(cm(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=n.exec(e);return s.push(cm(e.slice(r),r>0,!1)),s.join("")}function cm(t,e,n){let i=0,r=t.length;if(e){let s=t.codePointAt(i);for(;s===lm||s===am;)i++,s=t.codePointAt(i)}if(n){let s=t.codePointAt(r-1);for(;s===lm||s===am;)r--,s=t.codePointAt(r-1)}return r>i?t.slice(i,r):""}function aP(t,e){const n={type:"text",value:lP(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function cP(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const uP={blockquote:UA,break:$A,code:jA,delete:BA,emphasis:VA,footnoteReference:HA,heading:WA,html:YA,imageReference:KA,image:GA,inlineCode:qA,linkReference:QA,link:XA,listItem:JA,list:eP,paragraph:tP,root:nP,strong:iP,table:rP,tableCell:oP,tableRow:sP,text:aP,thematicBreak:cP,toml:bo,yaml:bo,definition:bo,footnoteDefinition:bo};function bo(){}const Tw=-1,la=0,as=1,El=2,id=3,rd=4,sd=5,od=6,_w=7,Aw=8,um=typeof self=="object"?self:globalThis,hP=(t,e)=>{const n=(r,s)=>(t.set(s,r),r),i=r=>{if(t.has(r))return t.get(r);const[s,o]=e[r];switch(s){case la:case Tw:return n(o,r);case as:{const l=n([],r);for(const a of o)l.push(i(a));return l}case El:{const l=n({},r);for(const[a,c]of o)l[i(a)]=i(c);return l}case id:return n(new Date(o),r);case rd:{const{source:l,flags:a}=o;return n(new RegExp(l,a),r)}case sd:{const l=n(new Map,r);for(const[a,c]of o)l.set(i(a),i(c));return l}case od:{const l=n(new Set,r);for(const a of o)l.add(i(a));return l}case _w:{const{name:l,message:a}=o;return n(new um[l](a),r)}case Aw:return n(BigInt(o),r);case"BigInt":return n(Object(BigInt(o)),r);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new um[s](o),r)};return i},hm=t=>hP(new Map,t)(0),Oi="",{toString:dP}={},{keys:fP}=Object,Br=t=>{const e=typeof t;if(e!=="object"||!t)return[la,e];const n=dP.call(t).slice(8,-1);switch(n){case"Array":return[as,Oi];case"Object":return[El,Oi];case"Date":return[id,Oi];case"RegExp":return[rd,Oi];case"Map":return[sd,Oi];case"Set":return[od,Oi];case"DataView":return[as,n]}return n.includes("Array")?[as,n]:n.includes("Error")?[_w,n]:[El,n]},ko=([t,e])=>t===la&&(e==="function"||e==="symbol"),pP=(t,e,n,i)=>{const r=(o,l)=>{const a=i.push(o)-1;return n.set(l,a),a},s=o=>{if(n.has(o))return n.get(o);let[l,a]=Br(o);switch(l){case la:{let h=o;switch(a){case"bigint":l=Aw,h=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+a);h=null;break;case"undefined":return r([Tw],o)}return r([l,h],o)}case as:{if(a){let d=o;return a==="DataView"?d=new Uint8Array(o.buffer):a==="ArrayBuffer"&&(d=new Uint8Array(o)),r([a,[...d]],o)}const h=[],u=r([l,h],o);for(const d of o)h.push(s(d));return u}case El:{if(a)switch(a){case"BigInt":return r([a,o.toString()],o);case"Boolean":case"Number":case"String":return r([a,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const h=[],u=r([l,h],o);for(const d of fP(o))(t||!ko(Br(o[d])))&&h.push([s(d),s(o[d])]);return u}case id:return r([l,o.toISOString()],o);case rd:{const{source:h,flags:u}=o;return r([l,{source:h,flags:u}],o)}case sd:{const h=[],u=r([l,h],o);for(const[d,f]of o)(t||!(ko(Br(d))||ko(Br(f))))&&h.push([s(d),s(f)]);return u}case od:{const h=[],u=r([l,h],o);for(const d of o)(t||!ko(Br(d)))&&h.push(s(d));return u}}const{message:c}=o;return r([l,{name:a,message:c}],o)};return s},dm=(t,{json:e,lossy:n}={})=>{const i=[];return pP(!(e||n),!!e,new Map,i)(t),i},Tl=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?hm(dm(t,e)):structuredClone(t):(t,e)=>hm(dm(t,e));function mP(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function gP(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function yP(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||mP,i=t.options.footnoteBackLabel||gP,r=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let a=-1;for(;++a<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[a]);if(!c)continue;const h=t.all(c),u=String(c.identifier).toUpperCase(),d=Tr(u.toLowerCase());let f=0;const p=[],g=t.footnoteCounts.get(u);for(;g!==void 0&&++f<=g;){p.length>0&&p.push({type:"text",value:" "});let y=typeof n=="string"?n:n(a,f);typeof y=="string"&&(y={type:"text",value:y}),p.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+d+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(a,f),className:["data-footnote-backref"]},children:Array.isArray(y)?y:[y]})}const S=h[h.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const y=S.children[S.children.length-1];y&&y.type==="text"?y.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(...p)}else h.push(...p);const m={type:"element",tagName:"li",properties:{id:e+"fn-"+d},children:t.wrap(h,!0)};t.patch(c,m),l.push(m)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Tl(o),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const aa=function(t){if(t==null)return xP;if(typeof t=="function")return ca(t);if(typeof t=="object")return Array.isArray(t)?vP(t):wP(t);if(typeof t=="string")return SP(t);throw new Error("Expected function, string, or object as test")};function vP(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=aa(t[n]);return ca(i);function i(...r){let s=-1;for(;++s<e.length;)if(e[s].apply(this,r))return!0;return!1}}function wP(t){const e=t;return ca(n);function n(i){const r=i;let s;for(s in t)if(r[s]!==e[s])return!1;return!0}}function SP(t){return ca(e);function e(n){return n&&n.type===t}}function ca(t){return e;function e(n,i,r){return!!(CP(n)&&t.call(this,n,typeof i=="number"?i:void 0,r||void 0))}}function xP(){return!0}function CP(t){return t!==null&&typeof t=="object"&&"type"in t}const Pw=[],bP=!0,Lu=!1,kP="skip";function Rw(t,e,n,i){let r;typeof e=="function"&&typeof n!="function"?(i=n,n=e):r=e;const s=aa(r),o=i?-1:1;l(t,void 0,[])();function l(a,c,h){const u=a&&typeof a=="object"?a:{};if(typeof u.type=="string"){const f=typeof u.tagName=="string"?u.tagName:typeof u.name=="string"?u.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(a.type+(f?"<"+f+">":""))+")"})}return d;function d(){let f=Pw,p,g,S;if((!e||s(a,c,h[h.length-1]||void 0))&&(f=EP(n(a,h)),f[0]===Lu))return f;if("children"in a&&a.children){const m=a;if(m.children&&f[0]!==kP)for(g=(i?m.children.length:-1)+o,S=h.concat(m);g>-1&&g<m.children.length;){const y=m.children[g];if(p=l(y,g,S)(),p[0]===Lu)return p;g=typeof p[1]=="number"?p[1]:g+o}}return f}}}function EP(t){return Array.isArray(t)?t:typeof t=="number"?[bP,t]:t==null?Pw:[t]}function ld(t,e,n,i){let r,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,r=n):(s=e,o=n,r=i),Rw(t,s,l,r);function l(a,c){const h=c[c.length-1],u=h?h.children.indexOf(a):void 0;return o(a,u,h)}}const Fu={}.hasOwnProperty,TP={};function _P(t,e){const n=e||TP,i=new Map,r=new Map,s=new Map,o={...uP,...n.handlers},l={all:c,applyData:PP,definitionById:i,footnoteById:r,footnoteCounts:s,footnoteOrder:[],handlers:o,one:a,options:n,patch:AP,wrap:NP};return ld(t,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const u=h.type==="definition"?i:r,d=String(h.identifier).toUpperCase();u.has(d)||u.set(d,h)}}),l;function a(h,u){const d=h.type,f=l.handlers[d];if(Fu.call(l.handlers,d)&&f)return f(l,h,u);if(l.options.passThrough&&l.options.passThrough.includes(d)){if("children"in h){const{children:g,...S}=h,m=Tl(S);return m.children=l.all(h),m}return Tl(h)}return(l.options.unknownHandler||RP)(l,h,u)}function c(h){const u=[];if("children"in h){const d=h.children;let f=-1;for(;++f<d.length;){const p=l.one(d[f],h);if(p){if(f&&d[f-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=fm(p.value)),!Array.isArray(p)&&p.type==="element")){const g=p.children[0];g&&g.type==="text"&&(g.value=fm(g.value))}Array.isArray(p)?u.push(...p):u.push(p)}}}return u}}function AP(t,e){t.position&&(e.position=gT(t))}function PP(t,e){let n=e;if(t&&t.data){const i=t.data.hName,r=t.data.hChildren,s=t.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const o="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Tl(s)),"children"in n&&n.children&&r!==null&&r!==void 0&&(n.children=r)}return n}function RP(t,e){const n=e.data||{},i="value"in e&&!(Fu.call(n,"hProperties")||Fu.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function NP(t,e){const n=[];let i=-1;for(e&&n.push({type:"text",value:`
`});++i<t.length;)i&&n.push({type:"text",value:`
`}),n.push(t[i]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function fm(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function pm(t,e){const n=_P(t,e),i=n.one(t,void 0),r=yP(n),s=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&s.children.push({type:"text",value:`
`},r),s}function IP(t,e){return t&&"run"in t?async function(n,i){const r=pm(n,{file:i,...e});await t.run(r,i)}:function(n,i){return pm(n,{file:i,...t||e})}}function mm(t){if(t)throw t}var Wo=Object.prototype.hasOwnProperty,Nw=Object.prototype.toString,gm=Object.defineProperty,ym=Object.getOwnPropertyDescriptor,vm=function(e){return typeof Array.isArray=="function"?Array.isArray(e):Nw.call(e)==="[object Array]"},wm=function(e){if(!e||Nw.call(e)!=="[object Object]")return!1;var n=Wo.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&Wo.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!i)return!1;var r;for(r in e);return typeof r>"u"||Wo.call(e,r)},Sm=function(e,n){gm&&n.name==="__proto__"?gm(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},xm=function(e,n){if(n==="__proto__")if(Wo.call(e,n)){if(ym)return ym(e,n).value}else return;return e[n]},MP=function t(){var e,n,i,r,s,o,l=arguments[0],a=1,c=arguments.length,h=!1;for(typeof l=="boolean"&&(h=l,l=arguments[1]||{},a=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});a<c;++a)if(e=arguments[a],e!=null)for(n in e)i=xm(l,n),r=xm(e,n),l!==r&&(h&&r&&(wm(r)||(s=vm(r)))?(s?(s=!1,o=i&&vm(i)?i:[]):o=i&&wm(i)?i:{},Sm(l,{name:n,newValue:t(h,o,r)})):typeof r<"u"&&Sm(l,{name:n,newValue:r}));return l};const fc=Bu(MP);function zu(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function DP(){const t=[],e={run:n,use:i};return e;function n(...r){let s=-1;const o=r.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...r);function l(a,...c){const h=t[++s];let u=-1;if(a){o(a);return}for(;++u<r.length;)(c[u]===null||c[u]===void 0)&&(c[u]=r[u]);r=c,h?OP(h,l)(...c):o(null,...c)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return t.push(r),e}}function OP(t,e){let n;return i;function i(...o){const l=t.length>o.length;let a;l&&o.push(r);try{a=t.apply(this,o)}catch(c){const h=c;if(l&&n)throw h;return r(h)}l||(a&&a.then&&typeof a.then=="function"?a.then(s,r):a instanceof Error?r(a):s(a))}function r(o,...l){n||(n=!0,e(o,...l))}function s(o){r(null,o)}}const on={basename:LP,dirname:FP,extname:zP,join:UP,sep:"/"};function LP(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Ys(t);let n=0,i=-1,r=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;r--;)if(t.codePointAt(r)===47){if(s){n=r+1;break}}else i<0&&(s=!0,i=r+1);return i<0?"":t.slice(n,i)}if(e===t)return"";let o=-1,l=e.length-1;for(;r--;)if(t.codePointAt(r)===47){if(s){n=r+1;break}}else o<0&&(s=!0,o=r+1),l>-1&&(t.codePointAt(r)===e.codePointAt(l--)?l<0&&(i=r):(l=-1,i=o));return n===i?i=o:i<0&&(i=t.length),t.slice(n,i)}function FP(t){if(Ys(t),t.length===0)return".";let e=-1,n=t.length,i;for(;--n;)if(t.codePointAt(n)===47){if(i){e=n;break}}else i||(i=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function zP(t){Ys(t);let e=t.length,n=-1,i=0,r=-1,s=0,o;for(;e--;){const l=t.codePointAt(e);if(l===47){if(o){i=e+1;break}continue}n<0&&(o=!0,n=e+1),l===46?r<0?r=e:s!==1&&(s=1):r>-1&&(s=-1)}return r<0||n<0||s===0||s===1&&r===n-1&&r===i+1?"":t.slice(r,n)}function UP(...t){let e=-1,n;for(;++e<t.length;)Ys(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":$P(n)}function $P(t){Ys(t);const e=t.codePointAt(0)===47;let n=jP(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function jP(t,e){let n="",i=0,r=-1,s=0,o=-1,l,a;for(;++o<=t.length;){if(o<t.length)l=t.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(r===o-1||s===1))if(r!==o-1&&s===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(a=n.lastIndexOf("/"),a!==n.length-1){a<0?(n="",i=0):(n=n.slice(0,a),i=n.length-1-n.lastIndexOf("/")),r=o,s=0;continue}}else if(n.length>0){n="",i=0,r=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+t.slice(r+1,o):n=t.slice(r+1,o),i=o-r-1;r=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function Ys(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const BP={cwd:VP};function VP(){return"/"}function Uu(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function HP(t){if(typeof t=="string")t=new URL(t);else if(!Uu(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return WP(t)}function WP(t){if(t.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const i=e.codePointAt(n+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const pc=["history","path","basename","stem","extname","dirname"];class Iw{constructor(e){let n;e?Uu(e)?n={path:e}:typeof e=="string"||YP(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":BP.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<pc.length;){const s=pc[i];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let r;for(r in n)pc.includes(r)||(this[r]=n[r])}get basename(){return typeof this.path=="string"?on.basename(this.path):void 0}set basename(e){gc(e,"basename"),mc(e,"basename"),this.path=on.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?on.dirname(this.path):void 0}set dirname(e){Cm(this.basename,"dirname"),this.path=on.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?on.extname(this.path):void 0}set extname(e){if(mc(e,"extname"),Cm(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=on.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Uu(e)&&(e=HP(e)),gc(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?on.basename(this.path,this.extname):void 0}set stem(e){gc(e,"stem"),mc(e,"stem"),this.path=on.join(this.dirname||"",e+(this.extname||""))}fail(e,n,i){const r=this.message(e,n,i);throw r.fatal=!0,r}info(e,n,i){const r=this.message(e,n,i);return r.fatal=void 0,r}message(e,n,i){const r=new ot(e,n,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function mc(t,e){if(t&&t.includes(on.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+on.sep+"`")}function gc(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Cm(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function YP(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const KP=function(t){const i=this.constructor.prototype,r=i[t],s=function(){return r.apply(s,arguments)};return Object.setPrototypeOf(s,i),s},GP={}.hasOwnProperty;class ad extends KP{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=DP()}copy(){const e=new ad;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];e.use(...i)}return e.data(fc(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(wc("data",this.frozen),this.namespace[e]=n,this):GP.call(this.namespace,e)&&this.namespace[e]||void 0:e?(wc("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=n.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Eo(e),i=this.parser||this.Parser;return yc("parse",i),i(String(n),n)}process(e,n){const i=this;return this.freeze(),yc("process",this.parser||this.Parser),vc("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(s,o){const l=Eo(e),a=i.parse(l);i.run(a,l,function(h,u,d){if(h||!u||!d)return c(h);const f=u,p=i.stringify(f,d);XP(p)?d.value=p:d.result=p,c(h,d)});function c(h,u){h||!u?o(h):s?s(u):n(void 0,u)}}}processSync(e){let n=!1,i;return this.freeze(),yc("processSync",this.parser||this.Parser),vc("processSync",this.compiler||this.Compiler),this.process(e,r),km("processSync","process",n),i;function r(s,o){n=!0,mm(s),i=o}}run(e,n,i){bm(e),this.freeze();const r=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?s(void 0,i):new Promise(s);function s(o,l){const a=Eo(n);r.run(e,a,c);function c(h,u,d){const f=u||e;h?l(h):o?o(f):i(void 0,f,d)}}}runSync(e,n){let i=!1,r;return this.run(e,n,s),km("runSync","run",i),r;function s(o,l){mm(o),r=l,i=!0}}stringify(e,n){this.freeze();const i=Eo(n),r=this.compiler||this.Compiler;return vc("stringify",r),bm(e),r(e,i)}use(e,...n){const i=this.attachers,r=this.namespace;if(wc("use",this.frozen),e!=null)if(typeof e=="function")a(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")a(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[h,...u]=c;a(h,u)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(c.plugins),c.settings&&(r.settings=fc(!0,r.settings,c.settings))}function l(c){let h=-1;if(c!=null)if(Array.isArray(c))for(;++h<c.length;){const u=c[h];s(u)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function a(c,h){let u=-1,d=-1;for(;++u<i.length;)if(i[u][0]===c){d=u;break}if(d===-1)i.push([c,...h]);else if(h.length>0){let[f,...p]=h;const g=i[d][1];zu(g)&&zu(f)&&(f=fc(!0,g,f)),i[d]=[c,f,...p]}}}}const qP=new ad().freeze();function yc(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function vc(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function wc(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function bm(t){if(!zu(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function km(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Eo(t){return QP(t)?t:new Iw(t)}function QP(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function XP(t){return typeof t=="string"||JP(t)}function JP(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const ZP="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Em=[],Tm={allowDangerousHtml:!0},eR=/^(https?|ircs?|mailto|xmpp)$/i,tR=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function nR(t){const e=iR(t),n=rR(t);return sR(e.runSync(e.parse(n),n),t)}function iR(t){const e=t.rehypePlugins||Em,n=t.remarkPlugins||Em,i=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...Tm}:Tm;return qP().use(zA).use(n).use(IP,i).use(e)}function rR(t){const e=t.children||"",n=new Iw;return typeof e=="string"&&(n.value=e),n}function sR(t,e){const n=e.allowedElements,i=e.allowElement,r=e.components,s=e.disallowedElements,o=e.skipHtml,l=e.unwrapDisallowed,a=e.urlTransform||oR;for(const h of tR)Object.hasOwn(e,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+ZP+h.id,void 0);return ld(t,c),xT(t,{Fragment:v.Fragment,components:r,ignoreInvalidStyle:!0,jsx:v.jsx,jsxs:v.jsxs,passKeys:!0,passNode:!0});function c(h,u,d){if(h.type==="raw"&&d&&typeof u=="number")return o?d.children.splice(u,1):d.children[u]={type:"text",value:h.value},u;if(h.type==="element"){let f;for(f in uc)if(Object.hasOwn(uc,f)&&Object.hasOwn(h.properties,f)){const p=h.properties[f],g=uc[f];(g===null||g.includes(h.tagName))&&(h.properties[f]=a(String(p||""),f,h))}}if(h.type==="element"){let f=n?!n.includes(h.tagName):s?s.includes(h.tagName):!1;if(!f&&i&&typeof u=="number"&&(f=!i(h,u,d)),f&&d&&typeof u=="number")return l&&h.children?d.children.splice(u,1,...h.children):d.children.splice(u,1),u}}}function oR(t){const e=t.indexOf(":"),n=t.indexOf("?"),i=t.indexOf("#"),r=t.indexOf("/");return e===-1||r!==-1&&e>r||n!==-1&&e>n||i!==-1&&e>i||eR.test(t.slice(0,e))?t:""}function _m(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let i=0,r=n.indexOf(e);for(;r!==-1;)i++,r=n.indexOf(e,r+e.length);return i}function lR(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function aR(t,e,n){const r=aa((n||{}).ignore||[]),s=cR(e);let o=-1;for(;++o<s.length;)Rw(t,"text",l);function l(c,h){let u=-1,d;for(;++u<h.length;){const f=h[u],p=d?d.children:void 0;if(r(f,p?p.indexOf(f):void 0,d))return;d=f}if(d)return a(c,h)}function a(c,h){const u=h[h.length-1],d=s[o][0],f=s[o][1];let p=0;const S=u.children.indexOf(c);let m=!1,y=[];d.lastIndex=0;let w=d.exec(c.value);for(;w;){const b=w.index,A={index:w.index,input:w.input,stack:[...h,c]};let E=f(...w,A);if(typeof E=="string"&&(E=E.length>0?{type:"text",value:E}:void 0),E===!1?d.lastIndex=b+1:(p!==b&&y.push({type:"text",value:c.value.slice(p,b)}),Array.isArray(E)?y.push(...E):E&&y.push(E),p=b+w[0].length,m=!0),!d.global)break;w=d.exec(c.value)}return m?(p<c.value.length&&y.push({type:"text",value:c.value.slice(p)}),u.children.splice(S,1,...y)):y=[c],S+y.length}}function cR(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let i=-1;for(;++i<n.length;){const r=n[i];e.push([uR(r[0]),hR(r[1])])}return e}function uR(t){return typeof t=="string"?new RegExp(lR(t),"g"):t}function hR(t){return typeof t=="function"?t:function(){return t}}const Sc="phrasing",xc=["autolink","link","image","label"];function dR(){return{transforms:[wR],enter:{literalAutolink:pR,literalAutolinkEmail:Cc,literalAutolinkHttp:Cc,literalAutolinkWww:Cc},exit:{literalAutolink:vR,literalAutolinkEmail:yR,literalAutolinkHttp:mR,literalAutolinkWww:gR}}}function fR(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Sc,notInConstruct:xc},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Sc,notInConstruct:xc},{character:":",before:"[ps]",after:"\\/",inConstruct:Sc,notInConstruct:xc}]}}function pR(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Cc(t){this.config.enter.autolinkProtocol.call(this,t)}function mR(t){this.config.exit.autolinkProtocol.call(this,t)}function gR(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function yR(t){this.config.exit.autolinkEmail.call(this,t)}function vR(t){this.exit(t)}function wR(t){aR(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,SR],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,xR]],{ignore:["link","linkReference"]})}function SR(t,e,n,i,r){let s="";if(!Mw(r)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!CR(n)))return!1;const o=bR(n+i);if(!o[0])return!1;const l={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function xR(t,e,n,i){return!Mw(i,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function CR(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function bR(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],i=n.indexOf(")");const r=_m(t,"(");let s=_m(t,")");for(;i!==-1&&r>s;)t+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),s++;return[t,n]}function Mw(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Ti(n)||sa(n))&&(!e||n!==47)}Dw.peek=IR;function kR(){this.buffer()}function ER(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function TR(){this.buffer()}function _R(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function AR(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Qt(this.sliceSerialize(t)).toLowerCase(),n.label=e}function PR(t){this.exit(t)}function RR(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Qt(this.sliceSerialize(t)).toLowerCase(),n.label=e}function NR(t){this.exit(t)}function IR(){return"["}function Dw(t,e,n,i){const r=n.createTracker(i);let s=r.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return s+=r.move(n.safe(n.associationId(t),{after:"]",before:s})),l(),o(),s+=r.move("]"),s}function MR(){return{enter:{gfmFootnoteCallString:kR,gfmFootnoteCall:ER,gfmFootnoteDefinitionLabelString:TR,gfmFootnoteDefinition:_R},exit:{gfmFootnoteCallString:AR,gfmFootnoteCall:PR,gfmFootnoteDefinitionLabelString:RR,gfmFootnoteDefinition:NR}}}function DR(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:Dw},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(i,r,s,o){const l=s.createTracker(o);let a=l.move("[^");const c=s.enter("footnoteDefinition"),h=s.enter("label");return a+=l.move(s.safe(s.associationId(i),{before:a,after:"]"})),h(),a+=l.move("]:"),i.children&&i.children.length>0&&(l.shift(4),a+=l.move((e?`
`:" ")+s.indentLines(s.containerFlow(i,l.current()),e?Ow:OR))),c(),a}}function OR(t,e,n){return e===0?t:Ow(t,e,n)}function Ow(t,e,n){return(n?"":"    ")+t}const LR=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Lw.peek=jR;function FR(){return{canContainEols:["delete"],enter:{strikethrough:UR},exit:{strikethrough:$R}}}function zR(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:LR}],handlers:{delete:Lw}}}function UR(t){this.enter({type:"delete",children:[]},t)}function $R(t){this.exit(t)}function Lw(t,e,n,i){const r=n.createTracker(i),s=n.enter("strikethrough");let o=r.move("~~");return o+=n.containerPhrasing(t,{...r.current(),before:o,after:"~"}),o+=r.move("~~"),s(),o}function jR(){return"~"}function BR(t){return t.length}function VR(t,e){const n=e||{},i=(n.align||[]).concat(),r=n.stringLength||BR,s=[],o=[],l=[],a=[];let c=0,h=-1;for(;++h<t.length;){const g=[],S=[];let m=-1;for(t[h].length>c&&(c=t[h].length);++m<t[h].length;){const y=HR(t[h][m]);if(n.alignDelimiters!==!1){const w=r(y);S[m]=w,(a[m]===void 0||w>a[m])&&(a[m]=w)}g.push(y)}o[h]=g,l[h]=S}let u=-1;if(typeof i=="object"&&"length"in i)for(;++u<c;)s[u]=Am(i[u]);else{const g=Am(i);for(;++u<c;)s[u]=g}u=-1;const d=[],f=[];for(;++u<c;){const g=s[u];let S="",m="";g===99?(S=":",m=":"):g===108?S=":":g===114&&(m=":");let y=n.alignDelimiters===!1?1:Math.max(1,a[u]-S.length-m.length);const w=S+"-".repeat(y)+m;n.alignDelimiters!==!1&&(y=S.length+y+m.length,y>a[u]&&(a[u]=y),f[u]=y),d[u]=w}o.splice(1,0,d),l.splice(1,0,f),h=-1;const p=[];for(;++h<o.length;){const g=o[h],S=l[h];u=-1;const m=[];for(;++u<c;){const y=g[u]||"";let w="",b="";if(n.alignDelimiters!==!1){const A=a[u]-(S[u]||0),E=s[u];E===114?w=" ".repeat(A):E===99?A%2?(w=" ".repeat(A/2+.5),b=" ".repeat(A/2-.5)):(w=" ".repeat(A/2),b=w):b=" ".repeat(A)}n.delimiterStart!==!1&&!u&&m.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&y==="")&&(n.delimiterStart!==!1||u)&&m.push(" "),n.alignDelimiters!==!1&&m.push(w),m.push(y),n.alignDelimiters!==!1&&m.push(b),n.padding!==!1&&m.push(" "),(n.delimiterEnd!==!1||u!==c-1)&&m.push("|")}p.push(n.delimiterEnd===!1?m.join("").replace(/ +$/,""):m.join(""))}return p.join(`
`)}function HR(t){return t==null?"":String(t)}function Am(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function WR(t,e,n,i){const r=n.enter("blockquote"),s=n.createTracker(i);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),YR);return r(),o}function YR(t,e,n){return">"+(n?"":" ")+t}function KR(t,e){return Pm(t,e.inConstruct,!0)&&!Pm(t,e.notInConstruct,!1)}function Pm(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let i=-1;for(;++i<e.length;)if(t.includes(e[i]))return!0;return!1}function Rm(t,e,n,i){let r=-1;for(;++r<n.unsafe.length;)if(n.unsafe[r].character===`
`&&KR(n.stack,n.unsafe[r]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function GR(t,e){const n=String(t);let i=n.indexOf(e),r=i,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===r?++s>o&&(o=s):s=1,r=i+e.length,i=n.indexOf(e,r);return o}function qR(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function QR(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function XR(t,e,n,i){const r=QR(n),s=t.value||"",o=r==="`"?"GraveAccent":"Tilde";if(qR(t,n)){const u=n.enter("codeIndented"),d=n.indentLines(s,JR);return u(),d}const l=n.createTracker(i),a=r.repeat(Math.max(GR(s,r)+1,3)),c=n.enter("codeFenced");let h=l.move(a);if(t.lang){const u=n.enter(`codeFencedLang${o}`);h+=l.move(n.safe(t.lang,{before:h,after:" ",encode:["`"],...l.current()})),u()}if(t.lang&&t.meta){const u=n.enter(`codeFencedMeta${o}`);h+=l.move(" "),h+=l.move(n.safe(t.meta,{before:h,after:`
`,encode:["`"],...l.current()})),u()}return h+=l.move(`
`),s&&(h+=l.move(s+`
`)),h+=l.move(a),c(),h}function JR(t,e,n){return(n?"":"    ")+t}function cd(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function ZR(t,e,n,i){const r=cd(n),s=r==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const a=n.createTracker(i);let c=a.move("[");return c+=a.move(n.safe(n.associationId(t),{before:c,after:"]",...a.current()})),c+=a.move("]: "),l(),!t.url||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=a.move("<"),c+=a.move(n.safe(t.url,{before:c,after:">",...a.current()})),c+=a.move(">")):(l=n.enter("destinationRaw"),c+=a.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...a.current()}))),l(),t.title&&(l=n.enter(`title${s}`),c+=a.move(" "+r),c+=a.move(n.safe(t.title,{before:c,after:r,...a.current()})),c+=a.move(r),l()),o(),c}function eN(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Ms(t){return"&#x"+t.toString(16).toUpperCase()+";"}function _l(t,e,n){const i=wr(t),r=wr(e);return i===void 0?r===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Fw.peek=tN;function Fw(t,e,n,i){const r=eN(n),s=n.enter("emphasis"),o=n.createTracker(i),l=o.move(r);let a=o.move(n.containerPhrasing(t,{after:r,before:l,...o.current()}));const c=a.charCodeAt(0),h=_l(i.before.charCodeAt(i.before.length-1),c,r);h.inside&&(a=Ms(c)+a.slice(1));const u=a.charCodeAt(a.length-1),d=_l(i.after.charCodeAt(0),u,r);d.inside&&(a=a.slice(0,-1)+Ms(u));const f=o.move(r);return s(),n.attentionEncodeSurroundingInfo={after:d.outside,before:h.outside},l+a+f}function tN(t,e,n){return n.options.emphasis||"*"}function nN(t,e){let n=!1;return ld(t,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return n=!0,Lu}),!!((!t.depth||t.depth<3)&&ed(t)&&(e.options.setext||n))}function iN(t,e,n,i){const r=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(i);if(nN(t,n)){const h=n.enter("headingSetext"),u=n.enter("phrasing"),d=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return u(),h(),d+`
`+(r===1?"=":"-").repeat(d.length-(Math.max(d.lastIndexOf("\r"),d.lastIndexOf(`
`))+1))}const o="#".repeat(r),l=n.enter("headingAtx"),a=n.enter("phrasing");s.move(o+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=Ms(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),a(),l(),c}zw.peek=rN;function zw(t){return t.value||""}function rN(){return"<"}Uw.peek=sN;function Uw(t,e,n,i){const r=cd(n),s=r==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const a=n.createTracker(i);let c=a.move("![");return c+=a.move(n.safe(t.alt,{before:c,after:"]",...a.current()})),c+=a.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=a.move("<"),c+=a.move(n.safe(t.url,{before:c,after:">",...a.current()})),c+=a.move(">")):(l=n.enter("destinationRaw"),c+=a.move(n.safe(t.url,{before:c,after:t.title?" ":")",...a.current()}))),l(),t.title&&(l=n.enter(`title${s}`),c+=a.move(" "+r),c+=a.move(n.safe(t.title,{before:c,after:r,...a.current()})),c+=a.move(r),l()),c+=a.move(")"),o(),c}function sN(){return"!"}$w.peek=oN;function $w(t,e,n,i){const r=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(i);let a=l.move("![");const c=n.safe(t.alt,{before:a,after:"]",...l.current()});a+=l.move(c+"]["),o();const h=n.stack;n.stack=[],o=n.enter("reference");const u=n.safe(n.associationId(t),{before:a,after:"]",...l.current()});return o(),n.stack=h,s(),r==="full"||!c||c!==u?a+=l.move(u+"]"):r==="shortcut"?a=a.slice(0,-1):a+=l.move("]"),a}function oN(){return"!"}jw.peek=lN;function jw(t,e,n){let i=t.value||"",r="`",s=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(i);)r+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++s<n.unsafe.length;){const o=n.unsafe[s],l=n.compilePattern(o);let a;if(o.atBreak)for(;a=l.exec(i);){let c=a.index;i.charCodeAt(c)===10&&i.charCodeAt(c-1)===13&&c--,i=i.slice(0,c)+" "+i.slice(a.index+1)}}return r+i+r}function lN(){return"`"}function Bw(t,e){const n=ed(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}Vw.peek=aN;function Vw(t,e,n,i){const r=cd(n),s=r==='"'?"Quote":"Apostrophe",o=n.createTracker(i);let l,a;if(Bw(t,n)){const h=n.stack;n.stack=[],l=n.enter("autolink");let u=o.move("<");return u+=o.move(n.containerPhrasing(t,{before:u,after:">",...o.current()})),u+=o.move(">"),l(),n.stack=h,u}l=n.enter("link"),a=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(a=n.enter("destinationRaw"),c+=o.move(n.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=o.move(" "+r),c+=o.move(n.safe(t.title,{before:c,after:r,...o.current()})),c+=o.move(r),a()),c+=o.move(")"),l(),c}function aN(t,e,n){return Bw(t,n)?"<":"["}Hw.peek=cN;function Hw(t,e,n,i){const r=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(i);let a=l.move("[");const c=n.containerPhrasing(t,{before:a,after:"]",...l.current()});a+=l.move(c+"]["),o();const h=n.stack;n.stack=[],o=n.enter("reference");const u=n.safe(n.associationId(t),{before:a,after:"]",...l.current()});return o(),n.stack=h,s(),r==="full"||!c||c!==u?a+=l.move(u+"]"):r==="shortcut"?a=a.slice(0,-1):a+=l.move("]"),a}function cN(){return"["}function ud(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function uN(t){const e=ud(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function hN(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function Ww(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function dN(t,e,n,i){const r=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?hN(n):ud(n);const l=t.ordered?o==="."?")":".":uN(n);let a=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const h=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&h&&(!h.children||!h.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(a=!0),Ww(n)===o&&h){let u=-1;for(;++u<t.children.length;){const d=t.children[u];if(d&&d.type==="listItem"&&d.children&&d.children[0]&&d.children[0].type==="thematicBreak"){a=!0;break}}}}a&&(o=l),n.bulletCurrent=o;const c=n.containerFlow(t,i);return n.bulletLastUsed=o,n.bulletCurrent=s,r(),c}function fN(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function pN(t,e,n,i){const r=fN(n);let s=n.bulletCurrent||ud(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(r==="tab"||r==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(i);l.move(s+" ".repeat(o-s.length)),l.shift(o);const a=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,l.current()),h);return a(),c;function h(u,d,f){return d?(f?"":" ".repeat(o))+u:(f?s:s+" ".repeat(o-s.length))+u}}function mN(t,e,n,i){const r=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,i);return s(),r(),o}const gN=aa(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function yN(t,e,n,i){return(t.children.some(function(o){return gN(o)})?n.containerPhrasing:n.containerFlow).call(n,t,i)}function vN(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}Yw.peek=wN;function Yw(t,e,n,i){const r=vN(n),s=n.enter("strong"),o=n.createTracker(i),l=o.move(r+r);let a=o.move(n.containerPhrasing(t,{after:r,before:l,...o.current()}));const c=a.charCodeAt(0),h=_l(i.before.charCodeAt(i.before.length-1),c,r);h.inside&&(a=Ms(c)+a.slice(1));const u=a.charCodeAt(a.length-1),d=_l(i.after.charCodeAt(0),u,r);d.inside&&(a=a.slice(0,-1)+Ms(u));const f=o.move(r+r);return s(),n.attentionEncodeSurroundingInfo={after:d.outside,before:h.outside},l+a+f}function wN(t,e,n){return n.options.strong||"*"}function SN(t,e,n,i){return n.safe(t.value,i)}function xN(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function CN(t,e,n){const i=(Ww(n)+(n.options.ruleSpaces?" ":"")).repeat(xN(n));return n.options.ruleSpaces?i.slice(0,-1):i}const Kw={blockquote:WR,break:Rm,code:XR,definition:ZR,emphasis:Fw,hardBreak:Rm,heading:iN,html:zw,image:Uw,imageReference:$w,inlineCode:jw,link:Vw,linkReference:Hw,list:dN,listItem:pN,paragraph:mN,root:yN,strong:Yw,text:SN,thematicBreak:CN};function bN(){return{enter:{table:kN,tableData:Nm,tableHeader:Nm,tableRow:TN},exit:{codeText:_N,table:EN,tableData:bc,tableHeader:bc,tableRow:bc}}}function kN(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function EN(t){this.exit(t),this.data.inTable=void 0}function TN(t){this.enter({type:"tableRow",children:[]},t)}function bc(t){this.exit(t)}function Nm(t){this.enter({type:"tableCell",children:[]},t)}function _N(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,AN));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function AN(t,e){return e==="|"?e:t}function PN(t){const e=t||{},n=e.tableCellPadding,i=e.tablePipeAlign,r=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:d,table:o,tableCell:a,tableRow:l}};function o(f,p,g,S){return c(h(f,g,S),f.align)}function l(f,p,g,S){const m=u(f,g,S),y=c([m]);return y.slice(0,y.indexOf(`
`))}function a(f,p,g,S){const m=g.enter("tableCell"),y=g.enter("phrasing"),w=g.containerPhrasing(f,{...S,before:s,after:s});return y(),m(),w}function c(f,p){return VR(f,{align:p,alignDelimiters:i,padding:n,stringLength:r})}function h(f,p,g){const S=f.children;let m=-1;const y=[],w=p.enter("table");for(;++m<S.length;)y[m]=u(S[m],p,g);return w(),y}function u(f,p,g){const S=f.children;let m=-1;const y=[],w=p.enter("tableRow");for(;++m<S.length;)y[m]=a(S[m],f,p,g);return w(),y}function d(f,p,g){let S=Kw.inlineCode(f,p,g);return g.stack.includes("tableCell")&&(S=S.replace(/\|/g,"\\$&")),S}}function RN(){return{exit:{taskListCheckValueChecked:Im,taskListCheckValueUnchecked:Im,paragraph:IN}}}function NN(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:MN}}}function Im(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function IN(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const i=n.children[0];if(i&&i.type==="text"){const r=e.children;let s=-1,o;for(;++s<r.length;){const l=r[s];if(l.type==="paragraph"){o=l;break}}o===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}}this.exit(t)}function MN(t,e,n,i){const r=t.children[0],s=typeof t.checked=="boolean"&&r&&r.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",l=n.createTracker(i);s&&l.move(o);let a=Kw.listItem(t,e,n,{...i,...l.current()});return s&&(a=a.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),a;function c(h){return h+o}}function DN(){return[dR(),MR(),FR(),bN(),RN()]}function ON(t){return{extensions:[fR(),DR(t),zR(),PN(t),NN()]}}const LN={tokenize:BN,partial:!0},Gw={tokenize:VN,partial:!0},qw={tokenize:HN,partial:!0},Qw={tokenize:WN,partial:!0},FN={tokenize:YN,partial:!0},Xw={name:"wwwAutolink",tokenize:$N,previous:Zw},Jw={name:"protocolAutolink",tokenize:jN,previous:e0},En={name:"emailAutolink",tokenize:UN,previous:t0},hn={};function zN(){return{text:hn}}let ri=48;for(;ri<123;)hn[ri]=En,ri++,ri===58?ri=65:ri===91&&(ri=97);hn[43]=En;hn[45]=En;hn[46]=En;hn[95]=En;hn[72]=[En,Jw];hn[104]=[En,Jw];hn[87]=[En,Xw];hn[119]=[En,Xw];function UN(t,e,n){const i=this;let r,s;return o;function o(u){return!$u(u)||!t0.call(i,i.previous)||hd(i.events)?n(u):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),l(u))}function l(u){return $u(u)?(t.consume(u),l):u===64?(t.consume(u),a):n(u)}function a(u){return u===46?t.check(FN,h,c)(u):u===45||u===95||rt(u)?(s=!0,t.consume(u),a):h(u)}function c(u){return t.consume(u),r=!0,a}function h(u){return s&&r&&at(i.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(u)):n(u)}}function $N(t,e,n){const i=this;return r;function r(o){return o!==87&&o!==119||!Zw.call(i,i.previous)||hd(i.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(LN,t.attempt(Gw,t.attempt(qw,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function jN(t,e,n){const i=this;let r="",s=!1;return o;function o(u){return(u===72||u===104)&&e0.call(i,i.previous)&&!hd(i.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),r+=String.fromCodePoint(u),t.consume(u),l):n(u)}function l(u){if(at(u)&&r.length<5)return r+=String.fromCodePoint(u),t.consume(u),l;if(u===58){const d=r.toLowerCase();if(d==="http"||d==="https")return t.consume(u),a}return n(u)}function a(u){return u===47?(t.consume(u),s?c:(s=!0,a)):n(u)}function c(u){return u===null||kl(u)||Se(u)||Ti(u)||sa(u)?n(u):t.attempt(Gw,t.attempt(qw,h),n)(u)}function h(u){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(u)}}function BN(t,e,n){let i=0;return r;function r(o){return(o===87||o===119)&&i<3?(i++,t.consume(o),r):o===46&&i===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function VN(t,e,n){let i,r,s;return o;function o(c){return c===46||c===95?t.check(Qw,a,l)(c):c===null||Se(c)||Ti(c)||c!==45&&sa(c)?a(c):(s=!0,t.consume(c),o)}function l(c){return c===95?i=!0:(r=i,i=void 0),t.consume(c),o}function a(c){return r||i||!s?n(c):e(c)}}function HN(t,e){let n=0,i=0;return r;function r(o){return o===40?(n++,t.consume(o),r):o===41&&i<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(Qw,e,s)(o):o===null||Se(o)||Ti(o)?e(o):(t.consume(o),r)}function s(o){return o===41&&i++,t.consume(o),r}}function WN(t,e,n){return i;function i(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(t.consume(l),i):l===38?(t.consume(l),s):l===93?(t.consume(l),r):l===60||l===null||Se(l)||Ti(l)?e(l):n(l)}function r(l){return l===null||l===40||l===91||Se(l)||Ti(l)?e(l):i(l)}function s(l){return at(l)?o(l):n(l)}function o(l){return l===59?(t.consume(l),i):at(l)?(t.consume(l),o):n(l)}}function YN(t,e,n){return i;function i(s){return t.consume(s),r}function r(s){return rt(s)?n(s):e(s)}}function Zw(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Se(t)}function e0(t){return!at(t)}function t0(t){return!(t===47||$u(t))}function $u(t){return t===43||t===45||t===46||t===95||rt(t)}function hd(t){let e=t.length,n=!1;for(;e--;){const i=t[e][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const KN={tokenize:tI,partial:!0};function GN(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:JN,continuation:{tokenize:ZN},exit:eI}},text:{91:{name:"gfmFootnoteCall",tokenize:XN},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:qN,resolveTo:QN}}}}function qN(t,e,n){const i=this;let r=i.events.length;const s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let o;for(;r--;){const a=i.events[r][1];if(a.type==="labelImage"){o=a;break}if(a.type==="gfmFootnoteCall"||a.type==="labelLink"||a.type==="label"||a.type==="image"||a.type==="link")break}return l;function l(a){if(!o||!o._balanced)return n(a);const c=Qt(i.sliceSerialize({start:o.end,end:i.now()}));return c.codePointAt(0)!==94||!s.includes(c.slice(1))?n(a):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(a),t.exit("gfmFootnoteCallLabelMarker"),e(a))}}function QN(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[t[n+1],t[n+2],["enter",i,e],t[n+3],t[n+4],["enter",r,e],["exit",r,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",i,e]];return t.splice(n,t.length-n+1,...l),t}function XN(t,e,n){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s=0,o;return l;function l(u){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(u),t.exit("gfmFootnoteCallLabelMarker"),a}function a(u){return u!==94?n(u):(t.enter("gfmFootnoteCallMarker"),t.consume(u),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(u){if(s>999||u===93&&!o||u===null||u===91||Se(u))return n(u);if(u===93){t.exit("chunkString");const d=t.exit("gfmFootnoteCallString");return r.includes(Qt(i.sliceSerialize(d)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(u),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(u)}return Se(u)||(o=!0),s++,t.consume(u),u===92?h:c}function h(u){return u===91||u===92||u===93?(t.consume(u),s++,c):c(u)}}function JN(t,e,n){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s,o=0,l;return a;function a(p){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(p){return p===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",h):n(p)}function h(p){if(o>999||p===93&&!l||p===null||p===91||Se(p))return n(p);if(p===93){t.exit("chunkString");const g=t.exit("gfmFootnoteDefinitionLabelString");return s=Qt(i.sliceSerialize(g)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),d}return Se(p)||(l=!0),o++,t.consume(p),p===92?u:h}function u(p){return p===91||p===92||p===93?(t.consume(p),o++,h):h(p)}function d(p){return p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),r.includes(s)||r.push(s),de(t,f,"gfmFootnoteDefinitionWhitespace")):n(p)}function f(p){return e(p)}}function ZN(t,e,n){return t.check(Ws,e,t.attempt(KN,e,n))}function eI(t){t.exit("gfmFootnoteDefinition")}function tI(t,e,n){const i=this;return de(t,r,"gfmFootnoteDefinitionIndent",5);function r(s){const o=i.events[i.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function nI(t){let n=(t||{}).singleTilde;const i={name:"strikethrough",tokenize:s,resolveAll:r};return n==null&&(n=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function r(o,l){let a=-1;for(;++a<o.length;)if(o[a][0]==="enter"&&o[a][1].type==="strikethroughSequenceTemporary"&&o[a][1]._close){let c=a;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[a][1].end.offset-o[a][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[a][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[a][1].end)},u={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[a][1].start)},d=[["enter",h,l],["enter",o[c][1],l],["exit",o[c][1],l],["enter",u,l]],f=l.parser.constructs.insideSpan.null;f&&Rt(d,d.length,0,oa(f,o.slice(c+1,a),l)),Rt(d,d.length,0,[["exit",u,l],["enter",o[a][1],l],["exit",o[a][1],l],["exit",h,l]]),Rt(o,c-1,a-c+3,d),a=c+d.length-2;break}}for(a=-1;++a<o.length;)o[a][1].type==="strikethroughSequenceTemporary"&&(o[a][1].type="data");return o}function s(o,l,a){const c=this.previous,h=this.events;let u=0;return d;function d(p){return c===126&&h[h.length-1][1].type!=="characterEscape"?a(p):(o.enter("strikethroughSequenceTemporary"),f(p))}function f(p){const g=wr(c);if(p===126)return u>1?a(p):(o.consume(p),u++,f);if(u<2&&!n)return a(p);const S=o.exit("strikethroughSequenceTemporary"),m=wr(p);return S._open=!m||m===2&&!!g,S._close=!g||g===2&&!!m,l(p)}}}class iI{constructor(){this.map=[]}add(e,n,i){rI(this,e,n,i)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const i=[];for(;n>0;)n-=1,i.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];i.push(e.slice()),e.length=0;let r=i.pop();for(;r;){for(const s of r)e.push(s);r=i.pop()}this.map.length=0}}function rI(t,e,n,i){let r=0;if(!(n===0&&i.length===0)){for(;r<t.map.length;){if(t.map[r][0]===e){t.map[r][1]+=n,t.map[r][2].push(...i);return}r+=1}t.map.push([e,n,i])}}function sI(t,e){let n=!1;const i=[];for(;e<t.length;){const r=t[e];if(n){if(r[0]==="enter")r[1].type==="tableContent"&&i.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=i.length-1;i[s]=i[s]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return i}function oI(){return{flow:{null:{name:"table",tokenize:lI,resolveAll:aI}}}}function lI(t,e,n){const i=this;let r=0,s=0,o;return l;function l(_){let j=i.events.length-1;for(;j>-1;){const Z=i.events[j][1].type;if(Z==="lineEnding"||Z==="linePrefix")j--;else break}const B=j>-1?i.events[j][1].type:null,J=B==="tableHead"||B==="tableRow"?E:a;return J===E&&i.parser.lazy[i.now().line]?n(_):J(_)}function a(_){return t.enter("tableHead"),t.enter("tableRow"),c(_)}function c(_){return _===124||(o=!0,s+=1),h(_)}function h(_){return _===null?n(_):ee(_)?s>1?(s=0,i.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),f):n(_):ue(_)?de(t,h,"whitespace")(_):(s+=1,o&&(o=!1,r+=1),_===124?(t.enter("tableCellDivider"),t.consume(_),t.exit("tableCellDivider"),o=!0,h):(t.enter("data"),u(_)))}function u(_){return _===null||_===124||Se(_)?(t.exit("data"),h(_)):(t.consume(_),_===92?d:u)}function d(_){return _===92||_===124?(t.consume(_),u):u(_)}function f(_){return i.interrupt=!1,i.parser.lazy[i.now().line]?n(_):(t.enter("tableDelimiterRow"),o=!1,ue(_)?de(t,p,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):p(_))}function p(_){return _===45||_===58?S(_):_===124?(o=!0,t.enter("tableCellDivider"),t.consume(_),t.exit("tableCellDivider"),g):A(_)}function g(_){return ue(_)?de(t,S,"whitespace")(_):S(_)}function S(_){return _===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(_),t.exit("tableDelimiterMarker"),m):_===45?(s+=1,m(_)):_===null||ee(_)?b(_):A(_)}function m(_){return _===45?(t.enter("tableDelimiterFiller"),y(_)):A(_)}function y(_){return _===45?(t.consume(_),y):_===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(_),t.exit("tableDelimiterMarker"),w):(t.exit("tableDelimiterFiller"),w(_))}function w(_){return ue(_)?de(t,b,"whitespace")(_):b(_)}function b(_){return _===124?p(_):_===null||ee(_)?!o||r!==s?A(_):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(_)):A(_)}function A(_){return n(_)}function E(_){return t.enter("tableRow"),P(_)}function P(_){return _===124?(t.enter("tableCellDivider"),t.consume(_),t.exit("tableCellDivider"),P):_===null||ee(_)?(t.exit("tableRow"),e(_)):ue(_)?de(t,P,"whitespace")(_):(t.enter("data"),R(_))}function R(_){return _===null||_===124||Se(_)?(t.exit("data"),P(_)):(t.consume(_),_===92?D:R)}function D(_){return _===92||_===124?(t.consume(_),R):R(_)}}function aI(t,e){let n=-1,i=!0,r=0,s=[0,0,0,0],o=[0,0,0,0],l=!1,a=0,c,h,u;const d=new iI;for(;++n<t.length;){const f=t[n],p=f[1];f[0]==="enter"?p.type==="tableHead"?(l=!1,a!==0&&(Mm(d,e,a,c,h),h=void 0,a=0),c={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},d.add(n,0,[["enter",c,e]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(i=!0,u=void 0,s=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,h={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},d.add(n,0,[["enter",h,e]])),r=p.type==="tableDelimiterRow"?2:h?3:1):r&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(i=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],u=To(d,e,s,r,void 0,u),s=[0,0,0,0]),o[2]=n)):p.type==="tableCellDivider"&&(i?i=!1:(s[1]!==0&&(o[0]=o[1],u=To(d,e,s,r,void 0,u)),s=o,o=[s[1],n,0,0])):p.type==="tableHead"?(l=!0,a=n):p.type==="tableRow"||p.type==="tableDelimiterRow"?(a=n,s[1]!==0?(o[0]=o[1],u=To(d,e,s,r,n,u)):o[1]!==0&&(u=To(d,e,o,r,n,u)),r=0):r&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(o[3]=n)}for(a!==0&&Mm(d,e,a,c,h),d.consume(e.events),n=-1;++n<e.events.length;){const f=e.events[n];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=sI(e.events,n))}return t}function To(t,e,n,i,r,s){const o=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},Fi(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const a=Fi(e.events,n[1]);if(s={type:o,start:Object.assign({},a),end:Object.assign({},a)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const c=Fi(e.events,n[2]),h=Fi(e.events,n[3]),u={type:l,start:Object.assign({},c),end:Object.assign({},h)};if(t.add(n[2],0,[["enter",u,e]]),i!==2){const d=e.events[n[2]],f=e.events[n[3]];if(d[1].end=Object.assign({},f[1].end),d[1].type="chunkText",d[1].contentType="text",n[3]>n[2]+1){const p=n[2]+1,g=n[3]-n[2]-1;t.add(p,g,[])}}t.add(n[3]+1,0,[["exit",u,e]])}return r!==void 0&&(s.end=Object.assign({},Fi(e.events,r)),t.add(r,0,[["exit",s,e]]),s=void 0),s}function Mm(t,e,n,i,r){const s=[],o=Fi(e.events,n);r&&(r.end=Object.assign({},o),s.push(["exit",r,e])),i.end=Object.assign({},o),s.push(["exit",i,e]),t.add(n+1,0,s)}function Fi(t,e){const n=t[e],i=n[0]==="enter"?"start":"end";return n[1][i]}const cI={name:"tasklistCheck",tokenize:hI};function uI(){return{text:{91:cI}}}function hI(t,e,n){const i=this;return r;function r(a){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?n(a):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(a),t.exit("taskListCheckMarker"),s)}function s(a){return Se(a)?(t.enter("taskListCheckValueUnchecked"),t.consume(a),t.exit("taskListCheckValueUnchecked"),o):a===88||a===120?(t.enter("taskListCheckValueChecked"),t.consume(a),t.exit("taskListCheckValueChecked"),o):n(a)}function o(a){return a===93?(t.enter("taskListCheckMarker"),t.consume(a),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),l):n(a)}function l(a){return ee(a)?e(a):ue(a)?t.check({tokenize:dI},e,n)(a):n(a)}}function dI(t,e,n){return de(t,i,"whitespace");function i(r){return r===null?n(r):e(r)}}function fI(t){return hw([zN(),GN(),nI(t),oI(),uI()])}const pI={};function mI(t){const e=this,n=t||pI,i=e.data(),r=i.micromarkExtensions||(i.micromarkExtensions=[]),s=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),o=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);r.push(fI(n)),s.push(DN()),o.push(ON(n))}const n0=({content:t,className:e=""})=>v.jsx("div",{className:`structured-response ${e}`,children:v.jsx(nR,{remarkPlugins:[mI],components:{table:({children:n})=>v.jsx("div",{className:"table-container",children:v.jsx("table",{className:"market-data-table",children:n})}),thead:({children:n})=>v.jsx("thead",{className:"table-header",children:n}),tbody:({children:n})=>v.jsx("tbody",{className:"table-body",children:n}),tr:({children:n})=>v.jsx("tr",{className:"table-row",children:n}),th:({children:n})=>v.jsx("th",{className:"table-header-cell",children:n}),td:({children:n})=>v.jsx("td",{className:"table-data-cell",children:n}),h1:({children:n})=>v.jsx("h1",{className:"response-h1",children:n}),h2:({children:n})=>v.jsx("h2",{className:"response-h2",children:n}),h3:({children:n})=>v.jsx("h3",{className:"response-h3",children:n}),strong:({children:n})=>{const i=n?.toString()||"";if(i.match(/^\$[\d,]+\.?\d*$/))return v.jsx("span",{className:"price-highlight",children:n});if(i.match(/^[+-]?\d+\.?\d*%$/)){const r=i.startsWith("+")||!i.startsWith("-")&&!i.startsWith("0");return v.jsx("span",{className:`percentage-change ${r?"positive":"negative"}`,children:n})}return v.jsx("strong",{className:"response-bold",children:n})},ul:({children:n})=>v.jsx("ul",{className:"response-list",children:n}),li:({children:n})=>v.jsx("li",{className:"response-list-item",children:n}),hr:()=>v.jsx("hr",{className:"response-divider"}),p:({children:n})=>v.jsx("p",{className:"response-paragraph",children:n}),em:({children:n})=>v.jsx("em",{className:"response-source",children:n}),code:({children:n})=>v.jsx("code",{className:"response-code",children:n}),blockquote:({children:n})=>v.jsx("blockquote",{className:"response-quote",children:n})},children:t})}),gI=({isConnected:t,isLoading:e,voiceProvider:n,openAIConnected:i,agentVoiceConnected:r})=>{const[s,o]=k.useState(!1),[l,a]=k.useState([]),[c,h]=k.useState(!0),[u,d]=k.useState(!0);k.useEffect(()=>{const g=console.log,S=console.warn,m=console.error,y=[];let w=!1;const b=()=>{if(y.length>0){const E=[...y];y.length=0,a(P=>[...P,...E].slice(-500))}w=!1},A=(E,P,...R)=>{const D=R.map(j=>typeof j=="object"?JSON.stringify(j,null,2):String(j)).join(" "),_={timestamp:new Date().toLocaleTimeString(),level:E,category:P,message:D};y.push(_),w||(w=!0,queueMicrotask(b))};return console.log=(...E)=>{g(...E);const P=E.join(" ");let R="General",D="info";P.includes("")?R="DEBUG":P.includes("[TTS")?R="TTS":P.includes("[AGENT")?R="Agent":P.includes("OpenAI")||P.includes("OPENAI")?R="OpenAI":(P.includes("connected")||P.includes(""))&&(R="Connection",D="success"),A(D,R,...E)},console.warn=(...E)=>{S(...E),A("warn","Warning",...E)},console.error=(...E)=>{m(...E),A("error","Error",...E)},()=>{console.log=g,console.warn=S,console.error=m}},[]),k.useEffect(()=>{if(c&&s){const g=document.querySelector(".debug-logs-container");g&&(g.scrollTop=g.scrollHeight)}},[l,c,s]);const f=()=>a([]),p=u?l:l.filter(g=>g.category==="DEBUG"||g.category==="TTS"||g.category==="Agent"||g.category==="OpenAI"||g.category==="Connection"||g.level==="error");return v.jsxs("div",{className:`debug-widget ${s?"expanded":"collapsed"}`,children:[v.jsxs("div",{className:"debug-header",onClick:()=>o(!s),children:[v.jsxs("div",{className:"debug-title",children:[v.jsx("span",{className:"debug-icon",children:""}),v.jsx("span",{children:"Debug Tools"}),!s&&v.jsx("span",{className:`status-indicator ${t?"connected":"disconnected"}`,children:t?"":""})]}),v.jsx("button",{className:"toggle-btn",children:s?"":"+"})]}),s&&v.jsxs("div",{className:"debug-content",children:[v.jsxs("div",{className:"debug-section",children:[v.jsx("h4",{children:"System Status"}),v.jsxs("div",{className:"status-grid",children:[v.jsxs("div",{className:"status-item",children:[v.jsx("span",{className:"status-label",children:"Provider:"}),v.jsx("span",{className:"status-value",children:n})]}),v.jsxs("div",{className:"status-item",children:[v.jsx("span",{className:"status-label",children:"Connected:"}),v.jsx("span",{className:`status-value ${t?"connected":"disconnected"}`,children:t?" Yes":" No"})]}),v.jsxs("div",{className:"status-item",children:[v.jsx("span",{className:"status-label",children:"Loading:"}),v.jsx("span",{className:"status-value",children:e?" Yes":"No"})]}),n==="agent"&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"status-item",children:[v.jsx("span",{className:"status-label",children:"OpenAI Connected:"}),v.jsx("span",{className:`status-value ${i?"connected":"disconnected"}`,children:i?" Yes":" No"})]}),v.jsxs("div",{className:"status-item",children:[v.jsx("span",{className:"status-label",children:"Agent Voice State:"}),v.jsx("span",{className:`status-value ${r?"connected":"disconnected"}`,children:r?" Connected":" Disconnected"})]})]})]}),v.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:"#1a1a1a",borderRadius:"6px",border:"1px solid #333"},children:[v.jsx("h5",{style:{margin:"0 0 8px 0",color:"#00d4ff",fontSize:"11px"},children:" TTS Test Procedure:"}),v.jsxs("ol",{style:{margin:0,paddingLeft:"20px",fontSize:"10px",color:"#888",lineHeight:"1.6"},children:[v.jsx("li",{children:'Click "Clear" button below'}),v.jsx("li",{children:"Click microphone  (bottom-right)"}),v.jsx("li",{children:'Wait for "Connected:  Yes"'}),v.jsx("li",{children:'Say: "What is Apple stock price?"'}),v.jsx("li",{children:"Wait 10 seconds"}),v.jsx("li",{children:"Look for [TTS] logs below"})]})]})]}),v.jsxs("div",{className:"debug-section",children:[v.jsxs("div",{className:"logs-header",children:[v.jsxs("h4",{children:["Live Logs (",p.length,u?" - ALL":" - FILTERED",")"]}),v.jsxs("div",{className:"logs-controls",children:[v.jsxs("label",{className:"auto-scroll-toggle",children:[v.jsx("input",{type:"checkbox",checked:u,onChange:g=>d(g.target.checked)}),"Show All"]}),v.jsxs("label",{className:"auto-scroll-toggle",children:[v.jsx("input",{type:"checkbox",checked:c,onChange:g=>h(g.target.checked)}),"Auto-scroll"]}),v.jsx("button",{onClick:f,className:"clear-btn",children:"Clear"})]})]}),v.jsx("div",{className:"debug-logs-container",children:p.length===0?v.jsx("div",{className:"no-logs",children:"No logs yet. Interact with the voice system to see diagnostics."}):p.map((g,S)=>v.jsxs("div",{className:`log-entry log-${g.level}`,children:[v.jsx("span",{className:"log-timestamp",children:g.timestamp}),v.jsx("span",{className:`log-category category-${g.category.toLowerCase()}`,children:g.category}),v.jsx("span",{className:"log-message",children:g.message})]},S))})]})]})]})};var yI=k.forwardRef(function({control:e,...n},i){const r=k.useRef(null);return k.useLayoutEffect(()=>{const s=r.current;if(!s)return;if(customElements.get("openai-chatkit")){s.setOptions(e.options);return}let o=!0;return customElements.whenDefined("openai-chatkit").then(()=>{o&&s.setOptions(e.options)}),()=>{o=!1}},[e.options]),v.jsx("openai-chatkit",{ref:s=>{if(r.current=s,e.setInstance(s),typeof i=="function"?i(s):i&&(i.current=s),!r.current)return;const o={"chatkit.error":"onError","chatkit.response.end":"onResponseEnd","chatkit.response.start":"onResponseStart","chatkit.log":"onLog","chatkit.thread.change":"onThreadChange","chatkit.thread.load.start":"onThreadLoadStart","chatkit.thread.load.end":"onThreadLoadEnd"},l=Object.keys(o);for(const a of l)r.current.addEventListener(a,c=>{const h=e.handlers[o[a]];typeof h=="function"&&h(c.detail)})},...n})});function Dm(t){return t!==null&&typeof t=="object"&&[null,Object.prototype].includes(Object.getPrototypeOf(t))||Array.isArray(t)}function ju(t,e,n=new WeakMap){if(Object.is(t,e))return!0;if(typeof t=="function"&&typeof e=="function")return typeof t==typeof e;if(!Dm(t)||!Dm(e))return!1;const i=n.get(t);if(i&&i===e)return!0;if(n.set(t,e),Array.isArray(t)||Array.isArray(e)){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let o=0;o<t.length;o++)if(!ju(t[o],e[o],n))return!1;return!0}const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(let o=0;o<r.length;o++){const l=r[o];if(!Object.prototype.hasOwnProperty.call(e,l))return!1;const a=t[l],c=e[l];if(!ju(a,c,n))return!1}return!0}function vI(t){const e=[],n=(s,o)=>o.reduce((l,a)=>l==null?l:l[a],s),i=(s,o)=>(...l)=>{const a=n(t.current,s),c=a?.[o];if(typeof c=="function")return c.apply(a,l)},r=s=>{if(typeof s=="function"){const o=e[e.length-1],l=e.slice(0,-1);return i(l,o)}if(Array.isArray(s)){const o=e.length,l=new Array(s.length);for(let a=0;a<s.length;a++)e[o]=a,l[a]=r(s[a]);return e.length=o,l}if(s&&typeof s=="object"){const o=e.length,l={};for(const a of Object.keys(s))e[o]=a,l[a]=r(s[a]);return e.length=o,l}return s};return r(t.current)}function wI(t){const e=xd.useRef(t);e.current=t;const n=xd.useRef(null);return(!n.current||!ju(n.current.snapshot,t))&&(n.current={snapshot:t,shaped:vI(e)}),n.current.shaped}var SI=Object.freeze(["focusComposer","setThreadId","sendUserMessage","setComposerValue","fetchUpdates","sendCustomAction"]);function xI(t){const e=k.useRef(null),n=wI(t),i=k.useMemo(()=>SI.reduce((o,l)=>(o[l]=(...a)=>{if(!e.current){console.warn("ChatKit element is not mounted");return}return e.current[l](...a)},o),{}),[]),r=k.useCallback(o=>{e.current=o},[]),s=k.useMemo(()=>{const o={},l={};for(const[a,c]of Object.entries(n))/^on[A-Z]/.test(a)&&a!=="onClientTool"?l[a]=c:o[a]=c;return{setInstance:r,options:o,handlers:l}},[n,r]);return k.useMemo(()=>({...i,control:s,ref:e}),[i,s])}function CI({className:t="h-[600px] w-[320px]"}){const{control:e}=xI({api:{async getClientSecret(n){if(n)try{const s=await fetch("https://gvses-market-insights.fly.dev/api/chatkit/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:localStorage.getItem("chatkit_device_id")||`device_${Date.now()}`})});if(!s.ok)throw new Error(`Session refresh failed: ${s.status}`);const{client_secret:o}=await s.json();return o}catch(r){console.warn("Session refresh failed, creating new session:",r)}const i=localStorage.getItem("chatkit_device_id")||`device_${Date.now()}`;localStorage.setItem("chatkit_device_id",i);try{const s=await fetch("https://gvses-market-insights.fly.dev/api/chatkit/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:i})});if(!s.ok){const l=await s.text();throw new Error(`Session creation failed: ${s.status} - ${l}`)}const{client_secret:o}=await s.json();return console.log("ChatKit session created successfully"),o}catch(r){throw console.error("Failed to create ChatKit session:",r),r}}}});return v.jsxs("div",{className:"chart-agent-chat",children:[v.jsx("div",{className:"mb-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Chart Control Assistant"}),v.jsx("div",{className:"border rounded-lg overflow-hidden shadow-sm",children:v.jsx(yI,{control:e,className:t,style:{colorScheme:"light",backgroundColor:"#ffffff",fontFamily:"system-ui, -apple-system, sans-serif"}})}),v.jsx("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:'Try: "Change chart to AAPL", "Set timeframe to 1h", "Enable RSI indicator"'})]})}const Om=({onDrag:t,orientation:e="vertical"})=>{const[n,i]=k.useState(!1),r=k.useRef(0),s=o=>{o.preventDefault(),i(!0),r.current=e==="vertical"?o.clientX:o.clientY,document.body.style.cursor=e==="vertical"?"col-resize":"row-resize"};return k.useEffect(()=>{if(!n)return;const o=a=>{const c=e==="vertical"?a.clientX:a.clientY,h=c-r.current;r.current=c,t(h)},l=()=>{i(!1),document.body.style.cursor=""};return document.addEventListener("mousemove",o),document.addEventListener("mouseup",l),()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",l)}},[n,t,e]),v.jsx("div",{className:`panel-divider ${e} ${n?"dragging":""}`,onMouseDown:s,children:v.jsx("div",{className:"divider-handle"})})},bI=t=>({"10S":1,"30S":1,"1m":1,"3m":1,"5m":1,"10m":1,"15m":1,"30m":1,"1H":2,"2H":3,"3H":3,"4H":5,"6H":5,"8H":7,"12H":7,"1D":1,"2D":2,"3D":3,"5D":5,"1W":7,"1M":30,"6M":180,"1Y":365,"2Y":730,"3Y":1095,"5Y":1825,YTD:Math.floor((Date.now()-new Date(new Date().getFullYear(),0,1).getTime())/864e5),MAX:3650})[t]||30,kI=()=>{console.log("%c [COMPONENT RENDER] TradingDashboardSimple rendering...","background: #4CAF50; color: white; font-size: 16px; font-weight: bold;");const[t,e]=k.useState(!1),[n,i]=k.useState(!1),[r,s]=k.useState("00:00"),[o,l]=k.useState("chat"),[a,c]=k.useState([]),[h,u]=k.useState(""),[d,f]=k.useState(0),[p,g]=k.useState([]),[S,m]=k.useState(!0),[y,w]=k.useState("TSLA"),[b,A]=k.useState("1D"),[E,P]=k.useState([]),[R,D]=k.useState({}),[_,j]=k.useState([]),[B,J]=k.useState([]),[Z,X]=k.useState({}),[te,se]=k.useState(null),[$,z]=k.useState(!1),[C,N]=k.useState(null),[U,x]=k.useState(null),[G,re]=k.useState("1D"),[K,O]=k.useState("agent"),[F,oe]=k.useState(()=>{const T=localStorage.getItem("marketWatchlist");return T?JSON.parse(T):["TSLA","AAPL","NVDA","SPY","PLTR"]}),[fe,Vt]=k.useState(()=>{const T=localStorage.getItem("leftPanelWidth");return T?parseInt(T):240}),[Ri,ua]=k.useState(()=>{const T=localStorage.getItem("rightPanelWidth");return T?parseInt(T):350});k.useEffect(()=>{const T=document.documentElement;T.style.setProperty("--left-panel-width",`${fe}px`),T.style.setProperty("--right-panel-width",`${Ri}px`),localStorage.setItem("leftPanelWidth",fe.toString()),localStorage.setItem("rightPanelWidth",Ri.toString())},[fe,Ri]);const ha=k.useCallback(T=>{Vt(L=>Math.max(200,Math.min(400,L+T)))},[]),Ks=k.useCallback(T=>{ua(L=>Math.max(300,Math.min(500,L-T)))},[]),ei={messages:"trading-assistant-messages",session:"trading-assistant-session"};k.useEffect(()=>{try{const T=localStorage.getItem(ei.messages);if(T){const L=JSON.parse(T),q=Date.now()-24*60*60*1e3,ve=L.filter(xe=>new Date(xe.timestamp).getTime()>q);c(ve),console.log(` Loaded ${ve.length} persisted messages from localStorage`)}}catch(T){console.error("Error loading persisted messages:",T),localStorage.removeItem(ei.messages)}},[]),k.useEffect(()=>{try{localStorage.setItem(ei.messages,JSON.stringify(a)),console.log(` Saved ${a.length} messages to localStorage`)}catch(T){if(console.error("Error saving messages to localStorage:",T),T instanceof Error&&T.name==="QuotaExceededError"){const L=a.slice(-20);try{localStorage.setItem(ei.messages,JSON.stringify(L)),c(L),console.log(" Storage full - reduced to 20 most recent messages")}catch(q){console.error("Failed to save even reduced message set:",q)}}}},[a]),k.useEffect(()=>{localStorage.setItem("marketWatchlist",JSON.stringify(F))},[F]);const Gs=async T=>{const L=T.toUpperCase().trim(),q=new Set(["BTC","ETH","ADA","DOT","SOL","MATIC","AVAX","LTC","XRP","DOGE","SHIB","UNI","LINK","BCH","XLM"]),ve=/^[A-Z]{1,5}$/.test(L),xe=/^[A-Z]{2,5}-USD$/.test(L),ie=q.has(L);if(!L||!ve&&!xe&&!ie){x({command:" Invalid symbol format",type:"error"}),setTimeout(()=>x(null),3e3);return}if(F.includes(L)){x({command:` ${L} already in watchlist`,type:"info"}),setTimeout(()=>x(null),3e3);return}try{const ke=await Un.getStockPrice(L);if(!ke||ke.price===0||ke.price===void 0)throw new Error("No valid market data");const kt=[...F,L];oe(kt),x({command:` Added ${L} to watchlist`,type:"success"}),setTimeout(()=>x(null),3e3),pa(kt)}catch(ke){console.error(`Failed to add ${L}:`,ke);const kt=ke.response?.status===404||ke.message?.includes("404")?` Symbol ${L} not found or invalid`:` Failed to add ${L}`;x({command:kt,type:"error"}),setTimeout(()=>x(null),3e3)}finally{}},_r=k.useRef(null),ti=k.useRef(null),Ni=k.useRef(null),Ar=k.useRef(null),Pr=k.useRef(null),da=k.useRef(null),qs=k.useCallback(T=>{const L={id:`user-${K}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,role:"user",content:T,timestamp:new Date().toLocaleTimeString(),provider:K};c(q=>[...q,L])},[K]),Qs=k.useCallback(async T=>{console.log(` ${K} response received:`,T);const L={id:`assistant-${K}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,role:"assistant",content:T,timestamp:new Date().toLocaleTimeString(),provider:K};c(q=>[...q,L]),console.log(` Added ${K} response to chat thread`);try{const q=await nt.parseAgentResponse(T);q.length>0&&(console.log("[Enhanced] Processing voice response chart commands:",q),q.forEach(ve=>nt.executeCommand(ve)))}catch(q){console.log("Chart command processing failed:",q)}try{const q=await We.processEnhancedResponse(T);q.length>0&&(console.log("Enhanced chart commands executed:",q),q.forEach(ve=>{const xe=`${ve.type}: ${typeof ve.value=="object"?JSON.stringify(ve.value):ve.value}`;x({command:xe,type:"success"})}))}catch(q){console.error("Error processing chart commands:",q)}},[]),M=k.useCallback(()=>{ti.current&&(ti.current.disconnect(),ti.current.port.close(),ti.current=null),Ar.current&&(Ar.current.disconnect(),Ar.current=null),_r.current&&(_r.current.close(),_r.current=null),Ni.current&&(Ni.current.getTracks().forEach(T=>T.stop()),Ni.current=null),Pr.current&&(clearInterval(Pr.current),Pr.current=null),i(!1),e(!1),s("00:00"),f(0)},[]),Y=k.useCallback(T=>{T||(i(!1),e(!1),M())},[M]),ne=k.useRef(K),ce=k.useCallback(async T=>{try{const L=await Vo.getChartSnapshot(T,G);if(L&&L.analysis){if(se(L),L.analysis?.patterns){const ve=L.analysis.patterns.map((xe,ie)=>({...xe,id:`backend-${T}-${ie}-${Date.now()}`,source:"backend",timestamp:L.captured_at}));J(ve),L.analysis.summary&&(x({command:` Analysis: ${L.analysis.summary}`,type:"info"}),setTimeout(()=>x(null),5e3))}const q=L.analysis?.patterns??[];if(L.analysis?.summary||q.length>0){const ve={id:`snapshot-${Date.now()}`,role:"assistant",content:` Chart Analysis:
${L.analysis?.summary||""}

Detected ${q.length} patterns with ${L.vision_model||"vision model"}`,timestamp:new Date().toLocaleTimeString(),provider:"agent",data:{snapshot:L.analysis}};c(xe=>[...xe,ve])}}}catch(L){console.error("Failed to fetch chart snapshot:",L)}},[G]),ge=k.useCallback((T,L)=>{X(q=>({...q,[T]:L})),x({command:`Pattern ${L==="accepted"?" Accepted":" Rejected"}`,type:L==="accepted"?"success":"info"}),setTimeout(()=>x(null),2e3)},[]);k.useEffect(()=>{const T=ne.current;T!==K&&(console.log(`Switching from ${T} to ${K}, cleaning up...`),T==="elevenlabs"?yu(()=>Promise.resolve().then(()=>Zk),void 0).then(L=>{L.ElevenLabsConnectionManager.getInstance().disconnect()}):T==="openai"&&yu(()=>Promise.resolve().then(()=>wE),void 0).then(L=>{L.OpenAIRealtimeService.getInstance().disconnect()}),ne.current=K)},[K]);const Ae=xE({apiUrl:"https://gvses-market-insights.fly.dev",onMessage:T=>{const L={id:T.id,role:T.role,content:T.content,timestamp:new Date(T.timestamp).toLocaleTimeString(),provider:"agent",data:T.data};if(c(q=>[...q,L]),T.role==="assistant"&&T.toolsUsed?.length&&(x({command:` Tools: ${T.toolsUsed.join(", ")}`,type:"info"}),setTimeout(()=>x(null),3e3)),T.role==="assistant"){const q=T.data?.chart_commands,ve=Array.isArray(q)?q:[];if(ve.length>0){We.processEnhancedResponse(ve.join(" ")).catch(ie=>{console.error("Failed to execute chart commands from message data:",ie)});const xe=ve.find(ie=>ie.startsWith("LOAD:"));if(xe){const ie=xe.split(":")[1];ie&&setTimeout(()=>{ce(ie)},1e3)}}}},onConnectionChange:Y,onError:T=>{x({command:` Error: ${T}`,type:"error"}),setTimeout(()=>x(null),4e3)},onThinking:T=>{console.log("Agent thinking:",T)}}),ze=eE({apiUrl:"https://gvses-market-insights.fly.dev",onUserTranscript:qs,onAgentResponse:Qs,onConnectionChange:Y}),Pe=SE({apiUrl:"https://gvses-market-insights.fly.dev",onUserTranscript:qs,onAgentResponse:Qs,onConnectionChange:Y,onToolCall:(T,L)=>{console.log("OpenAI tool call:",T,L),x({command:` Tool: ${T}`,type:"info"}),setTimeout(()=>x(null),2e3)},onToolResult:(T,L)=>{console.log("OpenAI tool result:",T,L),x({command:` Tool completed: ${T}`,type:"success"}),setTimeout(()=>x(null),2e3)}}),Zt=k.useMemo(()=>({agent:{provider:"agent",isConnected:Ae.isConnected,isLoading:Ae.isLoading,messages:a.filter(T=>T.provider==="agent"),startConversation:async()=>{await Ae.connect()},stopConversation:Ae.disconnect,sendTextMessage:Ae.sendTextMessage,sendAudioChunk:()=>{}},elevenlabs:{provider:"elevenlabs",isConnected:ze.isConnected,isLoading:ze.isLoading,messages:a.filter(T=>T.provider==="elevenlabs"),startConversation:()=>ze.startConversation(),stopConversation:ze.stopConversation,sendTextMessage:ze.sendTextMessage,sendAudioChunk:ze.sendAudioChunk},openai:{provider:"openai",isConnected:Pe.isConnected,isLoading:Pe.isLoading,messages:a.filter(T=>T.provider==="openai"),startConversation:()=>Pe.startConversation(),stopConversation:Pe.stopConversation,sendTextMessage:Pe.sendTextMessage,sendAudioChunk:Pe.sendAudioChunk}}),[Ae.connect,Ae.disconnect,Ae.isConnected,Ae.isLoading,Ae.sendTextMessage,a,ze.isConnected,ze.isLoading,ze.sendAudioChunk,ze.sendTextMessage,ze.startConversation,ze.stopConversation,Pe.isConnected,Pe.isLoading,Pe.sendAudioChunk,Pe.sendTextMessage,Pe.startConversation,Pe.stopConversation]),Ue=Zt[K],Re=Ue.isConnected,en=Ue.isLoading&&!Ue.isConnected;CE({enabled:!0,pollingInterval:1e3,onCommandExecuted:(T,L,q)=>{x({command:` ${q}`,type:L?"success":"error"}),setTimeout(()=>x(null),4e3),console.log(`Chart Command Executed: ${q} (${L?"Success":"Failed"})`)},onError:T=>{console.error("Chart Command Processor Error:",T),x({command:" Chart control error",type:"error"}),setTimeout(()=>x(null),3e3)}});const Dt=k.useMemo(()=>[...a].sort((T,L)=>new Date(T.timestamp).getTime()-new Date(L.timestamp).getTime()),[a]),fd=k.useRef(K);k.useEffect(()=>{const T=fd.current,L=K;console.log(`Voice provider switched from ${T} to: ${L}`),T!==L&&Zt[T].isConnected&&(console.log("Disconnecting from previous provider due to provider switch"),Zt[T].stopConversation()),fd.current=L,T!==L&&(i(!1),e(!1),u(""))},[K,Zt]);const fa=async()=>{console.log(" [DASHBOARD] ==================== handleConnectToggle CLICKED ===================="),console.log(" [DASHBOARD] voiceProvider:",K),console.log(" [DASHBOARD] currentConversation.isConnected:",Ue.isConnected),console.log(" [DASHBOARD] currentConversation.provider:",Ue.provider);const T=Date.now();if(T-gd.current<1e3){console.log(" [DASHBOARD] DEBOUNCED: Too soon since last attempt");return}if(gd.current=T,Ue.isConnected)console.log(" [DASHBOARD] Already connected - DISCONNECTING"),M(),Ue.stopConversation(),md.current=!1;else{const L=K==="elevenlabs"?"ElevenLabs":K==="agent"?"Agent Voice":"OpenAI Realtime";console.log(` [DASHBOARD] Not connected - CONNECTING to ${L}...`),console.log(" [DASHBOARD] About to call currentConversation.startConversation()..."),console.log(" [DASHBOARD] startConversation function:",typeof Ue.startConversation);try{await Ue.startConversation(),console.log(" [DASHBOARD]  startConversation() COMPLETED")}catch(q){console.error(" [DASHBOARD]  Failed to connect:",q),alert(`Failed to connect to ${L} voice assistant. Please check your connection and try again.`)}}},pd=()=>{if(console.log(" handleSendTextMessage called"),console.log(" Input text:",h),console.log(" Is connected:",Ue.isConnected),console.log(" Voice provider:",K),h.trim()){n&&(console.log("Stopping voice recording before sending text message"),M());const T=h.trim(),L=`${K}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,q=new Date().toISOString();console.info("[agent] query_dispatch",JSON.stringify({timestamp:q,provider:K,messageId:L,query:T}));const ve={id:`user-${L}`,role:"user",content:T,timestamp:q,provider:K};c(ie=>[...ie,ve]),console.log(" Added user message to chat thread");const xe=T;switch(u(""),K){case"agent":fetch("https://gvses-market-insights.fly.dev/api/agent/orchestrate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:xe})}).then(ie=>ie.json()).then(ie=>{const ke=new Date().toISOString();if(console.info("[agent] query_response",JSON.stringify({timestamp:ke,provider:"agent",messageId:L,toolsUsed:ie?.tools_used,chartCommands:ie?.chart_commands})),ie.text){const kt={id:`assistant-agent-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,role:"assistant",content:ie.text,timestamp:new Date().toISOString(),provider:"agent"};c(ft=>[...ft,kt]),console.log(" Added backend agent response to chat"),Array.isArray(ie.chart_commands)&&ie.chart_commands.length>0&&(console.info("[agent] executing_chart_commands",JSON.stringify({timestamp:ke,messageId:L,chartCommands:ie.chart_commands})),We.processEnhancedResponse(ie.chart_commands.join(" ")).catch(ft=>{console.error("Failed to execute chart commands from agent response:",ft)}));try{const ft=ie.text.match(/```json\s*({[\s\S]*?})\s*```/);if(ft&&ft[1]){const yd=JSON.parse(ft[1]);if(yd.swing_trade){const ni=yd.swing_trade;console.log(" Found swing trade data:",ni),D(s0=>({...s0,entry_points:ni.entry_points,stop_loss:ni.stop_loss,targets:ni.targets,risk_reward:ni.risk_reward,support_levels:ni.support_levels,resistance_levels:ni.resistance_levels})),x({command:`Swing trade levels updated for ${y}`,type:"success"})}}}catch(ft){console.log("No swing trade JSON found in response:",ft)}}}).catch(ie=>{const ke=new Date().toISOString();console.error("[agent] query_error",JSON.stringify({timestamp:ke,provider:"agent",messageId:L,error:ie?.message||ie})),console.error("Backend agent error:",ie)});break;case"elevenlabs":case"openai":Ue.isConnected?Ue.sendTextMessage(xe):setTimeout(()=>{const ie={id:`assistant-${Date.now()}-${Math.random()}`,role:"assistant",content:"Please connect the voice assistant (mic) to use voice providers.",timestamp:new Date().toISOString(),provider:K};c(ke=>[...ke,ie])},300);break;default:console.warn("Unknown provider:",K)}}else console.log(" Cannot send message - no text entered")},r0=T=>{N(C===T?null:T)},pa=async T=>{const L=T||F;m(!0);try{const q=L.map(async xe=>{const ie=await Un.getStockPrice(xe);let ke="ST",kt="Neutral momentum";const ft=ie.change_percent||ie.change_pct||0;return ft>2?(ke="QE",kt="Bullish momentum"):ft<-2?(ke="LTB",kt="Support level"):Math.abs(ft)<.5?(ke="ST",kt="Consolidation"):ft>0?(ke="ST",kt="Upward trend"):(ke="LTB",kt="Downward pressure"),{symbol:ie.symbol,price:ie.price||ie.last||0,change:ie.change||ie.change_abs||0,changePercent:ie.change_percent||ie.change_pct||0,label:ke,description:kt,volume:ie.volume||0}}),ve=await Promise.all(q);g(ve)}catch(q){console.error("Error fetching stock data:",q),g([{symbol:"TSLA",price:245.67,change:5.29,changePercent:2.21,label:"QE",description:"Bullish momentum"},{symbol:"AAPL",price:189.43,change:-2.12,changePercent:-1.11,label:"LTB",description:"Support level"},{symbol:"NVDA",price:421.88,change:8.9,changePercent:2.15,label:"QE",description:"Breakout pattern"},{symbol:"SPY",price:445.23,change:3.47,changePercent:.79,label:"ST",description:"Consolidation"}])}m(!1)},ma=async T=>{z(!0);try{const L=await Un.getStockNews(T);P(L)}catch(L){console.error("Error fetching news:",L),P([{title:`${T} shows bullish flag pattern forming`,time:"2 min ago"},{title:"Price testing key support levels",time:"5 min ago"},{title:"Volume breakout above resistance",time:"8 min ago"}])}try{const L=await Un.getComprehensiveData(T);L.technical_levels?D(L.technical_levels):D({});const q=L.patterns?.detected||[];if(q.length>0){const ve=[...q].sort((ie,ke)=>(ke.confidence||0)-(ie.confidence||0));j(ve.slice(0,3));const xe=ve[0];We.clearDrawings(),We.revealPattern(xe?.type||"Pattern",{title:xe?.description||xe?.type,description:xe?.agent_explanation||xe?.summary,indicator:xe?.related_indicator})}else j([]),We.clearDrawings()}catch(L){console.error("Error fetching comprehensive data:",L),D({}),j([]),We.clearDrawings()}z(!1)};k.useEffect(()=>{pa(F);const T=setInterval(()=>pa(F),3e4);return()=>clearInterval(T)},[F]),k.useEffect(()=>{ma(y)},[y]),k.useEffect(()=>{try{const{dispatch:T}=na();We.setIndicatorDispatch(T),console.log("Indicator controls connected to agent")}catch{console.log("IndicatorContext not available - agent indicator control disabled")}typeof We.registerCallbacks=="function"&&We.registerCallbacks({onSymbolChange:(T,L)=>{console.log("Voice command: Changing symbol to",T,"Type:",L?.assetType);const q=T.toUpperCase(),ve=/^[A-Z]{1,5}(-USD)?$/.test(q)||/^BRK\.[AB]$/.test(q),xe=F.includes(q.replace("-USD","")),ie=L?.assetType==="crypto"||q.endsWith("-USD");if(!ve){console.warn(`Invalid symbol format rejected: ${T}`),x({command:` Invalid symbol: ${T}`,type:"error"}),setTimeout(()=>x(null),3e3);return}if(!ie&&!xe){Gs(q.replace("-USD","")).then(()=>{w(q),ma(q)}).catch(()=>{x({command:` Symbol not found: ${T}`,type:"error"}),setTimeout(()=>x(null),3e3)});return}w(q),ma(q);const ke=L?.assetType==="crypto"?"":"";x({command:`${ke} Symbol: ${q}`,type:"success"}),setTimeout(()=>x(null),3e3)},onTimeframeChange:T=>{console.log("Voice command: Changing timeframe to",T),re(T),x({command:`Timeframe: ${T}`,type:"success"}),setTimeout(()=>x(null),3e3)},onIndicatorToggle:(T,L)=>{console.log(`Voice command: ${T} ${L?"enabled":"disabled"}`),x({command:`${T} ${L?"enabled":"disabled"}`,type:"info"}),setTimeout(()=>x(null),3e3)},onZoomChange:T=>{console.log("Voice command: Zoom level",T),x({command:T>1?"Zoomed in":"Zoomed out",type:"info"}),setTimeout(()=>x(null),3e3)},onScrollToTime:T=>{console.log("Voice command: Scrolling to time",T)},onStyleChange:T=>{console.log("Voice command: Chart style changed to",T),x({command:`Style: ${{candles:"Candlestick",line:"Line Chart",area:"Area Chart"}[T]}`,type:"success"}),setTimeout(()=>x(null),3e3)},onPatternHighlight:(T,L)=>{console.log("Voice command: highlight pattern",T);const q=We.revealPattern(T,L);x({command:q,type:"info"}),setTimeout(()=>x(null),3e3)},onCommandExecuted:(T,L,q)=>{x({command:q,type:L?"success":"error"})},onCommandError:T=>{x({command:T,type:"error"})}})},[]);const md=k.useRef(!1),gd=k.useRef(0);return k.useRef(!0),k.useEffect(()=>{te?.chart_commands?.length>0&&(console.log("Executing backend chart commands:",te.chart_commands),We.processEnhancedResponse(te.chart_commands.join(" ")).catch(T=>{console.error("Failed to execute backend chart commands:",T)}))},[te]),k.useEffect(()=>(Ue.isConnected||(md.current=!1),()=>{}),[Ue.isConnected]),v.jsxs("div",{className:"trading-dashboard-simple","data-testid":"trading-dashboard",children:[U&&v.jsx(bE,{command:U.command,type:U.type,duration:2500,onClose:()=>x(null)}),v.jsxs("header",{className:"dashboard-header-with-tickers",children:[v.jsxs("div",{className:"header-left",children:[v.jsx("h1",{className:"brand",children:"GVSES"}),v.jsx("span",{className:"subtitle",children:"Market Assistant"})]}),v.jsx("div",{className:"header-tickers",children:S?v.jsx("div",{className:"ticker-loading",children:"Loading..."}):p.slice(0,5).map(T=>v.jsxs("div",{className:`ticker-compact ${y===T.symbol?"selected":""}`,onClick:()=>w(T.symbol),title:`${T.symbol}: ${T.label}`,children:[v.jsxs("div",{className:"ticker-compact-left",children:[v.jsx("div",{className:"ticker-symbol-compact",children:T.symbol}),v.jsxs("div",{className:"ticker-price-compact",children:["$",T.price.toFixed(2)]})]}),v.jsx("div",{className:"ticker-compact-right",children:v.jsxs("div",{className:`ticker-change-compact ${T.change>=0?"positive":"negative"}`,children:[T.change>=0?"+":"",T.changePercent.toFixed(1),"%"]})})]},T.symbol))}),v.jsx("div",{className:"header-controls",children:v.jsx("span",{className:"status-indicator",children:Re?"":""})})]}),v.jsxs("div",{className:"dashboard-layout",children:[v.jsxs("aside",{className:"analysis-panel-left",style:{width:`${fe}px`},children:[v.jsx("h2",{className:"panel-title",children:"CHART ANALYSIS"}),v.jsx("div",{className:"analysis-content",children:$?v.jsx("div",{className:"loading-spinner",children:"Loading analysis..."}):v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"news-scroll-container",children:E.map((T,L)=>v.jsxs("div",{className:"analysis-item clickable-news",children:[v.jsxs("div",{className:"news-header",onClick:()=>r0(L),children:[v.jsxs("div",{className:"analysis-header",children:[v.jsx("h3",{children:y}),v.jsx("span",{className:"time",children:T.published||T.time||`${L*3+2} min ago`})]}),v.jsx("p",{className:"news-title",children:T.title}),v.jsxs("div",{className:"news-source",children:[v.jsx("span",{className:"source-name",children:T.source||"Market News"}),v.jsx("span",{className:"expand-icon",children:C===L?"":""})]})]}),C===L&&v.jsxs("div",{className:"news-expanded",children:[T.description&&v.jsx("p",{className:"news-description",children:T.description}),T.url&&v.jsx("a",{href:T.url,target:"_blank",rel:"noopener noreferrer",className:"news-link",onClick:q=>q.stopPropagation(),children:"Read Full Article "})]})]},L))}),v.jsxs("div",{className:"technical-section",children:[v.jsx("h4",{children:"TECHNICAL LEVELS"}),v.jsxs("div",{className:"level-row",children:[v.jsx("span",{children:"Sell High"}),v.jsxs("span",{className:"level-val qe",children:["$",R.sell_high_level?R.sell_high_level.toFixed(2):"---"]})]}),v.jsxs("div",{className:"level-row",children:[v.jsx("span",{children:"Buy Low"}),v.jsxs("span",{className:"level-val st",children:["$",R.buy_low_level?R.buy_low_level.toFixed(2):"---"]})]}),v.jsxs("div",{className:"level-row",children:[v.jsx("span",{children:"BTD"}),v.jsxs("span",{className:"level-val ltb",children:["$",R.btd_level?R.btd_level.toFixed(2):"---"]})]})]}),v.jsxs("div",{className:"pattern-section",children:[v.jsx("h4",{children:"PATTERN DETECTION"}),_.length>0&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"pattern-source-label",children:"Local Analysis"}),_.map((T,L)=>v.jsxs("div",{className:"pattern-box",children:[v.jsx("div",{className:"pattern-name",children:T.description||T.type}),v.jsxs("div",{className:"pattern-conf",children:["Confidence: ",T.confidence?`${Math.round(T.confidence)}%`:"N/A"]}),T.agent_explanation&&v.jsx("div",{className:"pattern-desc",children:T.agent_explanation})]},`local-${T.type}-${L}`))]}),B.length>0&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"pattern-source-label",children:"Server Analysis"}),B.map(T=>{const L=Z[T.id];return v.jsxs("div",{className:`pattern-box backend-pattern ${L?`pattern-${L}`:""}`,children:[v.jsxs("div",{className:"pattern-header",children:[v.jsx("div",{className:"pattern-name",children:T.type}),v.jsxs("div",{className:"pattern-validation-controls",children:[v.jsx("button",{className:`pattern-btn accept ${L==="accepted"?"active":""}`,onClick:()=>ge(T.id,"accepted"),title:"Accept pattern",children:""}),v.jsx("button",{className:`pattern-btn reject ${L==="rejected"?"active":""}`,onClick:()=>ge(T.id,"rejected"),title:"Reject pattern",children:""})]})]}),v.jsxs("div",{className:"pattern-conf",children:["Confidence: ",T.confidence?`${Math.round(T.confidence*100)}%`:"N/A"]}),T.description&&v.jsx("div",{className:"pattern-desc",children:T.description}),T.targets&&T.targets.length>0&&v.jsxs("div",{className:"pattern-targets",children:["Targets: ",T.targets.map(q=>`$${q.toFixed(2)}`).join(", ")]})]},T.id)})]}),_.length===0&&B.length===0&&v.jsx("div",{className:"pattern-empty",children:"No patterns detected. Try asking for chart analysis."})]})]})})]}),v.jsx(Om,{onDrag:ha}),v.jsxs("main",{className:"main-content",children:[v.jsxs("div",{className:"chart-section",children:[v.jsx(Xk,{selected:b,options:["1D","5D","1M","6M","1Y","2Y","3Y","YTD","MAX"],onChange:T=>A(T)}),v.jsx("div",{className:"chart-wrapper",children:v.jsx(qk,{symbol:y,days:bI(b),technicalLevels:R,onChartReady:T=>{da.current=T,nt.setChartRef(T),We.setChartRef(T),console.log("Chart ready for enhanced agent control")}})})]}),Re&&v.jsxs("div",{className:"voice-status-bar","data-testid":"voice-interface",children:[v.jsxs("div",{className:"audio-level-mini",children:[v.jsx("div",{className:"audio-bar",style:{height:`${Math.min(100,d*500)}%`}}),v.jsx("div",{className:"audio-bar",style:{height:`${Math.min(100,d*400)}%`}}),v.jsx("div",{className:"audio-bar",style:{height:`${Math.min(100,d*600)}%`}})]}),v.jsx("span",{className:"voice-status-text",children:t?"Listening...":"Connected"})]})]}),v.jsx(Om,{onDrag:Ks}),v.jsxs("aside",{className:"voice-panel-right",style:{width:`${Ri}px`},children:[v.jsxs("div",{className:"assistant-tabs",children:[v.jsx("button",{className:`tab-button ${o==="voice"?"active":""}`,onClick:()=>l("voice"),children:" Voice"}),v.jsx("button",{className:`tab-button ${o==="chat"?"active":""}`,onClick:()=>l("chat"),children:" Chart Control"})]}),o==="voice"&&v.jsxs("div",{className:"voice-conversation-section",style:{height:"calc(100% - 50px)"},children:[v.jsx("h2",{className:"panel-title",children:"VOICE ASSISTANT"}),v.jsx("div",{className:"conversation-messages-compact",children:Dt.length===0?v.jsx("div",{className:"no-messages-state",children:v.jsxs("p",{children:[" ",Re?"Listening...":"Click mic to start"]})}):Dt.map(T=>v.jsxs("div",{className:"conversation-message-enhanced",children:[v.jsx("div",{className:"message-avatar",children:T.role==="user"?"":""}),v.jsxs("div",{className:"message-bubble",children:[T.role==="assistant"?v.jsx(n0,{content:T.content,className:"message-text-enhanced"}):v.jsx("div",{className:"message-text-enhanced",children:T.content}),T.timestamp&&v.jsx("div",{className:"message-timestamp",children:new Date(T.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},T.id))}),v.jsxs("div",{className:"voice-input-container",children:[v.jsx("input",{type:"text",className:"voice-text-input",placeholder:Re?"Type a message...":"Connect to send messages",value:h,onChange:T=>u(T.target.value),onKeyPress:T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),pd())},disabled:!1}),v.jsx("button",{className:"voice-send-button",onClick:pd,disabled:!h.trim(),title:"Send message",children:v.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:v.jsx("path",{d:"M22 2L11 13M22 2L15 22L11 13L2 9L22 2Z"})})})]})]}),o==="chat"&&v.jsx("div",{className:"chatkit-section",style:{height:"calc(100% - 50px)",padding:"10px"},children:v.jsx(CI,{className:"h-full w-full"})})]})]}),v.jsx("button",{className:`voice-fab ${Re?"active":""} ${en?"connecting":""}`,onClick:()=>{console.log(" [BUTTON] ==================== MICROPHONE BUTTON CLICKED ===================="),console.log(" [BUTTON] Step 1: Click registered"),console.log(" [BUTTON] Step 2: Checking handleConnectToggle..."),console.log(" [BUTTON] handleConnectToggle type:",typeof fa),console.log(" [BUTTON] handleConnectToggle exists:",!!fa),console.log(" [BUTTON] Step 3: About to call handleConnectToggle()");try{fa(),console.log(" [BUTTON] Step 4: handleConnectToggle() completed successfully")}catch(T){console.error(" [BUTTON] ERROR in handleConnectToggle:",T),console.error(" [BUTTON] Error details:",String(T))}},title:Re?"Disconnect Voice":"Connect Voice","data-testid":"voice-fab",children:en?"":Re?"":""}),v.jsx(EE,{isVisible:Re,position:"right",maxHeight:400}),v.jsx(gI,{isConnected:Re,isLoading:en,voiceProvider:K,openAIConnected:Pe.isConnected,agentVoiceConnected:Ae.isConnected})]})};class dd{_config;_capabilities;_connectionState="disconnected";_eventHandlers=new Map;_isInitialized=!1;constructor(e){this._config=e,this._capabilities=e.capabilities}get config(){return this._config}get capabilities(){return this._capabilities}get connectionState(){return this._connectionState}get isInitialized(){return this._isInitialized}on(e,n){this._eventHandlers.has(e)||this._eventHandlers.set(e,[]),this._eventHandlers.get(e).push(n)}off(e,n){const i=this._eventHandlers.get(e);if(i){const r=i.indexOf(n);r>-1&&i.splice(r,1)}}emit(e,n){const i=this._eventHandlers.get(e);i&&i.forEach(r=>{try{r(n)}catch(s){console.error(`Error in event handler for ${e}:`,s)}})}async destroy(){await this.disconnect(),this._eventHandlers.clear(),this._isInitialized=!1}updateConnectionState(e){this._connectionState!==e&&(this._connectionState=e,this.emit("connection",{state:e,timestamp:new Date().toISOString()}))}handleError(e){const n=e instanceof Error?e.message:e;console.error(`Provider Error (${this._config.type}):`,n),this.updateConnectionState("error"),this.emit("error",{error:n,timestamp:new Date().toISOString()})}validateConfig(e){if(!e.type)throw new Error("Provider type is required");if(!e.name)throw new Error("Provider name is required");if(!e.capabilities)throw new Error("Provider capabilities are required")}generateId(){return`${this._config.type}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}createMessage(e,n,i){return{id:this.generateId(),role:e,content:n,timestamp:new Date().toISOString(),metadata:i}}async updateConfig(e){const n={...this._config,...e};this.validateConfig(n);const i=this._connectionState==="connected";i&&await this.disconnect(),this._config=n,this._capabilities=n.capabilities,i&&await this.connect(),this.emit("configUpdated",{config:n})}async healthCheck(){try{return this._connectionState==="connected"&&this._isInitialized}catch{return!1}}getProviderInfo(){return{type:this._config.type,name:this._config.name,capabilities:this._capabilities,connectionState:this._connectionState,isInitialized:this._isInitialized,config:{...this._config,apiKey:this._config.apiKey?"***":void 0}}}}class cs extends dd{websocket=null;audioQueue=[];isPlaying=!1;currentVoiceId;apiUrl;constructor(e){super(e),this.apiUrl=e.apiUrl||window.location.origin,this.currentVoiceId=e.voice}static getDefaultCapabilities(){return{voiceConversation:!0,textChat:!0,textToSpeech:!0,speechToText:!0,streaming:!0,tools:!0}}async initialize(e){if(this.validateConfig(e),!e.agentId)throw new Error("ElevenLabs agent ID is required");this._config=e,this._capabilities=e.capabilities||cs.getDefaultCapabilities(),this._isInitialized=!0,this.emit("initialized",{provider:"elevenlabs"})}async connect(){if(!(this._connectionState==="connected"||this._connectionState==="connecting")){this.updateConnectionState("connecting");try{const e=await this.getSignedUrl();this.websocket=new WebSocket(e),this.websocket.onopen=()=>{console.log("ElevenLabs WebSocket connected"),this.updateConnectionState("connected"),this.sendWebSocketMessage({type:"conversation_initiation_client_data"})},this.websocket.onmessage=n=>{this.handleWebSocketMessage(n)},this.websocket.onerror=n=>{console.error("WebSocket error:",n),this.handleError("WebSocket connection failed")},this.websocket.onclose=()=>{console.log("WebSocket closed"),this.updateConnectionState("disconnected"),this.websocket=null}}catch(e){this.handleError(e instanceof Error?e.message:"Failed to connect")}}}async disconnect(){this.websocket&&(this.websocket.close(),this.websocket=null),this.audioQueue=[],this.isPlaying=!1,this.updateConnectionState("disconnected")}async startConversation(){this._connectionState!=="connected"&&await this.connect(),this.emit("conversationStarted",{timestamp:new Date().toISOString()})}async stopConversation(){await this.disconnect(),this.emit("conversationStopped",{timestamp:new Date().toISOString()})}async sendAudio(e){if(this._connectionState!=="connected"||!this.websocket)throw new Error("Not connected to ElevenLabs");this.sendWebSocketMessage({user_audio_chunk:e.data})}async sendMessage(e){if(this._connectionState!=="connected"||!this.websocket)throw new Error("Not connected to ElevenLabs");this.sendWebSocketMessage({type:"user_message",text:e});const n=this.createMessage("user",e);this.emit("message",n)}async setVoice(e){this.currentVoiceId=e}async getAvailableVoices(){return[{id:"default",name:"Default Voice"}]}async getSignedUrl(e){const n=e?`?agent_id=${e}`:this._config.agentId?`?agent_id=${this._config.agentId}`:"",i=await fetch(`${this.apiUrl}/elevenlabs/signed-url${n}`);if(!i.ok)throw new Error("Failed to get signed URL from backend");return(await i.json()).signed_url}sendWebSocketMessage(e){this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify(e))}handleWebSocketMessage(e){try{const n=JSON.parse(e.data);switch(console.log("ElevenLabs message:",n.type),n.type){case"user_transcript":this.handleUserTranscript(n);break;case"agent_response":this.handleAgentResponse(n);break;case"agent_response_correction":this.handleAgentResponseCorrection(n);break;case"audio":this.handleAudioChunk(n);break;case"ping":this.handlePing(n);break;case"interruption":this.handleInterruption(n);break;case"conversation_initiation_metadata":this.emit("conversationInitialized",n);break;default:console.log("Unknown message type:",n.type)}}catch(n){console.error("Error parsing WebSocket message:",n)}}handleUserTranscript(e){const n=e.user_transcription_event?.user_transcript;if(n){const i=this.createMessage("user",n);this.emit("message",i),this.emit("transcript",n)}}handleAgentResponse(e){const n=e.agent_response_event?.agent_response;if(n){const i=this.createMessage("assistant",n);this.emit("message",i)}}handleAgentResponseCorrection(e){const n=e.agent_response_correction_event?.corrected_agent_response;if(n){const i=this.createMessage("assistant",n,{type:"correction"});this.emit("message",i)}}handleAudioChunk(e){const n=e.audio_event?.audio_base_64;if(n){this.audioQueue.push(n),this.playNextAudio();const i={data:n,format:"pcm",sampleRate:16e3,channels:1};this.emit("audio",i)}}handlePing(e){const n=e.ping_event?.event_id,i=e.ping_event?.ping_ms||0;setTimeout(()=>{this.websocket?.readyState===WebSocket.OPEN&&this.sendWebSocketMessage({type:"pong",event_id:n})},i)}handleInterruption(e){console.log("Conversation interrupted:",e.interruption_event?.reason),this.emit("interruption",e.interruption_event)}async playNextAudio(){if(this.isPlaying||this.audioQueue.length===0)return;this.isPlaying=!0;const e=this.audioQueue.shift();if(e)try{await this.playAudioChunk(e)}catch(n){console.error("Error playing audio:",n)}this.isPlaying=!1,this.audioQueue.length>0&&this.playNextAudio()}async playAudioChunk(e){const n=atob(e),i=new Uint8Array(n.length);for(let y=0;y<n.length;y++)i[y]=n.charCodeAt(y);const r=16e3,s=1,o=16,l=r*s*(o/8),a=s*(o/8),c=i.length,h=44+c,u=new ArrayBuffer(h),d=new DataView(u),f=(y,w)=>{for(let b=0;b<w.length;b++)d.setUint8(y+b,w.charCodeAt(b))};f(0,"RIFF"),d.setUint32(4,h-8,!0),f(8,"WAVE"),f(12,"fmt "),d.setUint32(16,16,!0),d.setUint16(20,1,!0),d.setUint16(22,s,!0),d.setUint32(24,r,!0),d.setUint32(28,l,!0),d.setUint16(32,a,!0),d.setUint16(34,o,!0),f(36,"data"),d.setUint32(40,c,!0),new Uint8Array(u,44).set(i);const g=new Blob([u],{type:"audio/wav"}),S=URL.createObjectURL(g),m=new Audio(S);return new Promise((y,w)=>{m.onended=()=>{URL.revokeObjectURL(S),y()},m.onerror=b=>{URL.revokeObjectURL(S),w(b)},m.play().catch(w)})}}class us extends dd{apiKey;baseUrl;model;voice;websocket=null;conversationHistory=[];constructor(e){super(e),this.apiKey=e.apiKey||"",this.baseUrl=e.apiUrl||"https://api.openai.com/v1",this.model=e.model||"gpt-4",this.voice=e.voice||"alloy"}static getDefaultCapabilities(){return{voiceConversation:!0,textChat:!0,textToSpeech:!0,speechToText:!0,streaming:!0,tools:!0}}async initialize(e){if(this.validateConfig(e),!e.apiKey)throw new Error("OpenAI API key is required");this._config=e,this._capabilities=e.capabilities||us.getDefaultCapabilities(),this.apiKey=e.apiKey,this._isInitialized=!0,this.emit("initialized",{provider:"openai"})}async connect(){if(!(this._connectionState==="connected"||this._connectionState==="connecting")){this.updateConnectionState("connecting");try{this.updateConnectionState("connected")}catch(e){this.handleError(e instanceof Error?e.message:"Failed to connect")}}}async disconnect(){this.websocket&&(this.websocket.close(),this.websocket=null),this.updateConnectionState("disconnected")}async sendMessage(e,n){if(!this._isInitialized)throw new Error("Provider not initialized");const i=this.createMessage("user",e);this.conversationHistory.push(i),this.emit("message",i);try{const r=[...n?n.map(c=>({role:"system",content:c})):[],...this.conversationHistory.map(c=>({role:c.role,content:c.content}))],s=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:this.model,messages:r,temperature:.7,max_tokens:1e3})});if(!s.ok)throw new Error(`OpenAI API error: ${s.statusText}`);const l=(await s.json()).choices[0]?.message?.content||"",a=this.createMessage("assistant",l);return this.conversationHistory.push(a),this.emit("message",a),a}catch(r){const s=r instanceof Error?r.message:"Failed to send message";throw this.handleError(s),new Error(s)}}async*streamMessage(e,n){if(!this._isInitialized)throw new Error("Provider not initialized");const i=this.createMessage("user",e);this.conversationHistory.push(i),this.emit("message",i);try{const r=[...n?n.map(a=>({role:"system",content:a})):[],...this.conversationHistory.map(a=>({role:a.role,content:a.content}))],s=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:this.model,messages:r,temperature:.7,max_tokens:1e3,stream:!0})});if(!s.ok)throw new Error(`OpenAI API error: ${s.statusText}`);const o=s.body?.getReader();if(!o)throw new Error("No response body");let l="";try{for(;;){const{done:a,value:c}=await o.read();if(a)break;const u=new TextDecoder().decode(c).split(`
`);for(const d of u)if(d.startsWith("data: ")){const f=d.slice(6);if(f==="[DONE]")break;try{const g=JSON.parse(f).choices[0]?.delta?.content||"";g&&(l+=g,yield g)}catch{}}}}finally{o.releaseLock()}if(l){const a=this.createMessage("assistant",l);this.conversationHistory.push(a),this.emit("message",a)}}catch(r){const s=r instanceof Error?r.message:"Failed to stream message";throw this.handleError(s),new Error(s)}}async setModel(e){this.model=e,await this.updateConfig({...this._config,model:e})}async getAvailableModels(){return[{id:"gpt-5",name:"GPT-5"},{id:"gpt-5-mini",name:"GPT-5 Mini"}]}async startConversation(){this._connectionState!=="connected"&&await this.connect(),this.emit("conversationStarted",{timestamp:new Date().toISOString()})}async stopConversation(){this.websocket&&(this.websocket.close(),this.websocket=null),this.emit("conversationStopped",{timestamp:new Date().toISOString()})}async sendAudio(e){throw new Error("Audio processing requires backend integration with OpenAI Whisper API")}async setVoice(e){this.voice=e,await this.updateConfig({...this._config,voice:e})}async getAvailableVoices(){return[{id:"alloy",name:"Alloy"},{id:"echo",name:"Echo"},{id:"fable",name:"Fable"},{id:"onyx",name:"Onyx"},{id:"nova",name:"Nova"},{id:"shimmer",name:"Shimmer"}]}async synthesizeText(e){try{const n=await fetch(`${this.baseUrl}/audio/speech`,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:"tts-1",input:e,voice:this.voice,response_format:"mp3"})});if(!n.ok)throw new Error(`OpenAI TTS error: ${n.statusText}`);const i=await n.arrayBuffer();return{data:btoa(String.fromCharCode(...new Uint8Array(i))),format:"mp3",sampleRate:24e3,channels:1}}catch(n){const i=n instanceof Error?n.message:"Failed to synthesize speech";throw this.handleError(i),new Error(i)}}clearConversationHistory(){this.conversationHistory=[],this.emit("conversationCleared",{timestamp:new Date().toISOString()})}getConversationHistory(){return[...this.conversationHistory]}}class hs extends dd{service=null;currentVoice;sessionId;constructor(e){super(e),this.sessionId=this.generateSessionId(),this.currentVoice=e.voice||"alloy"}static getDefaultCapabilities(){return{voiceConversation:!0,textChat:!0,textToSpeech:!0,speechToText:!0,streaming:!0,tools:!0}}async initialize(e){this.validateConfig(e),this._config=e,this._capabilities=e.capabilities||hs.getDefaultCapabilities(),this.service=new vr({sessionId:this.sessionId,onConnected:()=>{this.updateConnectionState("connected"),this.emit("connected",{provider:"openai-realtime"})},onDisconnected:()=>{this.updateConnectionState("disconnected"),this.emit("disconnected",{provider:"openai-realtime"})},onError:n=>{console.error("OpenAI Realtime Service error:",n),this.handleError(n?.message||"OpenAI connection error")},onTranscript:(n,i)=>{if(i){const r=this.createMessage("assistant",n);this.emit("message",r)}else{const r=this.createMessage("user",n);this.emit("message",r),this.emit("transcript",n)}},onAudioResponse:n=>{const i={data:btoa(String.fromCharCode(...new Uint8Array(n.buffer))),format:"pcm",sampleRate:24e3,channels:1};this.emit("audio",i)},onToolCall:(n,i)=>{console.log("OpenAI tool called:",n,i),this.emit("toolCall",{name:n,arguments:i})},onToolResult:(n,i)=>{console.log("OpenAI tool result:",n,i),this.emit("toolResult",{name:n,result:i})}}),this._isInitialized=!0,this.emit("initialized",{provider:"openai-realtime"})}async connect(){if(!(this._connectionState==="connected"||this._connectionState==="connecting")){this.updateConnectionState("connecting");try{if(!this.service)throw new Error("OpenAI service not initialized");await this.service.connect()}catch(e){this.handleError(e instanceof Error?e.message:"Failed to connect")}}}async disconnect(){this.service&&await this.service.disconnect()}async startConversation(){this._connectionState!=="connected"&&await this.connect(),this.emit("conversationStarted",{timestamp:new Date().toISOString()})}async stopConversation(){this.emit("conversationStopped",{timestamp:new Date().toISOString()}),await this.disconnect()}async sendAudio(e){if(this._connectionState!=="connected"||!this.service)throw new Error("Not connected to OpenAI Realtime");try{const n=atob(e.data),i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);const r=new Int16Array(i.buffer);await this.service.sendAudioData(r)}catch(n){throw console.error("Failed to send audio:",n),new Error("Failed to send audio data")}}async sendMessage(e){if(this._connectionState!=="connected"||!this.service)throw new Error("Not connected to OpenAI Realtime");this.service.sendTextMessage(e),this.emit("message",this.createMessage("user",e))}async setVoice(e){this.currentVoice=e,console.log("Voice set to:",e,"(requires reconnection to take effect)")}async getAvailableVoices(){return[{id:"alloy",name:"Alloy"},{id:"echo",name:"Echo"},{id:"fable",name:"Fable"},{id:"onyx",name:"Onyx"},{id:"nova",name:"Nova"},{id:"shimmer",name:"Shimmer"}]}async createResponse(){this.service&&this.service.createResponse()}async interruptResponse(){this.service&&this.service.interruptResponse()}getConversationHistory(){return this.service?.getConversationHistory()||[]}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}class Xi{static instance;providerRegistry=new Map;providerConfigs=new Map;constructor(){this.registerDefaultProviders()}static getInstance(){return Xi.instance||(Xi.instance=new Xi),Xi.instance}registerDefaultProviders(){this.registerProvider("elevenlabs",cs),this.registerProvider("openai",us),this.registerProvider("openai-realtime",hs),this.registerProviderConfig({type:"elevenlabs",name:"ElevenLabs Voice AI",capabilities:cs.getDefaultCapabilities(),settings:{audioFormat:"pcm",sampleRate:16e3,channels:1}}),this.registerProviderConfig({type:"openai",name:"OpenAI GPT",capabilities:us.getDefaultCapabilities(),settings:{temperature:.7,maxTokens:1e3}}),this.registerProviderConfig({type:"openai-realtime",name:"OpenAI Realtime Voice",capabilities:hs.getDefaultCapabilities(),settings:{audioFormat:"pcm",sampleRate:24e3,channels:1,voice:"alloy"}})}registerProvider(e,n){this.providerRegistry.set(e,n)}registerProviderConfig(e){this.providerConfigs.set(e.type,e)}async createProvider(e){const n=this.providerRegistry.get(e.type);if(!n)throw new Error(`Provider type '${e.type}' is not registered`);const i=this.providerConfigs.get(e.type),r=i?this.mergeConfigs(i,e):e;try{const s=new n(r);return await s.initialize(r),s}catch(s){const o=s instanceof Error?s.message:"Failed to create provider";throw new Error(`Failed to create ${e.type} provider: ${o}`)}}getSupportedProviders(){return Array.from(this.providerConfigs.values())}isProviderSupported(e){return this.providerRegistry.has(e)}getProviderCapabilities(e){return this.providerConfigs.get(e)?.capabilities||null}createElevenLabsConfig(e,n,i){return{type:"elevenlabs",name:"ElevenLabs Voice AI",apiKey:e,agentId:n,apiUrl:i||window.location.origin,capabilities:cs.getDefaultCapabilities(),settings:{audioFormat:"pcm",sampleRate:16e3,channels:1}}}createOpenAIConfig(e,n,i){return{type:"openai",name:"OpenAI GPT",apiKey:e,model:n||"gpt-4",voice:i||"alloy",capabilities:us.getDefaultCapabilities(),settings:{temperature:.7,maxTokens:1e3,streaming:!0}}}createOpenAIRealtimeConfig(e,n,i){return{type:"openai-realtime",name:"OpenAI Realtime Voice",apiUrl:e||window.location.origin,model:n||"gpt-realtime-2025-08-28",voice:i||"alloy",capabilities:hs.getDefaultCapabilities(),settings:{audioFormat:"pcm",sampleRate:24e3,channels:1,turnDetection:"server_vad"}}}createClaudeConfig(e,n){return{type:"claude",name:"Anthropic Claude",apiKey:e,model:n||"claude-3-sonnet",capabilities:{voiceConversation:!1,textChat:!0,textToSpeech:!1,speechToText:!1,streaming:!0,tools:!0},settings:{temperature:.7,maxTokens:4e3}}}validateConfig(e){const n=[];switch(e.type?this.isProviderSupported(e.type)||n.push(`Provider type '${e.type}' is not supported`):n.push("Provider type is required"),e.name||n.push("Provider name is required"),e.capabilities||n.push("Provider capabilities are required"),e.type){case"elevenlabs":e.agentId||n.push("ElevenLabs agent ID is required");break;case"openai":e.apiKey||n.push("OpenAI API key is required");break;case"openai-realtime":e.apiUrl||n.push("OpenAI Realtime API URL is required");break;case"claude":e.apiKey||n.push("Claude API key is required");break}return{valid:n.length===0,errors:n}}mergeConfigs(e,n){return{...e,...n,capabilities:{...e.capabilities,...n.capabilities},settings:{...e.settings,...n.settings}}}getRecommendedProvider(e){return this.getSupportedProviders().filter(i=>{const r=i.capabilities;return!(e.voiceRequired&&!r.voiceConversation||e.streamingRequired&&!r.streaming||e.toolsRequired&&!r.tools)})}compareProviders(e,n){const i=this.providerConfigs.get(e)||null,r=this.providerConfigs.get(n)||null,s={voiceConversation:[i?.capabilities.voiceConversation||!1,r?.capabilities.voiceConversation||!1],textChat:[i?.capabilities.textChat||!1,r?.capabilities.textChat||!1],textToSpeech:[i?.capabilities.textToSpeech||!1,r?.capabilities.textToSpeech||!1],speechToText:[i?.capabilities.speechToText||!1,r?.capabilities.speechToText||!1],streaming:[i?.capabilities.streaming||!1,r?.capabilities.streaming||!1],tools:[i?.capabilities.tools||!1,r?.capabilities.tools||!1]};return{provider1:i,provider2:r,comparison:s}}}const Rn=Xi.getInstance();class Ji{static instance;currentProvider=null;eventHandlers={};availableProviders=[];isInitialized=!1;constructor(){this.loadAvailableProviders()}static getInstance(){return Ji.instance||(Ji.instance=new Ji),Ji.instance}async initialize(e){if(!this.isInitialized)try{e&&await this.switchProvider(e),this.isInitialized=!0}catch(n){throw console.error("Failed to initialize provider manager:",n),n}}getCurrentProvider(){return this.currentProvider}getCurrentProviderAs(){return this.currentProvider}async switchProvider(e){const n=Rn.validateConfig(e);if(!n.valid)throw new Error(`Invalid provider config: ${n.errors.join(", ")}`);this.currentProvider&&await this.disconnectCurrentProvider();try{const i=await Rn.createProvider(e);this.setupProviderEvents(i),await i.connect(),this.currentProvider=i,console.log(`Switched to provider: ${e.type} (${e.name})`),this.emitEvent("providerSwitched",{previous:this.currentProvider?.config||null,current:e,timestamp:new Date().toISOString()})}catch(i){throw console.error(`Failed to switch to provider ${e.type}:`,i),i}}getAvailableProviders(){return[...this.availableProviders]}registerProvider(e){const n=this.availableProviders.findIndex(i=>i.type===e.type);n>=0?this.availableProviders[n]=e:this.availableProviders.push(e)}setEventHandlers(e){this.eventHandlers=e}updateEventHandlers(e){this.eventHandlers={...this.eventHandlers,...e}}async sendMessage(e,n){if(!this.currentProvider)throw new Error("No active provider");const i=this.currentProvider;if(i.sendMessage&&this.hasCapability("textChat"))return await i.sendMessage(e,n);const r=this.currentProvider;if(r.sendMessage&&this.hasCapability("voiceConversation")){await r.sendMessage(e);return}throw new Error("Current provider does not support messaging")}async*streamMessage(e,n){if(!this.currentProvider)throw new Error("No active provider");const i=this.currentProvider;if(i.streamMessage&&this.hasCapability("streaming")){yield*i.streamMessage(e,n);return}throw new Error("Current provider does not support streaming")}async startVoiceConversation(){if(!this.currentProvider)throw new Error("No active provider");if(!this.hasCapability("voiceConversation"))throw new Error("Current provider does not support voice conversation");await this.currentProvider.startConversation()}async stopVoiceConversation(){if(!this.currentProvider||!this.hasCapability("voiceConversation"))return;await this.currentProvider.stopConversation()}async sendAudio(e){if(!this.currentProvider)throw new Error("No active provider");if(!this.hasCapability("speechToText"))throw new Error("Current provider does not support speech-to-text");await this.currentProvider.sendAudio(e)}hasCapability(e){return this.currentProvider&&this.currentProvider.capabilities[e]||!1}getProviderCapabilities(){return this.currentProvider?.capabilities||null}async connect(){this.currentProvider&&await this.currentProvider.connect()}async disconnect(){this.currentProvider&&await this.currentProvider.disconnect()}getConnectionState(){return this.currentProvider?.connectionState||null}getCurrentProviderInfo(){return this.currentProvider?typeof this.currentProvider.getProviderInfo=="function"?this.currentProvider.getProviderInfo():{type:this.currentProvider.config.type,name:this.currentProvider.config.name,capabilities:this.currentProvider.capabilities,connectionState:this.currentProvider.connectionState}:null}async switchToElevenLabs(e,n){const i=Rn.createElevenLabsConfig("",e,n);await this.switchProvider(i)}async switchToOpenAI(e,n){const i=Rn.createOpenAIConfig(e,n);await this.switchProvider(i)}async switchToOpenAIRealtime(e,n){const i=Rn.createOpenAIRealtimeConfig(void 0,e,n);await this.switchProvider(i)}async switchToClaude(e,n){const i=Rn.createClaudeConfig(e,n);await this.switchProvider(i)}getRecommendedProvider(e){return Rn.getRecommendedProvider(e)}async destroy(){await this.disconnectCurrentProvider(),this.eventHandlers={},this.availableProviders=[],this.isInitialized=!1}async disconnectCurrentProvider(){if(this.currentProvider){try{await this.currentProvider.destroy()}catch(e){console.error("Error disconnecting provider:",e)}this.currentProvider=null}}setupProviderEvents(e){e.on("message",n=>{this.emitEvent("message",n)}),e.on("audio",n=>{this.emitEvent("audio",n)}),e.on("transcript",n=>{this.emitEvent("transcript",n)}),e.on("connection",n=>{this.emitEvent("connectionChange",n.state)}),e.on("error",n=>{this.emitEvent("error",n.error)})}emitEvent(e,n){switch(e){case"message":this.eventHandlers.onMessage?.(n);break;case"audio":this.eventHandlers.onAudio?.(n);break;case"transcript":this.eventHandlers.onTranscript?.(n);break;case"connectionChange":this.eventHandlers.onConnectionChange?.(n);break;case"error":this.eventHandlers.onError?.(n);break}}loadAvailableProviders(){this.availableProviders=Rn.getSupportedProviders()}}const De=Ji.getInstance();class Mn{static instance;config;currentEnvironment;constructor(){this.currentEnvironment=this.detectEnvironment(),this.config=this.loadDefaultConfig()}static getInstance(){return Mn.instance||(Mn.instance=new Mn),Mn.instance}detectEnvironment(){if(typeof window<"u"){const e=window.location.hostname;if(e==="localhost"||e==="127.0.0.1"||e.includes("dev"))return"development";if(e.includes("test")||e.includes("staging"))return"testing"}return"production"}loadDefaultConfig(){return{defaultProvider:"elevenlabs",providers:{elevenlabs:{development:{type:"elevenlabs",name:"ElevenLabs Voice AI (Dev)",agentId:"agent_4901k2tkkq54f4mvgpndm3pgzm7g",apiUrl:Bt(),capabilities:{voiceConversation:!0,textChat:!0,textToSpeech:!0,speechToText:!0,streaming:!0,tools:!0},settings:{audioFormat:"pcm",sampleRate:16e3,channels:1}},production:{type:"elevenlabs",name:"ElevenLabs Voice AI",agentId:"agent_4901k2tkkq54f4mvgpndm3pgzm7g",apiUrl:"https://gvses-market-insights.fly.dev",capabilities:{voiceConversation:!0,textChat:!0,textToSpeech:!0,speechToText:!0,streaming:!0,tools:!0},settings:{audioFormat:"pcm",sampleRate:16e3,channels:1}}},openai:{development:{type:"openai",name:"OpenAI GPT (Dev)",apiKey:"",model:"gpt-4",voice:"alloy",apiUrl:"https://api.openai.com/v1",capabilities:{voiceConversation:!0,textChat:!0,textToSpeech:!0,speechToText:!0,streaming:!0,tools:!0},settings:{temperature:.7,maxTokens:1e3}},production:{type:"openai",name:"OpenAI GPT",apiKey:"",model:"gpt-4",voice:"alloy",apiUrl:"https://api.openai.com/v1",capabilities:{voiceConversation:!0,textChat:!0,textToSpeech:!0,speechToText:!0,streaming:!0,tools:!0},settings:{temperature:.5,maxTokens:1e3}}},"openai-realtime":{development:{type:"openai-realtime",name:"OpenAI Realtime Voice (Dev)",apiUrl:"ws://localhost:3004",model:"gpt-realtime-2025-08-28",voice:"alloy",capabilities:{voiceConversation:!0,textChat:!0,textToSpeech:!0,speechToText:!0,streaming:!0,tools:!0},settings:{audioFormat:"pcm",sampleRate:24e3,channels:1,turnDetection:"server_vad"}},production:{type:"openai-realtime",name:"OpenAI Realtime Voice",apiUrl:"ws://localhost:3004",model:"gpt-realtime-2025-08-28",voice:"alloy",capabilities:{voiceConversation:!0,textChat:!0,textToSpeech:!0,speechToText:!0,streaming:!0,tools:!0},settings:{audioFormat:"pcm",sampleRate:24e3,channels:1,turnDetection:"server_vad"}}},claude:{development:{type:"claude",name:"Anthropic Claude (Dev)",apiKey:"",model:"claude-3-sonnet",apiUrl:"https://api.anthropic.com",capabilities:{voiceConversation:!1,textChat:!0,textToSpeech:!1,speechToText:!1,streaming:!0,tools:!0},settings:{temperature:.7,maxTokens:4e3}},production:{type:"claude",name:"Anthropic Claude",apiKey:"",model:"claude-3-sonnet",apiUrl:"https://api.anthropic.com",capabilities:{voiceConversation:!1,textChat:!0,textToSpeech:!1,speechToText:!1,streaming:!0,tools:!0},settings:{temperature:.5,maxTokens:4e3}}}},features:{allowProviderSwitching:!0,showProviderSelector:this.currentEnvironment==="development",enableVoiceByDefault:!0,fallbackProvider:"claude"}}}getConfig(){return this.config}getProviderConfig(e){const n=this.config.providers[e];return n?this.isEnvironmentConfig(n)?n[this.currentEnvironment]||n.development:n:null}getDefaultProviderConfig(){return this.getProviderConfig(this.config.defaultProvider)}getAllProviderConfigs(){const e={};for(const[n,i]of Object.entries(this.config.providers)){const r=this.getProviderConfig(n);r&&(e[n]=r)}return e}getAvailableProviders(){return Object.keys(this.config.providers).map(e=>{const n=this.getProviderConfig(e),i=this.isProviderAvailable(n);return{type:e,name:n?.name||e,available:i}})}updateConfig(e){this.config={...this.config,...e}}updateProviderConfig(e,n){this.config.providers[e]=n}setDefaultProvider(e){if(this.config.providers[e])this.config.defaultProvider=e;else throw new Error(`Provider type '${e}' is not configured`)}isProviderSwitchingAllowed(){return this.config.features.allowProviderSwitching}shouldShowProviderSelector(){return this.config.features.showProviderSelector}isVoiceEnabledByDefault(){return this.config.features.enableVoiceByDefault}getFallbackProvider(){return this.config.features.fallbackProvider}isProviderAvailable(e){if(!e)return!1;switch(e.type){case"elevenlabs":return!!e.agentId;case"openai":case"claude":return!!e.apiKey;case"openai-realtime":return!0;default:return!0}}getFirstAvailableProvider(){const e=this.getAvailableProviders().filter(i=>i.available);if(e.length===0)return null;const n=e[0];return this.getProviderConfig(n.type)}getCurrentEnvironment(){return this.currentEnvironment}setEnvironment(e){this.currentEnvironment=e}static createDevelopmentConfig(){const n=new Mn().getConfig();return{...n,features:{...n.features,allowProviderSwitching:!0,showProviderSelector:!0,enableVoiceByDefault:!1}}}static createProductionConfig(){const n=new Mn().getConfig();return{...n,features:{...n.features,allowProviderSwitching:!1,showProviderSelector:!1,enableVoiceByDefault:!0}}}isEnvironmentConfig(e){return e.development!==void 0||e.production!==void 0}validateConfiguration(){const e=[];this.config.defaultProvider?this.config.providers[this.config.defaultProvider]||e.push(`Default provider '${this.config.defaultProvider}' is not configured`):e.push("Default provider is not set");const n=this.getDefaultProviderConfig();return n?this.isProviderAvailable(n)||e.push("Default provider is not available (missing credentials)"):e.push("Default provider configuration is invalid"),{valid:e.length===0,errors:e}}exportConfiguration(){return JSON.stringify(this.config,null,2)}importConfiguration(e){try{const n=JSON.parse(e);this.config={...this.loadDefaultConfig(),...n}}catch{throw new Error("Invalid configuration JSON")}}}const Li=Mn.getInstance();function i0(t={}){const{autoConnect:e=!0,defaultProvider:n,eventHandlers:i={}}=t,[r,s]=k.useState(null),[o,l]=k.useState(null),[a,c]=k.useState(null),[h,u]=k.useState([]),[d,f]=k.useState(!1),p=k.useRef(i);p.current=i,k.useEffect(()=>{(async()=>{try{De.setEventHandlers({onMessage:N=>{u(U=>[...U,N]),p.current.onMessage?.(N)},onAudio:N=>{p.current.onAudio?.(N)},onTranscript:N=>{p.current.onTranscript?.(N)},onConnectionChange:N=>{l(N),p.current.onConnectionChange?.(N)},onError:N=>{c(N),p.current.onError?.(N)}});let C=null;n&&(C=Li.getProviderConfig(n)),C||(C=Li.getDefaultProviderConfig()),C||(C=Li.getFirstAvailableProvider()),C&&e&&(await De.initialize(C),s(De.getCurrentProvider())),f(!0)}catch(C){const N=C instanceof Error?C.message:"Failed to initialize provider";c(N),console.error("Provider initialization error:",C)}})()},[n,e]);const g=k.useCallback(async z=>{c(null);try{await De.switchProvider(z),s(De.getCurrentProvider())}catch(C){const N=C instanceof Error?C.message:"Failed to switch provider";throw c(N),C}},[]),S=k.useCallback(async(z,C)=>{await De.switchToElevenLabs(z,C),s(De.getCurrentProvider())},[]),m=k.useCallback(async(z,C)=>{await De.switchToOpenAI(z,C),s(De.getCurrentProvider())},[]),y=k.useCallback(async(z,C)=>{await De.switchToOpenAIRealtime(z,C),s(De.getCurrentProvider())},[]),w=k.useCallback(async(z,C)=>{await De.switchToClaude(z,C),s(De.getCurrentProvider())},[]),b=k.useCallback(async()=>{c(null);try{await De.connect()}catch(z){const C=z instanceof Error?z.message:"Failed to connect";throw c(C),z}},[]),A=k.useCallback(async()=>{try{await De.disconnect()}catch(z){console.error("Disconnect error:",z)}},[]),E=k.useCallback(async(z,C)=>{c(null);try{await De.sendMessage(z,C)}catch(N){const U=N instanceof Error?N.message:"Failed to send message";throw c(U),N}},[]),P=k.useCallback(async function*(z,C){c(null);try{yield*De.streamMessage(z,C)}catch(N){const U=N instanceof Error?N.message:"Failed to stream message";throw c(U),N}},[]),R=k.useCallback(async()=>{c(null);try{await De.startVoiceConversation()}catch(z){const C=z instanceof Error?z.message:"Failed to start voice conversation";throw c(C),z}},[]),D=k.useCallback(async()=>{try{await De.stopVoiceConversation()}catch(z){console.error("Stop voice conversation error:",z)}},[]),_=k.useCallback(async z=>{c(null);try{await De.sendAudio(z)}catch(C){const N=C instanceof Error?C.message:"Failed to send audio";throw c(N),C}},[]),j=k.useCallback(()=>{u([])},[]),B=o==="connected",J=o==="connecting",Z=Li.getAvailableProviders(),X=De.getProviderCapabilities(),te=De.getCurrentProviderInfo(),se=Li.isProviderSwitchingAllowed(),$=Li.shouldShowProviderSelector();return{currentProvider:r,connectionState:o,isConnected:B,isConnecting:J,error:a,switchProvider:g,switchToElevenLabs:S,switchToOpenAI:m,switchToOpenAIRealtime:y,switchToClaude:w,disconnect:A,connect:b,sendMessage:E,streamMessage:P,startVoiceConversation:R,stopVoiceConversation:D,sendAudio:_,availableProviders:Z,providerCapabilities:X,providerInfo:te,allowProviderSwitching:se,showProviderSelector:$,messages:h,clearMessages:j}}function EI({className:t="",showCapabilities:e=!0,compact:n=!1}){const{currentProvider:i,availableProviders:r,switchToElevenLabs:s,switchToOpenAI:o,switchToOpenAIRealtime:l,switchToClaude:a,isConnected:c,isConnecting:h,error:u,providerCapabilities:d,allowProviderSwitching:f}=i0(),[p,g]=k.useState(null),[S,m]=k.useState({}),[y,w]=k.useState(!n);if(!f)return null;const b=async R=>{try{switch(R){case"elevenlabs":await s("agent_4901k2tkkq54f4mvgpndm3pgzm7g");break;case"openai":if(!S.openai){g("openai");return}await o(S.openai);break;case"openai-realtime":await l();break;case"claude":if(!S.claude){g("claude");return}await a(S.claude);break}}catch(D){console.error("Failed to switch provider:",D)}},A=async R=>{const D=S[R];if(D)try{switch(R){case"openai":await o(D);break;case"claude":await a(D);break}g(null)}catch(_){console.error("Failed to set up provider:",_)}},E=()=>h?"":c?"":u?"":"",P=R=>{if(!d)return"";switch(R){case"voiceConversation":return d.voiceConversation?"":"";case"textChat":return d.textChat?"":"";case"textToSpeech":return d.textToSpeech?"":"";case"speechToText":return d.speechToText?"":"";case"streaming":return d.streaming?"":"";case"tools":return d.tools?"":"";default:return""}};return n&&!y?v.jsx("div",{className:`inline-flex items-center gap-2 ${t}`,children:v.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 px-3 py-2 text-sm bg-white border rounded-lg hover:bg-gray-50",children:[v.jsx("span",{children:E()}),v.jsx("span",{children:i?.config.name||"No Provider"}),v.jsx("span",{children:""})]})}):v.jsxs("div",{className:`bg-white border rounded-lg p-4 ${t}`,children:[v.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"AI Provider"}),n&&v.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),v.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[v.jsx("div",{className:"flex items-center justify-between",children:v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{children:E()}),v.jsx("span",{className:"font-medium",children:i?.config.name||"No Provider"})]}),v.jsx("p",{className:"text-xs text-gray-600 mt-1",children:i?.config.type||"Not connected"})]})}),e&&d&&v.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[v.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Capabilities:"}),v.jsxs("div",{className:"flex flex-wrap gap-2",children:[v.jsx("span",{title:"Voice Conversation",children:P("voiceConversation")}),v.jsx("span",{title:"Text Chat",children:P("textChat")}),v.jsx("span",{title:"Text-to-Speech",children:P("textToSpeech")}),v.jsx("span",{title:"Speech-to-Text",children:P("speechToText")}),v.jsx("span",{title:"Streaming",children:P("streaming")}),v.jsx("span",{title:"Tools",children:P("tools")})]})]})]}),u&&v.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:v.jsx("p",{className:"text-red-600 text-sm",children:u})}),p&&v.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[v.jsxs("p",{className:"text-blue-800 text-sm mb-3",children:["Enter your ",p.toUpperCase()," API key:"]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"password",placeholder:"API Key",value:S[p]||"",onChange:R=>m(D=>({...D,[p]:R.target.value})),className:"flex-1 px-3 py-2 text-sm border rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),v.jsx("button",{onClick:()=>A(p),disabled:!S[p],className:"px-3 py-2 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-300",children:"Connect"}),v.jsx("button",{onClick:()=>g(null),className:"px-3 py-2 text-sm bg-gray-600 text-white rounded hover:bg-gray-700",children:"Cancel"})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Available Providers:"}),r.map(R=>v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsxs("div",{className:"w-6 h-6 flex items-center justify-center",children:[R.type==="elevenlabs"&&"",R.type==="openai"&&"",R.type==="openai-realtime"&&"",R.type==="claude"&&""]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium",children:R.name}),v.jsx("p",{className:"text-xs text-gray-500 capitalize",children:R.type})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[!R.available&&R.type!=="openai-realtime"&&v.jsx("span",{className:"text-xs text-orange-600",children:"API Key Required"}),v.jsx("button",{onClick:()=>b(R.type),disabled:h||i?.config.type===R.type,className:`px-3 py-1 text-xs rounded ${i?.config.type===R.type?"bg-green-100 text-green-700":R.available||R.type==="openai-realtime"?"bg-blue-100 text-blue-700 hover:bg-blue-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:i?.config.type===R.type?"Active":"Switch"})]})]},R.type))]}),v.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:()=>window.open("https://elevenlabs.io/app/conversational-ai","_blank"),className:"flex-1 px-3 py-2 text-xs bg-purple-100 text-purple-700 rounded hover:bg-purple-200",children:"Get ElevenLabs Agent"}),v.jsx("button",{onClick:()=>window.open("https://platform.openai.com/api-keys","_blank"),className:"flex-1 px-3 py-2 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200",children:"Get OpenAI Key"})]})})]})}function TI(){const[t,e]=k.useState(""),[n,i]=k.useState(""),{currentProvider:r,isConnected:s,isConnecting:o,error:l,messages:a,sendMessage:c,streamMessage:h,startVoiceConversation:u,stopVoiceConversation:d,providerCapabilities:f,providerInfo:p,clearMessages:g}=i0({autoConnect:!0,eventHandlers:{onMessage:b=>{console.log("New message:",b)},onConnectionChange:b=>{console.log("Connection state changed:",b)},onError:b=>{console.error("Provider error:",b)}}}),S=async()=>{if(t.trim())try{await c(t),e("")}catch(b){console.error("Error sending message:",b)}},m=async()=>{if(t.trim()){i("");try{for await(const b of h(t))i(A=>A+b);e("")}catch(b){console.error("Error streaming message:",b)}}},y=async()=>{try{await u(),console.log("Voice conversation started")}catch(b){console.error("Error starting voice:",b)}},w=async()=>{try{await d(),console.log("Voice conversation stopped")}catch(b){console.error("Error stopping voice:",b)}};return v.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[v.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:" Provider System Test Interface"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Provider Selection"}),v.jsx(EI,{showCapabilities:!0})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsx("h2",{className:"text-lg font-semibold",children:"Provider Status"}),v.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-sm text-gray-600",children:"Current Provider:"}),v.jsx("span",{className:"text-sm font-medium",children:r?.config.name||"None"})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-sm text-gray-600",children:"Type:"}),v.jsx("span",{className:"text-sm font-medium",children:r?.config.type||"N/A"})]}),v.jsxs("div",{className:"flex justify-between",children:[v.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),v.jsx("span",{className:`text-sm font-medium ${l?"text-red-600":o?"text-yellow-600":s?"text-green-600":"text-gray-600"}`,children:l?"Error":o?"Connecting...":s?"Connected":"Disconnected"})]}),l&&v.jsx("div",{className:"pt-2 border-t border-gray-200",children:v.jsx("p",{className:"text-sm text-red-600",children:l})})]}),f&&v.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[v.jsx("h3",{className:"text-sm font-medium mb-2",children:"Capabilities"}),v.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[v.jsxs("div",{className:`flex items-center gap-2 ${f.voiceConversation?"text-green-600":"text-gray-400"}`,children:[v.jsx("span",{children:f.voiceConversation?"":""}),"Voice"]}),v.jsxs("div",{className:`flex items-center gap-2 ${f.textChat?"text-green-600":"text-gray-400"}`,children:[v.jsx("span",{children:f.textChat?"":""}),"Chat"]}),v.jsxs("div",{className:`flex items-center gap-2 ${f.streaming?"text-green-600":"text-gray-400"}`,children:[v.jsx("span",{children:f.streaming?"":""}),"Streaming"]}),v.jsxs("div",{className:`flex items-center gap-2 ${f.tools?"text-green-600":"text-gray-400"}`,children:[v.jsx("span",{children:f.tools?"":""}),"Tools"]})]})]})]})]})]}),v.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[v.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Test Controls"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Test Message"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"text",value:t,onChange:b=>e(b.target.value),onKeyPress:b=>b.key==="Enter"&&S(),placeholder:"Enter a test message...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!s}),v.jsx("button",{onClick:S,disabled:!t.trim()||!s||!f?.textChat,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Send"}),v.jsx("button",{onClick:m,disabled:!t.trim()||!s||!f?.streaming,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Stream"})]})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:y,disabled:!s||!f?.voiceConversation,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Start Voice"}),v.jsx("button",{onClick:w,disabled:!s||!f?.voiceConversation,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Stop Voice"}),v.jsx("button",{onClick:g,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Clear Messages"})]})]}),n&&v.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[v.jsx("h3",{className:"text-sm font-medium text-green-800 mb-2",children:"Streaming Response:"}),v.jsx("div",{className:"text-sm text-green-700 whitespace-pre-wrap",children:n})]})]}),v.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("h2",{className:"text-lg font-semibold",children:"Messages"}),v.jsxs("span",{className:"text-sm text-gray-500",children:[a.length," messages"]})]}),v.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:a.length===0?v.jsx("p",{className:"text-gray-500 text-center py-8",children:"No messages yet. Send a test message to see provider responses!"}):a.map(b=>v.jsx("div",{className:`flex ${b.role==="user"?"justify-end":"justify-start"}`,children:v.jsxs("div",{className:`max-w-2xl px-4 py-2 rounded-lg ${b.role==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[v.jsx("div",{className:"text-sm mb-1",children:v.jsxs("strong",{children:[b.role==="user"?"You":r?.config.name,":"]})}),v.jsx("div",{className:"text-sm",children:b.role==="assistant"?v.jsx(n0,{content:b.content}):b.content}),v.jsx("div",{className:`text-xs mt-1 ${b.role==="user"?"text-blue-200":"text-gray-500"}`,children:new Date(b.timestamp).toLocaleTimeString()})]})},b.id))})]}),v.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[v.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Debug Information"}),v.jsx("pre",{className:"text-xs bg-gray-50 p-4 rounded overflow-auto max-h-64",children:JSON.stringify({providerInfo:p,providerCapabilities:f,messagesCount:a.length,isConnected:s,isConnecting:o,error:l},null,2)})]})]})}function _I(){return window.location.search.includes("provider-test")?v.jsx(TI,{}):v.jsx(jk,{children:v.jsx(kI,{})})}kc.createRoot(document.getElementById("root")).render(v.jsx(_I,{}));export{Bu as g};
